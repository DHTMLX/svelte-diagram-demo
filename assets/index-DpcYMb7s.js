var wn=Object.defineProperty;var En=(lt,ht,mt)=>ht in lt?wn(lt,ht,{enumerable:!0,configurable:!0,writable:!0,value:mt}):lt[ht]=mt;var De=(lt,ht,mt)=>En(lt,typeof ht!="symbol"?ht+"":ht,mt);(function(){const ht=document.createElement("link").relList;if(ht&&ht.supports&&ht.supports("modulepreload"))return;for(const W of document.querySelectorAll('link[rel="modulepreload"]'))Et(W);new MutationObserver(W=>{for(const _ of W)if(_.type==="childList")for(const y of _.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&Et(y)}).observe(document,{childList:!0,subtree:!0});function mt(W){const _={};return W.integrity&&(_.integrity=W.integrity),W.referrerPolicy&&(_.referrerPolicy=W.referrerPolicy),W.crossOrigin==="use-credentials"?_.credentials="include":W.crossOrigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function Et(W){if(W.ep)return;W.ep=!0;const _=mt(W);fetch(W.href,_)}})();function te(){}function Ye(lt){return lt()}function Ge(){return Object.create(null)}function we(lt){lt.forEach(Ye)}function Xe(lt){return typeof lt=="function"}function Ke(lt,ht){return lt!=lt?ht==ht:lt!==ht||lt&&typeof lt=="object"||typeof lt=="function"}function Cn(lt){return Object.keys(lt).length===0}function kn(lt,ht,mt){lt.insertBefore(ht,mt||null)}function Je(lt){lt.parentNode&&lt.parentNode.removeChild(lt)}function Sn(lt){return document.createElement(lt)}function In(lt){return Array.from(lt.childNodes)}function Ue(lt,ht,mt,Et){lt.style.setProperty(ht,mt,"")}let pe;function fe(lt){pe=lt}function On(){if(!pe)throw new Error("Function called outside component initialization");return pe}function Pn(lt){On().$$.on_mount.push(lt)}const ae=[],Te=[];let se=[];const qe=[],Dn=Promise.resolve();let He=!1;function Mn(){He||(He=!0,Dn.then(Ze))}function Ae(lt){se.push(lt)}const Me=new Set;let re=0;function Ze(){if(re!==0)return;const lt=pe;do{try{for(;re<ae.length;){const ht=ae[re];re++,fe(ht),Tn(ht.$$)}}catch(ht){throw ae.length=0,re=0,ht}for(fe(null),ae.length=0,re=0;Te.length;)Te.pop()();for(let ht=0;ht<se.length;ht+=1){const mt=se[ht];Me.has(mt)||(Me.add(mt),mt())}se.length=0}while(ae.length);for(;qe.length;)qe.pop()();He=!1,Me.clear(),fe(lt)}function Tn(lt){if(lt.fragment!==null){lt.update(),we(lt.before_update);const ht=lt.dirty;lt.dirty=[-1],lt.fragment&&lt.fragment.p(lt.ctx,ht),lt.after_update.forEach(Ae)}}function Hn(lt){const ht=[],mt=[];se.forEach(Et=>lt.indexOf(Et)===-1?ht.push(Et):mt.push(Et)),mt.forEach(Et=>Et()),se=ht}const xe=new Set;let An;function Qe(lt,ht){lt&&lt.i&&(xe.delete(lt),lt.i(ht))}function $n(lt,ht,mt,Et){if(lt&&lt.o){if(xe.has(lt))return;xe.add(lt),An.c.push(()=>{xe.delete(lt)}),lt.o(ht)}}function Vn(lt){lt&&lt.c()}function tn(lt,ht,mt){const{fragment:Et,after_update:W}=lt.$$;Et&&Et.m(ht,mt),Ae(()=>{const _=lt.$$.on_mount.map(Ye).filter(Xe);lt.$$.on_destroy?lt.$$.on_destroy.push(..._):we(_),lt.$$.on_mount=[]}),W.forEach(Ae)}function en(lt,ht){const mt=lt.$$;mt.fragment!==null&&(Hn(mt.after_update),we(mt.on_destroy),mt.fragment&&mt.fragment.d(ht),mt.on_destroy=mt.fragment=null,mt.ctx=[])}function jn(lt,ht){lt.$$.dirty[0]===-1&&(ae.push(lt),Mn(),lt.$$.dirty.fill(0)),lt.$$.dirty[ht/31|0]|=1<<ht%31}function nn(lt,ht,mt,Et,W,_,y=null,b=[-1]){const E=pe;fe(lt);const m=lt.$$={fragment:null,ctx:[],props:_,update:te,not_equal:W,bound:Ge(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(ht.context||(E?E.$$.context:[])),callbacks:Ge(),dirty:b,skip_bound:!1,root:ht.target||E.$$.root};y&&y(m.root);let v=!1;if(m.ctx=mt?mt(lt,ht.props||{},(f,d,...p)=>{const u=p.length?p[0]:d;return m.ctx&&W(m.ctx[f],m.ctx[f]=u)&&(!m.skip_bound&&m.bound[f]&&m.bound[f](u),v&&jn(lt,f)),d}):[],m.update(),v=!0,we(m.before_update),m.fragment=Et?Et(m.ctx):!1,ht.target){if(ht.hydrate){const f=In(ht.target);m.fragment&&m.fragment.l(f),f.forEach(Je)}else m.fragment&&m.fragment.c();ht.intro&&Qe(lt.$$.fragment),tn(lt,ht.target,ht.anchor),Ze()}fe(E)}class on{constructor(){De(this,"$$");De(this,"$$set")}$destroy(){en(this,1),this.$destroy=te}$on(ht,mt){if(!Xe(mt))return te;const Et=this.$$.callbacks[ht]||(this.$$.callbacks[ht]=[]);return Et.push(mt),()=>{const W=Et.indexOf(mt);W!==-1&&Et.splice(W,1)}}$set(ht){this.$$set&&!Cn(ht)&&(this.$$.skip_bound=!0,this.$$set(ht),this.$$.skip_bound=!1)}}const Fn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Fn);var rn={exports:{}};/*
@license

dhtmlxDiagram v.6.0.1 Evaluation

This software is covered by DHTMLX Evaluation License and purposed only for evaluation.
Contact sales@dhtmlx.com to get Commercial or Enterprise license.
Usage without proper license is prohibited.

(c) XB Software.

*/(function(lt,ht){if(window.dhx&&(window.dhx_legacy=dhx,delete window.dhx),function(W,_){lt.exports=_()}(window,function(){return function(W){var _={};function y(b){if(_[b])return _[b].exports;var E=_[b]={i:b,l:!1,exports:{}};return W[b].call(E.exports,E,E.exports,y),E.l=!0,E.exports}return y.m=W,y.c=_,y.d=function(b,E,m){y.o(b,E)||Object.defineProperty(b,E,{enumerable:!0,get:m})},y.r=function(b){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(b,"__esModule",{value:!0})},y.t=function(b,E){if(1&E&&(b=y(b)),8&E||4&E&&typeof b=="object"&&b&&b.__esModule)return b;var m=Object.create(null);if(y.r(m),Object.defineProperty(m,"default",{enumerable:!0,value:b}),2&E&&typeof b!="string")for(var v in b)y.d(m,v,(function(f){return b[f]}).bind(null,v));return m},y.n=function(b){var E=b&&b.__esModule?function(){return b.default}:function(){return b};return y.d(E,"a",E),E},y.o=function(b,E){return Object.prototype.hasOwnProperty.call(b,E)},y.p="/codebase/",y(y.s=114)}([function(W,_,y){(function(b){Object.defineProperty(_,"__esModule",{value:!0}),_.setTheme=_.awaitRedraw=_.resizeHandler=_.jsonToVDOM=_.xmlToJson=_.resizer=_.disableHelp=_.KEYED_LIST=_.inject=_.create=_.view=_.sv=_.el=void 0;var E=y(125),m=y(2);_.el=E.defineElement,_.sv=E.defineSvgElement,_.view=E.defineView,_.create=E.createView,_.inject=E.injectView,_.KEYED_LIST=E.KEYED_LIST;var v=["animate","animateMotion","animateTransform","circle","clipPath","color-profile","defs","desc","discard","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","foreignObject","g","hatch","hatchpath","image","line","linearGradient","marker","mask","mesh","meshgradient","meshpatch","meshrow","metadata","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","solidcolor","stop","style","svg","switch","symbol","text","textPath","title","tspan","unknown","use","view"];function f(d){var p=window.ResizeObserver,u=function(s){var l=s.el.offsetHeight,r=s.el.offsetWidth;d(r,l)};return p?(0,_.el)("div.dhx-resize-observer",{_hooks:{didInsert:function(s){new p(function(){return u(s)}).observe(s.el)}}}):(0,_.el)("iframe.dhx-resize-observer",{_hooks:{didInsert:function(s){s.el.contentWindow.onresize=function(){return u(s)},u(s)}}})}_.disableHelp=function(){E.DEVMODE.mutations=!1,E.DEVMODE.warnings=!1,E.DEVMODE.verbose=!1,E.DEVMODE.UNKEYED_INPUT=!1},_.resizer=f,_.xmlToJson=function d(p){var u={};if(p.nodeType===1){if(p.attributes.length>0){u["@attributes"]={};for(var s=0;s<p.attributes.length;s++){var l=p.attributes.item(s);u["@attributes"][l.nodeName]=l.nodeValue}}}else p.nodeType===3&&(u=p.nodeValue);if(p.hasChildNodes())for(var r=0;r<p.childNodes.length;r++){var a=p.childNodes.item(r),i=a.nodeName;if(u[i]===void 0)u[i]=d(a);else{if(u[i].push===void 0){var n=u[i];u[i]=[],u[i].push(n)}u[i].push(d(a))}}return u},_.jsonToVDOM=function d(p){var u,s,l=Object.keys(p)[0],r=p[l];Array.isArray(r["#text"])&&(r["#text"]=r["#text"].join("").trim());var a=typeof r["#text"]=="string"?[r["#text"]]:[];for(var i in r)if(r.hasOwnProperty(i)&&i!=="@attributes"&&i!=="#text")if(Array.isArray(r[i]))for(var n in r[i])r[i].hasOwnProperty(n)&&a.push(d(((u={})[i]=r[i][n],u)));else a.push(d(((s={})[i]=r[i],s)));return v.includes(l)?(0,_.sv)(l,r["@attributes"]?r["@attributes"]:{},a):(0,_.el)(l,r["@attributes"]?r["@attributes"]:{},a)},_.resizeHandler=function(d,p){return(0,_.create)({render:function(){return f(p)}}).mount(d)},_.awaitRedraw=function(){return new b(function(d){requestAnimationFrame(function(){d()})})},_.setTheme=function(d,p){d===void 0&&(d="light");var u="data-dhx-theme";p||document.querySelectorAll("[".concat(u,"]")).forEach(function(s){return s.removeAttribute(u)}),p=p||document.documentElement,(0,m.toNode)(p).setAttribute(u,d)}}).call(this,y(17))},function(W,_,y){(function(b){var E=this&&this.__assign||function(){return E=Object.assign||function(f){for(var d,p=1,u=arguments.length;p<u;p++)for(var s in d=arguments[p])Object.prototype.hasOwnProperty.call(d,s)&&(f[s]=d[s]);return f},E.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.blobToBase64=_.isMacintosh=_.getTextLines=_.getCloneObject=_.rgbToHex=_.isObject=_.getStringWidth=_.getMinArrayNumber=_.getMaxArrayNumber=_.isEmptyObj=_.isType=_.compare=_.debounce=_.downloadFile=_.isNumeric=_.range=_.isId=_.isDefined=_.wrapBox=_.unwrapBox=_.detectWidgetClick=_.singleOuterClick=_.isExistValue=_.findIndex=_.naturalSort=_.copy=_.extend=_.uid=void 0;var m=y(2),v=new Date().valueOf();_.uid=function(){return"u"+v++},_.extend=function f(d,p,u){if(u===void 0&&(u=!0),p)for(var s in p){var l=p[s],r=d[s];l===void 0?delete d[s]:!u||typeof r!="object"||r instanceof Date||r instanceof Array?d[s]=l:f(r,l)}return d},_.copy=function(f,d){var p={};for(var u in f)d&&u.startsWith("$")||(p[u]=f[u]);return p},_.naturalSort=function(f){return f.sort(function(d,p){return typeof d=="string"?d.localeCompare(p):d-p})},_.findIndex=function(f,d){for(var p=f.length,u=0;u<p;u++)if(d(f[u]))return u;return-1},_.isExistValue=function(f,d){var p=d.toString(),u=f.toString();return!(p.length>u.length)&&u.toLowerCase().includes(p.toLowerCase())},_.singleOuterClick=function(f){var d=function(p){f(p)&&document.removeEventListener("click",d)};document.addEventListener("click",d)},_.detectWidgetClick=function(f,d){var p=function(u){return d((0,m.locate)(u,"data-dhx-widget-id")===f)};return document.addEventListener("click",p),function(){return document.removeEventListener("click",p)}},_.unwrapBox=function(f){return Array.isArray(f)?f[0]:f},_.wrapBox=function(f){return Array.isArray(f)?f:[f]},_.isDefined=function(f){return f!=null},_.isId=function(f){return typeof f=="number"||typeof f=="string"&&f!==""},_.range=function(f,d){if(f>d)return[];for(var p=[];f<=d;)p.push(f++);return p},_.isNumeric=function(f){return!isNaN(f-parseFloat(f))},_.downloadFile=function(f,d,p){p===void 0&&(p="text/plain");var u=new Blob([f],{type:p});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(u,d);else{var s=document.createElement("a"),l=URL.createObjectURL(u);s.href=l,s.download=d,document.body.appendChild(s),s.click(),setTimeout(function(){document.body.removeChild(s),window.URL.revokeObjectURL(l)},0)}},_.debounce=function(f,d,p){var u;return function(){for(var s=this,l=[],r=0;r<arguments.length;r++)l[r]=arguments[r];var a=p&&!u;clearTimeout(u),u=setTimeout(function(){u=null,p||f.apply(s,l)},d),a&&f.apply(this,l)}},_.compare=function f(d,p){for(var u in d){if(d.hasOwnProperty(u)!==p.hasOwnProperty(u))return!1;switch(typeof d[u]){case"object":if(!f(d[u],p[u]))return!1;break;case"function":if(p[u]===void 0||u!=="compare"&&d[u].toString()!==p[u].toString())return!1;break;default:if(d[u]!==p[u])return!1}}for(var u in p)if(!d.hasOwnProperty(u))return!1;return!0},_.isType=function(f){return((Object.prototype.toString.call(f).match(/^\[object (\S+?)\]$/)||[])[1]||"undefined").toLowerCase()},_.isEmptyObj=function(f){for(var d in f)return!1;return!0},_.getMaxArrayNumber=function(f){if(f.length){for(var d=-1/0,p=0,u=f.length;p<u;p++)f[p]>d&&(d=f[p]);return d}},_.getMinArrayNumber=function(f){if(f.length){for(var d=1/0,p=0,u=f.length;p<u;p++)f[p]<d&&(d=f[p]);return d}},_.getStringWidth=function(f,d){d=E({font:"normal 14px Roboto",lineHeight:20},d);var p=document.createElement("canvas"),u=p.getContext("2d");d.font&&(u.font=d.font);var s=u.measureText(f).width;return(0,m.isIE)()||p.remove(),s},_.isObject=function(f){return f!==null&&typeof f=="object"&&!(f instanceof Date)},_.rgbToHex=function(f){if(f.substr(0,1)==="#")return f;if(f.substr(0,3)==="rgb"){var d=/(.*?)rgb[a]?\((\d+), *(\d+), *(\d+),* *([\d+.]*)\)/.exec(f),p=parseInt(d[2],10).toString(16).padStart(2,"0"),u=parseInt(d[3],10).toString(16).padStart(2,"0"),s=parseInt(d[4],10).toString(16).padStart(2,"0");return"#".concat(p).concat(u).concat(s)}},_.getCloneObject=function f(d){if(!d)return d;var p=Array.isArray(d)?[]:{};for(var u in d){var s=d[u];s instanceof Date?p[u]=new Date(s):p[u]=typeof s=="object"?f(s):s}return p},_.getTextLines=function(f,d,p){for(var u=d.split(" "),s="",l="",r=[],a=0;a<u.length;a++)l+="".concat(u[a]," "),f.measureText(l.trimEnd()).width>p&&a>0?(r.push(s),s="".concat(u[a]," "),l="".concat(u[a]," ")):s+="".concat(u[a]," "),a===u.length-1&&r.push(s);return r},_.isMacintosh=function(){return navigator.userAgent.indexOf("Mac")>-1},_.blobToBase64=function(f){return new b(function(d,p){var u=new FileReader;u.onloadend=function(){d(u.result)},u.readAsDataURL(f)})}}).call(this,y(17))},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(r){for(var a,i=1,n=arguments.length;i<n;i++)for(var e in a=arguments[i])Object.prototype.hasOwnProperty.call(a,e)&&(r[e]=a[e]);return r},b.apply(this,arguments)};function E(r,a,i){for(a===void 0&&(a="data-dhx-id"),i===void 0&&(i="target"),r instanceof Event&&(r=r[i]);r;){if(r.getAttribute&&r.getAttribute(a))return r;r=r.parentNode}}Object.defineProperty(_,"__esModule",{value:!0}),_.getPageLinksCss=_.getPageInlineCss=_.getLabelStyle=_.getStrSize=_.fitPosition=_.calculatePosition=_.getRealPosition=_.isFirefox=_.isSafari=_.isIE=_.getScrollbarHeight=_.getScrollbarWidth=_.getBox=_.locateNodeByClassName=_.locate=_.locateNode=_.eventHandler=_.toNode=void 0,_.toNode=function(r){var a;return typeof r=="string"?document.getElementById(r)||document.querySelector("[data-cell-id=".concat(r,"]"))||document.querySelector(r)||((a=document.querySelector("[data-dhx-root-id=".concat(r,"]")))===null||a===void 0?void 0:a.parentElement)||document.body:r||document.body},_.eventHandler=function(r,a,i){var n=Object.keys(a);return function(e){var t=r(e);if(t!==void 0){var o=e.target;t:for(;o;){var c=o.getAttribute&&o.getAttribute("class")||"";if(c.length){for(var h=c.split(" "),g=0;g<n.length;g++)if(h.includes(n[g])){if(a[n[g]](e,t)===!1||e.cancelBubble)return!1;break t}}o=o.parentNode}}return typeof i=="function"&&i(e),!0}},_.locateNode=E,_.locate=function(r,a){a===void 0&&(a="data-dhx-id");var i=E(r,a);return i?i.getAttribute(a):""},_.locateNodeByClassName=function(r,a){for(r instanceof Event&&(r=r.target);r;){if(a){if(r.classList&&r.classList.contains(a))return r}else if(r.getAttribute&&r.getAttribute("data-dhx-id"))return r;r=r.parentNode}},_.getBox=function(r){var a=r.getBoundingClientRect(),i=document.body,n=window.pageYOffset||i.scrollTop,e=window.pageXOffset||i.scrollLeft;return{top:a.top+n,left:a.left+e,right:i.offsetWidth-a.right,bottom:i.offsetHeight-a.bottom,width:a.right-a.left,height:a.bottom-a.top}};var m=-1;_.getScrollbarWidth=function(){if(m>-1)return m;var r=document.createElement("div");return document.body.appendChild(r),r.style.cssText="position: absolute;left: -99999px;overflow:scroll;width: 100px;height: 100px;",m=r.offsetWidth-r.clientWidth,document.body.removeChild(r),m};var v=-1;function f(r){var a=r.getBoundingClientRect();return{left:a.left+window.pageXOffset,right:a.right+window.pageXOffset,top:a.top+window.pageYOffset,bottom:a.bottom+window.pageYOffset}}function d(){return{rightBorder:window.pageXOffset+window.innerWidth,bottomBorder:window.pageYOffset+window.innerHeight}}function p(r,a){var i,n,e=d(),t=e.rightBorder,o=e.bottomBorder-r.bottom-a.height,c=r.top-a.height;if(a.mode==="bottom"?o>=0?n=r.bottom:c>=0&&(n=c):c>=0?n=c:o>=0&&(n=r.bottom),o<0&&c<0){if(a.auto)return u(r,b(b({},a),{mode:"right",auto:!1}));n=o>c?r.bottom:c}if(a.centering)i=function(x,C,k){var I=(C-(x.right-x.left))/2,O=x.left-I,D=x.right+I;return O>=0&&D<=k?O:O<0?0:k-C}(r,a.width,t);else{var h=t-r.left-a.width,g=r.right-a.width;i=h>=0?r.left:g>=0?g:g>h?r.left:g}return{left:i,top:n}}function u(r,a){var i,n,e=d(),t=e.rightBorder,o=e.bottomBorder,c=t-r.right-a.width,h=r.left-a.width;if(a.mode==="right"?c>=0?i=r.right:h>=0&&(i=h):h>=0?i=h:c>=0&&(i=r.right),h<0&&c<0){if(a.auto)return p(r,b(b({},a),{mode:"bottom",auto:!1}));i=h>c?h:r.right}if(a.centering)n=function(C,k,I){var O=(k-(C.bottom-C.top))/2,D=C.top-O,A=C.bottom+O;return D>=0&&A<=I?D:D<0?0:I-k}(r,a.height,o);else{var g=r.bottom-a.height,x=o-r.top-a.height;n=x>=0?r.top:g>0||g>x?g:r.top}return{left:i,top:n}}function s(r,a){var i=a.mode==="bottom"||a.mode==="top"?p(r,a):u(r,a),n=i.left,e=i.top;return{left:Math.round(n)+"px",top:Math.round(e)+"px",minWidth:Math.round(a.width)+"px",position:"absolute"}}_.getScrollbarHeight=function(){if(v>-1)return v;var r=document.createElement("div");return document.body.appendChild(r),r.style.cssText="position: absolute;left: -99999px;overflow:scroll;width: 100px;height: 100px;",v=r.offsetHeight-r.clientHeight,document.body.removeChild(r),v},_.isIE=function(){var r=window.navigator.userAgent;return r.includes("MSIE ")||r.includes("Trident/")},_.isSafari=function(){var r=function(n){return n.test(window.navigator.userAgent)},a=r(/Chrome/),i=r(/Firefox/);return!a&&!i&&r(/Safari/)},_.isFirefox=function(){var r=function(n){return n.test(window.navigator.userAgent)},a=r(/Chrome/),i=r(/Safari/);return!a&&!i&&r(/Firefox/)},_.getRealPosition=f,_.calculatePosition=s,_.fitPosition=function(r,a){return s(f(r),a)},_.getStrSize=function(r,a){a=b({fontSize:"14px",fontFamily:"Arial",lineHeight:"14px",fontWeight:"normal",fontStyle:"normal"},a);var i=document.createElement("span"),n=a.fontSize,e=a.fontFamily,t=a.lineHeight,o=a.fontWeight,c=a.fontStyle,h=a.strokeWidth;i.style.fontSize=n,i.style.fontFamily=e,i.style.lineHeight=t,i.style.fontWeight=o,i.style.fontStyle=c,i.style.display="inline-flex",i.innerText=r,document.body.appendChild(i);var g=i.offsetWidth,x=i.clientHeight;return document.body.removeChild(i),{width:g+parseFloat(h||0),height:x+parseFloat(h||0)}};var l=function(r){return r.href&&r.ownerNode.outerHTML.indexOf(window.location.origin)===-1&&(r.ownerNode.outerHTML.indexOf("http")!==-1||r.ownerNode.outerHTML.indexOf("https")!==-1||r.ownerNode.outerHTML.indexOf('href="//')!==-1)};_.getLabelStyle=function(r){var a=r.helpMessage,i=r.type,n=r.labelWidth,e=r.label,t=n&&n.toString().startsWith("0"),o=i!=="text"&&r.required;return!!(a||o||!(!e||e&&t)||n&&!t)&&{style:(e||n)&&!t&&{width:n,"max-width":"100%"},label:e&&t?null:e}},_.getPageInlineCss=function(){for(var r=[],a=0;a<document.styleSheets.length;a++){var i=document.styleSheets[a];if(!l(i))for(var n=("cssRules"in i)&&i.cssRules.length?i.cssRules:i.rules,e=0;e<n.length;e++){var t=n[e];"cssText"in t?r.push(t.cssText):r.push("".concat(t.selectorText,` {
`).concat(t.style.cssText,`
}
`))}}return r.join(`
`)},_.getPageLinksCss=function(r){var a=[];if(r)r.forEach(function(e){return a.push('<link href="'.concat(e,'" rel="stylesheet"/>'))});else for(var i=0;i<document.styleSheets.length;i++){var n=document.styleSheets[i];l(n)&&a.push('<link href="'.concat(n.href,'" rel="stylesheet"/>'))}return a.join(`
`)}},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.EventsMixin=_.EventSystem=void 0;var b=function(){function E(m){this.events={},this.context=m||this}return E.prototype.on=function(m,v,f){var d=m.toLowerCase();this.events[d]=this.events[d]||[],this.events[d].push({callback:v,context:f||this.context})},E.prototype.detach=function(m,v){var f=m.toLowerCase(),d=this.events[f];if(v&&d&&d.length)for(var p=d.length-1;p>=0;p--)d[p].context===v&&d.splice(p,1);else this.events[f]=[]},E.prototype.fire=function(m,v){v===void 0&&(v=[]);var f=m.toLowerCase();return!this.events[f]||!this.events[f].map(function(d){return d.callback.apply(d.context,v)}).includes(!1)},E.prototype.clear=function(){this.events={}},E}();_.EventSystem=b,_.EventsMixin=function(E){var m=new b(E=E||{});E.detachEvent=m.detach.bind(m),E.attachEvent=m.on.bind(m),E.callEvent=m.fire.bind(m)}},function(W,_,y){var b,E,m,v;Object.defineProperty(_,"__esModule",{value:!0}),_.ItemEvent=_.ValidationStatus=_.FormEvents=_.ClearMethod=void 0,function(f){f.value="value",f.validation="validation"}(b||(_.ClearMethod=b={})),function(f){f.beforeChange="beforeChange",f.change="change",f.click="click",f.focus="focus",f.blur="blur",f.keydown="keydown",f.beforeShow="beforeShow",f.afterShow="afterShow",f.beforeHide="beforeHide",f.afterHide="afterHide",f.afterValidate="afterValidate",f.beforeValidate="beforeValidate",f.beforeChangeProperties="beforeChangeProperties",f.afterChangeProperties="afterChangeProperties",f.beforeSend="beforesend",f.afterSend="aftersend",f.buttonClick="buttonClick",f.validationFail="validationfail"}(E||(_.FormEvents=E={})),function(f){f[f.pre=0]="pre",f[f.error=1]="error",f[f.success=2]="success"}(m||(_.ValidationStatus=m={})),function(f){f.click="click",f.beforeChange="beforeChange",f.change="change",f.input="input",f.focus="focus",f.blur="blur",f.keydown="keydown",f.beforeChangeOptions="beforeChangeOptions",f.changeOptions="changeOptions",f.beforeShow="beforeShow",f.afterShow="afterShow",f.beforeHide="beforeHide",f.afterHide="afterHide",f.beforeValidate="beforeValidate",f.afterValidate="afterValidate",f.beforeUploadFile="beforeUploadFile",f.uploadFile="uploadfile",f.uploadBegin="uploadBegin",f.uploadComplete="uploadComplete",f.uploadFail="uploadFail",f.uploadProgress="uploadProgress",f.beforeChangeProperties="beforeChangeProperties",f.afterChangeProperties="afterChangeProperties"}(v||(_.ItemEvent=v={}))},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.toViewLike=_.View=void 0;var b=y(1),E=y(2),m=function(){function v(f,d){var p;this.config=d||{},this._uid=(p=this.config.rootId)!==null&&p!==void 0?p:(0,b.uid)()}return v.prototype.mount=function(f,d){d&&(this._view=d),f&&this._view&&this._view.mount&&(this._container=(0,E.toNode)(f),this._container.tagName?this._view.mount(this._container):this._container.attach&&this._container.attach(this))},v.prototype.unmount=function(){var f=this.getRootView();f&&f.node&&(f.unmount(),this._view=null)},v.prototype.getRootView=function(){return this._view},v.prototype.getRootNode=function(){return this._view&&this._view.node&&this._view.node.el},v.prototype.paint=function(){this._view&&(this._view.node||this._container)&&(this._doNotRepaint=!1,this._view.redraw())},v}();_.View=m,_.toViewLike=function(v){return{getRootView:function(){return v},paint:function(){return v.node&&v.redraw()},mount:function(f){return v.mount(f)}}}},function(W,_,y){var b,E=this&&this.__rest||function(s,l){var r={};for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&l.indexOf(a)<0&&(r[a]=s[a]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(a=Object.getOwnPropertySymbols(s);i<a.length;i++)l.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(s,a[i])&&(r[a[i]]=s[a[i]])}return r};Object.defineProperty(_,"__esModule",{value:!0}),_.setAttacments=_.widgetConfig=_.baseProps=_.isVerify=_.isTimeFormat=_.baseInputValidate=_.validateInput=_.isBlock=_.validateTemplate=_.getValidationMessage=_.getFormItemCss=void 0;var m=y(4),v=y(41),f=y(1);_.getFormItemCss=function(s,l,r){var a;r===void 0&&(r=!1);var i=s.labelPosition,n=s.required,e=s.disabled,t=s.hiddenLabel,o=s.$validationStatus,c=(a={},a[m.ValidationStatus.pre]="",a[m.ValidationStatus.error]=" dhx_form-group--state_error",a[m.ValidationStatus.success]=" dhx_form-group--state_success",a)[o]||"",h=i==="left"?" dhx_form-group--inline":"",g=e?" dhx_form-group--disabled":"",x=t?" dhx_form-group--label_sr":"";return l?h+(r?"":c)+(n?" dhx_form-group--required":"")+g+x:h+g+x};var d=((b={})[v.Validation.validAlphaNumeric]=/^[a-zA-Z0-9_]+$/,b[v.Validation.validEmail]=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,b[v.Validation.validInteger]=/^-?\d+$/,b[v.Validation.validIPv4]=/\b((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\.|$)){4}\b/,b[v.Validation.validNumeric]=/^-?\d+(\.\d+)?$/,b);function p(s){return s.type!=="fieldset"&&(!!s.rows||!!s.cols)}_.getValidationMessage=function(s){var l;return(l={undefined:s.preMessage},l[m.ValidationStatus.pre]=s.preMessage,l[m.ValidationStatus.error]=s.errorMessage,l[m.ValidationStatus.success]=s.successMessage,l)[s.$validationStatus]||""},_.validateTemplate=function(s,l){return!d[s]||d[s].test(l)},_.isBlock=p,_.validateInput=function(s,l){var r=!0;if(typeof l=="function")r=l(s);else{var a=d[l];a&&(r=a.test(s.toString()))}return r},_.baseInputValidate=function(s,l){var r=s??"";if(l.required&&!String(r).trim())return!1;var a=function(i,n,e){var t=(0,f.isDefined)(n),o=(0,f.isDefined)(e);return t&&o?Number(n)<=Number(e)&&Number(n)<=i&&Number(e)>=i:t?Number(n)<=i:!o||Number(e)>=i};return l.inputType==="number"?a(Number(r),l.min,l.max):a(String(r).length,l.minlength,l.maxlength)},_.isTimeFormat=function(s,l){return l===12?/(^0?([1-9][0-2]?):[0-5][0-9]?([AP][M]?)$)/i.test(s):/(^(0[0-9]|1[0-9]|2[0-3]|[0-9]):[0-5][0-9]$)/i.test(s)},_.isVerify=function(s){return["required","validation","minlength","maxlength","min","max"].some(function(l){switch(l){case"required":return!!s[l];case"validation":return typeof s[l]=="function"||s[l]==="email"||s[l]==="integer"||s[l]==="numeric"||s[l]==="alphanumeric"||s[l]==="IPv4";case"minlength":case"maxlength":return typeof s[l]=="number"||typeof s[l]=="string";case"min":case"max":return(typeof s[l]=="number"||typeof s[l]=="string")&&s.inputType==="number"}})},_.baseProps=["width","height","padding","css"];function u(s,l,r){s===void 0&&(s=[]);for(var a=[],i=0;i<s.length;i++){var n=s[i];n.type&&(l[n.name].parent=r,a.push(l[n.name])),p(n)&&a.push.apply(a,u(n.rows||n.cols,l,r))}return a}_.widgetConfig=function(s){return s.width,s.type,s.id,s.name,s.hidden,s.editable,s.css,s.required,s.helpMessage,s.preMessage,s.successMessage,s.errorMessage,s.label,s.labelWidth,s.labelPosition,s.hiddenLabel,s.validation,s.icon,E(s,["width","type","id","name","hidden","editable","css","required","helpMessage","preMessage","successMessage","errorMessage","label","labelWidth","labelPosition","hiddenLabel","validation","icon"])},_.setAttacments=function(s,l){var r;for(var a in s){var i=s[a];i.config.type==="fieldset"?(i.setAttachments(u(i.config.rows||i.config.cols,s,i)),i.setCell(l.getCell(a))):(r=l.getCell(a))===null||r===void 0||r.attach(i)}}},function(W,_,y){var b,E,m,v,f;Object.defineProperty(_,"__esModule",{value:!0}),_.Split=_.GridSelectionEvents=_.GridSystemEvents=_.GridEvents=_.HeaderFilterEvent=void 0,function(d){d.change="change"}(b||(_.HeaderFilterEvent=b={})),function(d){d.scroll="scroll",d.expand="expand",d.filterChange="filterChange",d.beforeFilter="beforeFilter",d.beforeResizeStart="beforeResizeStart",d.resize="resize",d.afterResizeEnd="afterResizeEnd",d.cellClick="cellClick",d.cellRightClick="cellRightClick",d.cellMouseOver="cellMouseOver",d.cellMouseDown="cellMouseDown",d.cellDblClick="cellDblClick",d.headerCellClick="headerCellClick",d.footerCellClick="footerCellClick",d.headerCellMouseOver="headerCellMouseOver",d.footerCellMouseOver="footerCellMouseOver",d.headerCellMouseDown="headerCellMouseDown",d.footerCellMouseDown="footerCellMouseDown",d.headerCellDblClick="headerCellDblClick",d.footerCellDblClick="footerCellDblClick",d.headerCellRightClick="headerCellRightClick",d.footerCellRightClick="footerCellRightClick",d.beforeEditStart="beforeEditStart",d.afterEditStart="afterEditStart",d.beforeEditEnd="beforeEditEnd",d.afterEditEnd="afterEditEnd",d.beforeKeyDown="beforeKeyDown",d.afterKeyDown="afterKeyDown",d.beforeColumnHide="beforeColumnHide",d.afterColumnHide="afterColumnHide",d.beforeColumnShow="beforeColumnShow",d.afterColumnShow="afterColumnShow",d.beforeRowHide="beforeRowHide",d.afterRowHide="afterRowHide",d.beforeRowShow="beforeRowShow",d.afterRowShow="afterRowShow",d.beforeRowDrag="beforeRowDrag",d.dragRowStart="dragRowStart",d.dragRowOut="dragRowOut",d.dragRowIn="dragRowIn",d.canRowDrop="canRowDrop",d.cancelRowDrop="cancelRowDrop",d.beforeRowDrop="beforeRowDrop",d.afterRowDrop="afterRowDrop",d.afterRowDrag="afterRowDrag",d.beforeColumnDrag="beforeColumnDrag",d.dragColumnStart="dragColumnStart",d.dragColumnOut="dragColumnOut",d.dragColumnIn="dragColumnIn",d.canColumnDrop="canColumnDrop",d.cancelColumnDrop="cancelColumnDrop",d.beforeColumnDrop="beforeColumnDrop",d.afterColumnDrop="afterColumnDrop",d.afterColumnDrag="afterColumnDrag",d.beforeRowResize="beforeRowResize",d.afterRowResize="afterRowResize",d.beforeSort="beforeSort",d.afterSort="afterSort"}(E||(_.GridEvents=E={})),function(d){d.cellTouchMove="cellTouchMove",d.cellTouchEnd="cellTouchEnd",d.headerCellTouchMove="headerCellTouchMove",d.headerCellTouchEnd="headerCellTouchEnd"}(m||(_.GridSystemEvents=m={})),function(d){d.beforeUnSelect="beforeUnSelect",d.afterUnSelect="afterUnSelect",d.beforeSelect="beforeSelect",d.afterSelect="afterSelect"}(v||(_.GridSelectionEvents=v={})),function(d){d.left="leftSplit",d.right="rightSplit",d.top="topSplit",d.bottom="bottomSplit"}(f||(_.Split=f={}))},function(W,_,y){var b=this&&this.__createBinding||(Object.create?function(m,v,f,d){d===void 0&&(d=f);var p=Object.getOwnPropertyDescriptor(v,f);p&&!("get"in p?!v.__esModule:p.writable||p.configurable)||(p={enumerable:!0,get:function(){return v[f]}}),Object.defineProperty(m,d,p)}:function(m,v,f,d){d===void 0&&(d=f),m[d]=v[f]}),E=this&&this.__exportStar||function(m,v){for(var f in m)f==="default"||Object.prototype.hasOwnProperty.call(v,f)||b(v,m,f)};Object.defineProperty(_,"__esModule",{value:!0}),E(y(22),_),E(y(68),_),E(y(135),_),E(y(136),_),E(y(32),_),E(y(171),_),E(y(23),_),E(y(71),_),E(y(70),_),E(y(172),_),E(y(69),_),E(y(47),_)},function(W,_,y){var b,E=this&&this.__extends||(b=function(l,r){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(a[n]=i[n])},b(l,r)},function(l,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function a(){this.constructor=l}b(l,r),l.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}),m=this&&this.__assign||function(){return m=Object.assign||function(l){for(var r,a=1,i=arguments.length;a<i;a++)for(var n in r=arguments[a])Object.prototype.hasOwnProperty.call(r,n)&&(l[n]=r[n]);return l},m.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.Label=void 0;var v=y(0),f=y(2),d=y(5),p=y(11),u=y(4),s=function(l){function r(a,i){i===void 0&&(i={});var n=l.call(this,a,i)||this;return n._handlers=m({showHelper:function(e){e.preventDefault(),e.stopPropagation(),n._helper.show(e.target,{mode:n.config.labelPosition==="left"?"bottom":"right",theme:e.target})},hideHelper:function(e){e.preventDefault(),e.stopPropagation(),n._helper.hide()}},n._getHandlers()),n.mount(a,(0,v.create)({render:function(){return n.config&&n._draw()}})),n}return E(r,l),r.prototype.setValidationStatus=function(a){a===void 0&&(a="pre"),this.config.$validationStatus=u.ValidationStatus[a]},r.prototype._destructor=function(){this._helper&&this._helper.destructor(),this.config=this._handlers=this._helper=null,this.unmount()},r.prototype._getHandlers=function(){return{}},r.prototype._init=function(){},r.prototype._draw=function(){return this._drawLabel()},r.prototype._drawLabel=function(){var a=this.config,i=a.id,n=a.helpMessage,e=a.required;this.config.helpMessage&&(this._helper||(this._helper=new p.Popup({css:"dhx_tooltip dhx_tooltip--forced dhx_tooltip--light"})),this._helper.attachHTML(this.config.helpMessage));var t=(0,f.getLabelStyle)(this.config);return t&&(0,v.el)("".concat(this.config.type.includes("group")?"legend":"label",".dhx_label"),{for:i||this._uid,class:n?"dhx_label--with-help":"",style:t.style},n?[(t.label||e)&&(0,v.el)("span.dhx_label__holder",t.label),(0,v.el)("span.dhx_label-help.dxi.dxi-help-circle-outline",{tabindex:"0",role:"button",onclick:this._handlers.showHelper,onfocus:this._handlers.showHelper,onblur:this._handlers.hideHelper,id:"dhx_label__help_".concat(i||this._uid)})]:t.label)},r}(d.View);_.Label=s},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0});var b=y(12),E=y(43);_.default={type:"input",key:"text",$handler:function(m){var v=m.id,f=m.value,d=m.editor,p=m.key,u=m.control;this.inputType==="number"&&(f=f||this.value),d.diagram.data.update(v,(0,E.getModifiedObject)(p,f,Array.isArray(p)&&d.diagram.data.getItem(v)||{})),u.setValue(f)},$setValue:function(m){var v=m.control,f=m.value;f!==""||typeof v.clear!="function"?v.setValue(f):v.clear()},$layout:function(m){return(0,b.default)(m,{type:"input"})}}},function(W,_,y){var b=this&&this.__createBinding||(Object.create?function(m,v,f,d){d===void 0&&(d=f);var p=Object.getOwnPropertyDescriptor(v,f);p&&!("get"in p?!v.__esModule:p.writable||p.configurable)||(p={enumerable:!0,get:function(){return v[f]}}),Object.defineProperty(m,d,p)}:function(m,v,f,d){d===void 0&&(d=f),m[d]=v[f]}),E=this&&this.__exportStar||function(m,v){for(var f in m)f==="default"||Object.prototype.hasOwnProperty.call(v,f)||b(v,m,f)};Object.defineProperty(_,"__esModule",{value:!0}),E(y(150),_),E(y(76),_)},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(m){for(var v,f=1,d=arguments.length;f<d;f++)for(var p in v=arguments[f])Object.prototype.hasOwnProperty.call(v,p)&&(m[p]=v[p]);return m},b.apply(this,arguments)},E=this&&this.__rest||function(m,v){var f={};for(var d in m)Object.prototype.hasOwnProperty.call(m,d)&&v.indexOf(d)<0&&(f[d]=m[d]);if(m!=null&&typeof Object.getOwnPropertySymbols=="function"){var p=0;for(d=Object.getOwnPropertySymbols(m);p<d.length;p++)v.indexOf(d[p])<0&&Object.prototype.propertyIsEnumerable.call(m,d[p])&&(f[d[p]]=m[d[p]])}return f};Object.defineProperty(_,"__esModule",{value:!0}),_.default=function(m,v){if(m.wrap&&m.label){var f=m.label,d=m.labelAlignment,p=m.padding,u=m.align,s=m.width,l=m.height,r=m.disabled,a=m.hidden,i=(m.labelWidth,m.helpMessage,m.compact),n=E(m,["label","labelAlignment","padding","align","width","height","disabled","hidden","labelWidth","helpMessage","compact"]),e=m.css||"";return m.label&&!m.compact||(e+=" dhx_form-fieldset--compact"),{type:"fieldset",label:f,labelAlignment:d,css:e,padding:p,align:u,width:s,height:l,disabled:r,hidden:a,compact:i,rows:[b(b({},n),v)]}}return b(b({},m),v)}},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(E){for(var m,v=1,f=arguments.length;v<f;v++)for(var d in m=arguments[v])Object.prototype.hasOwnProperty.call(m,d)&&(E[d]=m[d]);return E},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.default={type:"fieldset",compact:!1,$layout:function(E){var m=E.css||"";return E.label&&!E.compact||(m+=" dhx_form-fieldset--compact"),b(b({},E),{type:"fieldset",css:m})}}},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.KeyManager=void 0;var b=y(31),E=y(2);function m(d){for(var p=d.toLowerCase().match(/\w+/g),u=0,s="",l=0;l<p.length;l++){var r=p[l];r==="ctrl"?u+=4:r==="shift"?u+=2:r==="alt"?u+=1:s=r}return u+s}var v={Up:"arrowUp",Down:"arrowDown",Right:"arrowRight",Left:"arrowLeft",Esc:"escape",Spacebar:"space"},f=function(){function d(p){var u=this;this._keysStorage={},this._initHandler=function(s){var l;if(s.which>=48&&s.which<=57||s.which>=65&&s.which<=90)l=String.fromCharCode(s.which);else{var r=s.which===32?s.code:s.key;l=(0,E.isIE)()&&v[r]||r}var a=u._keysStorage[(s.ctrlKey||s.metaKey?4:0)+(s.shiftKey?2:0)+(s.altKey?1:0)+(l&&l.toLowerCase())];if(a)for(var i=0;i<a.length;i++){if(u._beforeCall&&u._beforeCall(s,b.focusManager.getFocusId())===!1)return;a[i].handler(s)}},p&&(this._beforeCall=p),document.addEventListener("keydown",this._initHandler)}return d.prototype.destructor=function(){document.removeEventListener("keydown",this._initHandler),this.removeHotKey()},d.prototype.addHotKey=function(p,u){var s=m(p);this._keysStorage[s]||(this._keysStorage[s]=[]),this._keysStorage[s].push({handler:u})},d.prototype.removeHotKey=function(p,u){var s=this;if(p)if(p&&u){var l=m(p),r=function(i){return i.toString().replace(/\n/g,"").replace(/\s/g,"")};this._keysStorage[l].forEach(function(i,n){r(i.handler)===r(u)&&(delete s._keysStorage[l][n],s._keysStorage[l]=s._keysStorage[l].filter(function(e){return e}))})}else{var a=m(p);delete this._keysStorage[a]}else this._keysStorage={}},d.prototype.exist=function(p){var u=m(p);return!!this._keysStorage[u]},d.prototype.getKeyStorageLength=function(){return Object.keys(this._keysStorage).length},d}();_.KeyManager=f},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.scrollFixedColsAndRows=_.getTotalHeight=_.getTotalWidth=_.isHtmlEnable=_.isTooltip=_.isContentTooltip=_.showTooltip=_.isAutoWidth=_.isSortable=_.isRowEmpty=_.isCssSupport=_.removeHTMLTags=_.getStyleByClass=_.transpose=void 0;var b=y(1),E=y(2),m=y(21);_.transpose=function(v,f){for(var d=[],p=0;p<v.length;p++)for(var u=v[p],s=0;s<u.length;s++){d[s]=d[s]||[];var l=f?f(u[s]):u[s];d[s].push(l)}return d},_.getStyleByClass=function(v,f,d,p){p===void 0&&(p=document.body);var u,s,l,r=p.querySelector("."+f.trim().replace(/\s/g,".")),a=(u=r,typeof(s='<div class="'.concat(v,'"></div>'))=="string"?(u.insertAdjacentHTML("beforeend",s),u.lastChild):(u.appendChild(s),s)),i=window.getComputedStyle(a),n="rgba(0, 0, 0, 0)";if(i.backgroundColor===n){var e=window.getComputedStyle(r);l=e.backgroundColor===n?d.background:(0,b.rgbToHex)(e.backgroundColor)}else l=(0,b.rgbToHex)(i.backgroundColor);var t={color:i.color==="rgb(0, 0, 0)"?d.color:(0,b.rgbToHex)(i.color),background:l,fontSize:Math.round(parseFloat(i.fontSize)),bold:["bold","700","600","500"].includes(i.fontWeight)};return r.removeChild(a),(0,b.compare)(t,d)?null:t},_.removeHTMLTags=function(v){return typeof v!="string"&&typeof v!="number"&&typeof v!="boolean"?"":"".concat(v??"").replace(/<[^>]*>/g,"").replace(/["]/g,"&quot;").trim()},_.isCssSupport=function(v,f){try{return CSS.supports(v,f)}catch{var d=document.createElement("div");return d.style[v]=f,d.style[v]===f}},_.isRowEmpty=function(v){if(v)return Object.keys(v).reduce(function(f,d){return d==="id"||d.startsWith("$")?f:f&&v[d]!==void 0&&v[d]!==""?void 0:f},!0)},_.isSortable=function(v,f){return f.sortable!==!1&&v.sortable||f.sortable},_.isAutoWidth=function(v,f){if(f)return f.autoWidth!==!1&&v.autoWidth||f.autoWidth;var d=!1;return v.columns.map(function(p){(p.autoWidth!==!1&&v.autoWidth||p.autoWidth)&&(d=!0)}),d},_.showTooltip=function(v){var f=v.node,d=v.value,p=v.htmlEnable,u=p!==void 0&&p;f&&(0,m.tooltip)(d.toString(),{css:"dhx_grid_tooltip",node:f,htmlEnable:u})},_.isContentTooltip=function(v,f,d,p){for(var u=!1,s=p==="header"?v.headerTooltip:v.footerTooltip,l=[v.tooltip,s,f.tooltip,d==null?void 0:d.tooltip],r=0;r<l.length;r++)typeof l[r]=="boolean"&&(u=l[r]);return u},_.isTooltip=function(v,f){return f.tooltip!==!1&&v.tooltip||f.tooltip},_.isHtmlEnable=function(v,f,d){var p,u;return!!((u=(p=d==null?void 0:d.htmlEnable)!==null&&p!==void 0?p:f.htmlEnable)!==null&&u!==void 0?u:v.htmlEnable)},_.getTotalWidth=function(v){return v.reduce(function(f,d){return f+(d.$width||0)},0)},_.getTotalHeight=function(v){return v.reduce(function(f,d){return f+(d.$height||0)},0)},_.scrollFixedColsAndRows=function(v){var f=(0,E.locateNode)(v,"data-dhx-widget-id").querySelector(".dhx_grid-body"),d=v.deltaY,p=v.shiftKey?[d,0]:[0,d];f==null||f.scrollBy.apply(f,p)}},function(W,_,y){var b=this&&this.__createBinding||(Object.create?function(m,v,f,d){d===void 0&&(d=f);var p=Object.getOwnPropertyDescriptor(v,f);p&&!("get"in p?!v.__esModule:p.writable||p.configurable)||(p={enumerable:!0,get:function(){return v[f]}}),Object.defineProperty(m,d,p)}:function(m,v,f,d){d===void 0&&(d=f),m[d]=v[f]}),E=this&&this.__exportStar||function(m,v){for(var f in m)f==="default"||Object.prototype.hasOwnProperty.call(v,f)||b(v,m,f)};Object.defineProperty(_,"__esModule",{value:!0}),E(y(49),_),E(y(147),_),E(y(50),_)},function(W,_,y){(function(b,E){(function(){b=typeof window<"u"?window:this;var m=1,v={},f=!1;function d(u){b.setImmediate?E(u):b.importScripts?setTimeout(u):(m++,v[m]=u,b.postMessage(m,"*"))}function p(u){if(typeof u!="function"&&u!=null||typeof this!="object"||this&&this.then)throw TypeError();var s,l,r=this,a=0,i=0,n=[];r.promise=r,r.resolve=function(c){return s=r.fn,l=r.er,a||(i=c,a=1,d(o)),r},r.reject=function(c){return s=r.fn,l=r.er,a||(i=c,a=2,d(o)),r},r._d=1,r.then=function(c,h){if(this._d!=1)throw TypeError();var g=new p;return g.fn=c,g.er=h,a==3?g.resolve(i):a==4?g.reject(i):n.push(g),g},r.catch=function(c){return r.then(null,c)};var e=function(c){a=c||4,n.map(function(h){a==3&&h.resolve(i)||h.reject(i)})};try{typeof u=="function"&&u(r.resolve,r.reject)}catch(c){r.reject(c)}return r;function t(c,h,g,x){if(a==2)return x();if(typeof i!="object"&&typeof i!="function"||typeof c!="function")x();else try{var C=0;c.call(i,function(k){C++||(i=k,h())},function(k){C++||(i=k,g())})}catch(k){i=k,g()}}function o(){var c;try{c=i&&i.then}catch(h){return i=h,a=2,o()}t(c,function(){a=1,o()},function(){a=2,o()},function(){try{a==1&&typeof s=="function"?i=s(i):a==2&&typeof l=="function"&&(i=l(i),a=1)}catch(h){return i=h,e()}i==r?(i=TypeError(),e()):t(c,function(){e(3)},e,function(){e(a==1&&3)})})}}b.setImmediate||b.addEventListener("message",function(u){if(u.source==b)if(f)d(v[u.data]);else{f=!0;try{v[u.data]()}catch{}delete v[u.data],f=!1}}),p.resolve=function(u){if(this._d!=1)throw TypeError();return u instanceof p?u:new p(function(s){s(u)})},p.reject=function(u){if(this._d!=1)throw TypeError();return new p(function(s,l){l(u)})},p.all=function(u){if(this._d!=1)throw TypeError();if(!(u instanceof Array))return p.reject(TypeError());var s=new p;return function l(r,a){if(a)return s.resolve(a);if(r)return s.reject(r);u.reduce(function(i,n){return n&&n.then?i+1:i},0)==0&&s.resolve(u),u.map(function(i,n){i&&i.then&&i.then(function(e){return u[n]=e,l(),e},l)})}(),s},p.race=function(u){if(this._d!=1)throw TypeError();if(!(u instanceof Array))return p.reject(TypeError());if(u.length==0)return new p;var s=new p;return function l(r,a){if(a)return s.resolve(a);if(r)return s.reject(r);u.reduce(function(i,n){return n&&n.then?i+1:i},0)==0&&s.resolve(u),u.map(function(i,n){i&&i.then&&i.then(function(e){l(null,e)},l)})}(),s},p._d=1,W.exports=p})()}).call(this,y(44),y(120).setImmediate)},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(s){for(var l,r=1,a=arguments.length;r<a;r++)for(var i in l=arguments[r])Object.prototype.hasOwnProperty.call(l,i)&&(s[i]=l[i]);return s},b.apply(this,arguments)},E=this&&this.__spreadArray||function(s,l,r){if(r||arguments.length===2)for(var a,i=0,n=l.length;i<n;i++)!a&&i in l||(a||(a=Array.prototype.slice.call(l,0,i)),a[i]=l[i]);return s.concat(a||Array.prototype.slice.call(l))};Object.defineProperty(_,"__esModule",{value:!0}),_.getEditorValue=_.getValueForNumberColumn=_.getEditorOptions=_.toFormat=_.getMaxColsWidth=_.getTreeCellWidthOffset=_.getCalculatedRowHeight=_.getMaxRowHeight=_.getUnique=_.calculatePositions=_.countColumns=_.measureTextHeight=_.normalizeArray=void 0;var m=y(1),v=y(15),f=y(24);_.normalizeArray=function(s,l){s[l]&&(typeof s[l]=="string"?s[l]=[{text:"".concat(s[l])}]:s[l]=s[l].map(function(r){return typeof r=="string"&&(r={text:r}),r}))},_.measureTextHeight=function(s){var l=s.text,r=l===void 0?"":l,a=s.width,i=a===void 0?0:a,n=s.lineHeight,e=n===void 0?20:n,t=s.font,o=t===void 0?"14px Arial":t,c=s.htmlEnable,h=c!==void 0&&c,g=document.createElement("canvas"),x=g.getContext("2d",{alpha:!1});x.font=o;var C=[],k=[];h&&(r=(0,v.removeHTMLTags)(r));var I=Math.ceil(x.measureText(r).width/i);I>1&&(I=(0,m.getTextLines)(x,r,i).length),k.push(I),C.push(r.split(`
`).length);var O=Math.max((0,m.getMaxArrayNumber)(C),(0,m.getMaxArrayNumber)(k));return g.remove(),O*e},_.countColumns=function(s,l){var r=0,a=0,i=0,n=!1,e=0,t=!1;return l.forEach(function(o){if(r=Math.max(r,o.header.length),i+=o.$width,o.footer&&(a=Math.max(a,o.footer.length),t||(t=!0)),!n){for(var c=0,h=o.header;c<h.length;c++)if(h[c].colspan)return void(n=!0)}}),l.forEach(function(o){if(t&&(o.footer=o.footer||[]),o.header.length<r)for(var c=0;c<r;c++)o.header[c]=o.header[c]||{text:""};if(o.footer){if(o.footer.length<a)for(c=0;c<a;c++)o.footer[c]=o.footer[c]||{text:""};for(c=0;c<o.footer.length;c++)o.footer[c].id||(o.footer[c].id=(0,m.uid)())}o.header=o.header.map(function(h){return typeof h!="object"&&(h={text:h}),h.css=h.css||"",h.text||h.css.includes("dhx_cell-empty")||(h.css+=" dhx_cell-empty"),h.id||(h.id=(0,m.uid)()),h}),o.header[0].text===""&&e++}),s.$totalWidth=i,s.$colspans=n,s.$footer=t,e},_.calculatePositions=function(s,l,r,a,i){for(var n,e,t,o=a.columns||[],c=o.length,h=i||[],g=h.length,x=a.leftSplit?a.columns.slice(0,a.leftSplit).filter(function(j){return!j.hidden}).length:0,C=(n=a.topSplit)!==null&&n!==void 0?n:0,k=(e=a.rightSplit)!==null&&e!==void 0?e:0,I=(t=a.bottomSplit)!==null&&t!==void 0?t:0,O=0,D=0,A=r.left,H=a.$totalWidth/c,S=0;S<c;S++){var $=o[S];if($.hidden)D++;else{if(!((A-=$.$width)+H/2>0))break;O++}}var w=0,T=0,F=r.top,z=a.$totalHeight/g;for(S=0;S<g;S++)if((et=h[S]).hidden)T++;else{if(!((F-=et.$height)+z/2>0))break;w++}for(var B=0,L=0,M=-1/0,P=1/0,V=O+D,R=0;R<c;R++){var q=o[R];R>=V&&B<s&&!q.hidden&&(B+=q.$width,L++),q.$width>M&&(M=q.$width),q.$width<P&&(P=q.$width)}var G=0,U=0,Z=-1/0,Q=1/0,tt=w+T;for(R=0;R<g;R++){var et=h[R];R>=tt&&G<l&&!et.hidden&&(G+=et.$height,U++),et.$height>Z&&(Z=et.$height),et.$height<Q&&(Q=et.$height)}Q=Q<a.rowHeight?Q:a.rowHeight;var ot=Math.round(M/P),rt=Math.round(Z/Q),st=O-ot>=x?O-ot:x,ut=O+L+ot,at=(a.leftSplit||0)-x,ct=o.length-k-at,ft=ut<ct?ut:ct,vt=w-rt>=C?w-rt:C,_t=w+U+rt,gt=h.length-I;return{xStart:st,xEnd:ft,yStart:vt,yEnd:_t<gt?_t:gt}},_.getUnique=function(s,l,r){var a=s.map(function(i){return i[l]});return r&&a.forEach(function(i,n){typeof i=="string"&&i.includes(", ")&&(i.split(", ").forEach(function(e){return a.push(e)}),delete a[n])}),a.filter(function(i,n,e){return e.indexOf(i)===n&&(0,m.isDefined)(i)}).sort()},_.getMaxRowHeight=function(s,l,r){var a,i;r===void 0&&(r={font:"14px Arial",lineHeight:20});var n=document.createElement("canvas"),e=n.getContext("2d",{alpha:!1});e.font=r.font;for(var t={},o=l.length,c=0;c<o;c++)l[c].template?t[l[c].id]={width:l[c].$width-24||0,htmlEnable:l[c].htmlEnable,template:l[c].template,cols:l[c]}:t[l[c].id]={width:l[c].$width-24||0,htmlEnable:l[c].htmlEnable,cols:l[c]};for(var h=[],g=[],x=0,C=Object.entries(s);x<C.length;x++){var k=C[x],I=k[0],O=k[1];if(t[I]&&I!=="id"&&I!=="height"&&!I.startsWith("$")&&(typeof O=="string"||typeof O=="number"||O instanceof Date||Array.isArray(O))){var D=t[I].cols;O=D.editorType==="combobox"||D.editorType==="multiselect"?p(O,D,s):O;var A="";if(!((a=t[I])===null||a===void 0)&&a.template){var H=t[I].template(O,s,t[I].cols);A=t[I].htmlEnable?(0,v.removeHTMLTags)(H):H}else A=typeof O=="string"?t[I].htmlEnable?(0,v.removeHTMLTags)(O):O:O.toString();var S=Math.ceil(e.measureText(A).width/t[I].width);S>1&&(S=(0,m.getTextLines)(e,A,(i=t[I])===null||i===void 0?void 0:i.width).length),g.push(S),h.push(A.split(`
`).length)}}var $=Math.max((0,m.getMaxArrayNumber)(h),(0,m.getMaxArrayNumber)(g));return n.remove(),$*r.lineHeight+8},_.getCalculatedRowHeight=function(s,l){var r=(l=b({rowHeight:40,padding:12},l)).rowHeight<40?s:s+2*l.padding;return s<l.rowHeight?l.rowHeight:r},_.getTreeCellWidthOffset=function(s){return 20+20*s.$level-(s.$items?20:0)};function d(s,l){return E(E([],(typeof s.options=="function"?s.options(s,l):s.options)||[],!0),s.$customOptions||[],!0)}function p(s,l,r){var a=d(l,r);return l.editorType==="multiselect"&&typeof s=="string"?s.split(",").map(function(i){return u(i.trim(),a)}).join(", "):u(s,a)}function u(s,l){var r=l.find(function(a){return a instanceof Object&&a.id==s});return r?r.value:s}_.getMaxColsWidth=function(s,l,r,a){if(r===void 0&&(r={font:"normal 14.4px Arial"}),s.length&&l.length){var i=document.createElement("canvas"),n=i.getContext("2d",{alpha:!1});n.font=r.font;for(var e={},t=l.length,o=0;o<t;o++){var c=l[o],h=c.template,g=c.htmlEnable,x=c.format,C=c.id,k=c.type;e[C]=h&&a==="data"?{width:20,htmlEnable:!!g,template:h,cols:c,type:k}:{width:20,htmlEnable:!!g,format:k==="date"?x||"%M %d %Y":x,cols:c,type:k}}var I=s.length;for(o=0;o<I;o++)for(var O=0,D=Object.entries(s[o]);O<D.length;O++){var A=D[O],H=A[0],S=A[1],$=e[H];if($&&H!=="id"&&H!=="height"&&!H.startsWith("$")&&(typeof S=="string"||typeof S=="number"||S instanceof Date||Array.isArray(S))){h=$.template;var w=$.cols,T=(x=$.format,k=$.type,g=$.htmlEnable,$.width);S=w.editorType==="combobox"||w.editorType==="multiselect"?p(S,w,s[o]):S;var F=void 0;if(typeof h=="function"){var z=h(S,s[o],w);F=g?(0,v.removeHTMLTags)(z):z}else F=g?(0,v.removeHTMLTags)(S):S.toString();var B=x&&k==="date"&&new Date(F);B!=null&&B.valueOf()&&(F=(0,f.getFormattedDate)(x,B));var L=n.measureText(F).width;L>T&&(e[H].width=L)}}i.remove();for(var M={},P=0,V=Object.entries(e);P<V.length;P++){var R=V[P];H=R[0],S=R[1],M[H]=Math.ceil(S.width)}return M}},_.toFormat=function(s,l,r){if(typeof s=="boolean"||!s&&typeof s!="number")return s;var a=function(i){var n,e,t,o=r.replace(/#+/g,"#").split("#").filter(function(k){return k}),c=r.match(/0/g)&&r.match(/0/g).length;s=(i==="percent"?100*Number(s):s).toString();var h=Math.trunc(Number(s));if(c){var g=s.split(".")[1]||"0";t=o.find(function(k){return k.includes("0")}).replace(/0+/g,""),e=(+("0."+g)).toFixed(c),Number(e)>=1&&h++,e=e.toString().split(".")[1].padEnd(c,"0")}var x="".concat(s<0&&Math.abs(h)===0?"-":"").concat(h),C=o.find(function(k){return!k.includes("0")});return n=C?x.replace(/(\d)(?=(\d{3})+(\D|$))/g,"$1".concat(C)):x,n+=(t||"")+(e||""),i==="percent"?"".concat(n,"%"):n};switch(l){case"number":return r&&!isNaN(Number(s))?a(l):s;case"percent":return r||(r="#"),isNaN(Number(s))?s:a(l);case"date":return r||(r="%M %d %Y"),typeof s=="string"?s=(0,f.getFormattedDate)(r,(0,f.stringToDate)(s,r)):typeof s=="object"&&(s=(0,f.getFormattedDate)(r,s)),s;default:return s}},_.getEditorOptions=d,_.getValueForNumberColumn=function(s,l){return!(0,m.isDefined)(l)||l===""||typeof l=="number"||["select","combobox","multiselect"].includes(s.editorType)?l:typeof l=="string"?parseFloat(l):NaN},_.getEditorValue=u},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.getTextStyle=_.getSwimlaneContainerStyle=_.getSwimlaneBackGround=_.getGroupContainerStyle=_.getMenuIcon=_.getExpandIcon=_.getShapeCss=_.getTextTemplate=_.getHeaderTpl=_.getCircleTpl=void 0;var b=y(0);_.getCircleTpl=function(E,m){if(!E.$count&&E.open!==!1||!E.$connection)return null;var v=E.dir==="vertical",f=E.open===!1,d=E.width/2,p=E.height/2,u={x:v?0:d,y:v?p:E.height},s="";return Array.isArray(E.dir)?(E.dir[m]==="verticalLeft"&&(u.x=0,u.y=p,s+="icon-left ",f=E.openDir.left===!1),E.dir[m]==="verticalRight"&&(u.x=E.width,u.y=p,s+="icon-right ",f=E.openDir.right===!1)):(E.dir==="verticalLeft"&&(u.x=0,u.y=p),E.dir==="verticalRight"&&(u.x=E.width,u.y=p)),(0,b.el)("div",{class:"dhx_diagram_toggle-icon "+(f?"dhx_diagram_toggle-icon--expand ":"dhx_diagram_toggle-icon--collapse "),style:{position:"absolute",top:u.y,left:u.x}},[(0,b.el)("div.dhx_diagram_toggle-icon__wrapper",{style:{background:E.$expandColor}},[(0,b.el)("i.dxi",{class:"".concat(f?"dxi-plus ":"dxi-minus ").concat(s)})])])},_.getHeaderTpl=function(E){var m=E.width,v=E.headerColor||"#20b6e2";return(0,b.el)("div",{class:"dhx_item_header",style:{height:4,width:m,top:0,left:0,position:"absolute",background:v}})},_.getTextTemplate=function(E,m){var v=E.width,f=E.height;return typeof E.text=="string"||typeof E.title=="string"?(0,b.el)("div.dhx_diagram_shape__content",{style:{width:v,height:f,top:0,left:0,overflow:"hidden",transform:"translate(0 0)",position:"absolute"}},[].concat(m)):null},_.getShapeCss=function(E){return{width:E.width,height:E.height,display:"flex",color:E.fontColor,"flex-direction":"column","justify-content":{bottom:"flex-end",top:"flex-start",center:"center"}[E.textVerticalAlign],"text-align":E.textAlign,"line-height":E.lineHeight,"font-size":E.fontSize,"font-style":E.fontStyle||"normal","font-weight":E.fontWeight||"normal","word-break":"break-word","white-space":"pre-wrap"}},_.getExpandIcon=function(E){var m,v,f=E.open,d=E.color;switch(E.position){case"top":m="dxi-chevron-up",v="dxi-chevron-down";break;case"bottom":m="dxi-chevron-down",v="dxi-chevron-up";break;case"right":m="dxi-chevron-right",v="dxi-chevron-left";break;case"left":m="dxi-chevron-left",v="dxi-chevron-right"}var p=f?"dxi ".concat(v," dhx_diagram_toggle-icon dhx_diagram_toggle-icon--collapse"):"dxi ".concat(m," dhx_diagram_toggle-icon dhx_diagram_toggle-icon--expand");return(0,b.el)("div.dhx_diagram_icon",[(0,b.el)("i",{class:p,style:{color:d}})])},_.getMenuIcon=function(E){var m=E.dir,v=E.color,f=m==="cols"?"dxi dxi-dots-vertical":"dxi dxi-dots-horizontal";return(0,b.el)("div.dhx_diagram_icon.dhx_diagram_menu_icon",[(0,b.el)("i",{class:f,style:{color:v}})])},_.getGroupContainerStyle=function(E,m){var v,f=E.$width,d=E.$height,p=E.$captureArea,u=E.$group,s=E.$selected,l=E.type,r=E.style,a=r.borderStyle,i=r.strokeWidth,n=r.stroke,e=r.overFill,t=r.partiallyFill,o=r.fill,c=u||s?s&&l!=="$sgroup"?2:1:0;switch(p){case"over":v=e;break;case"partially":v=t;break;default:v=o}return{position:"absolute",background:v,outline:"".concat(i,"px ").concat(a," ").concat(n),outlineOffset:-i,width:f,height:d,top:m.y,left:m.x,zIndex:c}},_.getSwimlaneBackGround=function(E,m){var v,f=E.$width,d=E.$height,p=E.$captureArea,u=E.style,s=u.overFill,l=u.partiallyFill,r=u.fill;switch(p){case"over":v=s;break;case"partially":v=l;break;default:v=r}return{position:"absolute",background:v,width:f,height:d,top:m.y,left:m.x,zIndex:-1}},_.getSwimlaneContainerStyle=function(E,m){var v=E.$width,f=E.$height,d=E.$group,p=E.$selected,u=E.type,s=E.style,l=s.borderStyle,r=s.strokeWidth,a=s.stroke,i=d||p?p&&u!=="$sgroup"?2:1:0;return{position:"absolute",outline:"".concat(r,"px ").concat(l," ").concat(a),outlineOffset:-r,width:v,height:f,top:m.y,left:m.x,zIndex:i}},_.getTextStyle=function(E){var m=E.lineHeight,v=E.textAlign,f=E.textVerticalAlign,d=E.fontSize,p=E.fontColor,u=E.fontStyle,s=E.fontWeight,l=E.container,r=l.width,a=l.height,i={center:"center",left:"flex-start",right:"flex-end",bottom:"flex-end",top:"flex-start"};return{"justify-content":i[v],"align-items":i[f],fontStyle:u||"normal",fontWeight:s||"500",lineHeight:"".concat(parseInt(m),"px"),fontSize:d,color:p,width:typeof r=="number"?"".concat(r-4-20,"px"):r,height:typeof a=="number"?"".concat(a-4-20,"px"):a}}},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.INPUT_PADDING_RIGHT_8=_.INPUT_PADDING_RIGHT_4=_.INPUT_WIDTH_50=void 0,_.INPUT_WIDTH_50="50%",_.INPUT_PADDING_RIGHT_4="0 4px 0 0",_.INPUT_PADDING_RIGHT_8="0 8px 0 0"},function(W,_,y){var b=this&&this.__createBinding||(Object.create?function(m,v,f,d){d===void 0&&(d=f);var p=Object.getOwnPropertyDescriptor(v,f);p&&!("get"in p?!v.__esModule:p.writable||p.configurable)||(p={enumerable:!0,get:function(){return v[f]}}),Object.defineProperty(m,d,p)}:function(m,v,f,d){d===void 0&&(d=f),m[d]=v[f]}),E=this&&this.__exportStar||function(m,v){for(var f in m)f==="default"||Object.prototype.hasOwnProperty.call(v,f)||b(v,m,f)};Object.defineProperty(_,"__esModule",{value:!0}),E(y(127),_),E(y(128),_),E(y(129),_),E(y(67),_),E(y(46),_)},function(W,_,y){var b,E,m,v;Object.defineProperty(_,"__esModule",{value:!0}),_.DataDriver=_.DragEvents=_.DataEvents=_.TreeFilterType=void 0,function(f){f.all="all",f.level="level",f.leafs="leafs"}(b||(_.TreeFilterType=b={})),function(f){f.afterAdd="afteradd",f.beforeAdd="beforeadd",f.removeAll="removeall",f.beforeRemove="beforeremove",f.afterRemove="afterremove",f.change="change",f.filter="filter",f.dataRequest="dataRequest",f.load="load",f.loadError="loaderror",f.beforeLazyLoad="beforelazyload",f.afterLazyLoad="afterlazyload",f.beforeItemLoad="beforeItemLoad",f.afterItemLoad="afterItemLoad"}(E||(_.DataEvents=E={})),function(f){f.beforeDrag="beforeDrag",f.dragStart="dragStart",f.dragOut="dragOut",f.dragIn="dragIn",f.canDrop="canDrop",f.cancelDrop="cancelDrop",f.beforeDrop="beforeDrop",f.afterDrop="afterDrop",f.afterDrag="afterDrag"}(m||(_.DragEvents=m={})),function(f){f.json="json",f.csv="csv",f.xml="xml"}(v||(_.DataDriver=v={}))},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.isOnlyPermanentFilters=_.hasJsonOrArrayStructure=_.isTreeCollection=_.copyWithoutInner=_.toDataDriver=_.toProxy=_.dhxError=_.dhxWarning=_.isDebug=_.findByConf=_.naturalCompare=_.isEqualObj=void 0;var b=y(1),E=y(32),m=y(69);_.isEqualObj=function(v,f){for(var d in v)if(v[d]!==f[d]||Array.isArray(v[d]))return!1;return!0},_.naturalCompare=function(v,f){if(isNaN(v)||isNaN(f)){var d=[],p=[];for(v.replace(/(\d+)|(\D+)/g,function(r,a,i){d.push([a||1/0,i||""])}),f.replace(/(\d+)|(\D+)/g,function(r,a,i){p.push([a||1/0,i||""])});d.length&&p.length;){var u=d.shift(),s=p.shift(),l=u[0]-s[0]||u[1].localeCompare(s[1]);if(l)return l}return d.length-p.length}return v-f},_.findByConf=function(v,f){if(typeof f=="function"){if(f.call(this,v))return v}else if(f.by&&f.match&&v[f.by]===f.match)return v},_.isDebug=function(){var v=window.dhx;if(v!==void 0)return v.debug!==void 0&&v.debug},_.dhxWarning=function(v){console.warn(v)},_.dhxError=function(v){throw new Error(v)},_.toProxy=function(v){var f=typeof v;return f==="string"?new E.DataProxy(v):f==="object"?v:void 0},_.toDataDriver=function(v){if(typeof v=="string"){var f=window.dhx,d=f&&f.dataDrivers||m.dataDrivers;if(d[v])return new d[v];console.warn("Incorrect data driver type:",v),console.warn("Available types:",JSON.stringify(Object.keys(d)))}else if(typeof v=="object")return v},_.copyWithoutInner=function(v,f){var d={};for(var p in v)p.startsWith("$")||f&&f[p]||(d[p]=v[p]);return d},_.isTreeCollection=function(v){return!!v.getRoot},_.hasJsonOrArrayStructure=function(v){if(typeof v=="object")return!0;if(typeof v!="string")return!1;try{var f=JSON.parse(v);return Object.prototype.toString.call(f)==="[object Object]"||Array.isArray(f)}catch{return!1}},_.isOnlyPermanentFilters=function(v){return!(!v||(0,b.isEmptyObj)(v))&&Object.keys(v).every(function(f){var d;return(d=v[f].config)===null||d===void 0?void 0:d.permanent})}},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.DateHelper=_.stringToDate=_.getFormattedDate=_.locale=void 0;var b=y(1),E=y(1);_.locale={monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Monday"],cancel:"Cancel"};var m,v={"%d":function(s){var l=s.getDate();return l<10?"0"+l:l},"%j":function(s){return s.getDate()},"%l":function(s){return _.locale.days[s.getDay()]},"%D":function(s){return _.locale.daysShort[s.getDay()]},"%m":function(s){var l=s.getMonth()+1;return l<10?"0"+l:l},"%n":function(s){return s.getMonth()+1},"%M":function(s){return _.locale.monthsShort[s.getMonth()]},"%F":function(s){return _.locale.months[s.getMonth()]},"%y":function(s){return s.getFullYear().toString().slice(2)},"%Y":function(s){return s.getFullYear()},"%h":function(s){var l=s.getHours()%12;return l===0&&(l=12),l<10?"0"+l:l},"%g":function(s){var l=s.getHours()%12;return l===0&&(l=12),l},"%H":function(s){var l=s.getHours();return l<10?"0"+l:l},"%G":function(s){return s.getHours()},"%i":function(s){var l=s.getMinutes();return l<10?"0"+l:l},"%s":function(s){var l=s.getSeconds();return l<10?"0"+l:l},"%a":function(s){return s.getHours()>=12?"pm":"am"},"%A":function(s){return s.getHours()>=12?"PM":"AM"},"%u":function(s){return s.getMilliseconds()}},f={"%d":function(s,l,r,a){var i=/(^([0-9][0-9])$)/i.test(l);if(a)return i;i?s.setDate(Number(l)):s.setDate(1)},"%j":function(s,l,r,a){var i=/(^([0-9]?[0-9])$)/i.test(l);if(a)return i;i?s.setDate(Number(l)):s.setDate(1)},"%m":function(s,l,r,a){var i=/(^([0-9][0-9])$)/i.test(l);if(a)return i;i?s.setMonth(Number(l)-1):s.setMonth(0),i&&s.getMonth()!==Number(l)-1&&s.setMonth(Number(l)-1)},"%n":function(s,l,r,a){var i=/(^([0-9]?[0-9])$)/i.test(l);if(a)return i;i?s.setMonth(Number(l)-1):s.setMonth(0),i&&s.getMonth()!==Number(l)-1&&s.setMonth(Number(l)-1)},"%M":function(s,l,r,a){var i=(0,E.findIndex)(_.locale.monthsShort,function(n){return n===l});if(a)return i!==-1;i===-1?s.setMonth(0):s.setMonth(i),i!==-1&&s.getMonth()!==i&&s.setMonth(i)},"%F":function(s,l,r,a){var i=(0,E.findIndex)(_.locale.months,function(n){return n===l});if(a)return i!==-1;i===-1?s.setMonth(0):s.setMonth(i),i!==-1&&s.getMonth()!==i&&s.setMonth(i)},"%y":function(s,l,r,a){var i=/(^([0-9][0-9])$)/i.test(l);if(a)return i;i?s.setFullYear(+("20"+l)):s.setFullYear(2e3)},"%Y":function(s,l,r,a){var i=/(^([0-9][0-9][0-9][0-9])$)/i.test(l);if(a)return i;i?s.setFullYear(Number(l)):s.setFullYear(2e3)},"%h":function(s,l,r,a){var i=/(^0[1-9]|1[0-2]$)/i.test(l);if(a)return i;i&&(r==="am"||r==="pm")||r==="AM"||r==="PM"?s.setHours(Number(l)):s.setHours(0)},"%g":function(s,l,r,a){var i=/(^[1-9]$)|(^0[1-9]|1[0-2]$)/i.test(l);if(a)return i;i&&(r==="am"||r==="pm")||r==="AM"||r==="PM"?s.setHours(Number(l)):s.setHours(0)},"%H":function(s,l,r,a){var i=/(^[0-2][0-9]$)/i.test(l);if(a)return i;i?s.setHours(Number(l)):s.setHours(0)},"%G":function(s,l,r,a){var i=/(^[1-9][0-9]?$)/i.test(l);if(a)return i;i?s.setHours(Number(l)):s.setHours(0)},"%i":function(s,l,r,a){var i=/(^([0-5][0-9])$)/i.test(l);if(a)return i;i?s.setMinutes(Number(l)):s.setMinutes(0)},"%s":function(s,l,r,a){var i=/(^([0-5][0-9])$)/i.test(l);if(a)return i;i?s.setSeconds(Number(l)):s.setSeconds(0)},"%u":function(s,l,r,a){var i=/(^([0-9][0-9][0-9])$)/i.test(l);if(a)return i;i?s.setMilliseconds(Number(l)):s.setMilliseconds(0)},"%a":function(s,l,r,a){if(a)return l==="pm"||l==="am";l==="pm"&&s.setHours(s.getHours()+12)},"%A":function(s,l,r,a){if(a)return l==="PM"||l==="AM";l==="PM"&&s.setHours(s.getHours()+12)}};function d(s){for(var l=[],r="",a=0;a<s.length;a++)s[a]==="%"?(r.length>0&&(l.push({type:m.separator,value:r}),r=""),l.push({type:m.datePart,value:s[a]+s[a+1]}),a++):r+=s[a];return r.length>0&&l.push({type:m.separator,value:r}),l}(function(s){s[s.separator=0]="separator",s[s.datePart=1]="datePart"})(m||(m={})),_.getFormattedDate=function(s,l){return d(s).reduce(function(r,a){return a.type===m.separator?r+a.value:v[a.value]?r+v[a.value](l):r},"")};var p={"%Y":1,"%y":1,"%M":2,"%F":2,"%m":2,"%n":2};function u(s,l,r){if(typeof s=="string"){l=l.replace(/([a-z])(%a)/i,function(){for(var O=[],D=0;D<arguments.length;D++)O[D]=arguments[D];return s=s.replace(/(am|pm)/i," $&"),O[1]+" "+O[2]});for(var a,i=d(l),n=new Array(2),e=0,t=null,o="Incorrect date, see docs: https://docs.dhtmlx.com/suite/calendar__api__calendar_dateformat_config.html",c=function(O){var D=p[O.formatter];D?n[D-1]=O:(O.formatter!=="%A"&&O.formatter!=="%a"||(a=O.value),n.push(O))},h=0;h<i.length;h++)if(i[h].type===m.separator){var g=s.indexOf(i[h].value,e);if(g===-1){if(r)return!1;throw new Error(o)}t&&(c({formatter:t,value:s.slice(e,g)}),t=null),e=g+i[h].value.length}else if(i[h].type===m.datePart){if(i[h+1]&&i[h+1].type!==m.separator){if(r)return!1;throw new Error(o)}t=i[h].value}t&&c({formatter:t,value:s.slice(e)});for(var x=new Date(0),C=0,k=n;C<k.length;C++){var I=k[C];if(I&&f[I.formatter]){if(r&&!f[I.formatter](x,I.value,a,r))return!1;f[I.formatter](x,I.value,a)}}return!!r||x}}_.stringToDate=u,_.DateHelper=function(){function s(){}return s.copy=function(l){return new Date(l)},s.fromYear=function(l){return new Date(l,0,1)},s.fromYearAndMonth=function(l,r){return new Date(l,r,1)},s.weekStart=function(l,r){var a=(l.getDay()+7-r)%7;return new Date(l.getFullYear(),l.getMonth(),l.getDate()-a)},s.monthStart=function(l){return new Date(l.getFullYear(),l.getMonth(),1)},s.yearStart=function(l){return new Date(l.getFullYear(),0,1)},s.dayStart=function(l){return new Date(l.getFullYear(),l.getMonth(),l.getDate())},s.addDay=function(l,r){return r===void 0&&(r=1),new Date(l.getFullYear(),l.getMonth(),l.getDate()+r)},s.addMonth=function(l,r){return r===void 0&&(r=1),new Date(l.getFullYear(),l.getMonth()+r)},s.addYear=function(l,r){return r===void 0&&(r=1),new Date(l.getFullYear()+r,l.getMonth())},s.withHoursAndMinutes=function(l,r,a,i){return i===void 0||!i&&r===12||i&&r!==12?new Date(l.getFullYear(),l.getMonth(),l.getDate(),r,a):i&&r===12?new Date(l.getFullYear(),l.getMonth(),l.getDate(),0,a):new Date(l.getFullYear(),l.getMonth(),l.getDate(),r+12,a)},s.setMonth=function(l,r){l.setMonth(r)},s.setYear=function(l,r){l.setFullYear(r)},s.mergeHoursAndMinutes=function(l,r){return new Date(l.getFullYear(),l.getMonth(),l.getDate(),r.getHours(),r.getMinutes())},s.isWeekEnd=function(l){return l.getDay()===0||l.getDay()===6},s.getTwelweYears=function(l){var r=l.getFullYear(),a=r-r%12;return(0,b.range)(a,a+11)},s.getDayOrdinal=function(l){return(l.valueOf()-s.yearStart(l).valueOf())/864e5},s.getWeekNumber=function(l){var r=l.getDay()===4?l:s.addDay(l,4-l.getDay()),a=s.getDayOrdinal(r);return Math.trunc(a/7)+1},s.isSameDay=function(l,r){return l.getFullYear()===r.getFullYear()&&l.getMonth()===r.getMonth()&&l.getDate()===r.getDate()},s.toDateObject=function(l,r){return typeof l=="string"?u(l,r):new Date(l)},s.nullTimestampDate=new Date(0),s}()},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(h){for(var g,x=1,C=arguments.length;x<C;x++)for(var k in g=arguments[x])Object.prototype.hasOwnProperty.call(g,k)&&(h[k]=g[k]);return h},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.proRender=_.render=_.applyAutoWidth=_.getElementSizes=_.getRenderConfig=_.getCurrFixedCols=_.calcScrollBarWidth=_.BORDERS=void 0;var E=y(0),m=y(2),v=y(18),f=y(15),d=y(7),p=y(33),u=y(87),s=y(88),l=y(1);function r(h,g,x){var C,k;g===void 0&&(g=!1);var I=h.$totalHeight+h.$headerHeight+h.$footerHeight+_.BORDERS>((C=x==null?void 0:x.height)!==null&&C!==void 0?C:h.$height),O=!I||g?0:(0,m.getScrollbarWidth)(),D=h.$totalWidth+_.BORDERS+O>((k=x==null?void 0:x.width)!==null&&k!==void 0?k:h.$width);return{x:!D||g?0:(0,m.getScrollbarWidth)(),y:O,xState:D,yState:I}}function a(h,g){return h[g]?(g===d.Split.left?h.columns.slice(0,h.leftSplit):h.columns.slice(-h.rightSplit)).filter(function(x){return!x.hidden}):[]}function i(h,g,x,C){var k=x===void 0?[0,0]:x,I=k[0],O=k[1],D=h[0],A=h[1],H=g[0],S=g[1];return H<=D&&D<=S||H<=A&&A<=S||D<=H&&S<=A||D<I||O&&A>=C-O}function n(h,g,x){var C=h.config,k=C.spans,I=k===void 0?[]:k,O=C.columns,D=C.leftSplit,A=D===void 0?0:D,H=C.topSplit,S=H===void 0?0:H,$=C.rightSplit,w=$===void 0?0:$,T=C.bottomSplit,F=T===void 0?0:T,z=O.filter(function(q){return!q.hidden}),B=(0,v.calculatePositions)(x.width,x.height,h._scroll,C,g),L=z.slice(B.xStart,B.xEnd),M=g.slice(B.yStart,B.yEnd),P=I.filter(function(q){var G;if(!(!((G=q.$renderFrom)===null||G===void 0)&&G.length))return!1;var U=i(q.$rowsVisibility,[B.yStart,B.yEnd],[S,F],g.length),Z=i(q.$colsVisibility,[B.xStart,B.xEnd],[A,w],O.length);return U&&Z}),V={left:a(C,d.Split.left),right:a(C,d.Split.right)},R={top:g.slice(0,C.topSplit||0),bottom:C.bottomSplit?g.slice(-C.bottomSplit):[]};return b(b({},C),{data:g,columns:C.columns,scroll:h._scroll,$positions:B,headerHeight:C.$headerHeight,footerHeight:C.$footerHeight,firstColId:z[0]&&z[0].id,events:h.events,_events:h._events,filteredColumns:z,currentColumns:L,currentRows:M,currentSpans:P,fixedColumns:V,fixedRows:R,sortBy:h._sortBy,sortDir:h._sortDir,content:h.content,gridId:h._uid,$renderFrom:"render"})}function e(h){if(h&&(h.tagName||(h=h._parent._container),h)){var g=h.currentStyle||window.getComputedStyle(h),x=parseFloat(g.paddingLeft)+parseFloat(g.paddingRight)||0,C=parseFloat(g.paddingTop)+parseFloat(g.paddingBottom)||0;return{width:h.clientWidth-x,height:h.clientHeight-C}}}function t(h,g){var x,C=(0,p.getCells)(h),k=h.filteredColumns,I=h.$resizing,O=h.$totalHeight,D=h.$totalWidth,A=h.leftSplit,H=h.data,S=h.$positions,$=(0,p.getSpans)(h);if(I){var w=(0,l.findIndex)(k,function(L){return L.id===I}),T=(0,f.getTotalWidth)(k.slice(0,w))+k[w].$width;x=(0,E.el)(".dhx_grid-resize-line",{style:{top:0,left:T,height:O}})}var F=h.selection?h.selection.toHTML():null;F=typeof F=="string"?(0,E.el)("div.dhx_selection",{".innerHTML":F}):F;var z,B=S;return(0,E.el)(".dhx_data-wrap",{style:{height:O,width:D,"padding-left":g.x,"padding-top":g.y},role:"presentation"},[(0,E.el)(".dhx_grid_data".concat(A?".dhx_grid_fixed_left":""),b(b({_flags:E.KEYED_LIST},(0,p.getHandlers)(B.yStart,B.xStart,h)),(z=H.length,{role:"rowgroup","aria-rowcount":z})),C),(0,E.el)(".dhx_span-spans",b({role:"presentation"},(0,p.getHandlers)(B.yStart,B.xStart,h)),$),(0,E.el)(".dhx_grid_selection",{_ref:"selection","aria-hidden":"true"},[F,x])])}function o(h,g,x){var C=x.height-_.BORDERS;return C=g?C:C-h.headerHeight,h.$footer?g?C:C-h.footerHeight:C}function c(h,g,x,C,k){x===void 0&&(x=!0),C===void 0&&(C=!1),k===void 0&&(k=!1);var I=!k&&h.$totalHeight>=g.height-h.$headerHeight?(0,m.getScrollbarWidth)():0,O=g.width-_.BORDERS-I,D=h.columns.filter(function(w){return!w.hidden}),A=D.filter(function(w){return!w.width&&!w.$fixed&&(0,f.isAutoWidth)(h,w)}),H=(0,f.getTotalWidth)(D.filter(function(w){return w.width||w.$fixed||!(0,f.isAutoWidth)(h,w)})),S=A.reduce(function(w,T){return w+(T.gravity||1)},0);if(O<h.$totalWidth){var $=A.reduce(function(w,T){return w+(T.maxWidth||T.$width)},0);A.length&&A.forEach(function(w){var T=0,F=(T=x?Math.abs(O-$)*((w.gravity||1)/S):Math.abs(O-H)*((w.gravity||1)/S))<w.minWidth||w.minWidth<w.$width,z=T>w.maxWidth;F||z?F?(H+=w.$width-T,w.$fixed=!0):z&&(w.$width=w.maxWidth,w.$fixed=!0):w.$width=T,w.$width<20&&(w.$width=20)})}else A.forEach(function(w){var T=Math.abs(O-H)*((w.gravity||1)/S),F=T<w.minWidth||w.minWidth<w.$width,z=T>w.maxWidth;F||z?F?(H+=w.$width-T,C&&(w.$fixed=!0)):z&&(w.$width=w.maxWidth,C&&(w.$fixed=!0)):w.$width=T,w.$width<20&&(w.$width=20),!x&&w.$fixed&&delete w.$fixed});x&&c(h,g,!1,C,k)}_.BORDERS=2,_.calcScrollBarWidth=r,_.getCurrFixedCols=a,_.getRenderConfig=n,_.getElementSizes=e,_.applyAutoWidth=c,_.render=function(h,g,x,C,k){if(g._container||(g.config.$width=1,g.config.$height=1),h&&h.node&&h.node.parent&&h.node.parent.el){var I=e(h.node.parent.el);g.config.$width=I.width,g.config.$height=I.height}var O=g.config;if(!O)return(0,E.el)("div");if(!O.columns.length)return(0,E.el)(".dhx_grid",{"data-dhx-widget-id":k,"data-dhx-root-id":O.rootParent,role:"empty-grid"});var D=g.data.getRawData(0,-1,null,2);O.columns.reduce(function(et,ot){return ot.hidden?et:ot.hidden},!0)?O.$totalHeight=0:O.$totalHeight=D.reduce(function(et,ot){return et+(ot.$height||0)},0);var A=e(g._container),H={width:(O.$width?O.$width:O.width&&typeof O.width=="number"?O.width:A==null?void 0:A.width)||0,height:(O.$height?O.$height:O.height&&typeof O.height=="number"?O.height:A==null?void 0:A.height)||0};(0,f.isAutoWidth)(O)&&(c(O,H),O.$totalWidth=(0,f.getTotalWidth)(O.columns.filter(function(et){return!et.hidden}))),O.$width=H.width,O.$height=H.height;var S=n(g,D,H);S.selection=C,S.datacollection=g.data;var $=(0,p.getShifts)(S);S.$scrollBarWidth=r(S);var w,T,F,z,B=(0,f.isCssSupport)("position","sticky"),L=o(S,B,H),M={wrapper:H,sticky:B,shifts:$,gridBodyHeight:L},P=(0,s.getFixedRows)(S,b(b({},M),{name:"header",position:"top"})),V=S.$footer?(0,s.getFixedRows)(S,b(b({},M),{name:"footer",position:"bottom"})):null,R=S.$totalWidth+_.BORDERS<H.width?"dhx_grid-less-width":"",q=S.$totalHeight+_.BORDERS<H.height?"dhx_grid-less-height":"",G=S.fixedColumns.right.length?"dhx_grid__contains_cols_right--fixed":"",U=O.bottomSplit?"dhx_grid__contains_rows_bottom--fixed":"";if(!h.node){var Z=g.getScrollState(),Q=Z.x,tt=Z.y;(0,E.awaitRedraw)().then(function(){g.scroll(Q,tt)})}return(0,E.el)(".dhx_grid.dhx_widget",b({class:(S.css||"")+(B?"":" dhx_grid_border")+(O.multiselection?" dhx_no-select--pointer":""),"data-dhx-widget-id":k,"data-dhx-root-id":O.rootParent},(w=S.data,T=O.columns,F=S.editable,z=S.multiselection,{role:"grid","aria-rowcount":w.length,"aria-colcount":T.filter(function(et){return!et.hidden}).length,"aria-readonly":F?"false":"true","aria-multiselectable":z?"true":"false"})),[(0,E.resizer)(function(et){return(0,f.isAutoWidth)(g.config)&&et&&(O.$totalWidth=0,c(O,H,!0,!0)),g.paint()}),(0,E.el)(".dhx_grid-content",{style:b({},H),onclick:x.onclick,onmouseover:x.onmouseover,class:"".concat(R," ").concat(q," ").concat(G," ").concat(U).trim(),role:"presentation"},[B?null:P,(0,E.el)(".dhx_grid-body",{style:{height:L,width:H.width-_.BORDERS},onscroll:x.onscroll,_ref:"grid_body",role:"presentation"},[(0,E.el)("div",{},[B?P:null,t(S,$),B?V:null])]),(0,u.getFixedColsHeader)(S,M,d.Split.left),(0,u.getFixedColsHeader)(S,M,d.Split.right),(0,u.getFixedCols)(S,M,d.Split.left),(0,u.getFixedCols)(S,M,d.Split.right),(0,s.getFixedDataRows)(S,M,d.Split.top),(0,s.getFixedDataRows)(S,M,d.Split.bottom),B?null:V])])},_.proRender=function(h,g,x,C,k){var I,O;g._container||(g.config.$width=1,g.config.$height=1),h&&h.node&&h.node.parent&&h.node.parent.el&&(O=e(h.node.parent.el),g.config.$width=O.width,g.config.$height=O.height);var D=g.config;if(!D)return(0,E.el)("div");if(!D.columns.length)return(0,E.el)(".dhx_grid",{"data-dhx-widget-id":k,"data-dhx-root-id":D.rootParent,role:"empty-grid"});var A,H,S,$=g.data.getRawData(0,-1,null,2);D.columns.reduce(function(ot,rt){return rt.hidden?ot:rt.hidden},!0)?D.$totalHeight=0:D.$totalHeight=$.reduce(function(ot,rt){return ot+(rt.$height||0)},0);var w=e(g._container);g.config.height==="auto"&&(S=function(ot,rt,st){var ut,at,ct=ot._container,ft=rt.$headerHeight+(rt.$footerHeight&&rt.$footerHeight+1)+rt.$totalHeight+_.BORDERS;if(ct){var vt=window.getComputedStyle(ct),_t=vt.minHeight,gt=vt.maxHeight;return ft<=parseFloat(_t)?parseFloat(_t):ft>=parseFloat(gt)?parseFloat(gt):ft+r(rt,!!(!((ut=ot.scrollView)===null||ut===void 0)&&ut.config.enable),st).x}return ft+(st?r(rt,!!(!((at=ot.scrollView)===null||at===void 0)&&at.config.enable),st).x:0)}(g,D,O||w)),A=D.$width?D.$width:D.width&&typeof D.width=="number"?D.width:w==null?void 0:w.width,H=D.$height?D.$height:D.height&&typeof D.height=="number"?D.height:w==null?void 0:w.height;var T={width:A||0,height:(g.config.height==="auto"?S:H)||0};(0,f.isAutoWidth)(D)&&(c(D,T,!0,!1,g.scrollView&&g.scrollView.config.enable),D.$totalWidth=(0,f.getTotalWidth)(D.columns.filter(function(ot){return!ot.hidden}))),D.$width=T.width,D.$height=T.height;var F=n(g,$,T);F.selection=C,F.datacollection=g.data;var z=(0,p.getShifts)(F);F.$scrollBarWidth=r(F,!!(!((I=g.scrollView)===null||I===void 0)&&I.config.enable));var B=(0,f.isCssSupport)("position","sticky"),L=o(F,B,T),M={wrapper:T,sticky:B,shifts:z,gridBodyHeight:L},P=(0,s.getFixedRows)(F,b(b({},M),{name:"header",position:"top"})),V=F.$footer?(0,s.getFixedRows)(F,b(b({},M),{name:"footer",position:"bottom"})):null,R=F.$totalWidth+_.BORDERS<T.width?"dhx_grid-less-width":"",q=F.$totalHeight+_.BORDERS<T.height?"dhx_grid-less-height":"",G=F.fixedColumns.right.length?"dhx_grid__contains_cols_right--fixed":"",U=D.bottomSplit?"dhx_grid__contains_rows_bottom--fixed":"";if(!h.node){var Z=g.getScrollState(),Q=Z.x,tt=Z.y;(0,E.awaitRedraw)().then(function(){g.scroll(Q,tt)})}var et=(0,E.el)("div",{},[B?P:null,t(F,z),B?V:null]);return(0,E.el)(".dhx_grid.dhx_widget",{class:(F.css||"")+(B?"":" dhx_grid_border")+(D.multiselection?" dhx_no-select--pointer":""),style:{height:S??null},"data-dhx-widget-id":k,"data-dhx-root-id":D.rootParent,role:"grid","aria-rowcount":F.data.length,"aria-colcount":D.columns.filter(function(ot){return!ot.hidden}).length},[(0,E.resizer)(function(ot){return(0,f.isAutoWidth)(g.config)&&ot&&(D.$totalWidth=0,c(D,T,!0,!0)),g.paint()}),(0,E.el)(".dhx_grid-content",{style:b({},T),onclick:x.onclick,onmouseover:x.onmouseover,class:"".concat(R," ").concat(q," ").concat(G," ").concat(U).trim(),role:"presentation"},[B?null:P,(0,E.el)(".dhx_grid-body",{style:{height:L,width:T.width-_.BORDERS},onscroll:x.onscroll,_ref:"grid_body",role:"presentation"},[g.scrollView&&g.scrollView.config.enable?g.scrollView.render([et]):et]),(0,u.getFixedColsHeader)(F,M,d.Split.left),(0,u.getFixedColsHeader)(F,M,d.Split.right),(0,u.getFixedCols)(F,M,d.Split.left),(0,u.getFixedCols)(F,M,d.Split.right),(0,s.getFixedDataRows)(F,M,d.Split.top),(0,s.getFixedDataRows)(F,M,d.Split.bottom),B?null:V])])}},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.normalizeCell=_.getReducedColspan=_.getHeight=_.getWidth=void 0,_.getWidth=function(b,E,m){return b.slice(m,m+(E||1)).filter(function(v){return!v.hidden}).reduce(function(v,f){return v+f.$width},0)},_.getHeight=function(b,E,m){var v=b.filter(function(f){return!f.hidden});return E?v.reduce(function(f,d,p){var u=d.$height;return f+=p>=m&&p<m+E?u:0},0):v[m].$height},_.getReducedColspan=function(b,E,m){var v=b.findIndex(function(f){return f.id===E});return b.slice(v,v+(m||1)).filter(function(f){return!f.hidden}).length},_.normalizeCell=function(b,E){if(b){var m=b.row,v=b.column,f=E.getSpan(m.id,v.id);return f?{row:m.id===f.row?m:E.data.getItem(f.row),column:v.id===f.column?v:E.config.columns.find(function(d){return d.id===f.column})}:b}}},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.DiagramEvents=_.DataEvents=_.SelectionEvents=void 0;var b=y(35);Object.defineProperty(_,"SelectionEvents",{enumerable:!0,get:function(){return b.SelectionEvents}});var E,m=y(8);Object.defineProperty(_,"DataEvents",{enumerable:!0,get:function(){return m.DataEvents}}),function(v){v.scroll="scroll",v.beforeRender="beforerender",v.emptyAreaClick="emptyAreaClick",v.emptyAreaDblClick="emptyAreaDblClick",v.emptyAreaMouseDown="emptyAreaMouseDown",v.beforeSubmenuOpen="beforeSubmenuOpen",v.afterSubmenuOpen="afterSubmenuOpen",v.beforeCollapse="beforeCollapse",v.afterCollapse="afterCollapse",v.beforeExpand="beforeExpand",v.afterExpand="afterExpand",v.shapeMouseDown="shapeMouseDown",v.shapeClick="shapeClick",v.shapeDblClick="shapeDblClick",v.shapeIconClick="shapeIconClick",v.lineMouseDown="lineMouseDown",v.lineClick="lineClick",v.lineDblClick="lineDblClick",v.lineTitleMouseDown="lineTitleMouseDown",v.lineTitleClick="lineTitleClick",v.lineTitleDblClick="lineTitleDblClick",v.groupMouseDown="groupMouseDown",v.groupClick="groupClick",v.groupDblClick="groupDblClick",v.groupHeaderClick="groupHeaderClick",v.groupHeaderDblClick="groupHeaderDblClick",v.itemMouseDown="itemMouseDown",v.itemClick="itemClick",v.itemDblClick="itemDblClick",v.itemMouseOver="itemMouseOver",v.itemMouseOut="itemMouseOut",v.shapeHover="shapeHover"}(E||(_.DiagramEvents=E={}))},function(W,_,y){var b,E=this&&this.__extends||(b=function(v,f){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var u in p)Object.prototype.hasOwnProperty.call(p,u)&&(d[u]=p[u])},b(v,f)},function(v,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function d(){this.constructor=v}b(v,f),v.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.BaseShape=void 0;var m=function(v){function f(d,p){var u=v.call(this,d,p)||this;return d.width&&(d.width=parseFloat(d.width)),d.height&&(d.height=parseFloat(d.height)),d.x&&(d.x=parseFloat(d.x)),d.y&&(d.y=parseFloat(d.y)),d.strokeWidth&&(d.strokeWidth=parseFloat(d.strokeWidth)),u}return E(f,v),f.prototype.getBaseType=function(){return"shape"},f.prototype.getCenter=function(){var d=this.config;return{x:Math.abs(d.width/2),y:Math.abs(d.height/2)}},f.prototype.getPoint=function(d,p){var u=this.config;if(u.angle){var s=u.x+u.width/2,l=u.y+u.height/2,r=u.angle*(Math.PI/180);return{x:(d-s)*Math.cos(r)-(p-l)*Math.sin(r)+s,y:(d-s)*Math.sin(r)+(p-l)*Math.cos(r)+l}}return{x:d,y:p}},f}(y(54).BaseItem);_.BaseShape=m},function(W,_,y){var b=this&&this.__createBinding||(Object.create?function(d,p,u,s){s===void 0&&(s=u);var l=Object.getOwnPropertyDescriptor(p,u);l&&!("get"in l?!p.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return p[u]}}),Object.defineProperty(d,s,l)}:function(d,p,u,s){s===void 0&&(s=u),d[s]=p[u]}),E=this&&this.__exportStar||function(d,p){for(var u in d)u==="default"||Object.prototype.hasOwnProperty.call(p,u)||b(p,d,u)};Object.defineProperty(_,"__esModule",{value:!0}),_.shapes=_.locale=_.ShapesCollection=void 0,E(y(63),_);var m=y(91);Object.defineProperty(_,"ShapesCollection",{enumerable:!0,get:function(){return m.ShapesCollection}});var v=y(57);Object.defineProperty(_,"locale",{enumerable:!0,get:function(){return v.default}}),E(y(27),_);var f=y(53);Object.defineProperty(_,"shapes",{enumerable:!0,get:function(){return f.shapes}}),E(y(90),_),E(y(55),_)},function(W,_,y){var b=this&&this.__createBinding||(Object.create?function(m,v,f,d){d===void 0&&(d=f);var p=Object.getOwnPropertyDescriptor(v,f);p&&!("get"in p?!v.__esModule:p.writable||p.configurable)||(p={enumerable:!0,get:function(){return v[f]}}),Object.defineProperty(m,d,p)}:function(m,v,f,d){d===void 0&&(d=f),m[d]=v[f]}),E=this&&this.__exportStar||function(m,v){for(var f in m)f==="default"||Object.prototype.hasOwnProperty.call(v,f)||b(v,m,f)};Object.defineProperty(_,"__esModule",{value:!0}),E(y(130),_),E(y(173),_),E(y(38),_)},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.focusManager=void 0;var b=y(2),E=function(){function m(){var v=this;this._initHandler=function(f){return v._activeWidgetId=(0,b.locate)(f,"data-dhx-widget-id")},this._removeFocusClass=function(f){var d=document.body.classList;d.contains("utilityfocus")&&d.remove("utilityfocus")},this._addFocusClass=function(f){var d=document.body.classList;f.code==="Tab"?d.contains("utilityfocus")||d.add("utilityfocus"):d.contains("utilityfocus")&&d.remove("utilityfocus")},document.addEventListener("focusin",this._initHandler),document.addEventListener("pointerdown",this._initHandler),document.addEventListener("mousedown",this._removeFocusClass),document.addEventListener("keydown",this._addFocusClass)}return m.prototype.getFocusId=function(){return this._activeWidgetId},m.prototype.setFocusId=function(v){this._activeWidgetId=v},m}();_.focusManager=new E},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.DataProxy=void 0;var b=y(47),E=function(){function m(v,f){f===void 0&&(f={}),this.url=this._url=v,this.config=f}return m.prototype.updateUrl=function(v,f){for(var d in f===void 0&&(f={}),this._url=this.url=v||this._url,this.url+=this.url.includes("?")?"&":"?",f)this.config[d]=f[d],this.url+="".concat(d,"=").concat(encodeURIComponent(f[d]),"&");this.url=this.url.slice(0,-1)},m.prototype.load=function(){return b.ajax.get(this.url,void 0,this.config)},m.prototype.save=function(v,f){switch(f){case"delete":return b.ajax.delete(this.url,v,this.config);case"update":return b.ajax.put(this.url,v,this.config);default:return b.ajax.post(this.url,v,this.config)}},m}();_.DataProxy=E},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(e){for(var t,o=1,c=arguments.length;o<c;o++)for(var h in t=arguments[o])Object.prototype.hasOwnProperty.call(t,h)&&(e[h]=t[h]);return e},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.normalizeSpan=_.getShifts=_.getSpans=_.getCells=_.getTreeCell=_.getHandlers=void 0;var E=y(1),m=y(0),v=y(26),f=y(15),d=y(7),p=y(140),u=y(2),s=y(18),l=y(25);function r(e,t,o,c,h){t=(0,u.locateNodeByClassName)(h.target,"dhx_grid-fixed-cols-wrap")?0:t;var g=(0,u.locateNodeByClassName)(h.target,"dhx_grid-cell"),x=(0,u.locateNodeByClassName)(h.target,"dhx_span-cell");if((g||x)&&c){var C=g?g.parentNode:x,k=(g||x).getAttribute("data-dhx-col-id"),I=o.filteredColumns.find(function(A){return A.id===k}),O=C.getAttribute("data-dhx-id"),D=(o.$data||o.data).find(function(A){return A.id.toString()===O});c.toLocaleLowerCase().includes("touch")?o._events.fire(c,[D,I,h]):o.events.fire(c,[D,I,h])}}function a(e,t,o,c){var h=c.$editable&&c.$editable.row===t.id&&c.$editable.col===o.id,g=!c.fixedColumns.left.length||c.$renderFrom==="leftFixedCols",x=o.align?"dhx_align-".concat(o.align):"dhx_align-left",C="";g&&(C="dhx_tree-cell ".concat(o.$cellCss[t.id]||""," ").concat(x),t.$items&&(C+=" dhx_grid-expand-cell"),h&&(C+=" dhx_tree-editing-cell"),c.dragMode&&!h&&(C+=(t.$drophere?" dhx_grid-cell--drophere":"")+(t.$dragtarget?" dhx_grid-cell--dragtarget":"")));var k=(0,s.getTreeCellWidthOffset)(t);return(0,m.el)(".dhx_grid-cell",b({class:C,style:{width:o.$width,height:t.$height,padding:t.$items?0:"0 0 0 ".concat(k,"px")},"data-dhx-col-id":o.id},{role:"gridcell","aria-colindex":1}),g?[t.$items?(0,m.el)(".dhx_grid-expand-cell-icon",b(b({class:t.$opened?"dxi dxi-chevron-up":"dxi dxi-chevron-down","data-dhx-id":t.id},function(I){return{role:"button","aria-label":I.$opened?"Collapse group":"Expand group"}}(t)),{style:{padding:t.$level?"0 0 0 ".concat(4+k,"px"):"0 0 0 4px"}})):null,(0,m.el)(".dhx_tree-cell",{class:x+"".concat(c.autoHeight?" dhx_tree-cell_auto-height":"")},[e])]:null)}function i(e,t,o){return(0,p.getEditor)(e,t,o)}function n(e){var t=e.$scrollBarWidth,o=e.$totalWidth-e.$width+l.BORDERS+t.y,c=e.$totalHeight-e.$height+e.$headerHeight+e.$footerHeight+l.BORDERS+t.x;return{x:o>0?o-e.scroll.left:0,y:c>0?c-e.scroll.top:0}}_.getHandlers=function(e,t,o){return{onclick:[r,e,t,o,d.GridEvents.cellClick],onmouseover:[r,e,t,o,d.GridEvents.cellMouseOver],onmousedown:[r,e,t,o,d.GridEvents.cellMouseDown],ondblclick:[r,e,t,o,d.GridEvents.cellDblClick],oncontextmenu:[r,e,t,o,d.GridEvents.cellRightClick],ontouchstart:[r,e,t,o,d.GridEvents.cellMouseDown],ontouchmove:[r,e,t,o,d.GridSystemEvents.cellTouchMove],ontouchend:[r,e,t,o,d.GridSystemEvents.cellTouchEnd]}},_.getTreeCell=a,_.getCells=function(e){if(!e.data||!e.filteredColumns)return[];var t,o=e.$positions,c=e.data?e.data.slice(o.yStart,o.yEnd):[],h=e.filteredColumns.slice(o.xStart,o.xEnd),g=e.selection.getCell(),x=!0,C=document.querySelector(".dhx_drag-ghost");if(C){var k=Array.from(C.querySelectorAll(".dhx_grid-row")).map(function(I){return Number(I.getAttribute("aria-rowindex"))-1});k.length&&(t=k.map(function(I){return e.data[I]}).filter(function(I){return I&&!c.find(function(O){return O.id===I.id})}),c.push.apply(c,t))}return c.map(function(I,O){var D=t==null?void 0:t.some(function(S){return S.id===I.id}),A=c.length-1===O,H="";return e.rowCss&&(H=e.rowCss(I)),I.$css&&(H+=I.$css),(0,m.el)(".dhx_grid-row",b({style:{height:A?I.$height+1:I.$height,display:D?"none":null},"data-dhx-id":I.id,class:H,_key:I.id,_flags:m.KEYED_LIST},D?{}:{role:"row","aria-rowindex":o.yStart+O+1}),I.$customRender?[I.$customRender(I,e)]:h.map(function(S,$){var w,T;if(!S.hidden){var F=I[S.id],z=(0,s.getEditorOptions)(S,I);(S.editable||e.editable&&S.editable!==!1)&&(S.editorType==="select"||S.editorType==="combobox"||S.editorType==="multiselect")&&z&&(F=(F=typeof F=="string"&&S.editorType==="multiselect"?F.split(",").map(function(G){return G.trim()}):[F==null?void 0:F.toString()]).map(function(G){var U,Z;return(Z=(U=z.find(function(Q){return Q.id&&Q.id.toString()===G}))===null||U===void 0?void 0:U.value)!==null&&Z!==void 0?Z:G}).join(", "));var B=(0,s.toFormat)(F,S.type,S.format),L=S.template?S.template(B,I,S):typeof(T=B)!="boolean"&&S.type!=="boolean"||typeof T=="string"?T||T===0?T:"":"".concat(!!T);typeof L=="string"&&(L=(0,f.isHtmlEnable)(e,S)?(0,m.el)("div.dhx_grid-cell__content",b({".innerHTML":L},{role:"button","aria-label":"Edit content"})):L);var M="".concat(S.$cellCss&&S.$cellCss[I.id]||""," dhx_").concat(S.type,"-cell").replace(/\s+/g," "),P=S.$width,V=e.$editable&&e.$editable.row===I.id&&e.$editable.col===S.id&&!e.$editable.isSpan,R=e.leftSplit,q=e.filteredColumns;return(V||S.type==="boolean"&&(e.editable&&((w=S.editable)===null||w===void 0||w)||!e.editable&&S.editable))&&(L=i(I,S,e).toHTML(),M+=" dhx_grid-cell__editable",R===q.indexOf(S)+1&&(P-=1)),e.type==="tree"&&e.firstColId===S.id?a(L,I,S,e):(e.dragMode&&!V&&(M+=(I.$drophere?" dhx_grid-cell--drophere":"")+(I.$dragtarget?" dhx_grid-cell--dragtarget":"")),S.align&&(M+=" dhx_align-".concat(S.align)),(0,f.isHtmlEnable)(e,S)&&(M+=" dhx_grid-cell__content_html-enable"),e.autoHeight&&(M+=" dhx_grid-cell__content_auto-height"),(0,m.el)(".dhx_grid-cell",b({class:M,style:{width:P,height:I.$height+"px"},_key:S.id,"data-dhx-col-id":S.id},function(G,U,Z,Q){return b({role:"gridcell","aria-colindex":U,"aria-readonly":Q?"false":"true"},function(tt,et){var ot={tabindex:-1};return g?g.row.id===et.id&&g.column.id===tt.id&&(ot.tabindex=0):x&&(ot.tabindex=0,ot.onkeydown=function(rt){if(e.selection&&!g&&rt.key==="Tab"){var st=rt.target.parentNode.getAttribute("data-dhx-id"),ut=rt.target.getAttribute("data-dhx-col-id");ut&&st&&(e.selection.setCell(st,ut),g=e.selection.getCell()),x=!1}}),ot}(G,I))}(S,o.xStart+$+1,0,e.editable)),[L]))}}))})},_.getSpans=function(e,t){var o,c,h=[],g=e.columns,x=e.filteredColumns,C=e.data,k=e.currentSpans,I=e.bottomSplit;if(!x.length||!k)return null;for(var O=e.fixedColumns.right.length,D=k.filter(function($){var w;return(w=$.$renderFrom)===null||w===void 0?void 0:w.includes(e.$renderFrom)}),A=D.sort(function($,w){return typeof $.row=="string"&&typeof w.row=="string"?$.row.localeCompare(w.row):$.row-w.row}),H=function($){var w=A[$].row,T=A[$].column,F=A[$].rowspan||1,z=A[$].colspan||1,B=A[$].text,L=A[$].css,M=t===d.Split.bottom&&e.$renderFrom.endsWith("FixedCols"),P=M?e.$data:C,V=x==null?void 0:x.findIndex(function(Mt){return"".concat(Mt.id)==="".concat(T)}),R=P==null?void 0:P.findIndex(function(Mt){return"".concat(Mt.id)==="".concat(w)});if(V<0||R<0)return"continue";if(M){var q=e.$data[R+F-1];if(!C.find(function(Mt){return Mt.id===(q==null?void 0:q.id)}))return"continue"}var G=x[V],U=P[R],Z=G.$cellCss[w],Q=(0,E.isDefined)(A[$].text)?"string":G.type;if(G.hidden)return"continue";var tt=void 0;tt=(0,E.isDefined)(B)?B.toString():U[T]===void 0?"":(0,s.toFormat)(U[T],G.type,G.format);var et=G.template||function(Mt,$e,Ve){return Mt||Mt===0?Mt:""};tt=et(tt,U,G);var ot=(0,f.isHtmlEnable)(e,G);tt=typeof tt=="string"?(0,m.el)("div.dhx_span-cell-content",{".innerHTML":ot?tt:null},ot?null:tt):tt;var rt=void 0;if(e.$renderFrom==="bottomFixedRows"||M){var st=P.length-I;rt=R<st?-(0,f.getTotalHeight)(P.slice(R,st)):(0,f.getTotalHeight)(P.slice(st,R))}else rt=(0,f.getTotalHeight)(P.slice(0,R))-(t?0:1);var ut=0;if(e.$renderFrom==="rightFixedCols"){var at=x.length-e.fixedColumns.right.length;ut=V<at?-(0,f.getTotalWidth)(x.slice(V,at)):(0,f.getTotalWidth)(x.slice(at,V))}else for(var ct=V-1;ct>=0;ct--)ut+=x[ct].$width;var ft=U.$items&&V===0,vt=V===x.length-1,_t=V+(0,v.getReducedColspan)(g,T,z)===x.length,gt=O&&V===x.length-O,j=t===d.Split.bottom&&e.fixedRows.bottom.find(function(Mt){return Mt.id===w}),nt=I&&R+F>P.length-I,xt=O&&V+z===x.length-O,bt=G.header[0].text?" dhx_span-cell":" dhx_span-cell dhx_span-cell--title";bt+=ft?" dhx_span-expand-cell":"",bt+=Z?" ".concat(Z):"",bt+=L?" ".concat(L):"",bt+=R===0?" dhx_span-first-row":"",bt+=R+F===P.length?" dhx_grid__span_bottom--last-row":"",bt+=V===0||gt?" dhx_span-first-col":"",bt+=vt||_t?" dhx_span-last-col":"",bt+=z===1?" dhx_span-".concat(G.type||"string","-cell"):" dhx_span-string-cell",bt+=G.align?" dhx_align-".concat(G.align):" dhx_".concat(Q,"-cell"),bt+=j?" dhx_grid__span_bottom--all-fixed":"",bt+=nt?" dhx_grid__span_bottom--part-fixed":"",bt+=xt?" dhx_grid__span_right--before-fixed":"";var Dt=g==null?void 0:g.findIndex(function(Mt){return"".concat(Mt.id)===T}),Ot=z>1?(0,v.getWidth)(g,z,Dt):G.$width,wt=void 0;if(F>1){if(wt=(0,v.getHeight)(P,F,R),t===d.Split.top&&e.$renderFrom.endsWith("FixedCols")){var kt=R+F-P.length;if(kt>0){var Ct=e.fixedRows.top.length;wt+=(0,f.getTotalHeight)(e.$data.slice(Ct,Ct+kt))}}}else wt=U.$height;var Lt=null;if(!((o=e.$editable)===null||o===void 0)&&o.isSpan&&e.$editable.row===w&&e.$editable.col===T||G.type==="boolean"&&(e.editable&&((c=G.editable)===null||c===void 0||c)||!e.editable&&G.editable)){var Vt=e.topSplit,Nt=e.fixedColumns.left.length,Wt=Nt&&V+z<=Nt||O&&V>=x.length-O,Yt=R<(Vt||0)||R+F>P.length-(I||0),Pt=Vt&&R+F<=Vt||I&&R>=P.length-I,jt=V<(Nt||0)||V+z>x.length-(O||0);if(e.$renderFrom==="render"||Wt&&!Yt||Pt&&!jt){var ge=e.$height,le=e.$scrollBarWidth,Bt=e.scroll,Gt=e.fixedRows,Xt=e.fixedColumns,ce=A[$].text,Ut=0;if(tt=i(U,G,e).toHTML(ce),bt+=" dhx_span__editable",!Pt){var Qt=(0,f.getTotalHeight)(Gt.top),zt=(0,f.getTotalHeight)(Gt.bottom),ve=le.yState?ge-e.$headerHeight-e.$footerHeight-le.x-l.BORDERS:e.$totalHeight,_e=rt+wt-Bt.top,de=rt-Qt<Bt.top,ee=_e>ve-zt;de&&ee&&le.xState&&(Ut=1),rt=de?Bt.top+Qt-(Qt&&!Wt?1:0):rt,wt=ee?ve-rt-zt+Bt.top-Ut:de?_e-Qt:wt}if(e.$renderFrom==="render"){if(Lt=12,Xt.left.find(function(Mt){return Mt.id===T})&&(ut=Bt.left+(0,f.getTotalWidth)(Xt.left.slice(0,V)),!Wt)){var qt=(0,f.getTotalWidth)(Xt.left.slice(V,Nt));Ot=Ot-Bt.left>qt?Ot-Bt.left:qt}if(Gt.top.find(function(Mt){return Mt.id===w})&&(rt=Bt.top+(0,f.getTotalHeight)(Gt.top.slice(0,R)),!Pt)){var Kt=(0,f.getTotalHeight)(e.fixedRows.top.slice(R,e.topSplit));wt=wt>0?Kt+wt-Ut:Kt}if(Xt.right.find(function(Mt){return Mt===x[x.indexOf(G)+z-1]})){var Jt=x.length,Ft=n(e),me=Jt-x.indexOf(G)-z,ue=(qt=me?(0,f.getTotalWidth)(Xt.right.slice(0,-me)):(0,f.getTotalWidth)(Xt.right),(0,f.getTotalWidth)(x.slice(V,Jt-O)));ut=Ft.x>ue?ut-Ft.x+ue:ut,Wt||(Ot=Ft.x<ue?Ot-Ft.x-1:qt-1)}if(Gt.bottom.find(function(Mt){return Mt===P[P.indexOf(U)+F-1]})){Jt=P.length,Ft=n(e);var ne=Jt-P.indexOf(U)-F,ie=(Kt=ne?(0,f.getTotalHeight)(Gt.bottom.slice(0,-ne)):(0,f.getTotalHeight)(e.fixedRows.bottom),(0,f.getTotalHeight)(P.slice(R,Jt-I)));rt=Ft.y>ie?rt-Ft.y+ie:rt,Pt||(wt=Ft.y<ie?Kt+wt-Ut-(ne?-1:Ut?0:1):Kt-(ne?-1:1))}}Nt===V+1&&(Ot-=1),V===x.length-O&&(ut+=1,Ot-=1)}}h.push((0,m.el)("div",{class:bt,style:{width:Ot,height:wt,top:rt,left:ut,zIndex:Lt},"data-dhx-col-id":T,"data-dhx-id":w,"aria-hidden":"true"},[ft?(0,m.el)(".dhx_span-expand-cell-icon",{class:U.$opened?"dxi dxi-chevron-up":"dxi dxi-chevron-down","data-dhx-id":U.id,role:"button","aria-label":U.$opened?"Collapse group":"Expand group",style:{padding:"0 0 0 ".concat(4+(0,s.getTreeCellWidthOffset)(U),"px")}}):null,tt]))},S=0;S<A.length;S++)H(S);return h},_.getShifts=function(e){var t=e.filteredColumns.slice(0,e.$positions.xStart),o=e.data.slice(0,e.$positions.yStart);return{x:(0,f.getTotalWidth)(t),y:(0,f.getTotalHeight)(o)}},_.normalizeSpan=function(e,t,o){var c=t.topSplit,h=c===void 0?0:c,g=t.bottomSplit,x=g===void 0?0:g,C=t.columns,k=e.column,I=e.row,O=e.colspan,D=e.rowspan,A=o.getRawData(0,-1,null,2),H=C.filter(function(G){return!G.hidden}),S=H.findIndex(function(G){return G.id==k}),$=A.findIndex(function(G){return G.id==I}),w=S+(O?(0,v.getReducedColspan)(C,k,O)-1:0),T=$+(D?D-1:0),F=S===-1?[]:[S,w],z=$===-1?[]:[$,T],B=[];if(S!==-1&&$!==-1){var L=(0,l.getCurrFixedCols)(t,d.Split.left).length,M=(0,l.getCurrFixedCols)(t,d.Split.right).length,P=S<L,V=$<h,R=w>=H.length-M,q=T>=A.length-x;w>=L&&T>=h&&S<H.length-M&&$<A.length-x&&B.push("render"),P&&B.push("leftFixedCols"),R&&B.push("rightFixedCols"),!V||P||R?V&&!B.includes("render")&&B.push("render"):B.push("topFixedRows"),!q||P||R?q&&!B.includes("render")&&B.push("render"):B.push("bottomFixedRows")}return b(b({},e),{$renderFrom:B,$rowsVisibility:z,$colsVisibility:F})}},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.ScrollView=_.scrollViewConfig=void 0;var b=y(1),E=y(0),m=y(2);_.scrollViewConfig={enable:!1,autoHide:!0,timeout:1e3,scrollHandler:function(){}};var v=function(){function f(d,p){var u;p===void 0&&(p={});var s=this;this.config=(0,b.extend)({enable:_.scrollViewConfig.enable,autoHide:_.scrollViewConfig.autoHide,timeout:_.scrollViewConfig.timeout,scrollHandler:_.scrollViewConfig.scrollHandler},p),this._wheelName=(0,m.isIE)()?"onmousewheel":"onwheel",this._getRootView=d,this._scrollYTop=this._scrollXLeft=this._runnerYTop=this._runnerXLeft=this._runnerHeight=this._runnerWidth=0,this._visibleYArea=this._visibleXArea=1,this._scrollWidth=(0,m.getScrollbarWidth)(),this._scrollHeight=(0,m.getScrollbarHeight)(),this._handlers=((u={onscroll:function(l){s.config.scrollHandler(l),s.update()}})[this._wheelName]=function(l){var r=!!(0,m.locateNodeByClassName)(l.target,"y-scroll");l.preventDefault();var a=40*((l.deltaY||-l.wheelDelta)>0?1:-1),i=s._getRefs().area;if(r){var n=i.scrollHeight-s._runnerHeight,e=s._scrollYTop+a;i.scrollTop=e<0?0:e>n?n:e}else{var t=i.scrollWidth-s._runnerWidth,o=s._scrollXLeft+a;i.scrollLeft=o<0?0:o>t?t:o}s.update()},u.onmousedownRunner=function(l){l.preventDefault();var r=!!(0,m.locateNodeByClassName)(l.target,"y-scroll"),a=s._getRefs(),i=a.area,n=a.runnerY,e=a.runnerX,t=i.getBoundingClientRect(),o=t.top+window.pageYOffset,c=t.bottom+window.pageYOffset,h=i.scrollHeight-s._runnerHeight,g=l.pageY-n.getBoundingClientRect().top-window.pageYOffset,x=t.left+window.pageXOffset,C=t.right+window.pageXOffset,k=i.scrollWidth-s._runnerWidth,I=l.pageX-e.getBoundingClientRect().left-window.pageXOffset,O=function(A){if(r){var H=A.pageY-g;i.scrollTop=H<=o?0:H>c?h:(H-o)/s._visibleYArea}else{var S=A.pageX-I;i.scrollLeft=S<=x?0:S>C?k:(S-x)/s._visibleXArea}s.update()},D=function(){document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",D),document.body.classList.remove("dhx-no-select")};document.body.classList.add("dhx-no-select"),document.addEventListener("mousemove",O),document.addEventListener("mouseup",D)},u.onmousedownArea=function(l){if(!(0,m.locateNodeByClassName)(l,"scroll-runner")){l.preventDefault();var r=!!(0,m.locateNodeByClassName)(l.target,"y-scroll"),a=s._getRefs(),i=a.area,n=a.runnerY,e=a.runnerX;r?i.scrollTop+=(l.pageY-n.getBoundingClientRect().top)/s._visibleYArea:i.scrollLeft+=(l.pageX-e.getBoundingClientRect().left)/s._visibleXArea,s.update()}},u.onmouseenter=function(l){if(!(0,m.locateNodeByClassName)(l,"scroll-runner")){var r=s._getRefs();if(r){var a=!!(0,m.locateNodeByClassName)(l.target,"y-scroll"),i=r.areaX,n=r.areaY;a&&s._runnerHeight>0?n.style.background="#eee":!a&&s._runnerWidth>0&&(i.style.background="#eee")}}},u.onmouseleave=function(l){if(!(0,m.locateNodeByClassName)(l,"scroll-runner")){var r=s._getRefs();if(r){var a=!!(0,m.locateNodeByClassName)(l.target,"y-scroll"),i=r.areaX,n=r.areaY;a&&s._runnerHeight>0?n.style.background="transparent":!a&&s._runnerWidth>0&&(i.style.background="transparent")}}},u)}return f.prototype.enable=function(){this.config.enable=!0,this._getRootView().redraw()},f.prototype.disable=function(){this.config.enable=!1,this._getRootView().redraw()},f.prototype.render=function(d,p){var u,s,l=this;if(p===void 0&&(p=""),!this.config.enable||!d.length)return d;p&&(this._uid=p);var r=this.config.enable?[(0,E.el)(".y-scroll",(u={},u[this._wheelName]=this._handlers[this._wheelName],u._ref=p?"scroll-y-area-".concat(p):"scroll-y-area",u.onmousedown=this._handlers.onmousedownArea,u.onmouseenter=this._handlers.onmouseenter,u.onmouseleave=this._handlers.onmouseleave,u.style={width:"6px",height:"100%",right:0,top:0,position:"absolute"},u),[(0,E.el)(".scroll-runner",{_ref:p?"scroll-y-runner-".concat(p):"scroll-y-runner",onmousedown:this._handlers.onmousedownRunner,style:{height:this._runnerHeight+"px",top:this._runnerYTop}})]),(0,E.el)(".x-scroll",(s={},s[this._wheelName]=this._handlers[this._wheelName],s._ref=p?"scroll-x-area-".concat(p):"scroll-x-area",s.onmousedown=this._handlers.onmousedownArea,s.onmouseenter=this._handlers.onmouseenter,s.onmouseleave=this._handlers.onmouseleave,s.style={width:"100%",height:"6px",left:0,bottom:0,position:"absolute"},s),[(0,E.el)(".scroll-runner",{_ref:p?"scroll-x-runner-".concat(p):"scroll-x-runner",onmousedown:this._handlers.onmousedownRunner,style:{width:this._runnerWidth+"px",left:this._runnerXLeft}})])]:null;return(0,E.el)(".scroll-view-wrapper",[(0,E.el)(".scroll-view",{onscroll:this._handlers.onscroll,_ref:p?"scroll-view-".concat(p):"scroll-view",_hooks:{didInsert:function(){l.update()},didRecycle:function(){l.update()}},style:{width:"calc(100% + ".concat(this._scrollWidth,"px)"),height:"calc(100% + ".concat(this._scrollHeight,"px)")}},d)].concat(r))},f.prototype.update=function(){var d=this._getRefs();if(d){var p=d.area,u=d.areaX,s=d.areaY,l=d.runnerY,r=d.runnerX;this._visibleYArea=p.clientHeight/p.scrollHeight,this._visibleXArea=p.clientWidth/p.scrollWidth,this._scrollYTop=p.scrollTop,this._scrollXLeft=p.scrollLeft,this._runnerYTop=this._scrollYTop*this._visibleYArea,this._runnerXLeft=this._scrollXLeft*this._visibleXArea,this._runnerHeight=this._visibleYArea<1?p.clientHeight*this._visibleYArea:0,this._runnerWidth=this._visibleXArea<1?p.clientWidth*this._visibleXArea:0;var a=l.style.top,i=r.style.left;l.style.opacity=1,l.style.top=this._runnerYTop+"px",l.style.height=this._runnerHeight+"px",r.style.opacity=1,r.style.left=this._runnerXLeft+"px",r.style.width=this._runnerWidth+"px",a!==l.style.top&&(s.style.opacity=.9,s.style.width="10px"),i!==r.style.left&&(u.style.opacity=.9,u.style.height="10px"),this.config.autoHide?!this._autoHideFunc&&(this._autoHideFunc=(0,b.debounce)(function(){l.style.opacity=0,s.style.width="6px",r.style.opacity=0,u.style.height="6px"},this.config.timeout)):this._autoHideFunc=(0,b.debounce)(function(){s.style.width="6px",u.style.height="6px"},this.config.timeout),this._autoHideFunc()}},f.prototype._getRefs=function(){var d=this._getRootView(),p=!(!d.refs["scroll-view"]||!d.refs["scroll-x-runner"]&&!d.refs["scroll-y-runner"]),u=!(!this._uid||!d.refs["scroll-view-".concat(this._uid)]||!d.refs["scroll-x-runner-".concat(this._uid)]&&!d.refs["scroll-y-runner-".concat(this._uid)]);if(d.refs){if(p)return{area:d.refs["scroll-view"].el,areaY:d.refs["scroll-y-area"].el,areaX:d.refs["scroll-x-area"].el,runnerY:d.refs["scroll-y-runner"].el,runnerX:d.refs["scroll-x-runner"].el};if(u)return{area:d.refs["scroll-view-".concat(this._uid)].el,areaY:d.refs["scroll-y-area-".concat(this._uid)].el,areaX:d.refs["scroll-x-area-".concat(this._uid)].el,runnerY:d.refs["scroll-y-runner-".concat(this._uid)].el,runnerX:d.refs["scroll-x-runner-".concat(this._uid)].el}}},f}();_.ScrollView=v},function(W,_,y){var b;Object.defineProperty(_,"__esModule",{value:!0}),_.SelectionEvents=void 0,function(E){E.beforeUnSelect="beforeunselect",E.afterUnSelect="afterunselect",E.beforeSelect="beforeselect",E.afterSelect="afterselect"}(b||(_.SelectionEvents=b={}))},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(v){for(var f,d=1,p=arguments.length;d<p;d++)for(var u in f=arguments[d])Object.prototype.hasOwnProperty.call(f,u)&&(v[u]=f[u]);return v},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.getNavbarButtonCSS=_.navbarComponentMixin=_.getIcon=_.getCount=void 0;var E=y(0),m=y(1);_.getCount=function(v,f,d){var p={danger:" dhx_navbar-count--color_danger",secondary:" dhx_navbar-count--color_secondary",primary:" dhx_navbar-count--color_primary",success:" dhx_navbar-count--color_success"}[v.countColor]||" dhx_navbar-count--color_danger";return(0,E.el)(".dhx_navbar-count",{class:f+p+(!d&&parseInt(v.count,10)>99?" dhx_navbar-count--overlimit":"")},d&&parseInt(v.count,10)>99?"99+":v.count)},_.getIcon=function(v,f){return v===void 0&&(v=""),v.startsWith("dxi")&&(v="dxi "+v),(0,E.el)("span",{class:"dhx_".concat(f,"__icon ").concat(v),"aria-hidden":"true"})},_.navbarComponentMixin=function(v,f,d,p){var u,s,l=function(a,i,n){var e="",t="";return t=(e=n?"dhx_menu-item":"dhx_"+a+"__item")+(i.css?" "+i.css:""),i.type!=="spacer"&&i.type!=="separator"||(t+=" ".concat(e,"--").concat(i.type)),i.type!=="button"||a!=="sidebar"||i.icon||(t+=" dhx_navbar-item--colapse_hidden"),t}(v,f,d),r=v==="ribbon"&&(f.type==="navItem"||f.type==="imageButton");return(0,E.el)("li",b({_key:f.id,class:l+(f.icon&&!f.value&&r?" dhx_ribbon__item--icon":"")+(f.src&&!f.value&&r?" dhx_ribbon__item--icon":"")+(f.size&&r?" dhx_ribbon__item--"+f.size:""),".innerHTML":f.type==="customHTML"?f.html:void 0,"data-dhx-id":f.type==="customHTML"?f.id:void 0},(u=f.type,s={role:"none"},u==="separator"&&(s.role="separator",s["aria-orientation"]="vertical"),s)),f.type!=="customHTML"?[p]:void 0)},_.getNavbarButtonCSS=function(v,f){var d=v.color,p=v.size,u=v.view,s=v.full,l=v.icon,r=v.circle,a=v.loading,i=v.value,n=v.active,e=v.count;return({danger:" dhx_button--color_danger",secondary:" dhx_button--color_secondary",primary:" dhx_button--color_primary",success:" dhx_button--color_success"}[d]||" dhx_button--color_primary")+({small:" dhx_button--size_small",medium:" dhx_button--size_medium"}[p]||" dhx_button--size_medium")+({flat:" dhx_button--view_flat",link:" dhx_button--view_link"}[u]||" dhx_button--view_flat")+(s?" dhx_button--width_full":"")+(r?" dhx_button--circle":"")+(a?" dhx_button--loading":"")+(n?" dhx_button--active":"")+(l&&!i?" dhx_button--icon":"")+((0,m.isDefined)(e)?" dhx_button--count":"")}},function(W,_,y){var b;Object.defineProperty(_,"__esModule",{value:!0}),_.DiagramEditorEvents=void 0,function(E){E.shapeResize="shapeResize",E.zoomIn="zoomin",E.zoomOut="zoomout",E.beforeShapeIconClick="beforeShapeIconClick",E.afterShapeIconClick="afterShapeIconClick",E.beforeLineTitleMove="beforeLineTitleMove",E.afterLineTitleMove="afterLineTitleMove",E.lineTitleMoveEnd="lineTitleMoveEnd",E.beforeShapeMove="beforeShapeMove",E.afterShapeMove="afterShapeMove",E.shapeMoveEnd="shapeMoveEnd",E.beforeGroupMove="beforeGroupMove",E.afterGroupMove="afterGroupMove",E.groupMoveEnd="groupMoveEnd",E.beforeItemMove="beforeItemMove",E.afterItemMove="afterItemMove",E.itemMoveEnd="itemMoveEnd",E.itemTarget="itemTarget",E.beforeItemCatch="beforeItemCatch",E.afterItemCatch="afterItemCatch",E.shapeMove="shapemove",E.resetButton="resetButton",E.applyButton="applyButton",E.undoButton="undoButton",E.redoButton="redoButton",E.visibility="visibility",E.exportData="exportData",E.importData="importData",E.autoLayout="autoLayout",E.changeGridStep="changeGridStep",E.shapesUp="shapesUp"}(b||(_.DiagramEditorEvents=b={}))},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.NavigationBarEvents=_.DataEvents=void 0;var b,E=y(8);Object.defineProperty(_,"DataEvents",{enumerable:!0,get:function(){return E.DataEvents}}),function(m){m.inputCreated="inputCreated",m.click="click",m.openMenu="openMenu",m.beforeHide="beforeHide",m.afterHide="afterHide",m.inputFocus="inputFocus",m.inputBlur="inputBlur",m.inputChange="inputChange",m.input="input",m.keydown="keydown"}(b||(_.NavigationBarEvents=b={}))},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(d){for(var p,u=1,s=arguments.length;u<s;u++)for(var l in p=arguments[u])Object.prototype.hasOwnProperty.call(p,l)&&(d[l]=p[l]);return d},b.apply(this,arguments)};function E(d,p,u){var s=d.x,l=d.y;switch(u){case"top":return d.$item.getPoint(s+d.width/2,l-p);case"bottom":return d.$item.getPoint(s+d.width/2,l+d.height+p);case"left":return d.$item.getPoint(s-p,l+d.height/2);case"right":return d.$item.getPoint(s+d.width+p,l+d.height/2);case"center":return d.$item.getPoint(s+d.width/2,l+d.height/2)}}function m(d,p,u,s,l,r){if(r===void 0&&(r=10),!l){var a=u.y===s.y?+r:0,i=u.x===s.x?+r:0;return[d,{x1:u.x,y1:u.y,x:u.x+a,y:u.y+i},{x:s.x-a,y:s.y-i},{x1:s.x,y1:s.y,x:p.x,y:p.y}]}var n=s.x<l.x?-1:1,e=s.y<l.y?-1:1,t=u.x>l.x?1:-1,o=u.y>l.y?1:-1,c=b({},l),h=b({},s),g={x1:l.x,y1:l.y,x:l.x,y:l.y+r*e};return u.x===l.x&&(c.y+=r*o,h.x-=r*n,g={x1:l.x,y1:l.y,x:l.x+r*n,y:l.y}),u.y===l.y&&(c.x+=r*t,h.y-=r*e,g={x1:l.x,y1:l.y,x:l.x,y:l.y+r*e}),[d,u,c,g,h,{x1:s.x,y1:s.y,x:p.x,y:p.y}]}Object.defineProperty(_,"__esModule",{value:!0}),_.directLinkPath=_.nearestLinkPath=void 0;var v=["top","bottom","right","left","center"];function f(d,p,u,s,l,r,a){var i,n,e,t;r===void 0&&(r=""),a===void 0&&(a="");var o=l&&l>s?l:s||0;if(r==="center"&&a==="center")return[{x:p.x+p.width/2,y:p.y+p.height/2},{x:u.x+u.width/2,y:u.y+u.height/2}];if(r&&(i=E(p,0,r),e=E(p,s,r)),a&&(n=E(u,0,a),t=E(u,o,a)),!r||!a){var c=v.map(function(I){var O=E(p,s,I);return v.map(function(D){var A=E(u,o,D),H=function(S,$){var w=$.x-S.x,T=$.y-S.y;return Math.sqrt(w*w+T*T)}(O,A);return[O,A,H,I,D]}).sort(function(D,A){return D[2]-A[2]})[0]}).sort(function(I,O){return I[2]-O[2]})[0];e=c[0],t=c[1],r=c[3],a=c[4],d.fromSide=r,d.toSide=a,i=E(p,0,r),n=E(u,0,a)}var h=r==="bottom"&&a==="top"||r==="top"&&a==="bottom"?Math.abs(n.y-i.y):0;(h=h||(r==="left"&&a==="right"||r==="right"&&a==="left"?Math.abs(n.x-i.x):0))>0&&o+s>=h&&(t=E(u,o=h-s,a));var g=[];if(e.x===t.x||e.y===t.y)i.x===e.x&&e.x===n.x||i.y===e.y&&e.y===n.y?g=[i,n]:(g=[i,e,t,n],d.cornersRadius&&d.connectType!=="straight"&&(g=m(i,n,e,t,null,d.cornersRadius)));else{var x=e.x<i.x&&e.x<t.x,C=e.y>i.y&&e.y>t.y,k=i.x===e.x||x?{x:e.x,y:t.y}:{x:t.x,y:e.y};k=C?{x:t.x,y:e.y}:k,g=d.connectType==="flex"?function(I,O,D){return[I,{x1:D.x,y1:D.y,x:O.x,y:O.y}]}(i,n,k):d.cornersRadius&&d.connectType!=="straight"?m(i,n,e,t,k,d.cornersRadius):[i,e,k,t,n]}return g}_.nearestLinkPath=function(d,p,u,s){var l;if(p&&u){var r=f(d,p,u,((l=s==null?void 0:s.lineConfig)===null||l===void 0?void 0:l.lineGap)||0,d.customGap,d.fromSide,d.toSide);if(d.connectType==="straight")return d.points=[r[0],r[r.length-1]];if(d.points){if(d.points.length===r.length)d.points=d.points.map(function(i,n){return i&&r[n]&&!i.custom?r[n]:i});else{var a=d.points.filter(function(i){return i.custom});d.points=a.length?d.points:r}d.$move||(d.points[0]=r[0],d.points[d.points.length-1]=r[r.length-1])}else d.points=r}},_.directLinkPath=function(d,p,u,s){var l,r;if(d||!p.assistant||!p.partner){var a=p.x+(p.dx||0),i=p.y+(p.dy||0),n=u.x+(u.dx||0),e=u.y+(u.dy||0);if(p.dir&&p.dir.includes("vertical")||Array.isArray(p.dir)){var t=a,o=Math.round(i+p.height/2),c=n,h=Math.round(e+u.height/2),g=.5-Math.round(s.margin.itemX/2);p.dir==="vertical"&&(d.points=[{x:t,y:o},{x:t+g,y:o},{x:t+g,y:h},{x:c,y:h}]),(p.dir==="verticalLeft"||Array.isArray(p.dir)&&p.dir.includes("verticalLeft"))&&(d.points=[{x:t,y:o},{x:t+g,y:o},{x:t+g,y:h},{x:c+u.width,y:h}]),(p.dir==="verticalRight"||Array.isArray(p.dir)&&p.dir.includes("verticalRight"))&&(d.points=[{x:t+p.width,y:o},{x:t+p.width-g,y:o},{x:t+p.width-g,y:h},{x:c,y:h}])}else{if(t=Math.round(a+p.width/2),o=i+p.height,c=n+(u.$even?0:u.width),h=Math.round(e+u.height/2),u.partner){var x=u.$even?a+p.width:a,C=Math.round(i+p.height/2),k=Math.round(s.margin.itemX/2);return k=u.$even?k:-k,void(d.points=[{x,y:C},{x:x+k,y:C},{x:x+k,y:h},{x:c,y:h}])}if(u.assistant){if(((l=p==null?void 0:p.$partners)===null||l===void 0?void 0:l.common.length)===1){var I=a,O=Math.round(i+p.height/2),D=Math.round(s.margin.itemX/2);return void(d.points=[{x:I,y:O},{x:I-D,y:O},{x:I-D,y:h},{x:c,y:h}])}return void(d.points=[{x:t,y:o},{x:t,y:o},{x:t,y:h},{x:c,y:h}])}if(c=Math.round(n+u.width/2),h=e,g=p.$height-(p.$baseHeight+p.height)/2,((r=p==null?void 0:p.$partners)===null||r===void 0?void 0:r.common.length)===1){var A=Math.round(a-s.margin.itemX/2);return void(d.points=[{x:A,y:o-p.height/2},{x:A,y:o+g},{x:c,y:o+g},{x:c,y:h}])}d.points=[{x:t,y:o},{x:t,y:o+g},{x:c,y:o+g},{x:c,y:h}]}}}},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.addLineTitle=_.getDistanceEblowLine=_.getDistancePercentage=_.getDistanceFactor=_.getLinePercentage=_.getLineLength=_.getLineAngle=_.getNearPointStraightLine=void 0;var b=y(29);function E(p,u,s){var l=p.x,r=p.y,a=u.x,i=u.y,n=s.x,e=s.y;if(l===a)return{x:l,y:e};if(r===i)return{x:n,y:r};var t=(i-r)/(a-l),o=-1/t,c=(t*l-o*n+e-r)/(t-o);return{x:c,y:o*(c-n)+e}}function m(p,u){var s=p.x,l=p.y,r=u.x,a=u.y;return Math.sqrt((r-s)*(r-s)+(a-l)*(a-l))}function v(p,u,s){var l=m(p,u),r=m(p,s);return r<=l?r/l:l/r}function f(p){return 100*p}function d(p,u){for(var s,l,r=p.points,a=[],i=1/0,n=0,e=0,t=0,o=0;o<r.length-1;o++){var c=r[o],h=r[o+1],g=E(c,h,u),x=m(g,u),C=m(c,h);n+=C,a.push(C);var k=c.x,I=c.y,O=h.x,D=h.y,A=g.x,H=g.y;k>O&&(k=(s=[O,k])[0],O=s[1]),I>D&&(I=(l=[D,I])[0],D=l[1]),x<=i&&O>=A&&k<=A&&D>=H&&I<=H&&(i=x,e=m(c,g),t=o)}var S=0;if(t!==0)for(o=0;o<t;o++)S+=a[o];return(S+=e)/n*100}_.getNearPointStraightLine=E,_.getLineAngle=function(p,u){var s=p.x,l=p.y,r=u.x,a=u.y;return Math.atan((a-l)/(r-s))*(180/Math.PI)},_.getLineLength=m,_.getLinePercentage=v,_.getDistanceFactor=function(p){return p===void 0&&(p=50),typeof p=="string"&&(p=parseFloat(p)),p>=100?1:p<=0?0:p/100},_.getDistancePercentage=f,_.getDistanceEblowLine=d,_.addLineTitle=function(p,u){var s,l=p.points,r=u._lastItemClickCoords,a=50;if(p.connectType==="straight"||l.length===2){var i=l[0],n=l[l.length-1];a=f(v(i,n,E(i,n,r)))}else a=d(p,r);var e=u.data.add({type:"lineTitle",text:b.locale.text,distance:a,parent:p.id});u.selection.add({id:e});var t=(s=u.data.getItem(e))===null||s===void 0?void 0:s.$item;t&&t.isEditable()&&u.editor.openEditor(e,"text")&&t.setEditorNode(u.editor.render(),"text")}},function(W,_,y){var b,E=this&&this.__extends||(b=function(a,i){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])},b(a,i)},function(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=a}b(a,i),a.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}),m=this&&this.__spreadArray||function(a,i,n){if(n||arguments.length===2)for(var e,t=0,o=i.length;t<o;t++)!e&&t in i||(e||(e=Array.prototype.slice.call(i,0,t)),e[t]=i[t]);return a.concat(e||Array.prototype.slice.call(i))};Object.defineProperty(_,"__esModule",{value:!0}),_.Input=_.Validation=void 0;var v,f=y(0),d=y(1),p=y(6),u=y(9),s=y(3),l=y(4);(function(a){a.empty="",a.validEmail="email",a.validInteger="integer",a.validNumeric="numeric",a.validAlphaNumeric="alphanumeric",a.validIPv4="IPv4"})(v||(_.Validation=v={}));var r=function(a){function i(n,e){e===void 0&&(e={});var t=a.call(this,null,e)||this;return t.events=new s.EventSystem,t._propsItem=["inputType","required","validation","icon","placeholder","autocomplete","readOnly","maxlength","minlength","min","max","step","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage"],t._props=m(m([],p.baseProps,!0),t._propsItem,!0),t._initView(e),t._initHandlers(),t}return E(i,a),i.prototype.destructor=function(){this.events&&this.events.clear(),this.events=this._uid=this._propsItem=this._propsItem=null,a.prototype._destructor.call(this),this.unmount()},i.prototype.setProperties=function(n){if(n&&!(0,d.isEmptyObj)(n)&&this.events.fire(l.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var e in n)this._props.includes(e)&&(this.config[e]=n[e]);this.events.fire(l.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},i.prototype.getProperties=function(){for(var n={},e=0,t=this._props;e<t.length;e++){var o=t[e];n[o]=this.config[o]}return n},i.prototype.show=function(){var n=this.config,e=n.value;n.hidden&&this.events.fire(l.ItemEvent.beforeShow,[e])&&(this.config.hidden=!1,this.events.fire(l.ItemEvent.afterShow,[e]))},i.prototype.hide=function(n){var e=this.config,t=e.value;e.hidden&&!n||!this.events.fire(l.ItemEvent.beforeHide,[t,n])||(this.config.hidden=!0,this.events.fire(l.ItemEvent.afterHide,[t,n]))},i.prototype.isVisible=function(){return!this.config.hidden},i.prototype.disable=function(){this.config.disabled=!0,this.paint()},i.prototype.enable=function(){var n;this.config.disabled=!1,!((n=this.parent)===null||n===void 0)&&n.isDisabled()&&this.parent.enable(),this.paint()},i.prototype.isDisabled=function(){return!!this.config.disabled},i.prototype.validate=function(n){n===void 0&&(n=!1);for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var o=e.length?e[0]:this.getValue();if(!n&&!this.events.fire(l.ItemEvent.beforeValidate,[o]))return!1;var c=this.config.validation?(0,p.validateInput)(o,this.config.validation):(0,p.baseInputValidate)(o,this.config);return n||(this.setValidationStatus(c?"success":"error"),this.events.fire(l.ItemEvent.afterValidate,[o,c]),!this.isFocused()&&this.paint()),c},i.prototype.clearValidate=function(){this.setValidationStatus(),this.paint()},i.prototype.clear=function(){this.config.value!==""&&this.events.fire(l.ItemEvent.beforeChange,[""])&&(this.config.value="",this.events.fire(l.ItemEvent.change,[this.getValue()]),(0,p.isVerify)(this.config)&&this.setValidationStatus(this.validate(!0)?"success":"error"))},i.prototype.setValue=function(n){n!==void 0&&this.config.value!==n&&this.events.fire(l.ItemEvent.beforeChange,[n])&&(this.config.value=n,this.events.fire(l.ItemEvent.change,[this.getValue()]),(0,p.isVerify)(this.config)&&this.validate())},i.prototype.getValue=function(){var n=this.config,e=n.inputType,t=n.value;return e==="number"&&typeof t=="number"||t===null?t:e==="number"&&typeof t=="string"?t.length?Number(t):"":typeof t=="string"?t.length?t:"":t===void 0?"":String(t)},i.prototype.isFocused=function(){var n,e,t;return((t=(e=(n=this.getRootView())===null||n===void 0?void 0:n.refs)===null||e===void 0?void 0:e.input)===null||t===void 0?void 0:t.el)===document.activeElement},i.prototype.focus=function(){var n=this;(0,f.awaitRedraw)().then(function(){n.getRootView().refs.input.el.focus()})},i.prototype.blur=function(){var n=this;(0,f.awaitRedraw)().then(function(){n.getRootView().refs.input.el.blur()})},i.prototype._initView=function(n){if((0,d.isEmptyObj)(n))throw new Error("Check the configuration is correct");for(var e in this.config={type:"input",id:n.id,name:n.name,value:"",disabled:!1,hidden:!1,inputType:"text",required:!1,icon:"",placeholder:"",autocomplete:!1,readOnly:!1,label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"},n)e!=="id"&&e!=="type"&&e!=="name"&&(this.config[e]=n[e]);this._value=this.config.value,this.paint()},i.prototype._initHandlers=function(){var n=this;this.events.on(l.ItemEvent.change,function(e){n._value=e,n.paint()})},i.prototype._getHandlers=function(){var n=this;return{oninput:function(e){e.isComposing||(n._value=e.target.value,n.events.fire(l.ItemEvent.input,[n.config.inputType==="number"?Number(n._value):n._value]))},onchange:function(e){n._value=e.target.value,n._value!==n.config.value&&n.setValue(n._value)},onfocus:function(){n.events.fire(l.ItemEvent.focus,[n.getValue()]),n.paint()},onblur:function(){n._uid&&(n.events.fire(l.ItemEvent.blur,[n.getValue()]),n._value!==n.config.value&&n.setValue(n._value),n.paint())},onkeydown:function(e){e.code==="Enter"&&n.config.type==="input"&&e.preventDefault(),n.events.fire(l.ItemEvent.keydown,[e])}}},i.prototype._draw=function(){var n=this.config,e=n.id,t=n.disabled,o=n.name,c=n.icon,h=n.placeholder,g=n.required,x=n.inputType,C=n.hidden,k=n.autocomplete,I=n.readOnly,O=n.maxlength,D=n.minlength,A=n.max,H=n.min,S=n.label,$=n.helpMessage,w=n.value,T=C?" dhx_form-group--hidden":"";return(0,f.el)("div.dhx_form-group",{class:(0,p.getFormItemCss)(this.config,(0,p.isVerify)(this.config),this.isFocused())+T},[this._drawLabel(),(0,f.el)(".dhx_input__wrapper",{},[(0,f.el)("div.dhx_input__container",{},[this.config.icon?(0,f.el)(".dhx_input__icon",{class:this.config.icon}):null,(0,f.el)("input.dhx_input",{type:["text","number","password"].includes(x)?x:"text","data-dhx-id":o||e,id:e||this._uid,_key:e||this._uid,placeholder:h||"",value:w,name:o||"",disabled:t,required:g,readOnly:I,maxlength:O,minlength:D,max:A,min:H,onblur:this._handlers.onblur,oninput:this._handlers.oninput,onchange:this._handlers.onchange,onfocus:this._handlers.onfocus,onkeydown:this._handlers.onkeydown,class:c?"dhx_input--icon-padding":"",autocomplete:k?"on":"off",_ref:"input","aria-label":S||$||"type ".concat(o||x||"text"),"aria-describedby":$?"dhx_label__help_".concat(e||this._uid):null,_hooks:this._getHooks()})]),(0,p.getValidationMessage)(this.config)&&(0,f.el)("span.dhx_input__caption",(0,p.getValidationMessage)(this.config))])])},i.prototype._getHooks=function(){var n=this,e=this._handlers.oninput;return{didRecycle:function(t,o){n.isFocused()&&(0,d.isDefined)(n._value)&&(o.el.value=n._value)},didInsert:function(t){t.el.addEventListener("compositionend",e)},willRemove:function(t){t.el.removeEventListener("compositionend",e),e=null}}},i}(u.Label);_.Input=r},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.VaultMode=_.ProgressBarEvents=_.UploaderEvents=_.FileStatus=void 0;var b,E,m,v;y(8),function(f){f.queue="queue",f.uploaded="uploaded",f.failed="failed",f.inprogress="inprogress"}(b||(_.FileStatus=b={})),function(f){f.uploadBegin="uploadbegin",f.beforeUploadFile="beforeuploadfile",f.uploadFile="uploadfile",f.uploadFail="uploadfail",f.uploadComplete="uploadcomplete",f.uploadProgress="uploadprogress"}(E||(_.UploaderEvents=E={})),function(f){f.cancel="cancel"}(m||(_.ProgressBarEvents=m={})),function(f){f.grid="grid",f.list="list"}(v||(_.VaultMode=v={}))},function(W,_,y){function b(E,m,v){return v===void 0&&(v={}),E.reduce(function(f,d,p){return p===E.length-1?f[d]=m:f[d]=f[d]||{},f[d]},v),v}Object.defineProperty(_,"__esModule",{value:!0}),_.getValueFromObjectByKeys=_.getModifiedObject=_.createNestedObject=void 0,_.createNestedObject=b,_.getModifiedObject=function(E,m,v){return Array.isArray(E)?v=b(E,m,v):v[E]=m,v},_.getValueFromObjectByKeys=function(E,m){if(E&&(m!=null&&m.length)){if(typeof m=="string")return E[m];for(var v=E,f=0,d=m;f<d.length;f++){var p=d[f];if(v[p]===void 0)return;v=v[p]}return v}}},function(W,_){var y;y=function(){return this}();try{y=y||new Function("return this")()}catch{typeof window=="object"&&(y=window)}W.exports=y},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.i18n=_.DiagramEditor=_.Diagram=_.setTheme=_.awaitRedraw=void 0,y(123),y(124);var b=y(0);Object.defineProperty(_,"awaitRedraw",{enumerable:!0,get:function(){return b.awaitRedraw}}),Object.defineProperty(_,"setTheme",{enumerable:!0,get:function(){return b.setTheme}});var E=y(63);Object.defineProperty(_,"Diagram",{enumerable:!0,get:function(){return E.Diagram}});var m=y(204);Object.defineProperty(_,"DiagramEditor",{enumerable:!0,get:function(){return m.DiagramEditor}});var v=y(57),f=y(277),d=window;_.i18n=d.dhx&&d.dhx.i18n?d.dhx.i18:{},_.i18n.setLocale=f.setLocale,_.i18n.diagram=_.i18n.diagram||v.default},function(W,_,y){var b,E,m;Object.defineProperty(_,"__esModule",{value:!0}),_.MessageContainerPosition=_.Position=_.RealPosition=void 0,function(v){v.left="left",v.right="right",v.top="top",v.bottom="bottom",v.center="center"}(b||(_.RealPosition=b={})),function(v){v.right="right",v.bottom="bottom",v.center="center",v.left="left",v.top="top"}(E||(_.Position=E={})),function(v){v.topLeft="top-left",v.topRight="top-right",v.bottomLeft="bottom-left",v.bottomRight="bottom-right"}(m||(_.MessageContainerPosition=m={}))},function(W,_,y){(function(b){Object.defineProperty(_,"__esModule",{value:!0}),_.ajax=void 0;var E=y(22),m=y(23);function v(d){return d?d.includes("json")?"json":d.includes("xml")?"xml":"text":"text"}function f(d,p,u,s,l){var r=s||{};if(l&&(r.Accept="application/"+l),u!=="GET"&&(r["Content-Type"]=r["Content-Type"]||"application/json"),u==="GET"){var a=p&&typeof p=="object"?function(i){return Object.keys(i).reduce(function(n,e){var t=typeof i[e]=="object"?JSON.stringify(i[e]):i[e];return n.push(e+"="+encodeURIComponent(t)),n},[]).join("&")}(p):p&&typeof p=="string"?p:"";a&&(d+=d.includes("?")?"&":"?",d+=a),p=null}return window.fetch?(r["Content-Type"]==="application/json"&&p&&typeof p=="object"&&(p=JSON.stringify(p)),window.fetch(d,{method:u,body:p||null,headers:r}).then(function(i){if(!i.ok)return i.text().then(function(t){return b.reject({status:i.status,statusText:i.statusText,message:t})});var n=l||v(i.headers.get("Content-Type"));if(n==="raw")return{headers:Object.fromEntries(i.headers.entries()),url:i.url,body:i.body};if(i.status!==204)switch(n){case"json":return i.json();case"xml":var e=(0,m.toDataDriver)(E.DataDriver.xml);return e?i.text().then(function(t){return e.toJsonObject(t)}):i.text();default:return i.text()}})):new b(function(i,n){var e=new XMLHttpRequest;for(var t in e.onload=function(){e.status>=200&&e.status<300?(l==="raw"&&i({url:e.responseURL,headers:e.getAllResponseHeaders().trim().split(/[\r\n]+/).reduce(function(o,c){var h=c.split(": ");return o[h[0]]=h[1],o},{}),body:e.response}),e.status===204?i():i(function(o,c){switch(c){case"json":return JSON.parse(o);case"text":default:return o;case"xml":var h=(0,m.toDataDriver)(E.DataDriver.xml);return h?h.toJsonObject(o):{parseError:"Incorrect data driver type: 'xml'"}}}(e.responseText,l||v(e.getResponseHeader("Content-Type"))))):n({status:e.status,statusText:e.statusText})},e.onerror=function(){n({status:e.status,statusText:e.statusText,message:e.responseText})},e.open(u,d),r)e.setRequestHeader(t,r[t]);switch(u){case"POST":case"DELETE":case"PUT":e.send(p!==void 0?JSON.stringify(p):"");break;default:e.send()}})}_.ajax={get:function(d,p,u){return f(d,p,"GET",u&&u.headers,u!==void 0?u.responseType:void 0)},post:function(d,p,u){return f(d,p,"POST",u&&u.headers,u!==void 0?u.responseType:void 0)},put:function(d,p,u){return f(d,p,"PUT",u&&u.headers,u!==void 0?u.responseType:void 0)},delete:function(d,p,u){return f(d,p,"DELETE",u&&u.headers,u!==void 0?u.responseType:void 0)}}}).call(this,y(17))},function(W,_,y){var b=this&&this.__createBinding||(Object.create?function(m,v,f,d){d===void 0&&(d=f);var p=Object.getOwnPropertyDescriptor(v,f);p&&!("get"in p?!v.__esModule:p.writable||p.configurable)||(p={enumerable:!0,get:function(){return v[f]}}),Object.defineProperty(m,d,p)}:function(m,v,f,d){d===void 0&&(d=f),m[d]=v[f]}),E=this&&this.__exportStar||function(m,v){for(var f in m)f==="default"||Object.prototype.hasOwnProperty.call(v,f)||b(v,m,f)};Object.defineProperty(_,"__esModule",{value:!0}),E(y(144),_),E(y(79),_)},function(W,_,y){var b,E=this&&this.__extends||(b=function(p,u){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&(s[r]=l[r])},b(p,u)},function(p,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function s(){this.constructor=p}b(p,u),p.prototype=u===null?Object.create(u):(s.prototype=u.prototype,new s)});Object.defineProperty(_,"__esModule",{value:!0}),_.Layout=void 0;var m=y(50),v=y(74),f=y(0),d=function(p){function u(s,l){var r=p.call(this,s,l)||this;if(r._root=r.config.parent||r,r._all={},r._parseConfig(),r._progress=!1,r.config.activeTab&&(r.config.activeView=r.config.activeTab),r.config.views&&(r.config.activeView=r.config.activeView||r._cells[0].id,r._isViewLayout=!0),!l.parent){var a=(0,f.create)({render:function(){return r._root&&r.toVDOM()}},r);r.mount(s,a)}return r}return E(u,p),u.prototype.destructor=function(){if(this.unmount(),this.config){for(var s=0,l=this._cells;s<l.length;s++){var r=l[s];r==null||r.destructor()}this.config=this._cells=this._root=this._xLayout=this._isViewLayout=null,this._all={}}},u.prototype.toVDOM=function(){var s;if(this._isViewLayout){var l=[this.getCell(this.config.activeView).toVDOM()];return p.prototype.toVDOM.call(this,l)}var r=[];return this._inheritTypes(),(s=this._cells)===null||s===void 0||s.forEach(function(a){var i=a.toVDOM();Array.isArray(i)?r=r.concat(i):r.push(i)}),p.prototype.toVDOM.call(this,r)},u.prototype.removeCell=function(s){if(this.events.fire(m.LayoutEvents.beforeRemove,[s])){var l=this.config.parent||this;if(l===this){var r=this.getCell(s);if(r){var a=r.getParent();delete this._all[s],a._cells=a._cells.filter(function(i){return i.id!=s}),a.paint()}this.events.fire(m.LayoutEvents.afterRemove,[s])}else l.removeCell(s)}},u.prototype.addCell=function(s,l){if(l===void 0&&(l=-1),this.events.fire(m.LayoutEvents.beforeAdd,[s.id])){var r=this._createCell(s);l<0&&(l=this._cells.length+l+1),this._cells.splice(l,0,r),this.paint(),this.events.fire(m.LayoutEvents.afterAdd,[s.id])}},u.prototype.getId=function(s){return s<0&&(s=this._cells.length+s),this._cells[s]?this._cells[s].id:void 0},u.prototype.getRefs=function(s){return this._root.getRootView().refs[s]},u.prototype.getCell=function(s){var l;return(l=this._root)===null||l===void 0?void 0:l._all[s]},u.prototype.forEach=function(s,l,r){if(r===void 0&&(r=1/0),this._haveCells(l)&&!(r<1)){var a;a=l?this._root._all[l]._cells:this._root._cells;for(var i=0;i<a.length;i++){var n=a[i];s.call(this,n,i,a),this._haveCells(n.id)&&n.forEach(s,n.id,--r)}}},u.prototype.cell=function(s){return this.getCell(s)},u.prototype.progressShow=function(){this._progress=!0,this.paint()},u.prototype.progressHide=function(){this._progress=!1,this.paint()},u.prototype._initHandlers=function(){var s=this;this._handlers={enterCollapse:function(l){l.keyCode===13&&s._handlers.toggle()},collapse:function(){s.config.collapsable&&s.collapse()},expand:function(){s.config.collapsable&&s.expand()},toggle:function(){s.config.collapsable&&s.toggle()}}},u.prototype._getCss=function(s){var l=this._xLayout?"dhx_layout-columns":"dhx_layout-rows",r=this.config.align?" "+l+"--"+this.config.align:"";if(s)return l+" dhx_layout-cell"+(this.config.align?" dhx_layout-cell--"+this.config.align:"");var a=this.config.parent?p.prototype._getCss.call(this):"dhx_widget dhx_layout",i=this.config.parent?"":" dhx_layout-cell";return a+(this.config.full?i:" "+l)+r},u.prototype._parseConfig=function(){var s=this,l=this.config,r=l.rows||l.cols||l.views||[];this._xLayout=!l.rows,this._cells=r.map(function(a){return s._createCell(a)})},u.prototype._createCell=function(s){var l;return s.rows||s.cols||s.views?(s.parent=this._root,l=new u(this,s)):l=new v.Cell(this,s),this._root._all[l.id]=l,s.init&&s.init(l,s),l},u.prototype._haveCells=function(s){if(s){var l=this._root._all[s];return l._cells&&l._cells.length>0}return Object.keys(this._all).length>0},u.prototype._inheritTypes=function(s){var l=this;if(s===void 0&&(s=this._cells),Array.isArray(s))s.forEach(function(i){return l._inheritTypes(i)});else{var r=s==null?void 0:s.config;if(r!=null&&r.rows||r!=null&&r.cols){var a=s.getParent();!r.type&&a&&(a.config.type?r.type=a.config.type:this._inheritTypes(a))}}},u}(v.Cell);_.Layout=d},function(W,_,y){var b;Object.defineProperty(_,"__esModule",{value:!0}),_.LayoutEvents=void 0,function(E){E.beforeShow="beforeShow",E.afterShow="afterShow",E.beforeHide="beforeHide",E.afterHide="afterHide",E.beforeResizeStart="beforeResizeStart",E.resize="resize",E.afterResizeEnd="afterResizeEnd",E.beforeAdd="beforeAdd",E.afterAdd="afterAdd",E.beforeRemove="beforeRemove",E.afterRemove="afterRemove",E.beforeCollapse="beforeCollapse",E.afterCollapse="afterCollapse",E.beforeExpand="beforeExpand",E.afterExpand="afterExpand"}(b||(_.LayoutEvents=b={}))},function(W,_,y){var b=this&&this.__createBinding||(Object.create?function(m,v,f,d){d===void 0&&(d=f);var p=Object.getOwnPropertyDescriptor(v,f);p&&!("get"in p?!v.__esModule:p.writable||p.configurable)||(p={enumerable:!0,get:function(){return v[f]}}),Object.defineProperty(m,d,p)}:function(m,v,f,d){d===void 0&&(d=f),m[d]=v[f]}),E=this&&this.__exportStar||function(m,v){for(var f in m)f==="default"||Object.prototype.hasOwnProperty.call(v,f)||b(v,m,f)};Object.defineProperty(_,"__esModule",{value:!0}),E(y(80),_),E(y(161),_),E(y(86),_)},function(W,_,y){var b;Object.defineProperty(_,"__esModule",{value:!0}),_.ListEvents=void 0,function(E){E.click="click",E.doubleClick="doubleclick",E.focusChange="focuschange",E.beforeEditStart="beforeEditStart",E.afterEditStart="afterEditStart",E.beforeEditEnd="beforeEditEnd",E.afterEditEnd="afterEditEnd",E.itemRightClick="itemRightClick",E.itemMouseOver="itemMouseOver",E.contextmenu="contextmenu"}(b||(_.ListEvents=b={}))},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.shapesFactory=_.shapes=void 0;var b=y(89),E=y(187),m=y(55),v=y(188),f=y(90),d=y(189);for(var p in _.shapes={card:b.Card,"img-card":E.ImgCard,text:v.TextShape,topic:d.TopicShape},m.flowShapes)_.shapes[p]=m.FlowShape;_.shapesFactory=function(u,s){var l=_.shapes[u.type];return!l&&(l=_.shapes.card,s.shapes[u.type])?new f.CustomShape(u,s):new l(u,s)}},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.BaseItem=void 0;var b=function(){function E(m,v){this.editableProperty={key:null,editableId:null},this.config=this.setDefaults(m,m.type==="line"||m.type==="dash"?v:v.defaults),this.id=this.config.id=m.id}return E.prototype.isFixed=function(){return this.config.fixed},E.prototype.isEditable=function(){return this.config.editable||!1},E.prototype.getBaseType=function(){return"base"},E.prototype.isLocate=function(m){var v=this.config,f=v.x,d=v.y,p=v.height,u=v.width,s=v.dx,l=s===void 0?0:s,r=v.dy,a=r===void 0?0:r,i=f+u+l>=m.x&&f+l<=m.x+m.width,n=d+p+a>=m.y&&d+a<=m.y+m.height;return i&&n},E.prototype.getBox=function(){var m=this.config,v=m.x,f=v===void 0?0:v,d=m.y,p=d===void 0?0:d,u=m.dx,s=u===void 0?0:u,l=m.dy,r=f+s,a=p+(l===void 0?0:l);return{left:r,right:r+m.width,top:a,bottom:a+m.height}},E.prototype.canResize=function(){return!0},E.prototype.render=function(){return""},E.prototype.getEditorNode=function(){return this.editorNode},E.prototype.setEditorNode=function(m,v,f){this.editorNode=m,v&&(this.editableProperty.key=v),f&&(this.editableProperty.editableId=f)},E.prototype.destructor=function(){this.config=this.id=null},E.prototype.getCss=function(){var m=this.config,v=m.$selected,f=m.$target,d=m.assistant,p=d!==void 0&&d,u=m.partner,s=u!==void 0&&u,l=m.catchItem,r=l===void 0||l,a=m.$move,i=m.type,n=this.config.css||"";return v&&this.getBaseType()!=="line"&&(n+=" dhx_diagram_item--selected"),a&&i!=="$sgroup"&&(n+=" dhx_diagram_item--move"),f&&(n+=p||s||!r?" dhx_action__target dhx_action__target--doesnt_take":" dhx_action__target dhx_action__target--take"),n},E.prototype.setDefaults=function(m,v){return m},E.prototype.getCoords=function(m){var v=m.dx,f=m.dy,d=m.$group,p=m.$gx,u=m.$gy,s=m.x,l=m.y;return v&&(s+=v),f&&(l+=f),d?{x:p,y:u}:(delete m.$gx,delete m.$gy,{x:s,y:l})},E}();_.BaseItem=b},function(W,_,y){var b,E=this&&this.__extends||(b=function(u,s){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,r){l.__proto__=r}||function(l,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(l[a]=r[a])},b(u,s)},function(u,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function l(){this.constructor=u}b(u,s),u.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}),m=this&&this.__spreadArray||function(u,s,l){if(l||arguments.length===2)for(var r,a=0,i=s.length;a<i;a++)!r&&a in s||(r||(r=Array.prototype.slice.call(s,0,a)),r[a]=s[a]);return u.concat(r||Array.prototype.slice.call(s))};Object.defineProperty(_,"__esModule",{value:!0}),_.flowShapes=_.FlowShape=void 0;var v=y(0),f=y(28),d=y(19),p=function(u){function s(l,r){return u.call(this,l,r)||this}return E(s,u),s.prototype.setDefaults=function(l,r){var a=l.width,i=l.height,n=l.stroke,e=l.fill,t=l.strokeWidth,o=l.fontColor,c=l.strokeDash,h=l.textAlign,g=l.lineHeight,x=l.fontStyle,C=l.textVerticalAlign,k=l.type,I=l.fontSize,O=l.text,D=l.preview,A=l.x,H=l.y,S=l.fixed,$=l.editable,w=["circle","or","junction"].includes(k),T=r.width?parseFloat(r.width):w?90:140,F=r.height?parseFloat(r.height):90,z=r.lineHeight?parseFloat(r.lineHeight):14,B=r.fontSize?parseFloat(r.fontSize):14,L=r.strokeWidth?parseFloat(r.strokeWidth):1;return l.strokeWidth=t||L,l.width=a||T,l.height=i||F,l.fontSize=I||B,l.lineHeight=g||z,l.strokeDash=c||r.strokeDash||"",l.fill=e||r.fill||"#EEF1F6",l.stroke=n||r.stroke||"#B8C6D6",l.text=typeof O=="string"?O:r.text||"",l.textAlign=h||r.textAlign||"center",l.textVerticalAlign=C||r.textVerticalAlign||"center",l.fontStyle=x||r.fontStyle||"normal",l.fontColor=o||r.fontColor||"#4C4C4C",l.preview=D||r.preview,l.x=A||0,l.y=H||0,l.fixed=S||!1,l.editable=typeof $!="boolean"||$,l},s.prototype.getContent=function(){var l=this.config,r=l.text,a=l.$editable;return[(0,v.el)("div.dhx_diagram_item__text",{style:(0,d.getShapeCss)(this.config)},a?[this.getEditorNode()]:r)]},s.prototype.render=function(){var l=this;this.config.strokeType||(this.config.strokeType="line"),this.config.strokeType==="line"&&(this.config.strokeDash="0"),this.config.strokeType==="dash"&&(this.config.strokeDash="5,5");var r=this.config,a=r.id,i=r.angle,n=r.width,e=r.height,t=r.strokeWidth,o=r.$group,c=r.$selected,h=o||c?c?2:1:0,g=this.getCoords(this.config),x=t/2,C=[];return Array.isArray(this.config.dir)?this.config.dir.forEach(function(k,I){C.push((0,d.getCircleTpl)(l.config,I))}):C.push((0,d.getCircleTpl)(this.config)),(0,v.el)("div.dhx_diagram_item.dhx_diagram_shape.dhx_diagram_shape_flow",{_key:a,class:this.getCss(),"data-dhx-id":a,style:{transform:"rotate(".concat(i||0,"deg)"),position:"absolute",height:e,width:n,top:g.y,left:g.x,zIndex:h}},m([(0,v.sv)("svg",{xmlns:"http://www.w3.org/2000/svg",height:e,width:n,viewBox:"".concat(-x," ").concat(-x," ").concat(n+x," ").concat(e+x),reserveAspectRatio:"none"},this._getShapeContour()),(0,d.getTextTemplate)(this.config,this.getContent())],C,!0))},s.prototype._getShapeContour=function(){var l,r=this.config,a=r.width,i=r.height,n=r.stroke,e=r.fill,t=r.strokeWidth,o=r.strokeDash,c=r.type,h=r.strokeType,g=_.flowShapes[c],x=Math.round(a/12),C=a-t/2,k=i-t/2,I=g.path(C,k,x),O=g.additionalPath(C,k,x);return[(l=I,(0,v.sv)("path",{d:l,class:"dhx_diagram_shape_flow__svg ",stroke:h!=="none"&&n,fill:e,"stroke-width":t,"stroke-dasharray":o})),function(D){return(0,v.sv)("path",{d:D,fill:"none",stroke:n,class:"dhx_diagram_shape_flow__extra-line"})}(O)]},s}(f.BaseShape);_.FlowShape=p,_.flowShapes={circle:{path:function(u,s){return`
			M `.concat(u/2," 0 A ").concat(s/2,",").concat(s/2," 0 1 0 ").concat(u/2,",").concat(s,`
			A `).concat(s/2,",").concat(s/2," 0 1 0 ").concat(u/2,",0 Z")},additionalPath:function(){}},rectangle:{path:function(u,s){return"M 0,0 L 0,".concat(s," L ").concat(u,",").concat(s," L ").concat(u,",0 Z")},additionalPath:function(){}},triangle:{path:function(u,s){return"M ".concat(u/2," 0 L").concat(u," ").concat(s," L 0 ").concat(s," z")},additionalPath:function(){}},start:{path:function(u,s){return`
			M `.concat(s/2," 0 A ").concat(s/2,",").concat(s/2," 0 1 0 ").concat(s/2,",").concat(s,`
			H `).concat(u-s/2," A ").concat(s/2,",").concat(s/2," 0 1 0 ").concat(u-s/2,",0 H ").concat(s/2," Z")},additionalPath:function(){}},end:{path:function(u,s){return`
			M `.concat(s/2," 0 A ").concat(s/2,",").concat(s/2," 0 1 0 ").concat(s/2,",").concat(s,`
			H `).concat(u-s/2," A ").concat(s/2,",").concat(s/2," 0 1 0 ").concat(u-s/2,",0 H ").concat(s/2," Z")},additionalPath:function(){}},process:{path:function(u,s){return"M 0,0 L 0,".concat(s," L ").concat(u,",").concat(s," L ").concat(u,",0 Z")},additionalPath:function(){}},output:{path:function(u,s,l){return"M ".concat(2*l,",0 ").concat(u,",0 ").concat(u-2*l,",").concat(s," 0,").concat(s," Z")},additionalPath:function(){}},decision:{path:function(u,s){return"M 0 ".concat(s/2," L ").concat(u/2," 0 L ").concat(u," ").concat(s/2," L ").concat(u/2," ").concat(s," Z")},additionalPath:function(){}},display:{path:function(u,s){return`
			M 0 `.concat(s/2," L ").concat(u/4," 0 H ").concat(3*u/4,`
			A `).concat(u/4,",").concat(s/2," 0 1 1 ").concat(3*u/4,",").concat(s,`
			H `).concat(u/4," Z")},additionalPath:function(){}},document:{path:function(u,s){return"M0 ".concat(s-=8,` C
			`).concat(u/6," ").concat(10*s/9,`,
			`).concat(u/3," ").concat(10*s/9,`,
			`).concat(u/2," ").concat(s,` S
			`).concat(5*u/6," ").concat(8*s/9,`,
			`).concat(u," ").concat(s,`
			V 0 H 0 Z`)},additionalPath:function(){}},data:{path:function(u,s,l){return"M ".concat(l,` 0 Q
			`).concat(-l," ").concat(s/2,`,
			`).concat(l," ").concat(s," H ").concat(u,` Q
			`).concat(u-2*l," ").concat(s/2,`,
			`).concat(u," 0 Z")},additionalPath:function(){}},database:{path:function(u,s,l){return"M 0 ".concat(l," A ").concat(u/2,",").concat(l," 0 1 0 ").concat(u,",").concat(l,`
			A `).concat(u/2,",").concat(l," 0 1 0 0,").concat(l,`
			V `).concat(s," H ").concat(u," V ").concat(l)},additionalPath:function(u,s,l){return"M 0 ".concat(l," A ").concat(u/2,",").concat(l," 0 1 0 ").concat(u,",").concat(l)}},internal:{path:function(u,s){return"M 0,0 L 0,".concat(s," L ").concat(u,",").concat(s," L ").concat(u,",0 Z")},additionalPath:function(u,s,l){return"M ".concat(l," 0 V ").concat(s," M 0 ").concat(l," H ").concat(u)}},offline:{path:function(u,s){return"M 0,0 ".concat(u,",0 ").concat(u/2,",").concat(s," Z")},additionalPath:function(u,s,l){var r=s/Math.sqrt(Math.pow(u/2,2)+Math.pow(s,2)),a=Math.sqrt(Math.pow(l/r,2)-Math.pow(l,2));return"M ".concat(u/2-a," ").concat(s-l," h ").concat(2*a)}},delay:{path:function(u,s){return`
			M 0 0 H `.concat(3*u/4,`
			A `).concat(u/4,",").concat(s/2," 0 1 1 ").concat(3*u/4,",").concat(s,`
			H 0 Z`)},additionalPath:function(){}},page:{path:function(u,s){return`
			M 0,0
			`.concat(u,`,0
			`).concat(u,",").concat(s/2,`
			`).concat(u/2,",").concat(s,`
			0,`).concat(s/2," Z")},additionalPath:function(){}},input:{path:function(u,s){return`
			M 0,`.concat(s/3,`
			`).concat(u,",").concat(0,`
			`).concat(u,",").concat(s,`
			0,`).concat(s," Z")},additionalPath:function(){}},operation:{path:function(u,s){return`
			M 0,0
			`.concat(u,`,0
			`).concat(3*u/4,",").concat(s,`
			`).concat(u/4,",").concat(s," Z")},additionalPath:function(){}},punchcard:{path:function(u,s){return`
			M 0,`.concat(s/4,`
			`).concat(u/4,`,0
			`).concat(u,`,0
			`).concat(u,",").concat(s,`
			0,`).concat(s," Z")},additionalPath:function(){}},subroutine:{path:function(u,s){return"M 0,0 L 0,".concat(s," L ").concat(u,",").concat(s," L ").concat(u,",0 Z")},additionalPath:function(u,s,l){return"M ".concat(l," 0 V ").concat(s," M ").concat(u-l," 0 V ").concat(s)}},comment:{path:function(u,s){return"M ".concat(u," 0 H 0 V ").concat(s," H").concat(u," V").concat(s-4," H").concat(4," V").concat(4," H").concat(u)},additionalPath:function(){}},storage:{path:function(u,s){return"M 0,0 ".concat(u,",0 ").concat(u/2,",").concat(s," Z")},additionalPath:function(){}},extract:{path:function(u,s){return"M 0,".concat(s," ").concat(u,",").concat(s," ").concat(u/2,",0 Z")},additionalPath:function(){}},collate:{path:function(u,s){return"M ".concat(u/2," ").concat(s/2," L 0 0 H ").concat(u," L 0 ").concat(s," H ").concat(u," Z")},additionalPath:function(){}},or:{path:function(u,s){return`
			M `.concat(u/2," 0 A ").concat(s/2,",").concat(s/2," 0 1 0 ").concat(u/2,",").concat(s,`
			A `).concat(s/2,",").concat(s/2," 0 1 0 ").concat(u/2,",0 Z")},additionalPath:function(u,s){return`
			M`.concat((u-s)/2," ").concat(s/2," ").concat(u-(u-s)/2," ").concat(s/2,`
			M`).concat(u/2," ").concat(0," ").concat(u/2," ").concat(s)}},junction:{path:function(u,s){return`
			M `.concat(u/2," 0 A ").concat(s/2,",").concat(s/2," 0 1 0 ").concat(u/2,",").concat(s,`
			A `).concat(s/2,",").concat(s/2," 0 1 0 ").concat(u/2,",0 Z")},additionalPath:function(u,s){return`
			M `.concat(u/2-s*Math.SQRT2/4," ").concat(s/2-s*Math.SQRT2/4," L ").concat(u/2+s*Math.SQRT2/4," ").concat(s/2+s*Math.SQRT2/4,`
			M `).concat(u/2-s*Math.SQRT2/4," ").concat(s/2+s*Math.SQRT2/4," L ").concat(u/2+s*Math.SQRT2/4," ").concat(s/2-s*Math.SQRT2/4)}},keyring:{path:function(u,s,l){return`
			M `.concat(l," 0 A ").concat(l,",").concat(s/2," 0 1 0 ").concat(l,",").concat(s,`
			H `).concat(u-l," A ").concat(l,",").concat(s/2," 0 1 0 ").concat(u-l,",0 H ").concat(l," Z")},additionalPath:function(){}},tape:{path:function(u,s){return`
			M0 `.concat(s-12,` C
			`).concat(u/6," ").concat(10*(s-8)/9,`,
			`).concat(u/3," ").concat(10*(s-8)/9,`,
			`).concat(u/2," ").concat(s-8,` S
			`).concat(5*u/6," ").concat(8*(s-8)/9,`,
			`).concat(u," ").concat(s,`
			V 12 C
			`).concat(5*u/6," ").concat(-s/9,`,
			`).concat(2*u/3," ").concat(s/9/2,`,
			`).concat(u/2,` 8 S
			`).concat(u/6," ").concat(s/9,`,
			0 0 Z`)},additionalPath:function(){}},preparation:{path:function(u,s){return"M0 ".concat(s/2,"L").concat(20," 0H").concat(u-20,"L ").concat(u," ").concat(s/2,"L").concat(u-20," ").concat(s,"H").concat(20,"L0 ").concat(s/2,"Z")},additionalPath:function(){}},endpoint:{path:function(u,s){return"M0 ".concat(s/2,"  L").concat(u/2," ").concat(0," L ").concat(u/2," ").concat(s," z")},additionalPath:function(){}},roll:{path:function(u,s){return`
			M `.concat(u/2," 0 A ").concat(s/2,",").concat(s/2," 0 1 0 ").concat(u/2,",").concat(s,`
			A `).concat(s/2,",").concat(s/2," 0 1 0 ").concat(u/2,",0 Z")},additionalPath:function(u,s){return"M ".concat(u/2," ").concat(s," H ").concat(u)}}}},function(W,_,y){var b=this&&this.__spreadArray||function(m,v,f){if(f||arguments.length===2)for(var d,p=0,u=v.length;p<u;p++)!d&&p in v||(d||(d=Array.prototype.slice.call(v,0,p)),d[p]=v[p]);return m.concat(d||Array.prototype.slice.call(v))};Object.defineProperty(_,"__esModule",{value:!0});var E=function(){function m(v,f,d){this._tbounds=[0,0],v?(this.nodes=[f],v.collectSubNodes(f,this.nodes),this.hash=v.hash,this.root(f,d)):(this.nodes=[],this.hash={})}return m.prototype.copy=function(){var v=this,f=new m;return f.nodes=this.nodes.map(function(d){return{id:d.id,w:d.w,h:d.h,x:d.x,y:d.y,kids:[],links:[],isn:d.isn,iss:d.iss}}),f.hash={},f.nodes.forEach(function(d){f.hash[d.id]=d}),f.nodes.forEach(function(d){d.kids=v.hash[d.id].kids.map(function(p){return f.hash[p.id]}),d.links=v.hash[d.id].links.map(function(p){return f.hash[p.id]})}),f._tbounds=[].concat(this._tbounds),f._ybounds=[].concat(this._ybounds),f._bounds=this._bounds?this._bounds.map(function(d){return[].concat(d)}):[],f.routes=this.routes,f._root=this._root?f.hash[this._root.id]:null,f},m.prototype.collectSubNodes=function(v,f){for(var d=0;d<v.kids.length;d++){var p=v.kids[d];f.push(p),p.kids&&this.collectSubNodes(p,f)}},m.prototype.getLevelBounds=function(){return this._bounds},m.prototype.getBounds=function(v,f,d){var p;return[(p=d?this._tbounds:this._bounds[v])[0]?p[0]-f/4:0,p[1]?p[1]+f/4:0]},m.prototype.addEdge=function(v,f){var d=this.hash[v],p=this.hash[f];d.links.push(p),p.links.push(d)},m.prototype.importNodes=function(v){var f=this;v.forEach(function(d){f.hash[d.id]=d,f.nodes.push(d)})},m.prototype.split=function(v){var f=this,d=[];if(this.nodes=this.nodes.filter(function(u){return!v(u)||(delete f.hash[u.id],d.push(u),!1)}),!d.length)return null;var p=new m;return p.importNodes(d),p},m.prototype.addNode=function(v){v.kids=[],v.links=[],this._root||(this._root=v),this.hash[v.id]=v,this.nodes.push(v)},m.prototype.setRoot=function(){var v=this.nodes[0];this.nodes.forEach(function(f){f.id!==v.id&&f.links.length&&(v=f.links.length>v.links.length?f:v)}),this._root=v},m.prototype.getNode=function(v){return this.hash[v]},m.prototype.getRoot=function(){return this._root},m.prototype.getLevels=function(){return this._deep},m.prototype.clean=function(){this.nodes.forEach(function(v){if(v.links.length>1){var f=[];v.links=v.links.filter(function(d){return!f.includes(d)&&v!==d&&(f.push(d),!0)})}})},m.prototype.getNodes=function(){return this.nodes},m.prototype.getBox=function(){return[this._tbounds,this._ybounds]},m.prototype.setGlobalBox=function(){var v,f,d,p;this.nodes.length&&(v=d=1/0,f=p=-1/0,this.nodes.forEach(function(u){var s=u.x-u.w/2,l=u.x+u.w/2,r=u.y-u.h/2,a=u.y+u.h/2;s<v&&(v=s),r<d&&(d=r),l>f&&(f=l),a>p&&(p=a)}),this._tbounds=[v,f],this._ybounds=[d,p])},m.prototype.translate=function(v){if(this.nodes.forEach(function(d){d.x+=v.x,d.y+=v.y}),this._tbounds[0]+=v.x,this._tbounds[1]+=v.x,this._bounds)for(var f=0;f<this._bounds.length;f++)this._bounds[f][0]+=v.x,this._bounds[f][1]+=v.x;this._ybounds&&(this._ybounds[0]+=v.y,this._ybounds[1]+=v.y)},m.prototype.rotate=function(v){var f=v.x,d=v.y;this.nodes.forEach(function(i){var n=i.x*d-i.y*f,e=i.x*f+i.y*d;i.x=n,i.y=e});var p=this._tbounds,u=p[0],s=p[1],l=this._ybounds,r=l[0],a=l[1];this._tbounds=[u*d-r*f,s*d-a*f].sort(),this._ybounds=[u*f+r*d,s*f+a*d].sort()},m.prototype.setBox=function(){var v=this._deep[this._deep.length-1],f=-1/0;v.forEach(function(d){var p=d.y+d.h/2;p>f&&(f=p)}),this._ybounds=[this._root.y-this._root.h/2,f]},m.prototype.mirror=function(){this.nodes.forEach(function(r){r.x=-r.x});for(var v=0;v<this._bounds.length;v++){var f=this._bounds[v],d=f[0],p=f[1];this._bounds[v]=[-p,-d]}var u=this._tbounds,s=u[0],l=u[1];this._tbounds=[-l,-s]},m.prototype.nonLeaves=function(v){return v.kids.filter(function(f){return f.kids.length>0})},m.prototype.toTree=function(v){return v&&this.hash[v.id]||(v=this._detectRoot()),this.nodes.forEach(function(f){return f.kids=[]}),this.setKids(v),this.cleanKids(v,[v.id]),v},m.prototype.root=function(v,f){this._deep=[[v]];var d=Math.round((f&&f.rotate?v.h:v.w)/2);this._tbounds=[-d,d],this._bounds=[[-d,d]],this._leaves=[],this._root=v,this._setLevels(v,1),this._width=1;for(var p=0;p<this._deep.length;p++){var u=this._deep[p].length;u>this._width&&(this._width=u)}},m.prototype.setKids=function(v){var f=this;v.links.forEach(function(d){v.kids.push(d),d.kids.length||f.setKids(d)})},m.prototype.cleanKids=function(v,f,d){var p=this;d===void 0&&(d=[]);var u=b([],v.kids,!0);v.kids.forEach(function(s){if(f.includes(s.id)){var l=u.findIndex(function(r){return r.id===s.id});l>-1&&u.splice(l,1)}else f.push(s.id)}),v.kids=u,v.kids.forEach(function(s){s.kids.length&&!d.includes(s.id)&&p.cleanKids(s,f,d)}),d.push(v.id)},m.prototype._detectRoot=function(){var v={},f=this.nodes,d=[];do d.forEach(function(p){return v[p]=1}),d=[],f=f.filter(function(p){var u=p.links.map(function(s){return v[s.id]?0:1}).reduce(function(s,l){return s+l},0)>1;return u||d.push(p.id),u});while(f.length>2&&d.length);return f[0]||this.nodes[0]},m.prototype._setLevels=function(v,f){for(var d=v.kids,p=0;p<d.length;p++){var u=d[p],s=this._deep[f];s?s.push(u):(this._deep[f]=[u],this._bounds[f]=[0,0]),u.kids.length?this._setLevels(u,f+1):this._leaves.push(u)}},m.prototype.getIString=function(){for(var v=[],f=0;f<this._leaves.length;f++)this._leaves[f].isn=0,this._leaves[f].iss="";for(f=this._deep.length-2;f>=0;f--){for(var d=this._deep[f].filter(function(a){return a.kids.length>0}),p=0;p<d.length;p++)for(var u=d[p],s=0;s<u.kids.length;s++)u.iss=u.kids.map(function(a){return a.isn}).sort().join(",");d.sort(function(a,i){return a.iss>i.iss?1:-1}),v.push(d.map(function(a){return a.iss}).join("|"));var l=d[0].iss,r=1;for(p=0;p<d.length;p++)l!==d[p].iss&&(l=d[p].iss,r++),d[p].isn=r}return v.join(";")},m}();_.default=E},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.en=void 0,_.en={addColumnLast:"Add column",addLeftShape:"Add left shape",addLineTitle:"Add title",addRightShape:"Add right shape",addRowLast:"Add row",addShape:"Add shape",alignHorizontalCenter:"Align horizontal center",alignHorizontalDistribution:"Distribute horizontal spacing",alignHorizontalLeft:"Align left",alignHorizontalRight:"Align right",alignVerticalBottom:"Align bottom",alignVerticalDistribution:"Distribute vertical spacing",alignVerticalMiddle:"Align vertical center",alignVerticalTop:"Align top",connect:"Connect",copy:"Duplicate",lineTitleAutoPositionDisable:"Disable title auto position",lineTitleAutoPositionEnable:"Enable title auto position",menu:"Menu",menuAddAssistant:"Add assistant",menuAddColumnLeft:"Add column left",menuAddColumnRight:"Add column right",menuAddPartner:"Add partner",menuAddRowDown:"Add row down",menuAddRowUp:"Add row up",menuAlignChildrenHorizontally:"Align children horizontally",menuAlignChildrenVertically:"Align children vertically",menuDelete:"Delete",menuDeleteCol:"Delete column",menuDeleteRow:"Delete row",menuMoveColumnLeft:"Move column left",menuMoveColumnRight:"Move column right",menuMoveRowDown:"Move row down",menuMoveRowUp:"Move row up",remove:"Delete",removePoint:"Delete point",text:"Text",title:"Title",shapebar:{shapeSections:"Shapes",groupSections:"Groups",swimlaneSections:"Swimlanes",group:"Group",swimlaneCols:"Swimlane cols",swimlaneRows:"Swimlane rows",swimlaneMix:"Swimlane mix",untitled:"Untitled"},editbar:{arrange:"Arrange",border:"Border",fill:"Fill",gridStep:"Grid step",header:"Header",headerColor:"Header color",headerPosition:"Position",image:"Image",lineShape:"Line shape",lineStyle:"Line style",pointerView:"Pointer view",positionOffset:"Position offset",size:"Size",subheaderCols:"Subheader for columns",subheaderRows:"Subheader for rows",text:"Text",textAlignment:"Text alignment",textStyle:"Text style",title:"Title"},toolbar:{align:"Align",alignHorizontalCenter:"Horizontal center",alignHorizontalLeft:"Left",alignHorizontalRight:"Right",alignVerticalBottom:"Bottom",alignVerticalCenter:"Vertical center",alignVerticalTop:"Top",arrange:"Arrange",connectionPoints:"Connection points",copy:"Copy",copyStyle:"Copy style",distribute:"Distribute",distributeHorizontal:"Horizontal",distributeVertical:"Vertical",duplicate:"Duplicate",edit:"Edit",editbar:"Edit bar",export:"Export as",exportJson:"JSON",exportPdf:"PDF",exportPng:"PNG",file:"File",grid:"Grid",gridStep:"Grid step",importJson:"Import from JSON",itemsDraggable:"Draggable items",layout:"Auto layout",layoutMode:"Placement mode",layoutModeDirect:"Direct",layoutModeEdges:"Edges",layoutOrthogonal:"Orthogonal",layoutRadial:"Radial",magnetic:"Magnetic",paste:"Paste",pasteStyle:"Paste style",redo:"Redo",resizePoints:"Resize points",selectAll:"Select all",selectNone:"Select none",shapebar:"Shape bar",theme:"Theme",themeDark:"Dark",themeDarkContrast:"Dark contrast",themeLight:"Light",themeLightContrast:"Light contrast",undo:"Undo",view:"View",zoomIn:"Zoom in",zoomOut:"Zoom out"},hotkey:{"Alt+1":"Alt+1","Alt+2":"Alt+2","Alt+3":"Alt+3","Ctrl+Z":"Ctrl+Z","Ctrl+Shift+Z":"Ctrl+Shift+Z","Ctrl+D":"Ctrl+D","Ctrl+C":"Ctrl+C","Ctrl+V":"Ctrl+V","Ctrl+Alt+C":"Ctrl+Alt+C","Ctrl+Alt+V":"Ctrl+Alt+V","Ctrl+A":"Ctrl+A","Ctrl+Shift+A":"Ctrl+Shift+A","Ctrl+Mousewheel":"Ctrl+Mousewheel","CMD+Z":"CMD+Z","CMD+Shift+Z":"CMD+Shift+Z","CMD+D":"CMD+D","CMD+C":"CMD+C","CMD+V":"CMD+V","CMD+Alt+C":"CMD+Alt+C","CMD+Alt+V":"CMD+Alt+V","CMD+A":"CMD+A","CMD+Shift+A":"CMD+Shift+A","CMD+Mousewheel":"CMD+Mousewheel"}},_.default=_.en},function(W,_,y){var b,E=this&&this.__extends||(b=function(s,l){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i])},b(s,l)},function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function r(){this.constructor=s}b(s,l),s.prototype=l===null?Object.create(l):(r.prototype=l.prototype,new r)}),m=this&&this.__assign||function(){return m=Object.assign||function(s){for(var l,r=1,a=arguments.length;r<a;r++)for(var i in l=arguments[r])Object.prototype.hasOwnProperty.call(l,i)&&(s[i]=l[i]);return s},m.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.BaseGroup=void 0;var v=y(0),f=y(39),d=y(54),p=y(19),u=function(s){function l(r,a){var i=s.call(this,r,a)||this;return i.data=a.data,i.setMinBox(),i}return E(l,s),l.prototype.getBaseType=function(){return"group"},l.prototype.isEditable=function(r){var a,i;return(i=(a=this.config)===null||a===void 0?void 0:a.header)===null||i===void 0?void 0:i.editable},l.prototype.getLocatePercent=function(r){var a=function(t,o){var c=Math.max(o.left,t.left),h=Math.min(o.right,t.right);return Math.max(h-c,0)},i=this.getBox(),n=a({left:r.left,right:r.right},{left:i.left,right:i.right})*a({left:r.top,right:r.bottom},{left:i.top,right:i.bottom}),e=(r.right-r.left)*(r.bottom-r.top);return Math.round(n/e*100)},l.prototype.setMinBox=function(r){var a=r||this.getBox(),i=a.left,n=a.right,e=a.top,t=a.bottom;this.config.$minBox={left:i,right:n,top:e,bottom:t}},l.prototype.getBox=function(){var r=this.config,a=r.x,i=a===void 0?0:a,n=r.y,e=n===void 0?0:n,t=r.dx,o=t===void 0?0:t,c=r.dy,h=i+o,g=e+(c===void 0?0:c);return{left:h,right:h+r.$width,top:g,bottom:g+r.$height}},l.prototype.getChildBox=function(){var r={left:0,top:0,right:0,bottom:0};return this.data.eachChild(this.id,function(a){var i=a.$item.getBox();(i.right>r.right||r.right===0)&&(r.right=i.right),(i.left<r.left||r.left===0)&&(r.left=i.left),(i.bottom>r.bottom||r.bottom===0)&&(r.bottom=i.bottom),(i.top<r.top||r.top===0)&&(r.top=i.top)},!1),r},l.prototype.trackChildMove=function(r,a){var i=this.config,n=i.x,e=i.y,t=i.width,o=i.height,c=i.exitArea,h=c.padding,g=c.groupBehavior;if(g!=="unbound"){var x=n+t-h>=r.right+a.x&&n+h<=r.left+a.x,C=e+o-h>=r.bottom+a.y&&e+h<=r.top+a.y;if(g==="boundNoBorderExtension")return x&&C;if(g==="boundBorderExtension"){var k=this.config.$minBox,I=k.right,O=k.left,D=k.top,A=k.bottom,H=n+t-h<=r.right+a.x,S=n+h>=r.left+a.x,$=e+h>=r.top+a.y,w=e+o-h<=r.bottom+a.y,T={x:n,y:e,width:t,height:o};(H||x&&a.x<0&&n+t+a.x-h>=I)&&(T.width+=a.x),(S||x&&a.x>0&&n+a.x-h<=O)&&(T.width+=-a.x,T.x+=a.x),(w||C&&a.y<0&&e+o+a.y-h>=A)&&(T.height+=a.y),($||C&&a.y>0&&e+a.y-h<=D)&&(T.height+=-a.y,T.y+=a.y),this.data.update(this.id,T)}}return!0},l.prototype.getChildHtmlNodes=function(r,a){var i=[],n=r.x,e=r.y,t=r.open,o=r.header,c=!(o!=null&&o.enable)||!(o!=null&&o.closable)||t;if(r.groupChildren.length)if(Array.isArray(a))for(var h=0;h<a.length;h++)!a[h].hidden&&c&&(a[h].$gx=a[h].x-n,a[h].$gy=a[h].y-e,i.push(a[h].$item.render()));else a.eachChild(this.id,function(g){!g.hidden&&c&&(g.$gx=g.x-n,g.$gy=g.y-e,i.push(g.$item.render()))},!1);return i},l.prototype.getChildSvgNodes=function(r,a){var i=this,n=r.$typeConfig,e=r.x,t=r.y,o=r.groupChildren,c=r.header,h=!(c!=null&&c.enable)||!(c!=null&&c.closable)||open,g=[];return o.length&&n&&h&&a.mapVisible(function(x){var C;if(x.$item.getBaseType()==="line"&&!x.$move&&!(!((C=x==null?void 0:x.points)===null||C===void 0)&&C.some(function(O){return O.custom}))){var k=a.getItem(x.from),I=a.getItem(x.to);(k==null?void 0:k.$group)==i.id&&(I==null?void 0:I.$group)==i.id&&k.$gx&&k.$gy&&I.$gx&&I.$gy?((0,f.nearestLinkPath)(x,m(m({},k),{x:k.$gx,y:k.$gy}),m(m({},I),{x:I.$gx,y:I.$gy}),n),g.push(x.$item.render())):(k==null?void 0:k.$group)===i.id&&k.$gx&&k.$gy&&I?((0,f.nearestLinkPath)(x,m(m({},k),{x:k.$gx,y:k.$gy}),m(m({},I),{x:I.x-e,y:I.y-t}),n),g.push(x.$item.render())):(I==null?void 0:I.$group)===i.id&&I.$gx&&I.$gy&&k&&((0,f.nearestLinkPath)(x,m(m({},k),{x:k.x-e,y:k.y-t}),m(m({},I),{x:I.$gx,y:I.$gy}),n),g.push(x.$item.render()))}}),g},l.prototype.getGroupHeader=function(r,a){var i=r.id,n=r.header,e=n.text,t=n.closable,o=n.position,c=n.iconColor,h=r.$editable,g=r.open,x=r.type!=="$sgroup"&&t,C=o==="right"||o==="left"?r.height:"100%",k=o==="bottom"||o==="top"?r.width:"100%";return(0,v.el)("div",{dhx_group_header:i,class:function(I){var O=I.header.position;return"dhx_diagram_group__header dhx_diagram_group__header--position_".concat(O)}(r),style:function(I){var O=I.style,D=O.strokeWidth,A=O.stroke,H=O.borderStyle,S=I.header,$=S.position,w=S.fill,T=$==="bottom"||$==="top"?I.header.height:"100%",F=$==="right"||$==="left"?I.header.height:"100%",z="".concat(D,"px ").concat(H," ").concat(A);return{height:T,width:F,minWidth:F,minHeight:T,background:w,zIndex:I.$selected?1:0,border:z}}(r)},[(0,v.el)("span.dhx_diagram_group__header_text",{style:(0,p.getTextStyle)(m(m({},r==null?void 0:r.header),{container:{width:k,height:C}}))},h&&this.editableProperty.editableId===i?[a]:e),x&&(0,p.getExpandIcon)({color:c,open:g,position:o})||null])},l.prototype.setDefaults=function(r){return r.x=r.x||0,r.y=r.y||0,r.open=typeof r.open!="boolean"||r.open,r.header&&(r.header=m({enable:!0,text:"",fontSize:14,lineHeight:14,textAlign:"center",textVerticalAlign:"center",fontStyle:"normal",fontWeight:"500",fontColor:"#4C4C4C",position:"top",editable:!0,fill:"#EEF1F6",height:40,iconColor:"#808080"},r.header)),r.style=m({strokeWidth:1,stroke:"#B8C6D6",strokeType:"line",borderStyle:"solid",fill:"inherit",overFill:"rgba(46, 204, 113, 0.1)",partiallyFill:"rgba(231, 76, 60, 0.1)"},r.style),r.entryArea=m({catchArea:100,borderFlexible:!1},r.entryArea),r.entryArea.borderFlexible||(r.entryArea.catchArea=100),r.exitArea=m({groupBehavior:"unbound",padding:0},r.exitArea),r.fixed=r.fixed||!1,r.groupChildren=r.groupChildren||[],r},l.prototype.setServiceProp=function(r){var a=r.open,i=r.height,n=r.width,e=r.header;if(r.$captureArea=r.$captureArea||"out",e){var t=e.enable,o=e.closable,c=e.height,h=e.position;if(!a&&t&&o){var g=h==="left"||h==="right",x=h==="bottom"||h==="top";return r.$width=g?parseInt(c):n,void(r.$height=x?parseInt(c):i)}}r.$width=n,r.$height=i},l}(d.BaseItem);_.BaseGroup=u},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(n){for(var e,t=1,o=arguments.length;t<o;t++)for(var c in e=arguments[t])Object.prototype.hasOwnProperty.call(e,c)&&(n[c]=e[c]);return n},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.Controls=_.getLength=void 0;var E=y(0),m=y(2),v=y(29),f=y(40),d=y(37),p=y(97),u=y(207),s=y(208);function l(n,e){p.drag.start(n,e.data.resizer,e.data.p)}function r(n,e){return e===void 0&&(e="default"),{x:(e==="default"?n.x:n.x+(n.dx||0))+n.width/2,y:(e==="default"?n.y:n.y+(n.dy||0))+n.height/2}}function a(n,e,t){if(t===void 0&&(t="default"),n.$move=!0,t==="default")return n.x=(n.x||0)+e.x,void(n.y=(n.y||0)+e.y);n.dx=(n.dx||0)+e.x,n.dy=(n.dy||0)+e.y}_.getLength=function(n,e){var t=e.x-n.x,o=e.y-n.y;return Math.sqrt(t*t+o*o)};var i=function(){function n(e,t,o){var c=this;this._touch={dblDuration:300,timeStamp:null},this._magneticItems={xItem:null,xItemLeft:null,xItemRight:null,yItem:null,yItemTop:null,yItemBottom:null,dragItem:null},this.setConfig(o),this._events=e,this._diagram=t,this._isOrgType=["org","mindmap"].includes(this._diagram.config.type),this.connect=new u.Connect(this,this._diagram),this._resize=new s.Resize(this,this._diagram),this._diagram.events.on(v.DiagramEvents.lineTitleMouseDown,function(h,g,x){var C=c._diagram.data.getItem(g);C.$editable||C.$item.isFixed()||c._eventHandling(x,g,"lineTitle")}),this._diagram.events.on(v.DiagramEvents.lineMouseDown,function(h,g){g.pointerType==="touch"&&(c._touch.timeStamp?(c._touch.dblDuration>=+g.timeStamp.toFixed()-c._touch.timeStamp&&(g.preventDefault(),c._diagram.events.fire(v.DiagramEvents.lineDblClick,[h,g])),c._touch.timeStamp=null):c._touch.timeStamp=+g.timeStamp.toFixed(),setTimeout(function(){c._touch.timeStamp=null},c._touch.dblDuration))}),this._diagram.events.on(v.DiagramEvents.groupMouseDown,function(h,g){c.connect.removeNearShape();var x=c._diagram.data.getItem(h);x&&!x.$editable&&(x.type==="$sgroup"&&(x=c._diagram.data.getItem(x.$group)),c._eventHandling(g,h,"group"))}),this._diagram.events.on(v.DiagramEvents.shapeMouseDown,function(h,g){c.connect.removeNearShape();var x=c._diagram.data.getItem(h);x&&!x.$editable&&c._eventHandling(g,h,"shape")}),this._diagram.events.on(v.SelectionEvents.afterUnSelect,function(h){var g=h.id,x=c._diagram.data.getItem(g);x&&x.$item.getBaseType()==="line"&&x.$selectedPoint&&(x.$selectedPoint=null)})}return n.prototype.render=function(e,t){if(!e)return this.config.connectionPoints?(0,E.el)(".dhx_controls",{style:{zIndex:0},onpointerdown:{".dhx_connect_grip":l,".dhx_connect_point":l}},[this.connect.getPoints(e,t)]):null;if(e.$item.canResize()!==!1){var o=[];this._isOrgType?this.config.resizePoints&&o.push(this._resize.getPoints(e,t)):(this.config.connectionPoints&&o.push(this.connect.getPoints(e,t)),this.config.resizePoints&&this.connect.getItemId()!=e.id&&o.push(this._resize.getPoints(e,t)));var c=this._getMagneticLines(t);return this._magnetic&&c.length&&o.push.apply(o,c),o.length?(0,E.el)(".dhx_controls",{style:{zIndex:0},onpointerdown:{".dhx_diagram_resizer_grip":l,".dhx_connect_grip":l,".dhx_connect_point":l,".dhx_editor_icon-rotate":l},onclick:{".dhx_diagram_resizer_grip":this._gripClick}},o):null}},n.prototype.setConfig=function(e){var t;this.config=b(b({},this.config),e),this._magnetic=!this._isOrgType&&((t=this.config.magnetic)===null||t===void 0?void 0:t.show)!==!1&&this.config.magnetic},n.prototype.setNearShape=function(e){this.connect.setNearShape(e)},n.prototype.toggleNearShape=function(e){this.connect.toggleNearShape(e)},n.prototype.getPoint=function(e,t){var o=this._diagram.getRootView().node.el,c=o.getBoundingClientRect(),h=this._diagram.config.margin,g=this._diagramSize||{left:-h.x,top:-h.y},x=this._diagram.config.scale,C=o.scrollLeft,k=o.scrollTop;return{x:(e-c.left+C)/x-h.x+(g.left+h.x),y:(t-c.top+k)/x-h.y+(g.top+h.y)}},n.prototype.onMove=function(e,t,o){var c,h,g=this._diagram.selection.getItem();if(g&&!g.$item.isFixed()){o.rotate&&(e.preventDefault(),this._rotate(e,g));var x=g.id,C=g.x,k=g.y,I=g.height,O=g.width,D=g.$item,A=g.dy,H={x:C,y:k,width:O,height:I};t.x=Math.round(t.x),t.y=Math.round(t.y);var S=D.getBaseType();if(S==="line")return this._diagram.toolbar.hide(),void this.connect.moveConnector(e,g,t,o);var $=o.dx===-1,w=o.dx===1,T=o.dy===1,F=o.dy===-1;if(S==="group"){var z=g.$item.getChildBox(),B=z.right,L=z.left,M=z.top,P=z.bottom,V=B+L+M+P===0,R=((c=g==null?void 0:g.header)===null||c===void 0?void 0:c.height)||40;V?($&&O+t.x>=R&&(H.width+=t.x),w&&O-t.x>=R&&(H.width+=-t.x,H.x+=t.x),F&&I+t.y>=R&&(H.height+=t.y),T&&I-t.y>=R&&(H.height+=-t.y,H.y+=t.y)):($&&C+O+t.x>=B&&(H.width+=t.x),w&&C+t.x<=L&&(H.width+=-t.x,H.x+=t.x),F&&k+I+t.y>=P&&(H.height+=t.y),T&&k+t.y<=M&&(H.height+=-t.y,H.y+=t.y)),D.setMinBox()}if(S==="swimlane"){var q=0,G=0,U=0,Z=0;this._diagram.data.eachChild(g.id,function(tt){var et=tt.$item.getChildBox(),ot=et.left,rt=et.right,st=et.top,ut=et.bottom;ot>G&&(G=ot),rt>q&&(q=rt),st>U&&(U=st),ut>Z&&(Z=ut),tt.$item.setMinBox()},!1),V=q+G+U+Z===0;var Q=$||w?g.layout[0].length:g.layout.length;R=(((h=g==null?void 0:g.header)===null||h===void 0?void 0:h.height)||40)*Q,V?($&&O+t.x>=R&&(H.width+=t.x),w&&O-t.x>=R&&(H.width+=-t.x,H.x+=t.x),F&&I+t.y>=R&&(H.height+=t.y),T&&I-t.y>=R&&(H.height+=-t.y,H.y+=t.y)):($&&C+O+t.x>=q&&(H.width+=t.x),w&&C+t.x<=G&&(H.width+=-t.x,H.x+=t.x),F&&k+I+t.y>=Z&&(H.height+=t.y),T&&k+t.y<=U&&(H.height+=-t.y,H.y+=t.y)),D.setMinBox()}S==="shape"&&(o.dx===1?(H.x+=t.x,H.width=O-t.x):H.width=g.width-t.x*o.dx,H.width>=30||(H.width=O),H.height=I-t.y*o.dy,H.height>=30?this._isOrgType?H.dy=(A||0)+t.y*(o.dy===1?1:0):H.y=(k||0)+t.y*(o.dy===1?1:0):H.height=I),g.$group&&!this._moveChilds(x,t)||this._diagram.data.update(x,H)}},n.prototype.onUp=function(e){this.connectOnUp(e),this._events.fire(d.DiagramEditorEvents.shapeResize,[])},n.prototype.connectOnUp=function(e){e&&(this.connect.onUp(e),this._diagram._lastItemClickCoords=this._diagram.getCurrentCoords(e),this._diagram.toolbar.show(),this._diagram.paint())},n.prototype._moveChilds=function(e,t){var o=this._diagram.data.getItem(e),c=this._diagram.selection.getItem();if(o.$item.isFixed())return!1;if(o.$group){var h=this._diagram.data.getItem(o.$group);return h.$group&&this._moveChilds(h.id,t),h.$item.trackChildMove(c.$item.getBox(),{x:t.x,y:t.y})}},n.prototype._rotate=function(e,t){var o=this.getPoint(e.pageX,e.pageY),c=o.x,h=o.y,g=t.x+t.width/2,x=t.y+t.height/2,C=Math.atan2(h-x,c-g);C<0&&(C+=2*Math.PI);var k=Math.round(C*(180/Math.PI));this._diagram.data.update(t.id,{angle:k})},n.prototype._gripClick=function(e,t){var o=t.data.resizer._diagram.selection.getItem();if(o){var c=t.data.p;o.$item.getBaseType()==="line"&&(o.$selectedPoint=c.i)}},n.prototype._eventHandling=function(e,t,o){var c=this;if(this._dragStart(e,t,o),e.pointerType==="touch"){if(document.body.classList.add("dhx_notouch"),this._touch.timeStamp){if(this._touch.dblDuration>=+e.timeStamp.toFixed()-this._touch.timeStamp)switch(e.preventDefault(),o){case"lineTitle":var h=this._diagram.data.getItem(t);this._diagram.events.fire(v.DiagramEvents.lineTitleDblClick,[h.parent,t,e]);break;case"group":this._diagram.events.fire(v.DiagramEvents.groupHeaderDblClick,[t,e,(0,m.locate)(e,"subheader_id")]);break;case"shape":this._diagram.events.fire(v.DiagramEvents.shapeDblClick,[t,e])}this._touch.timeStamp=null}else this._touch.timeStamp=+e.timeStamp.toFixed();setTimeout(function(){c._touch.timeStamp=null},this._touch.dblDuration)}},n.prototype._dragStart=function(e,t,o){var c=this,h=this._diagram.data.getItem(t);o==="group"&&h.type==="$sgroup"&&(h=this._diagram.data.getItem(h.$group));var g=[];this._diagram.selection.getIds().forEach(function(x){g.push(x),c._diagram.data.eachChild(x,function(C){return g.push(C.id)})}),this._movedItems=Array.from(new Set(g)),p.drag.start(e,{onMove:this._getMoveHandler(e,h,o),onUp:this._getUpHandler(e,h,o)},null,this._diagram.config.scale),this._diagram.events.on(v.DiagramEvents.beforeRender,function(x){return c._diagramSize=x})},n.prototype._getUpHandler=function(e,t,o){var c=this;return o==="shape"||o==="group"?function(){document.body.classList.remove("dhx_notouch"),c._events.fire(d.DiagramEditorEvents["".concat(o,"MoveEnd")],[{id:t.id,batch:c._movedItems,coords:{x:t.x,y:t.y},event:e}]),c._events.fire(d.DiagramEditorEvents.itemMoveEnd,[{id:t.id,batch:c._movedItems,coords:{x:t.x,y:t.y},event:e}]),c._magneticItems={xItem:null,xItemLeft:null,xItemRight:null,yItem:null,yItemTop:null,yItemBottom:null,dragItem:null},c._movedItems.forEach(function(h){c._diagram.data.update(h,{$move:!1},!0)}),c._diagram.toolbar.show(),c._diagram.paint()}:o==="lineTitle"?function(h){document.body.classList.remove("dhx_notouch"),c._events.fire(d.DiagramEditorEvents.lineTitleMoveEnd,[{id:t.parent,titleId:t.id,coords:{x:t.$x,y:t.$y},event:h}]),c._diagram._lastItemClickCoords=c._diagram.getCurrentCoords(h),c._diagram.toolbar.show(),c._diagram.paint()}:void 0},n.prototype._setClosestItems=function(e,t){t===void 0&&(t="default");var o={xItem:null,xItemLeft:null,xItemRight:null,yItem:null,yItemTop:null,yItemBottom:null,dragItem:null},c=r(e,t),h=c.x,g=c.y,x=e.x+(e.dx||0),C=x+e.width,k=e.y+(e.dy||0),I=k+e.height,O=this._diagram.getScrollState(),D=this._diagram.getRootView().node.el.getBoundingClientRect(),A=this._diagram.config.margin,H=O.x-A.x,S=O.y-A.y,$=O.x+D.width-A.x,w=O.y+D.height-A.y;this._diagram.data.forEach(function(T){if(T.id!==e.id&&T.type!=="line"&&T.type!=="$sgroup"){var F=r(T,t),z=F.x,B=F.y,L=T.x+(T.dx||0),M=L+T.width,P=T.y+(T.dy||0),V=P+T.height;if(!(L>$||M<H||P>w||V<S)){if(h===z){var R=(o.xItem?r(o.xItem,t):{y:0}).y;o.xItem=!o.xItem||Math.abs(B-g)<=Math.abs(R-g)?T:o.xItem}if(g===B){var q=(o.yItem?r(o.yItem,t):{x:0}).x;o.yItem=!o.yItem||Math.abs(z-h)<Math.abs(q-h)?T:o.yItem}(x===L||x===M)&&(R=(o.xItemLeft?r(o.xItemLeft,t):{y:0}).y,o.xItemLeft=!o.xItemLeft||Math.abs(B-g)<=Math.abs(R-g)?T:o.xItemLeft),(C===L||C===M)&&(R=(o.xItemRight?r(o.xItemRight,t):{y:0}).y,o.xItemRight=!o.xItemRight||Math.abs(B-g)<=Math.abs(R-g)?T:o.xItemRight),(k===P||k===V)&&(q=(o.yItemTop?r(o.yItemTop,t):{x:0}).x,o.yItemTop=!o.yItemTop||Math.abs(z-h)<Math.abs(q-h)?T:o.yItemTop),(I===P||I===V)&&(q=(o.yItemBottom?r(o.yItemBottom,t):{x:0}).x,o.yItemBottom=!o.yItemBottom||Math.abs(z-h)<Math.abs(q-h)?T:o.yItemBottom)}}}),o.dragItem=e,this._magneticItems=b({},o)},n.prototype._getMagneticLines=function(e){var t=[],o=this._magneticItems,c=o.xItem,h=o.xItemLeft,g=o.xItemRight,x=o.yItem,C=o.yItemTop,k=o.yItemBottom;return c&&t.push(this._getMagneticLine(c,e,"x","center")),x&&t.push(this._getMagneticLine(x,e,"y","center")),c&&x||((c==null?void 0:c.id)===(h==null?void 0:h.id)&&(c==null?void 0:c.id)===(g==null?void 0:g.id)||(h&&t.push(this._getMagneticLine(h,e,"x","left")),g&&t.push(this._getMagneticLine(g,e,"x","right"))),(x==null?void 0:x.id)===(C==null?void 0:C.id)&&(x==null?void 0:x.id)===(k==null?void 0:k.id)||(C&&t.push(this._getMagneticLine(C,e,"y","top")),k&&t.push(this._getMagneticLine(k,e,"y","bottom")))),t},n.prototype._getMagneticLine=function(e,t,o,c){var h=this._magneticItems.dragItem;if(h){var g,x=r(h),C=x.x,k=x.y,I=e.$item.getBox(),O=this._diagram.config.scale,D=this._magnetic.lineWidth||2;switch(c){case"top":g=h.y+(h.dy||0);break;case"bottom":g=h.y+(h.dy||0)+h.height;break;case"left":g=h.x+(h.dx||0);break;case"right":g=h.x+(h.dx||0)+h.width;break;default:g=o==="x"?C:k}return(0,E.el)(".dhx_magnetic",{style:{width:e.width*O,height:e.height*O,top:(I.top-t.top)*O,left:(I.left-t.left)*O}},[(0,E.el)(".dhx_magnetic_line",{style:{backgroundColor:this._magnetic.lineColor||"",width:o==="x"?D*O:(e.width+h.width+Math.abs(e.x-h.x)-(e.x<h.x?e.width:h.width))*O,height:o==="x"?(e.height+h.height+Math.abs(e.y-h.y)-(e.y<h.y?e.height:h.height))*O:D*O,top:o==="x"?(e.y<h.y?0:-(e.y-h.y))*O:(g-e.y-D/2)*O,left:o==="x"?(g-e.x-D/2)*O:(e.x<h.x?0:-(e.x-h.x))*O}})])}},n.prototype._getMoveHandler=function(e,t,o){var c=this;if(!t.$item.isFixed()){var h=this._diagram.config.gridStep;return o==="shape"||o==="group"?function(g,x,C){x.x=Math.round(x.x/h)*h-(t.x+(t.dx||0))%h,x.y=Math.round(x.y/h)*h-(t.y+(t.dy||0))%h,c._events.fire(d.DiagramEditorEvents["before".concat(o[0].toUpperCase()+o.slice(1),"Move")],[{id:t.id,batch:c._movedItems,coords:{x:t.x,y:t.y},event:g}])&&c._events.fire(d.DiagramEditorEvents.beforeItemMove,[{id:t.id,batch:c._movedItems,coords:{x:t.x,y:t.y},event:g,$mov:x}])&&(c._movedItems.forEach(function(k){var I=c._diagram.data.getItem(k);I.$item.getBaseType()==="line"?I.points.forEach(function(O){return O.$custom&&a(O,x)}):t.id==k?c._diagram.data.update(k,b({},function(O,D,A){return A===void 0&&(A="default"),A==="default"?{x:(O.x||0)+D.x,y:(O.y||0)+D.y}:{dx:(O.dx||0)+D.x,dy:(O.dy||0)+D.y}}(I,x,c._diagram.config.type))):a(I,x,c._diagram.config.type)}),c._setClosestItems(t,c._diagram.config.type),c._diagram.toolbar.hide(),c._events.fire(d.DiagramEditorEvents["after".concat(o[0].toUpperCase()+o.slice(1),"Move")],[{id:t.id,batch:c._movedItems,coords:{x:t.x,y:t.y},event:g}]),c._events.fire(d.DiagramEditorEvents.afterItemMove,[{id:t.id,batch:c._movedItems,coords:{x:t.x,y:t.y},event:g}]),c._diagram.paint())}:o==="lineTitle"?function(g){if(c._events.fire(d.DiagramEditorEvents.beforeLineTitleMove,[{id:t.parent,titleId:t.id,coords:{x:t.$x,y:t.$y},event:g}])){var x=c._diagram.data.getItem(t.parent),C=c._diagram.getCurrentCoords(g),k=x.points[0],I=x.points[x.points.length-1],O=b({},k),D=b({},I);if(x.points.length>2)for(var A=0;A<x.points.length;A++){var H=x.points[A],S=H.x,$=H.y;O.x>S&&(O.x=S),D.x<S&&(D.x=S),O.y>$&&(O.y=$),D.y<$&&(D.y=$)}O.x<D.x&&(O.x>=C.x&&(C.x=O.x),D.x<=C.x&&(C.x=D.x)),O.y<D.y&&(O.y>=C.y&&(C.y=O.y),D.y<=C.y&&(C.y=D.y)),O.x>D.x&&(D.x>=C.x&&(C.x=D.x),O.x<=C.x&&(C.x=O.x)),O.y>D.y&&(D.y>=C.y&&(C.y=D.y),O.y<=C.y&&(C.y=O.y));var w=50;if(x.connectType==="straight"||x.points.length===2){var T=(0,f.getNearPointStraightLine)(k,I,C),F=(0,f.getLinePercentage)(k,I,T);w=(0,f.getDistancePercentage)(F)}else w=(0,f.getDistanceEblowLine)(x,C);c._diagram.toolbar.hide(),c._diagram.data.update(t.id,{distance:w}),c._events.fire(d.DiagramEditorEvents.afterLineTitleMove,[{id:t.parent,titleId:t.id,coords:{x:t.$x,y:t.$y},event:g}]),c._diagram.paint()}}:void 0}},n}();_.Controls=i},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.default={dragAndDrop:"Drag & drop",or:"or",browse:"Browse files",filesOrFoldersHere:"files or folders here",cancel:"Cancel",clearAll:"Clear all",clear:"Clear",add:"Add",upload:"Upload",download:"Download",error:"error",byte:"B",kilobyte:"KB",megabyte:"MB",gigabyte:"GB"}},function(W,_,y){function b(m){m=m.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(f,d,p,u){return d+d+p+p+u+u});var v=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(m);return v?{r:parseInt(v[1],16),g:parseInt(v[2],16),b:parseInt(v[3],16)}:null}function E(m){var v,f,d=m.r/255,p=m.g/255,u=m.b/255,s=Math.max(d,p,u),l=s-Math.min(d,p,u),r=function(e){return(s-e)/6/l+.5};if(l===0)v=f=0;else{f=l/s;var a=r(d),i=r(p),n=r(u);d===s?v=n-i:p===s?v=1/3+a-n:u===s&&(v=2/3+i-a),v<0?v+=1:v>1&&(v-=1)}return{h:360*v,s:f,v:s}}Object.defineProperty(_,"__esModule",{value:!0}),_.getAlpha=_.alphaToHex=_.isHex=_.HexToHSV=_.RGBToHSV=_.HexToRGB=_.RGBToHex=_.HSVtoRGB=void 0,_.HSVtoRGB=function(m){var v={r:0,g:0,b:0},f=m.h/60,d=m.s,p=m.v,u=Math.floor(f)%6,s=f-Math.floor(f),l=255*p*(1-d),r=255*p*(1-d*s),a=255*p*(1-d*(1-s));switch(p*=255,u){case 0:v.r=p,v.g=a,v.b=l;break;case 1:v.r=r,v.g=p,v.b=l;break;case 2:v.r=l,v.g=p,v.b=a;break;case 3:v.r=l,v.g=r,v.b=p;break;case 4:v.r=a,v.g=l,v.b=p;break;case 5:v.r=p,v.g=l,v.b=r}for(var i in v)v[i]=Math.round(v[i]);return v},_.RGBToHex=function(m){return Object.keys(m).reduce(function(v,f){var d=m[f].toString(16).toUpperCase();return v+(d=d.length===1?"0"+d:d)},"#")},_.HexToRGB=b,_.RGBToHSV=E,_.HexToHSV=function(m){return E(b(m.length===9?m.slice(0,-2):m))},_.isHex=function(m){return/(^#[0-9A-F]{8}$)|(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(m)},_.alphaToHex=function(m){var v=Math.round(255*m).toString(16).toUpperCase();return v.length===1?"0"+v:v},_.getAlpha=function(m){return m.length===9?Number((parseInt(m.slice(-2),16)/255).toFixed(2)):1}},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.default={cancel:"Cancel",select:"Select",rightClickToDelete:"Right click to delete",customColors:"Custom colors",addNewColor:"Add new color"}},function(W,_,y){var b,E=this&&this.__extends||(b=function(L,M){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,V){P.__proto__=V}||function(P,V){for(var R in V)Object.prototype.hasOwnProperty.call(V,R)&&(P[R]=V[R])},b(L,M)},function(L,M){if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function P(){this.constructor=L}b(L,M),L.prototype=M===null?Object.create(M):(P.prototype=M.prototype,new P)}),m=this&&this.__assign||function(){return m=Object.assign||function(L){for(var M,P=1,V=arguments.length;P<V;P++)for(var R in M=arguments[P])Object.prototype.hasOwnProperty.call(M,R)&&(L[R]=M[R]);return L},m.apply(this,arguments)},v=this&&this.__spreadArray||function(L,M,P){if(P||arguments.length===2)for(var V,R=0,q=M.length;R<q;R++)!V&&R in M||(V||(V=Array.prototype.slice.call(M,0,R)),V[R]=M[R]);return L.concat(V||Array.prototype.slice.call(M))};Object.defineProperty(_,"__esModule",{value:!0}),_.Diagram=void 0;var f=y(3),d=y(1),p=y(0),u=y(2),s=y(5),l=y(64),r=y(185),a=y(39),i=y(186),n=y(53),e=y(55),t=y(91),o=y(190),c=y(27),h=y(56),g=y(92),x=y(191),C=y(195),k=y(196),I=y(197),O=y(198),D=y(94),A=y(95),H=y(199),S=y(96),$=y(200),w=y(201),T=y(202),F=y(40),z=y(203),B=function(L){function M(P,V){var R=L.call(this,P,V)||this;R._orgTypes=["org","mindmap"],R.version="6.0.1",R._set_defaults(),R._init_struct(),R._initEvents(),R.config.toolbar&&(R.toolbar=new o.Toolbar(R.events,R.config.toolbar));var q=(0,p.create)({render:function(G){return R._render(G)}},R);return R.mount(P,q),R}return E(M,L),M.prototype.addShape=function(P,V){var R=this;if(v(["line","dash","card","img-card","text","topic"],Object.keys(this.flowShapes),!0).includes(P))throw new Error("Cannot reassign existing type");if(typeof V.template!="function")throw new Error("The template property must be set as a function");if(V.defaults&&(this.config.defaults[P]=m({},V.defaults)),V.eventHandlers)for(var q=0,G=Object.entries(V.eventHandlers);q<G.length;q++){var U=G[q],Z=U[0],Q=U[1];this._htmlevents[Z]=(0,u.eventHandler)(function(tt){var et=m({},R.data.getItem((0,u.locate)(tt)));return Object.keys(et).forEach(function(ot){(ot.startsWith("$")||ot==="preview")&&delete et[ot]}),et},Q,this._htmlevents[Z])}this.flowShapes[P]=V.template},M.prototype.locate=function(P){var V=(0,u.locate)(P,"data-dhx-id"),R=this.data.getItem(V);return R?R.$item:null},M.prototype.collapseItem=function(P,V){var R=this;if(this.events.fire(c.DiagramEvents.beforeCollapse,[P,V])){var q=this.data.getItem(P);this.config.type!=="mindmap"||q.$level!==0||!q.openDir||V!=="left"&&V!=="right"?this.data.update(P,{open:!1}):(this.data.update(P,{openDir:{right:V!=="right"&&!!q.openDir.right,left:V!=="left"&&!!q.openDir.left}}),q.$connection.length&&q.$connection.forEach(function(G){var U=R.data.getItem(G[1]);U.dir&&U.dir.toLowerCase().includes(V)&&R.data.update(U.id,{hidden:!0},!0)})),this.events.fire(c.DiagramEvents.afterCollapse,[P,V])}this.paint()},M.prototype.expandItem=function(P,V){var R=this,q=this.data.getItem(P);if(!(q!=null&&q.open)||q.openDir){if(this.events.fire(c.DiagramEvents.beforeExpand,[P,V])){this.config.type!=="mindmap"||q.$level!==0||!q.openDir||V!=="left"&&V!=="right"?this.data.update(P,{open:!0}):(this.data.update(P,{open:!0,openDir:{right:V==="right"||!!q.openDir.right,left:V==="left"||!!q.openDir.left}}),q.$connection.length&&q.$connection.forEach(function(U){var Z=R.data.getItem(U[1]);Z.dir&&Z.dir.toLowerCase().includes(V)&&R.data.update(Z.id,{hidden:!1},!0)})),this.events.fire(c.DiagramEvents.afterExpand,[P,V]);var G=this.data.getItem(P);G&&G.parent&&this.expandItem(G.parent)}this.paint()}},M.prototype.getScrollState=function(){var P=this.getRootView().node.el;return{x:Math.round(P.scrollLeft*this.config.scale),y:Math.round(P.scrollTop*this.config.scale)}},M.prototype.scrollTo=function(P,V){var R=this.getRootView().node.el;R.scrollLeft=Math.round(P*this.config.scale),R.scrollTop=Math.round(V*this.config.scale)},M.prototype.showItem=function(P,V){var R=this,q=this.data.getItem(P);q&&(q.parent&&this.expandItem(q.parent,V),(0,p.awaitRedraw)().then(function(){var G=R.getRootView().node.el,U=q.$item.getBox(),Z=G.offsetWidth/2,Q=G.offsetHeight/2;R.scrollTo(U.right+10-Z,U.bottom+10-Q)}))},M.prototype.autoPlace=function(P){var V=this,R=this.config,q=R.autoplacement,G=R.type,U=(P==null?void 0:P.placeMode)||(q==null?void 0:q.placeMode)||"orthogonal",Z=(P==null?void 0:P.mode)||(q==null?void 0:q.mode)||"direct",Q=(P==null?void 0:P.root)||this.selection.getIds()[0];if(this._orgTypes.includes(G))throw new Error("This method does not work with this type of diagram");var tt,et=new h.default;this.data.forEach(function(st){st.$item.getBaseType()==="shape"&&et.addNode({id:st.id.toString(),w:st.width,h:st.height,x:st.x,y:st.y})}),this.data.forEach(function(st){var ut,at=st.$item.getBaseType();if(at==="line"&&st.from&&st.to){var ct=((ut=st.points)===null||ut===void 0?void 0:ut.filter(function(ft,vt){if(vt===0||vt===st.points.length-1)return!0}))||[];V.data.update(st.id,{fromSide:Z==="direct"?"center":void 0,toSide:Z==="direct"?"center":void 0,points:ct,customGap:void 0}),et.addEdge(st.from.toString(),st.to.toString())}else at==="line"&&V.data.remove(st.id)}),et.clean(),U==="orthogonal"?tt=new x.default:U==="radial"&&(tt=new z.default);var ot=(0,C.compose)((0,k.decompose)(et).map(function(st){return(st=tt.layout(st,{mode:Z,root:Q,dir:(q==null?void 0:q.direction)||g.Direction.Bottom,wide:q==null?void 0:q.wide,itemPadding:(q==null?void 0:q.itemPadding)||0,levelPadding:(q==null?void 0:q.levelPadding)||0,full:!0,preserveLocation:!1})).setGlobalBox(),st}),{padding:typeof(q==null?void 0:q.graphPadding)=="number"?(P==null?void 0:P.graphPadding)||(q==null?void 0:q.graphPadding):200});if(ot){var rt=ot.getBox();ot.translate({x:-rt[0][0],y:-rt[1][0]}),ot.getNodes().forEach(function(st){var ut=V.data.getItem(st.id);if(ut&&!(ut!=null&&ut.$group)){var at=Math.floor(st.x-st.w/2),ct=Math.floor(st.y-st.h/2);V.data.update(st.id,{x:at,y:ct})}})}},M.prototype.getCurrentCoords=function(P){var V=this.config,R=V.scale,q=V.margin,G=this.getRootView().node.el,U=G.getBoundingClientRect();if(G&&U){var Z=this._diagramSize||{left:-q.x,top:-q.y},Q=G.scrollLeft,tt=G.scrollTop;return{x:Math.round((P.clientX-U.left+Q)/R-q.x+(Z.left+q.x)),y:Math.round((P.clientY-U.top+tt)/R-q.y+(Z.top+q.y))}}},M.prototype.findNearestConnector=function(P){var V=this.getCurrentCoords(P),R=[];if(this.data.map(function(q){var G;if(q.$item.getBaseType()==="line"&&(!((G=q==null?void 0:q.points)===null||G===void 0)&&G.length))for(var U=0;U<q.points.length;U++){var Z=q.points[U];if(q.points[U+1]){var Q=V,tt=Z,et=q.points[U+1],ot=tt.y<Q.y&&et.y>Q.y||et.y<Q.y&&tt.y>Q.y,rt=tt.x<Q.x&&et.x>Q.x||et.x<Q.x&&tt.x>Q.x;if(ot||rt){var st=Math.sqrt(Math.pow(tt.x-Q.x,2)+Math.pow(tt.y-Q.y,2)),ut=Math.sqrt(Math.pow(et.x-Q.x,2)+Math.pow(et.y-Q.y,2)),at=Math.sqrt(Math.pow(et.x-tt.x,2)+Math.pow(et.y-tt.y,2)),ct=(st+ut+at)/2;if(2*Math.sqrt(ct*(ct-st)*(ct-ut)*(ct-at))/at<=8){R.push(q);break}}}}}),R.length)return R[R.length-1]},M.prototype.destructor=function(){this.editor&&this.editor.destructor(),this._menu&&this._menu.destructor(),this.data.removeAll(),this.data.events.clear(),this.events.clear(),this.selection.clear(),this.unmount()},M.prototype._render=function(P){var V,R,q=this;if(this._doNotRepaint&&P.node)return P.node;var G=this._getContent(),U=G.size,Z=G.svgContent,Q=G.htmlContent;this.events.fire(c.DiagramEvents.beforeRender,[U]),this._diagramSize=U;var tt=this.config,et=tt.margin,ot=tt.type,rt=tt.scale,st=U.x-U.left+2*et.x,ut=U.y-U.top+2*et.y;U.left-=et.x,U.top-=et.y;var at=U.top+et.y<0?Math.abs(U.top):et.y,ct=U.left+et.x<0?Math.abs(U.left):et.x;this._backgroundPos={x:-(Math.ceil(ct/this.config.gridStep)*this.config.gridStep-ct)*rt,y:-(Math.ceil(at/this.config.gridStep)*this.config.gridStep-at)*rt};var ft=null;if(this.toolbar&&(!((V=this._lastItemClickCoords)===null||V===void 0)&&V.x&&(!((R=this._lastItemClickCoords)===null||R===void 0)&&R.y)||this.selection.getIds().length)){var vt=this.selection.getIds().map(function(gt){return q.data.getItem(gt)}).filter(function(gt){return gt});vt.length&&(ft=vt.length>1?this.toolbar.render(vt.filter(function(gt){return gt.$item.getBaseType()!=="line"}),m(m({},U),{scale:rt})):this.toolbar.render(vt[0],m(m({},U),{scale:rt}),this._lastItemClickCoords))}var _t=[];return this.config.$svg&&(_t=this.config.$svg(U)),(0,p.el)(".dhx_widget.dhx_diagram",m(m({},this._htmlevents),{"data-dhx-widget-id":this._uid,style:{backgroundImage:this._getBackground(this.config.gridStep),backgroundPosition:"".concat(this._backgroundPos.x,"px ").concat(this._backgroundPos.y,"px")}}),[(0,p.el)("div.dhx_diagram__container",{style:{height:ut*rt,width:st*rt}},[(0,p.el)(".dhx_diagram__wrapper.dhx_wrapper",{style:{transform:"scale(".concat(rt,")"),position:"absolute",top:0,left:0,transformOrigin:"top",zIndex:this._orgTypes.includes(ot)&&this._active?1:0}},[(0,p.el)("div.dhx_diagram__scale-container",[(0,p.sv)("svg",{xmlns:"http://www.w3.org/2000/svg",width:st,height:ut,viewBox:"".concat(U.left," ").concat(U.top," ").concat(st," ").concat(ut)},[(0,p.sv)("defs",[(0,p.sv)("filter",{x:0,y:0,width:1,height:1,id:"dhx_text_background"},[(0,p.sv)("feFlood",{"flood-color":"white"}),(0,p.sv)("feComposite",{in:"SourceGraphic"})])]),(0,p.sv)("g",Z)]),(0,p.el)(".dhx_diagram__shape-container",{style:{position:"absolute",top:at,left:ct}},Q)])]),_t,ft])])},M.prototype._set_defaults=function(){var P,V,R;switch(this.config.type){case"mindmap":R="topic";break;case"org":R="card";break;default:R="rectangle"}this.config=(0,d.extend)({type:"default",defaultShapeType:((P=this.config)===null||P===void 0?void 0:P.defaultShapeType)||R,lineConfig:{lineType:"line",lineDirection:"forwardArrow",arrowsHidden:!1,lineGap:10},scale:1,margin:{x:40,y:40,itemX:40,itemY:((V=this.config)===null||V===void 0?void 0:V.type)==="mindmap"?20:40},gridStep:10,defaults:{},autoplacement:{mode:"direct",graphPadding:200},exportStyles:!0,$isEditor:!1},this.config)},M.prototype._initEventsHandlers=function(){var P=this;this._htmlevents={onscroll:function(V){var R=V.target,q=P.config.scale;R.getAttribute&&(R.getAttribute("class")||"").match(/dhx_diagram\b/)&&(R.style.backgroundPosition="".concat(P._backgroundPos.x-R.scrollLeft*q,"px ").concat(P._backgroundPos.y-R.scrollTop*q,"px")),P.events.fire(c.DiagramEvents.scroll,[P.getScrollState()])},onpointerdown:(0,u.eventHandler)(function(V){return P.locate(V)},{dhx_diagram:function(V){var R=V.target,q=R.getAttribute&&(R.getAttribute("class")||"").match(/dhx_diagram\b/),G=R.tagName==="svg";if(!(0,u.locateNodeByClassName)(R,"dhx_diagram_toolbar")&&(q||G)){var U=P.findNearestConnector(V);U?(P.config.type==="default"&&P.setSelectionItem({id:U.id},V.shiftKey,V.altKey),P.events.fire(c.DiagramEvents.lineMouseDown,[U.id,V]),P.events.fire(c.DiagramEvents.itemMouseDown,[U.id,V])):(document.body.classList.add("dhx_notouch"),V.altKey||P.selection.remove(),P.events.fire(c.DiagramEvents.emptyAreaMouseDown,[V]))}},dhx_diagram_line_title:function(V){var R=(0,u.locate)(V,"data-dhx-parent-id"),q=(0,u.locate)(V,"data-dhx-id");P.setSelectionItem({id:q},V.shiftKey,V.altKey),P.events.fire(c.DiagramEvents.lineTitleMouseDown,[R,q,V])},dhx_diagram_shape:function(V,R){P.setSelectionItem({id:R.id},V.shiftKey,V.altKey),P.events.fire(c.DiagramEvents.shapeMouseDown,[R.id,V,P._getPoint(V.clientX,V.clientY)]),P.events.fire(c.DiagramEvents.itemMouseDown,[R.id,V,P._getPoint(V.clientX,V.clientY)])},dhx_diagram_line:function(V,R){P.config.type==="default"&&P.setSelectionItem({id:R.id},V.shiftKey,V.altKey),P.events.fire(c.DiagramEvents.lineMouseDown,[R.id,V,P._getPoint(V.clientX,V.clientY)]),P.events.fire(c.DiagramEvents.itemMouseDown,[R.id,V,P._getPoint(V.clientX,V.clientY)])},dhx_diagram_group:function(V,R){P.setSelectionItem({id:R.id},V.shiftKey,V.altKey),P.events.fire(c.DiagramEvents.groupMouseDown,[R.id,V,P._getPoint(V.clientX,V.clientY)]),P.events.fire(c.DiagramEvents.itemMouseDown,[R.id,V,P._getPoint(V.clientX,V.clientY)])}}),onpointerout:(0,u.eventHandler)(function(V){return P.locate(V)},{"dhx_diagram_item--selected":function(){P._active=!1,P.paint()},dhx_diagram_item:function(V,R){R&&P.events.fire(c.DiagramEvents.itemMouseOut,[R.id,V])}}),onpointerover:(0,u.eventHandler)(function(V){return P.locate(V)},{"dhx_diagram_item--selected":function(){P._active=!0,P.paint()},dhx_diagram_item:function(V,R){R&&P.events.fire(c.DiagramEvents.itemMouseOver,[R.id,V])}}),onclick:(0,u.eventHandler)(function(V){return P.locate(V)},{dhx_diagram_menu_icon:function(V,R){var q,G,U,Z,Q,tt,et,ot,rt,st,ut=(0,u.locate)(V,"subheader_id");if(P.events.fire(c.DiagramEvents.beforeSubmenuOpen,[R.id,V,ut])){var at=[];!((G=(q=R.config)===null||q===void 0?void 0:q.subHeaderRows)===null||G===void 0)&&G.enable&&(!((Q=(Z=(U=R.config)===null||U===void 0?void 0:U.subHeaderRows)===null||Z===void 0?void 0:Z.headers)===null||Q===void 0)&&Q.length)&&(at=R.config.subHeaderRows.headers);var ct=[];!((et=(tt=R.config)===null||tt===void 0?void 0:tt.subHeaderCols)===null||et===void 0)&&et.enable&&(!((st=(rt=(ot=R.config)===null||ot===void 0?void 0:ot.subHeaderCols)===null||rt===void 0?void 0:rt.headers)===null||st===void 0)&&st.length)&&(ct=R.config.subHeaderCols.headers);var ft=v(v([],at,!0),ct,!0).find(function(j){return j.id===ut}),vt=ft.$subMenu,_t=ft.id;P.cellManager.setSwimlane(R.id);var gt=P.cellManager.getSubHeaderCellIndex(_t);vt.data.forEach(function(j){j.remove&&!P.cellManager.validation(gt,j.remove,"remove")&&(j.disabled=!0),j.add&&!P.cellManager.validation(gt,j.add,"add")&&(j.disabled=!0),j.move&&!P.cellManager.validation(gt,j.move,"move")&&(j.disabled=!0)}),P._menu.data.parse(vt.data),P._menu.showAt(V),P.events.fire(c.DiagramEvents.afterSubmenuOpen,[R.id,V,ut])}},"dhx_diagram_toggle-icon--expand":function(V,R){V.target.classList.contains("icon-left")?P.expandItem(R.id,"left"):V.target.classList.contains("icon-right")?P.expandItem(R.id,"right"):P.expandItem(R.id)},"dhx_diagram_toggle-icon--collapse":function(V,R){V.target.classList.contains("icon-left")?P.collapseItem(R.id,"left"):V.target.classList.contains("icon-right")?P.collapseItem(R.id,"right"):P.collapseItem(R.id)},dhx_diagram:function(V){var R=V.target,q=R.getAttribute&&(R.getAttribute("class")||"").match(/dhx_diagram\b/),G=R.tagName==="svg";if(q||G){var U=P.findNearestConnector(V);U?(P.events.fire(c.DiagramEvents.lineClick,[U.id,V]),P.events.fire(c.DiagramEvents.itemClick,[U.id,V])):P.events.fire(c.DiagramEvents.emptyAreaClick,[V])}},dhx_diagram_line_title:function(V){var R=(0,u.locate)(V,"data-dhx-parent-id"),q=(0,u.locate)(V,"data-dhx-id");P.events.fire(c.DiagramEvents.lineTitleClick,[R,q,V])},dhx_diagram_shape:function(V,R){P.events.fire(c.DiagramEvents.shapeClick,[R.id,V]),P.events.fire(c.DiagramEvents.itemClick,[R.id,V])},dhx_diagram_line:function(V,R){P.events.fire(c.DiagramEvents.lineClick,[R.id,V]),P.events.fire(c.DiagramEvents.itemClick,[R.id,V])},dhx_diagram_group:function(V,R){P.events.fire(c.DiagramEvents.groupClick,[R.id,V]),P.events.fire(c.DiagramEvents.itemClick,[R.id,V])},dhx_diagram_group__header:function(V,R){P.events.fire(c.DiagramEvents.groupHeaderClick,[R.id,V]),P.events.fire(c.DiagramEvents.groupClick,[R.id,V]),P.events.fire(c.DiagramEvents.itemClick,[R.id,V])},dhx_diagram_swimlane__subheader:function(V,R){var q=(0,u.locate)(V,"subheader_id");P.events.fire(c.DiagramEvents.groupHeaderClick,[R.id,V,q]),P.events.fire(c.DiagramEvents.groupClick,[R.id,V]),P.events.fire(c.DiagramEvents.itemClick,[R.id,V])}}),ondblclick:(0,u.eventHandler)(function(V){return P.locate(V)},{dhx_diagram:function(V){var R=V.target,q=R.getAttribute&&(R.getAttribute("class")||"").match(/dhx_diagram\b/),G=R.tagName==="svg";if(q||G){var U=P.findNearestConnector(V);U?(P.events.fire(c.DiagramEvents.lineDblClick,[U.id,V]),P.events.fire(c.DiagramEvents.itemDblClick,[U.id,V])):P.events.fire(c.DiagramEvents.emptyAreaDblClick,[V])}},dhx_diagram_line_title:function(V){var R=(0,u.locate)(V,"data-dhx-parent-id"),q=(0,u.locate)(V,"data-dhx-id");P.events.fire(c.DiagramEvents.lineTitleDblClick,[R,q,V])},dhx_diagram_shape:function(V,R){P.events.fire(c.DiagramEvents.shapeDblClick,[R.id,V]),P.events.fire(c.DiagramEvents.itemDblClick,[R.id,V])},dhx_diagram_line:function(V,R){P.events.fire(c.DiagramEvents.lineDblClick,[R.id,V]),P.events.fire(c.DiagramEvents.itemDblClick,[R.id,V])},dhx_diagram_group:function(V,R){P.events.fire(c.DiagramEvents.groupDblClick,[R.id,V]),P.events.fire(c.DiagramEvents.itemDblClick,[R.id,V])},dhx_diagram_group__header:function(V,R){P.events.fire(c.DiagramEvents.groupDblClick,[R.id,V]),P.events.fire(c.DiagramEvents.itemDblClick,[R.id,V]),P.events.fire(c.DiagramEvents.groupHeaderDblClick,[R.id,V])},dhx_diagram_swimlane__subheader:function(V,R){var q=(0,u.locate)(V,"subheader_id");P.events.fire(c.DiagramEvents.groupDblClick,[R.id,V]),P.events.fire(c.DiagramEvents.itemDblClick,[R.id,V]),P.events.fire(c.DiagramEvents.groupHeaderDblClick,[R.id,V,q])},dhx_diagram_item__text:function(V,R){P.events.fire(c.DiagramEvents.shapeDblClick,[R.id,V]),P.events.fire(c.DiagramEvents.itemDblClick,[R.id,V])},dhx_diagram_item__title:function(V,R){P.events.fire(c.DiagramEvents.shapeDblClick,[R.id,V]),P.events.fire(c.DiagramEvents.itemDblClick,[R.id,V])}})}},M.prototype._init_struct=function(){var P=this;this.events=new f.EventSystem(this),this.flowShapes=m({},e.flowShapes),this.data=new t.ShapesCollection({init:function(V){var R,q,G,U,Z,Q;V.id||(V.id=(0,d.uid)());var tt="from"in V?((R=P.config.lineConfig)===null||R===void 0?void 0:R.lineType)||"line":P.config.defaultShapeType;switch(V.type=V.type||tt,V.type){case"$group":V.$item=new A.Group(V,{data:P.data});break;case"$swimlane":V.$item=new D.Swimlane(V,{data:P.data});break;case"$sgroup":V.$item=new S.GroupSwimlane(V,{data:P.data});break;case"line":case"dash":!P._orgTypes.includes(P.config.type)&&V.from&&(V.stroke=V.stroke||((G=(q=P.config.defaults)===null||q===void 0?void 0:q[V.type])===null||G===void 0?void 0:G.stroke)||"#2196F3"),V.$item=new w.Line(V,((U=P.config.defaults)===null||U===void 0?void 0:U[V.type])||{});break;case"lineTitle":V.$item=new T.LineTitle(V,{defaults:((Z=P.config.defaults)===null||Z===void 0?void 0:Z[V.type])||{}});break;default:V.$item=(0,n.shapesFactory)(V,{defaults:((Q=P.config.defaults)===null||Q===void 0?void 0:Q[V.type])||{},shapes:P.flowShapes,data:P.data})}return V},update:function(V){V.$item.config=V},diagramConfig:this.config},this.events),this.selection=new i.Selection(this.data,this.events),this.cellManager=new $.CellManager(this.data,this.events),this.export=new r.Exporter("diagram",this.version,this),this.editor=new H.Editor({data:this.data,events:this.events}),this._menu=new l.ContextMenu(null)},M.prototype._initEvents=function(){var P=this;this._initEventsHandlers(),this.events.on(c.DiagramEvents.lineDblClick,function(V){(0,d.isDefined)(V)&&P.config.type==="default"&&(0,F.addLineTitle)(P.data.getItem(V),P)}),this.events.on(c.DiagramEvents.shapeDblClick,function(V,R){var q=R.target,G=P.data.getItem(V).$item;if(G){var U=q.getAttribute&&(q.getAttribute("class")||"").match(/dhx_diagram_item__text\b/),Z=q.getAttribute&&(q.getAttribute("class")||"").match(/dhx_diagram_item__title\b/);(U||Z)&&G.isEditable()&&P.editor.openEditor(V,Z?"title":"text")&&G.setEditorNode(P.editor.render(),Z?"title":"text")}}),this.events.on(c.DiagramEvents.groupHeaderDblClick,function(V,R,q){var G=P.data.getItem(V).$item;G&&((0,u.locateNodeByClassName)(R,"dhx_diagram_group__header_text")||(0,u.locateNodeByClassName)(R,"dhx_diagram_swimlane__subheader_text"))&&G.isEditable(q)&&P.editor.openEditor(V,"text",q)&&G.setEditorNode(P.editor.render(),"text",q||V)}),this.events.on(c.DiagramEvents.lineTitleDblClick,function(V,R){var q=P.data.getItem(R).$item;q.isEditable()&&P.editor.openEditor(R,"text")&&q.setEditorNode(P.editor.render(),"text")}),this.events.on(c.SelectionEvents.afterSelect,function(V){var R=V.id;P.data.getItem(R).$item.getBaseType()==="swimlane"&&P.cellManager.setSwimlane(R),P.paint()}),this.events.on(c.SelectionEvents.afterUnSelect,function(){return P.paint()}),this.events.on(c.DiagramEvents.itemMouseDown,function(V,R){P._lastItemClickCoords=P.getCurrentCoords(R),P.paint()}),this.events.on(c.DiagramEvents.lineTitleMouseDown,function(V,R,q){P._lastItemClickCoords=P.getCurrentCoords(q),P.paint()}),[H.EditorEvents.beforeEditorOpen,H.EditorEvents.afterEditorClose,c.DataEvents.change,c.DataEvents.filter].forEach(function(V){return P.events.on(V,function(){return P.paint()})}),this._menu.events.on("click",function(V){var R=V.split("/"),q=R[0],G=R[1],U=R[2];P.cellManager.setSwimlane(q);var Z=P.cellManager.getSubHeaderType(G),Q=P.cellManager.getSubHeaderCellIndex(G);switch(U){case"move_column_left":P.cellManager.move(Q,"left",!0);break;case"move_column_right":P.cellManager.move(Q,"right",!0);break;case"move_row_up":P.cellManager.move(Q,"up",!0);break;case"move_row_down":P.cellManager.move(Q,"down",!0);break;case"add_column_left":P.cellManager.add(Q,"left",!0);break;case"add_column_right":P.cellManager.add(Q,"right",!0);break;case"add_row_up":P.cellManager.add(Q,"up",!0);break;case"add_row_down":P.cellManager.add(Q,"down",!0);break;case"remove":P.cellManager.remove(Q,Z,!0)}P.paint()})},M.prototype._getContent=function(){var P=this;switch(this.config.type){case"org":(0,O.placeOrgonogram)(this.data,this.config);break;case"mindmap":(0,I.placeMindmap)(this.data,this.config)}var V={x:0,y:0,left:0,top:0,scale:this.config.scale},R=[],q=[];return this.data.mapVisible(function(G){var U=G==null?void 0:G.$item.getBaseType();if(G&&!G.$group&&G.type!=="$sgroup"){U==="line"&&(P.config.type==="default"&&(0,a.nearestLinkPath)(G,P.data.getItem(G.from),P.data.getItem(G.to),P.config),R.push(G.$item.render())),U!=="shape"&&U!=="group"&&U!=="swimlane"&&U!=="lineTitle"||q.push(G.$item.render());var Z=G.$item.getBox();Z.right>V.x&&(V.x=Z.right),Z.left<V.left&&(V.left=Z.left),Z.bottom>V.y&&(V.y=Z.bottom),Z.top<V.top&&(V.top=Z.top)}}),{size:V,svgContent:R,htmlContent:q}},M.prototype._getPoint=function(P,V){var R=this.getRootView().node.el.getBoundingClientRect();return{x:P-R.left-this.config.margin.x,y:V-R.top-this.config.margin.y}},M.prototype._getBackground=function(P){if(!this.config.$isEditor||!this.config.$grid())return"none";var V=P<1?1:P,R=this.config.scale;return V>1?`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100%' height='100%' %3E%3Cdefs%3E%3Cpattern id='Pattern' width='`.concat(V*R,"' height='").concat(V*R,"' patternUnits='userSpaceOnUse' shapeRendering='auto'%3E%3Ccircle cx='0' cy='0' r='0.5' fill='%23c4c4c4' stroke='none'%3E%3C/circle%3E%3Ccircle cx='0' cy='").concat(V*R,"' r='0.5' fill='%23c4c4c4' stroke='none'%3E%3C/circle%3E%3Ccircle cx='").concat(V*R,"' cy='0' r='0.5' fill='%23c4c4c4' stroke='none'%3E%3C/circle%3E%3Ccircle cx='").concat(V*R,"' cy='").concat(V*R,`' r='0.5' fill='%23c4c4c4' stroke='none'%3E%3C/circle%3E%3C/pattern%3E%3C/defs%3E%3Cg shapeRendering='auto'%3E%3Crect x='0' y='0' width='100%' height='100%' fill='url%28%23Pattern%29'%3E%3C/rect%3E%3C/g%3E%3C/svg%3E")`):"none"},M.prototype.setSelectionItem=function(P,V,R){var q=P.id;this.config.select&&(R?this.selection.includes({id:q})&&this.selection.remove({id:q}):this.selection.add({id:q,join:V}))},M}(s.View);_.Diagram=B},function(W,_,y){var b=this&&this.__createBinding||(Object.create?function(m,v,f,d){d===void 0&&(d=f);var p=Object.getOwnPropertyDescriptor(v,f);p&&!("get"in p?!v.__esModule:p.writable||p.configurable)||(p={enumerable:!0,get:function(){return v[f]}}),Object.defineProperty(m,d,p)}:function(m,v,f,d){d===void 0&&(d=f),m[d]=v[f]}),E=this&&this.__exportStar||function(m,v){for(var f in m)f==="default"||Object.prototype.hasOwnProperty.call(v,f)||b(v,m,f)};Object.defineProperty(_,"__esModule",{value:!0}),E(y(126),_),E(y(184),_)},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.default={apply:"apply",reject:"reject"}},function(W,_,y){function b(E){var m=document.activeElement;m.classList.contains("dhx_alert__apply-button")&&E.key==="Enter"||m.classList.contains("dhx_alert__confirm-reject")||m.classList.contains("dhx_alert__confirm-aply")||E.preventDefault()}Object.defineProperty(_,"__esModule",{value:!0}),_.blockScreen=void 0,_.blockScreen=function(E){var m=document.createElement("div");return m.className="dhx_alert__overlay "+(E||""),document.body.appendChild(m),document.addEventListener("keydown",b),function(){document.body.removeChild(m),document.removeEventListener("keydown",b)}}},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(h){for(var g,x=1,C=arguments.length;x<C;x++)for(var k in g=arguments[x])Object.prototype.hasOwnProperty.call(g,k)&&(h[k]=g[k]);return h},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.disableTooltip=_.enableTooltip=_.tooltip=_.getZIndex=_.findPosition=void 0;var E=y(2),m=y(46),v=750,f=200;function d(h,g,x,C,k,I){var O,D,A;if(k===void 0&&(k=8),I===void 0&&(I=0),I>1&&(g=m.Position.center),g!=="top"&&g!=="bottom"){var H=h.top+(h.height-C)/2,S=H<0&&window.pageYOffset+H+C<scrollY+window.innerHeight;A=window.pageYOffset+(S?0:H)}switch(g){case m.Position.center:return(D=h.left+window.pageXOffset+(h.width-x)/2)+k<window.pageXOffset&&(D=h.left+window.pageXOffset),{left:D,top:A,pos:O=m.RealPosition.center};case m.Position.right:return O=m.RealPosition.right,(D=h.right+window.pageXOffset+k)+x>window.innerWidth+window.pageXOffset?d(h,m.Position.left,x,C,k,++I):{left:D,top:A,pos:O};case m.Position.left:return O=m.RealPosition.left,(D=window.pageXOffset+h.left-x-k)<0?d(h,m.Position.right,x,C,k,++I):{left:D,top:A,pos:O};case m.Position.top:return O=m.RealPosition.top,(D=window.pageXOffset+h.left+(h.width-x)/2)+x>window.innerWidth+window.pageXOffset?D=window.innerWidth+window.pageXOffset-x:D<0&&(D=0),h.top<C?d(h,m.Position.bottom,x,C,k,++I):{left:D,top:A=window.pageYOffset+h.top-C-k,pos:O};case m.Position.bottom:default:return(D=window.pageXOffset+h.left+(h.width-x)/2)+x>window.innerWidth+window.pageXOffset?D=window.innerWidth+window.pageXOffset-x:D<0&&(D=0),O=m.RealPosition.bottom,(A=window.pageYOffset+h.bottom+k)+C>window.innerHeight+window.pageYOffset?d(h,m.Position.top,x,C,k,++I):{left:D,top:A,pos:O}}}_.findPosition=d;var p=document.createElement("div"),u=document.createElement("span");u.className="dhx_tooltip__text",p.appendChild(u),p.setAttribute("role","tooltip"),p.style.position="absolute";var s,l=null,r=!1,a=null,i=null;function n(h){return h&&(h.classList.contains("dhx_popup--window")&&h.classList.contains("dhx_popup--window_active")||h.classList.contains("dhx_popup--window_modal")||h.classList.contains("dhx_popup"))?1e7:h!=null&&h.classList.contains("dhx_popup--window")?9999999:h&&h.offsetParent?n(h.offsetParent):null}function e(h,g,x,C,k,I,O){C===void 0&&(C=""),k===void 0&&(k=!1),I===void 0&&(I=8);var D=h.getBoundingClientRect();O?u.innerHTML=g:u.textContent=g,p.style.left=null,p.style.top=null,document.body.appendChild(p),p.className="dhx_widget dhx_tooltip ".concat(k?" dhx_tooltip--forced":""," ").concat(C);var A=p.getBoundingClientRect(),H=d(D,x,A.width,A.height,I),S=H.left,$=H.top,w=H.pos,T=n(h);switch(T&&(p.style.zIndex=T.toString()),w){case m.RealPosition.bottom:case m.RealPosition.top:case m.RealPosition.left:case m.RealPosition.right:case m.RealPosition.center:p.style.left=S+"px",p.style.top=$+"px"}p.className+=" dhx_tooltip--".concat(w),r=!0,k||setTimeout(function(){p.className+=" dhx_tooltip--animate"})}function t(h,g,x){var C=x.force,k=x.showDelay,I=x.hideDelay,O=x.position,D=x.css,A=x.htmlEnable,H=x.margin;C||(i=setTimeout(function(){e(h,g,O||m.Position.bottom,D,!1,H,A)},k||v));var S=function(){var $;r&&($=I,l&&(a=setTimeout(function(){document.body.removeChild(p),r=!1,a=null},$||f))),clearTimeout(i),h.removeEventListener("mouseleave",S),h.removeEventListener("blur",S),document.removeEventListener("mousedown",S),l=null,s=null};C&&e(h,g,O,D,C,H,A),h.addEventListener("mouseleave",S),h.addEventListener("blur",S),document.addEventListener("mousedown",S),s=S}function o(h,g){var x=(0,E.toNode)(g.node);x!==l&&(s&&(s(),s=null),l=x,a?(clearTimeout(a),a=null,t(x,h,b(b({},g),{force:!0}))):t(x,h,g))}function c(h){var g=(0,E.locateNode)(h,"dhx_tooltip_text");g&&o(g.getAttribute("dhx_tooltip_text"),{position:g.getAttribute("dhx_tooltip_position")||m.Position.bottom,node:g})}_.getZIndex=n,_.tooltip=o,_.enableTooltip=function(){document.addEventListener("mousemove",c)},_.disableTooltip=function(){document.removeEventListener("mousemove",c)}},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(r){for(var a,i=1,n=arguments.length;i<n;i++)for(var e in a=arguments[i])Object.prototype.hasOwnProperty.call(a,e)&&(r[e]=a[e]);return r},b.apply(this,arguments)},E=this&&this.__spreadArray||function(r,a,i){if(i||arguments.length===2)for(var n,e=0,t=a.length;e<t;e++)!n&&e in a||(n||(n=Array.prototype.slice.call(a,0,e)),n[e]=a[e]);return r.concat(n||Array.prototype.slice.call(a))};Object.defineProperty(_,"__esModule",{value:!0}),_.DataCollection=void 0;var m=y(3),v=y(131),f=y(134),d=y(32),p=y(23),u=y(22),s=y(1),l=function(){function r(a,i){var n=this;this._filters={},this._changes={order:[]},this.config=a||{},this._sort=new f.Sort,this._loader=new v.Loader(this,this._changes),this.events=i||new m.EventSystem(this),this.events.on(u.DataEvents.dataRequest,function(e,t){var o=n.dataProxy;o&&o.updateUrl&&(o.updateUrl(null,{from:e,limit:o.config.limit||t-e}),n.load(o))}),this.events.on(u.DataEvents.loadError,function(e){setTimeout(function(){typeof e!="string"?(0,p.dhxError)(e):(0,p.dhxWarning)(e)},0)}),this._reset()}return r.prototype._reset=function(){this._order=[],this._pull={},this._changes={order:[]},this._initOrder=null,this._meta=new WeakMap,this._loaded=!1},r.prototype.add=function(a,i){var n,e=this;if(this.events.fire(u.DataEvents.beforeAdd,[a]))return n=Array.isArray(a)?a.map(function(t,o){return o!==0&&(i+=1),e._add(t,i)}):this._add(a,i),this._reapplyFilters(!0),n},r.prototype.remove=function(a){var i=this;a instanceof Array?E([],a,!0).map(function(n){i._remove(n)}):(0,s.isId)(a)&&this._remove(a)},r.prototype.removeAll=function(){this._reset(),this.events.fire(u.DataEvents.removeAll),this.events.fire(u.DataEvents.change)},r.prototype.exists=function(a){return!!this._pull[a]},r.prototype.getNearId=function(a){if(!this._pull[a])return this._order[0].id||""},r.prototype.getItem=function(a){return this._pull[a]},r.prototype.update=function(a,i,n){var e=this.getItem(a);if(e){if((0,p.isEqualObj)(i,e))return;(0,s.isId)(i.id)&&a!==i.id?((0,p.dhxWarning)("this method doesn't allow change id"),(0,p.isDebug)()):(i.parent&&e.parent&&i.parent!==e.parent&&this.move(a,-1,this,i.parent),(0,s.extend)(this._pull[a],i,!1),this.config.update&&this.config.update(this._pull[a]),n||this._onChange("update",a,this._pull[a])),this._reapplyFilters(!0)}else(0,p.dhxWarning)("item not found")},r.prototype.getIndex=function(a){return(0,s.isId)(a)&&(0,s.isDefined)(this._pull[a])?this._order.findIndex(function(i){return(i==null?void 0:i.id)==a}):-1},r.prototype.getId=function(a){if(this._order[a])return this._order[a].id},r.prototype.getLength=function(){return this._order.length},r.prototype.isDataLoaded=function(a,i){return a===void 0&&(a=0),i===void 0&&(i=this._order.length),(0,s.isNumeric)(a)&&(0,s.isNumeric)(i)?this._order.slice(a,i).filter(function(n){return n&&n.$empty}).length===0:(this._loaded||(this._loaded=!this.find(function(n){return n.$empty})),!!this._loaded)},r.prototype.filter=function(a,i,n){var e;if(this.isDataLoaded()){if(i!=null&&i.$restore&&(a=this._normalizeFilters(a||this._filters)),!(i!=null&&i.add)&&(this._order=this._initOrder||this._order,this._initOrder=null,!(i!=null&&i.$restore)))for(var t in this._filters){var o=this._filters[t];!((e=o.config)===null||e===void 0)&&e.permanent?this._applyFilters(o.rule):delete this._filters[t]}var c;if(a&&!(i!=null&&i.$restore)&&(c=(i==null?void 0:i.id)||(0,s.uid)(),this._filters[c]={rule:a,config:i||{}}),a&&typeof a!="function")if((0,s.isDefined)(a.by))this._applyFilters(a);else for(var t in a)this._applyFilters(a[t]);else this._applyFilters(a);if(!n){var h=this._getPureFilters(this._filters);this.events.fire(u.DataEvents.filter,[(0,s.isEmptyObj)(h)?null:h])}return c}(0,p.dhxWarning)("the method doesn't work with lazyLoad")},r.prototype.resetFilter=function(a,i){var n,e=a||{},t=e.id,o=e.permanent;if((0,s.isEmptyObj)(a))for(var c in this._filters)!((n=this._filters[c].config)===null||n===void 0)&&n.permanent||delete this._filters[c];else o?this._filters={}:t&&delete this._filters[t];return this.filter(null,{$restore:!0},i),(0,s.isEmptyObj)(this._getPureFilters(this._filters))},r.prototype.getFilters=function(a){var i=this.getRawFilters(a),n=i?this._getPureFilters(i):{};return(0,s.isEmptyObj)(n)?null:n},r.prototype.getRawFilters=function(a){var i=this._filters;return a!=null&&a.permanent&&(i=Object.keys(i).reduce(function(n,e){var t;return!((t=i[e].config)===null||t===void 0)&&t.permanent&&(n[e]=i[e]),n},{})),(0,s.isEmptyObj)(i)?null:i},r.prototype.find=function(a){for(var i in this._pull){var n=(0,p.findByConf)(this._pull[i],a);if(n)return n}return null},r.prototype.findAll=function(a){var i=[];for(var n in this._pull){var e=(0,p.findByConf)(this._pull[n],a);e&&i.push(e)}return i},r.prototype.sort=function(a,i){this.isDataLoaded()?(i&&i.smartSorting&&(this._sorter=a),a&&this._applySorters(a),this.events.fire(u.DataEvents.change,[void 0,"sort",a])):(0,p.dhxWarning)("the method doesn't work with lazyLoad")},r.prototype.copy=function(a,i,n,e){var t=this;return a instanceof Array?a.map(function(o,c){return t._copy(o,i,n,e,c)}):this._copy(a,i,n,e)},r.prototype.move=function(a,i,n,e,t){var o=this;return a instanceof Array?a.map(function(c,h){return o._move(c,i,n,e,h)}):this._move(a,i,n,e,0,t)},r.prototype.forEach=function(a){for(var i=0;i<this._order.length;i++)a.call(this,this._order[i],i,this._order)},r.prototype.load=function(a,i){if(typeof a=="string"&&(this.dataProxy=a=new d.DataProxy(a)),typeof i=="string"){var n=i.toLocaleLowerCase();n!=="xml"&&n!=="csv"||(a.config.responseType=a.config.responseType||"text")}return this.dataProxy=a,this._loader.load(a,i)},r.prototype.parse=function(a,i){return this._reset(),this._loader.parse(a,i)},r.prototype.$parse=function(a){var i=this.config.approximate;i&&(a=this._approximate(a,i.value,i.maxNum)),this._parse_data(a),this._reapplyFilters(!0),this.events.fire(u.DataEvents.change,[void 0,"load"]),this.events.fire(u.DataEvents.load)},r.prototype.save=function(a){typeof a=="string"&&(a=new d.DataProxy(a)),this._loader.save(a)},r.prototype.changeId=function(a,i,n){if(i===void 0&&(i=(0,s.uid)()),n||this.isDataLoaded()){var e=this.getItem(a);e?(e.id=i,(0,s.extend)(this._pull[a],e),this._pull[i]=this._pull[a],n||this._onChange("update",i,this._pull[i]),delete this._pull[a]):(0,p.dhxWarning)("item not found")}else(0,p.dhxWarning)("the method doesn't work with lazyLoad")},r.prototype.isSaved=function(){return!this._changes.order.length},r.prototype.map=function(a){for(var i=[],n=0;n<this._order.length;n++)i.push(a.call(this,this._order[n],n,this._order));return i},r.prototype.mapRange=function(a,i,n){a<0&&(a=0),i>this._order.length-1&&(i=this._order.length-1);for(var e=this._order.slice(a,i),t=[],o=a;o<=i;o++)t.push(n.call(this,this._order[o],o,e));return t},r.prototype.reduce=function(a,i){for(var n=0;n<this._order.length;n++)i=a.call(this,i,this._order[n],n);return i},r.prototype.serialize=function(a){a===void 0&&(a=u.DataDriver.json);for(var i=[],n=function(c){var h=b({},e._order[c]);Object.keys(h).forEach(function(g){g.startsWith("$")&&delete h[g]}),i.push(h)},e=this,t=0;t<this._order.length;t++)n(t);var o=(0,p.toDataDriver)(a);if(o)return o.serialize(i)},r.prototype.getInitialData=function(){return this._initOrder},r.prototype.setMeta=function(a,i,n){if(a){var e=this._meta.get(a);e||(e={},this._meta.set(a,e)),e[i]=n}},r.prototype.getMeta=function(a,i){var n=this._meta.get(a);return n?n[i]:null},r.prototype.getMetaMap=function(a){return this._meta.get(a)},r.prototype.setRange=function(a,i){this._range=i?[a,i]:null},r.prototype.getRawData=function(a,i,n,e){if(n=n||this._order,e===1)return n;if(this._range)if(a=this._range[0]+a,i===-1)i=this._range[1];else{var t=Math.abs(i-a);i=a+t>this._range[1]?this._range[1]:a+t}if(!i||a===0&&(i===-1||i===n.length))return n;if(a>=n.length)return[];(i===-1||i>n.length)&&(i=n.length);var o=n.slice(a,i);return o.filter(function(c){return c.$empty}).length!==0&&this.events.fire(u.DataEvents.dataRequest,[a,i]),o},r.prototype._add=function(a,i){if(this.isDataLoaded()){var n=this._addCore(a,i);return this._onChange("add",a.id,a),this.events.fire(u.DataEvents.afterAdd,[a]),n}(0,p.dhxWarning)("the method doesn't work with lazyLoad")},r.prototype._remove=function(a){if(this.isDataLoaded()){var i=this._pull[a];if(i){if(!this.events.fire(u.DataEvents.beforeRemove,[i]))return;this._removeCore(i.id),this._onChange("remove",a,i)}this.events.fire(u.DataEvents.afterRemove,[i])}else(0,p.dhxWarning)("the method doesn't work with lazyLoad")},r.prototype._copy=function(a,i,n,e,t){if(this.isDataLoaded()){if(!this.exists(a))return null;var o=(0,s.uid)();return t&&(i=i===-1?-1:i+t),n?n instanceof r||!e?n.exists(a)?(n.add(b(b({},(0,p.copyWithoutInner)(this.getItem(a))),{id:o}),i),o):(n.add((0,p.copyWithoutInner)(this.getItem(a)),i),a):void n.add((0,p.copyWithoutInner)(this.getItem(a)),i):(this.add(b(b({},(0,p.copyWithoutInner)(this.getItem(a))),{id:o}),i),o)}(0,p.dhxWarning)("the method doesn't work with lazyLoad")},r.prototype._move=function(a,i,n,e,t,o){if(this.isDataLoaded()){if(t&&(i=i===-1?-1:i+t),n&&n!==this&&this.exists(a)){var c=(0,s.copy)(this.getItem(a),!0);return o&&(c.id=o),(!o&&n.exists(a)||n.exists(o))&&(c.id=(0,s.uid)()),e&&(c.parent=e),n.add(c,i),this.remove(a),c.id}if(this.getIndex(a)===i)return null;var h=this._order.splice(this.getIndex(a),1)[0];return i===-1&&(i=this._order.length),this._order.splice(i,0,h),this.events.fire(u.DataEvents.change,[a,"update",this.getItem(a)]),a}(0,p.dhxWarning)("the method doesn't work with lazyLoad")},r.prototype._addCore=function(a,i){var n;return this.config.init&&(a=this.config.init(a)),a.id=(n=a.id)!==null&&n!==void 0?n:(0,s.uid)(),this._pull[a.id]&&(0,p.dhxError)("Item ".concat(a.id," already exist")),this._initOrder&&!(0,p.isTreeCollection)(this)&&this._addToOrder(this._initOrder,a,i),this._addToOrder(this._order,a,i),a.id},r.prototype._removeCore=function(a){this.getIndex(a)>=0&&(this._order=this._order.filter(function(i){return i.id!==a}),delete this._pull[a]),this._initOrder&&this._initOrder.length&&(this._initOrder=this._initOrder.filter(function(i){return i.id!==a}),delete this._pull[a])},r.prototype._parse_data=function(a){var i=this._order.length;this.config.prep&&(a=this.config.prep(a));for(var n=0,e=a;n<e.length;n++){var t=e[n];this._addCore(t,i++)}},r.prototype._approximate=function(a,i,n){for(var e=a.length,t=i.length,o=Math.floor(e/n),c=Array(Math.ceil(e/o)),h=0,g=0;g<e;g+=o){for(var x=(0,s.copy)(a[g]),C=Math.min(e,g+o),k=0;k<t;k++){for(var I=0,O=g;O<C;O++)I+=a[O][i[k]];x[i[k]]=I/(C-g)}c[h++]=x}return c},r.prototype._onChange=function(a,i,n){for(var e=0,t=0,o=this._changes.order;t<o.length;t++){var c=o[t],h=this._changes.order.indexOf(c);if(c.id===i&&!c.saving&&(e+=1,h===this._changes.order.length-1||this._changes.order[h+1].id!==i))return c.error&&(c.error=!1),c=b(b({},c),{obj:n,status:a}),(e+=1)>10?this._changes.order.splice(h,e-10,c):this._changes.order.splice(h+1,0,c),this._loader.updateChanges(this._changes),a==="remove"&&n.$emptyRow?void 0:void this.events.fire(u.DataEvents.change,[i,a,n])}this._changes.order.push({id:i,status:a,obj:b({},n),saving:!1}),this._loader.updateChanges(this._changes),this.events.fire(u.DataEvents.change,[i,a,n])},r.prototype._addToOrder=function(a,i,n){n>=0&&a[n]?(this._pull[i.id]=i,a.splice(n,0,i)):(this._pull[i.id]=i,a.push(i))},r.prototype._applySorters=function(a){this._sort.sort(this._order,a,this._sorter),this._initOrder&&this._initOrder.length&&this._sort.sort(this._initOrder,a,this._sorter)},r.prototype._applyFilters=function(a){if(a){var i=typeof a!="function"?this._getRuleCallback(a):a,n=this._order.filter(function(e){return i(e)});this._initOrder||(this._initOrder=this._order),this._order=n}},r.prototype._reapplyFilters=function(a){a===void 0&&(a=!1);var i=this.getFilters({permanent:!0});i&&this.filter(i,{$restore:!0,add:!0},!0),a&&this._sorter&&this._applySorters()},r.prototype._getRuleCallback=function(a){if((0,s.isDefined)(a.by)&&(0,s.isDefined)(a.match))return a.compare?function(i){return a.compare(i[a.by],a.match,i,a.multi)}:function(i){return i[a.by]==a.match}},r.prototype._getPureFilters=function(a){return Object.keys(a).reduce(function(i,n){var e;return!((e=a[n].config)===null||e===void 0)&&e.$local||(i[n]=a[n]),i},{})},r.prototype._normalizeFilters=function(a){var i=[];for(var n in a){var e=a[n].rule;if(typeof e!="function")if((0,s.isDefined)(e.by))i.push(this._getRuleCallback(e));else for(var t in e)i.push(this._getRuleCallback(e[t]));else i.push(e)}return b({},i)},r}();_.DataCollection=l},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(f){for(var d,p=1,u=arguments.length;p<u;p++)for(var s in d=arguments[p])Object.prototype.hasOwnProperty.call(d,s)&&(f[s]=d[s]);return f},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.dataDriversPro=_.dataDrivers=void 0;var E=y(70),m=y(71),v=y(132);_.dataDrivers={json:E.JsonDriver,csv:m.CsvDriver},_.dataDriversPro=b(b({},_.dataDrivers),{xml:v.XMLDriver})},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.JsonDriver=void 0;var b=function(){function E(){}return E.prototype.toJsonArray=function(m){return this.getRows(m)},E.prototype.serialize=function(m){return m},E.prototype.getFields=function(m){return m},E.prototype.getRows=function(m){return typeof m=="string"?JSON.parse(m):m},E}();_.JsonDriver=b},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(m){for(var v,f=1,d=arguments.length;f<d;f++)for(var p in v=arguments[f])Object.prototype.hasOwnProperty.call(v,p)&&(m[p]=v[p]);return m},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.CsvDriver=void 0;var E=function(){function m(v){this.config=b(b({},{skipHeader:0,nameByHeader:!1,rowDelimiter:`
`,columnDelimiter:","}),v),this.config.nameByHeader&&(this.config.skipHeader=1)}return m.prototype.getFields=function(v,f){for(var d=new RegExp('(?<!")'.concat(this.config.columnDelimiter,'(?!")')),p=v.trim().split(d),u={},s=0;s<p.length;s++)u[f?f[s]:s+1]=isNaN(Number(p[s]))?p[s].replace(/"[,;"]"/gi,function(l){return l.split("").splice(1,1).slice(-1,1).join("")}):parseFloat(p[s]);return u},m.prototype.getRows=function(v){return v.trim().split(this.config.rowDelimiter)},m.prototype.toJsonArray=function(v){var f=this,d=this.getRows(v),p=this.config.names;if(this.config.skipHeader){var u=d.splice(0,this.config.skipHeader);this.config.nameByHeader&&(p=u[0].trim().split(this.config.columnDelimiter))}return d.map(function(s){return f.getFields(s,p)})},m.prototype.serialize=function(v,f){var d=v[0]?Object.keys(v[0]).filter(function(u){return!u.startsWith("$")}).join(this.config.columnDelimiter)+this.config.rowDelimiter:"",p=this._serialize(v);return f?p:d+p},m.prototype._serialize=function(v){var f=this;return v.reduce(function(d,p){var u=Object.keys(p),s=u.reduce(function(l,r,a){var i,n;return r.startsWith("$")||r==="items"?l:"".concat(l).concat(((n=(i=p[r])===null||i===void 0?void 0:i.toString())!==null&&n!==void 0?n:"").replaceAll(/[,;"]/gi,function(e){return'"'.concat(e,'"')})).concat(a===u.length-1?"":f.config.columnDelimiter)},"");return p.items?"".concat(d).concat(d?`
`:"").concat(s).concat(f._serialize(p.items)):"".concat(d).concat(d?f.config.rowDelimiter:"").concat(s)},"")},m}();_.CsvDriver=E},function(W,_,y){var b,E=this&&this.__extends||(b=function(A,H){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,$){S.__proto__=$}||function(S,$){for(var w in $)Object.prototype.hasOwnProperty.call($,w)&&(S[w]=$[w])},b(A,H)},function(A,H){if(typeof H!="function"&&H!==null)throw new TypeError("Class extends value "+String(H)+" is not a constructor or null");function S(){this.constructor=A}b(A,H),A.prototype=H===null?Object.create(H):(S.prototype=H.prototype,new S)}),m=this&&this.__assign||function(){return m=Object.assign||function(A){for(var H,S=1,$=arguments.length;S<$;S++)for(var w in H=arguments[S])Object.prototype.hasOwnProperty.call(H,w)&&(A[w]=H[w]);return A},m.apply(this,arguments)},v=this&&this.__rest||function(A,H){var S={};for(var $ in A)Object.prototype.hasOwnProperty.call(A,$)&&H.indexOf($)<0&&(S[$]=A[$]);if(A!=null&&typeof Object.getOwnPropertySymbols=="function"){var w=0;for($=Object.getOwnPropertySymbols(A);w<$.length;w++)H.indexOf($[w])<0&&Object.prototype.propertyIsEnumerable.call(A,$[w])&&(S[$[w]]=A[$[w]])}return S},f=this&&this.__spreadArray||function(A,H,S){if(S||arguments.length===2)for(var $,w=0,T=H.length;w<T;w++)!$&&w in H||($||($=Array.prototype.slice.call(H,0,w)),$[w]=H[w]);return A.concat($||Array.prototype.slice.call(H))};Object.defineProperty(_,"__esModule",{value:!0}),_.Grid=void 0;var d=y(0),p=y(3),u=y(2),s=y(1),l=y(14),r=y(5),a=y(8),i=y(138),n=y(18),e=y(26),t=y(15),o=y(139),c=y(7),h=y(25),g=y(24),x=y(163),C=y(167),k=y(168),I=y(31),O=y(33),D=function(A){function H(S,$){var w=A.call(this,S,$)||this;w._touch={duration:350,dblDuration:300,timer:null,start:!1},w._destructed=!1,w.version="6.0.1",w.config=(0,s.extend)({rowHeight:40,headerRowHeight:40,footerRowHeight:40,keyNavigation:!0,sortable:!0,columns:[],data:[],tooltip:!0,rootParent:typeof S=="string"&&S||w._uid},w._normalizeConfig($)),w.content=(0,x.getContent)(),w._scroll={top:0,left:0},w.config.autoWidth=w.config.autoWidth||w.config.fitToContainer,w.config.adjust=w.config.adjust||w.config.columnsAutoWidth,w.config.editable=w.config.editable||w.config.editing,w.config.leftSplit=w.config.leftSplit||w.config.splitAt,w.config.columns.forEach(function(V){V.format=V.format||V.dateFormat});var T=function(V,R,q){var G;if(V&&R&&(0,t.isTooltip)(w.config,R)){var U=void 0;if(R.editorType==="combobox"||R.editorType==="select"){var Z=(0,n.getEditorOptions)(R,V).find(function(ot){var rt;return(ot instanceof Object?ot.id.toString():ot)===((rt=V[R.id])===null||rt===void 0?void 0:rt.toString())});U=Z instanceof Object?Z.value:Z}else if(R.editorType==="multiselect"){var Q=(G=V[R.id])===null||G===void 0?void 0:G.toString().split(", ");Q!=null&&Q.length&&(U=(0,n.getEditorOptions)(R,V).filter(function(ot){return Q.includes(ot instanceof Object?ot.id.toString():ot)}).map(function(ot){return ot instanceof Object?ot.value:ot}).join(", "))}var tt=(0,n.toFormat)(U||V[R.id],R.type,R.format),et=function(){return!!tt||typeof tt=="boolean"};R.tooltipTemplate?tt=R.tooltipTemplate(tt,V,R)||null:et()&&R.template&&(tt=R.template(tt,V,R)),et()&&(0,t.showTooltip)({value:tt,node:q,htmlEnable:(0,t.isHtmlEnable)(w.config,R)})}},F=function(V,R){var q,G;R===void 0&&(R="header");var U=V.target,Z=U.getAttribute("data-dhx-text-id"),Q=w.getColumn(U.getAttribute("data-dhx-id"));if(Z&&Q){var tt=(q=Q[R])===null||q===void 0?void 0:q.find(function(rt){return rt.id===Z});if((0,t.isContentTooltip)(w.config,Q,tt,R)){var et=(tt==null?void 0:tt.content)&&["avg","sum","max","min","count"].includes(tt.content),ot=et?(G=w.content[tt.content])===null||G===void 0?void 0:G.toHtml(Q,m(m({},w.config),{datacollection:w.data})):tt==null?void 0:tt.text;typeof(tt==null?void 0:tt.tooltipTemplate)=="function"&&(ot=tt.tooltipTemplate(ot,tt,Q)),et&&typeof Q.template=="function"&&(ot=Q.template(ot,tt,Q)),ot!=null&&ot.toString().length&&(0,t.showTooltip)({value:ot,node:U,htmlEnable:(0,t.isHtmlEnable)(w.config,Q,tt)})}}};if(w._htmlEvents={onclick:(0,u.eventHandler)(function(V){return(0,u.locate)(V)},{"dhx_grid-header-cell--sortable":function(V,R){var q=V.target.getAttribute("dhx_resized"),G=w.getColumn(R);if(G&&(0,t.isSortable)(w.config,G)&&!q&&w.events.fire(c.GridEvents.beforeSort,[G,w._sortDir==="asc"?"desc":"asc"])){var U=(0,u.locate)(V,"data-dhx-text-id"),Z=G.header.find(function(tt){return tt.id===U}),Q=w._sortDir==="asc"&&w._sortBy===R?"desc":"asc";w._sort(R,Q,Z.sortAs)}},"dhx_grid-expand-cell":function(V,R){V.target.classList.contains("dhx_grid-expand-cell-icon")&&w.events.fire(c.GridEvents.expand,[R])},"dhx_span-expand-cell":function(V,R){V.target.classList.contains("dhx_span-expand-cell-icon")&&w.events.fire(c.GridEvents.expand,[R])}}),onscroll:function(V){w.events.fire(c.GridEvents.scroll,[{y:V.target.scrollTop,x:V.target.scrollLeft}])},onmouseover:{".dhx_grid-cell.dhx_boolean-cell .dhx_checkbox.dhx_cell-editor__checkbox":function(V){var R=V.composedPath(),q=w.data.getItem(R[2].getAttribute("data-dhx-id")),G=w.getColumn(R[1].getAttribute("data-dhx-col-id"));T(q,G,V.target)},".dhx_grid-cell:not(.dhx_boolean-cell)":function(V){var R=w.data.getItem(V.composedPath()[1].getAttribute("data-dhx-id")),q=w.getColumn(V.target.getAttribute("data-dhx-col-id"));T(R,q,V.target)},".dhx_grid-cell:not(.dhx_tree-cell) .dhx_grid-cell__content, .dhx_tree-cell :not(.dhx_grid-cell__content)":function(V){var R=V.composedPath(),q=w.data.getItem(R[2].getAttribute("data-dhx-id")),G=w.getColumn(R[1].getAttribute("data-dhx-col-id"));T(q,G,V.target)},".dhx_grid-cell.dhx_tree-cell .dhx_grid-cell__content":function(V){var R=V.composedPath(),q=w.data.getItem(R[3].getAttribute("data-dhx-id")),G=w.getColumn(R[2].getAttribute("data-dhx-col-id"));T(q,G,R[2])},".dhx_span-cell:not(.dhx_grid-header-cell):not(.dhx_grid-footer-cell)":function(V){var R=V.target,q=w.data.getItem(R.getAttribute("data-dhx-id")),G=w.getColumn(R.getAttribute("data-dhx-col-id")),U=w.getSpan(q.id,G.id);if(q&&U&&(0,t.isTooltip)(w.config,U)){var Z=U.text||(0,n.toFormat)(q[G.id],G.type,G.format);U.tooltipTemplate?Z=U.tooltipTemplate(Z,U):G.template&&(Z=G.template(Z,q,G)),Z&&(0,t.showTooltip)({value:Z,node:R,htmlEnable:(0,t.isHtmlEnable)(w.config,G)})}},".dhx_grid-header-cell":function(V){return F(V,"header")},".dhx_grid-footer-cell":function(V){return F(V,"footer")}}},w.config.eventHandlers)for(var z=0,B=Object.entries(w.config.eventHandlers);z<B.length;z++){var L=B[z],M=L[0],P=L[1];w._htmlEvents[M]=(0,u.eventHandler)(function(V){return{col:w.getColumn((0,u.locate)(V,"data-dhx-col-id")||(0,u.locate)(V,"data-dhx-id"))||{},row:w.data.getItem((0,u.locate)(V,"data-dhx-id"))||{}}},P,w._htmlEvents[M])}return(w.config.dragMode||w.config.dragItem)&&(a.dragManager.setItem(w._uid,w),w.config.dragItem||(w.config.dragItem="row"),w.config.dragMode||(w.config.dragMode="both")),w._init(),w.config.columns&&w._parseColumns(!0),w._canDataParse()&&w.data.parse(w.config.data),w.selection=new o.Selection(w,{disabled:!w.config.selection},w.events,w._uid),w.mount(S,w._createView()),(0,d.awaitRedraw)().then(function(){w.config.keyNavigation&&(w.keyManager=new l.KeyManager(function(V,R){return!(R!==w._uid||!w.events.fire(c.GridEvents.beforeKeyDown,[V]))&&(w.events.fire(c.GridEvents.afterKeyDown,[V]),!0)}),w._initHotKey(),I.focusManager.setFocusId(w._uid))}),$.autoEmptyRow&&w.data.getLength()===0&&(w._addEmptyRow(),w.paint()),w}return E(H,A),H.prototype.destructor=function(){this._destructed=!0,this._destroyContent(),this.keyManager&&this.keyManager.destructor(),this.events&&this.events.clear(),this._events&&this._events.clear(),this.export=this.content=this.selection=null,this._activeFilters=this._filterData=this._scroll=this._touch=this._htmlEvents=this._hiddenFilters=null,this.unmount()},H.prototype.setColumns=function(S){var $=this;this._destroyContent(),this.config.columns=S,this._parseColumns(!0),(0,t.isAutoWidth)(this.config)&&this._applyAutoWidth(),this._adjustColumns(),this._checkFilters(),this._checkMarks(),this._normalizeSpans(),this.paint(),this.config.keyNavigation&&(0,d.awaitRedraw)().then(function(){$._initHotKey(!0),$.paint()})},H.prototype.addRowCss=function(S,$){var w=this.data.getItem(S),T=w.$css||"";T.match(new RegExp($,"g"))||(w.$css=T+" ".concat($),this.paint())},H.prototype.removeRowCss=function(S,$){var w=this.data.getItem(S),T=w.$css?w.$css.replace($,""):"";w.$css=T,this.paint()},H.prototype.addCellCss=function(S,$,w){var T=this.getColumn($);if(T){T.$cellCss=T.$cellCss||{};var F=T.$cellCss[S];if(F){var z=F.match(new RegExp(w,"g"))?"":" ".concat(w);T.$cellCss[S]+=z}else this.data.getItem(S)&&(T.$cellCss[S]="".concat(w," "));this.paint()}},H.prototype.removeCellCss=function(S,$,w){var T=this.getColumn($);T&&(T.$cellCss[S]?(T.$cellCss[S]=T.$cellCss[S].replace(w,""),this.paint()):this.data.getItem(S)&&(T.$cellCss[S]=""))},H.prototype.showColumn=function(S){var $=this.getColumn(S);if($&&$.hidden&&this.events.fire(c.GridEvents.beforeColumnShow,[$])){$.hidden=!1,this.config.$totalWidth+=$.$width,this._parseColumns(),this.config.data=this._prepareData(this.data);var w=this._hiddenFilters&&this._hiddenFilters[$.id];w&&(this._activeFilters[$.id]=w,delete this._hiddenFilters[$.id],this._checkFilters(),this._checkSelectFilterValue()),this._normalizeSpans(),this.paint(),this.events.fire(c.GridEvents.afterColumnShow,[$])}},H.prototype.hideColumn=function(S){var $=this.getColumn(S);if($&&!$.hidden&&this.events.fire(c.GridEvents.beforeColumnHide,[$])){$.hidden=!0,this.config.$totalWidth-=$.$width,this._parseColumns(),this.config.data=this._prepareData(this.data);var w=this._activeFilters&&this._activeFilters[$.id];w&&(this._hiddenFilters||(this._hiddenFilters={}),this._hiddenFilters[$.id]=w,delete this._activeFilters[$.id],this._checkFilters()),this._normalizeSpans(),this.paint(),this.events.fire(c.GridEvents.afterColumnHide,[$])}},H.prototype.isColumnHidden=function(S){var $=this.getColumn(S);if($)return!!$.hidden},H.prototype.showRow=function(S){if((0,s.isDefined)(S)){var $=S.toString(),w=this.data.getItem($);w&&w.hidden&&this.events.fire(c.GridEvents.beforeRowShow,[w])&&(this.data.update($,{hidden:!1}),this._checkFilters(!0),this.paint(),this.events.fire(c.GridEvents.afterRowShow,[w]))}},H.prototype.hideRow=function(S){if((0,s.isDefined)(S)){var $=S.toString(),w=this.data.getItem($);w&&this.events.fire(c.GridEvents.beforeRowHide,[w])&&(this.data.update($,{hidden:!0}),this._checkFilters(!0),this._checkSelectFilterValue(),this.paint(),this.events.fire(c.GridEvents.afterRowHide,[w]))}},H.prototype.isRowHidden=function(S){if((0,s.isDefined)(S)){var $=this.data.getItem(S.toString());return $?!!$.hidden:void 0}},H.prototype.getScrollState=function(){return{x:this._scroll.left,y:this._scroll.top}},H.prototype.scroll=function(S,$){var w=this.getRootView().refs.grid_body.el.querySelector(".scroll-view")||this.getRootView().refs.grid_body.el;w.scrollLeft=!S&&S!==0||typeof S!="number"?w.scrollLeft:S,w.scrollTop=!$&&$!==0||typeof $!="number"?w.scrollTop:$,this.paint()},H.prototype.scrollTo=function(S,$){var w=this.selection.getCell(),T=this.config.columns.filter(function(st){return!st.hidden}),F=(0,s.findIndex)(T,function(st){return st.id==$}),z=w?w.column:this.config.columns[0],B=(0,s.findIndex)(T,function(st){return st.id==z.id}),L=this.config.leftSplit?(0,t.getTotalWidth)(T.slice(0,this.config.leftSplit)):0,M=(0,t.getTotalWidth)(T.slice(0,F))-(F-B<0?L:0),P=this.data.getRawData(0,-1),V=(0,s.findIndex)(P,function(st){return st.id==S}),R=(0,t.getTotalHeight)(P.slice(0,V)),q=this.getScrollState(),G=this.config.$width+q.x,U=this.config.$height+q.y-this.config.$headerHeight,Z=R-q.y-P[V].$height,Q=M-q.x-T[F].$width,tt=R+2*P[V].$height+18-U,et=M+2*T[F].$width+18-G,ot=Z>0&&tt<0?0:Z<0?Z:tt,rt=Q>0&&et<0?0:Q<0?Q:et;this.scroll(rt+q.x,ot+q.y)},H.prototype.adjustColumnWidth=function(S,$){$===void 0&&($=!0);var w=this.config.columns.filter(function(z){return!z.hidden}),T=w.filter(function(z){return z.id===S}),F=this._adjustColumnsWidth({rows:this.config.data,cols:T,totalCols:w,adjust:$});this.config.$totalWidth=w.reduce(function(z,B){if(F[B.id]){B.$fixed=!0;var L=B.maxWidth,M=B.minWidth,P=F[B.id];B.$width=P,L&&P>L&&(B.$width=L),M&&B.$width<M&&(B.$width=M)}return z+B.$width},0),this.paint()},H.prototype.getCellRect=function(S,$){var w=this.config.columns.filter(function(L){return!L.hidden}),T=this.data.getRawData(0,-1),F=this.getSpan(S,$),z=(0,s.findIndex)(w,function(L){return L.id==(F?F.column:$)}),B=(0,s.findIndex)(T,function(L){return L.id==(F?F.row:S)});return{x:(0,t.getTotalWidth)(w.slice(0,z)),y:(0,t.getTotalHeight)(T.slice(0,B)),height:F!=null&&F.rowspan?(0,e.getHeight)(T,F.rowspan,B):T[B]?T[B].$height:0,width:F!=null&&F.colspan?(0,e.getWidth)(this.config.columns,F.colspan,(0,s.findIndex)(this.config.columns,function(L){return L.id===F.column})):w[z]?w[z].$width:0}},H.prototype.getColumn=function(S){for(var $,w=0,T=($=this.config)===null||$===void 0?void 0:$.columns;w<T.length;w++){var F=T[w];if(F.id==S)return F}},H.prototype.addSpan=function(S){this.config.spans=this.config.spans||[];var $=(0,s.findIndex)(this.config.spans,function(w){return"".concat(w.row)==="".concat(S.row)&&"".concat(w.column)==="".concat(S.column)});$>=0?this.config.spans[$]=S:(this.config.spans.push((0,O.normalizeSpan)(S,this.config,this.data)),this._checkMarks(),this.paint())},H.prototype.getSpan=function(S,$){var w,T=this;if(this.config.spans){var F=this.data.getIndex(S.toString()),z=this.config.columns.findIndex(function(L){return L.id===$}),B=(0,s.findIndex)(this.config.spans,function(L){var M=T.data.getIndex(L.row.toString()),P=T.config.columns.findIndex(function(U){return U.id===L.column}),V=M,R=L.rowspan?M+L.rowspan:M+1,q=P,G=L.colspan?P+L.colspan:P+1;return F>=V&&F<R&&z>=q&&z<G});return(w=this.config)===null||w===void 0?void 0:w.spans[B]}},H.prototype.removeSpan=function(S,$){if(this.config.spans){var w=(0,s.findIndex)(this.config.spans,function(T){return"".concat(T.row)=="".concat(S)&&"".concat(T.column)=="".concat($)});this.config.spans.splice(w,1),this.paint()}},H.prototype.editCell=function(S,$,w){var T,F=this.data.getItem(S),z=this.getColumn($);if(F&&z){var B=z.editorType,L=this.getSpan(F.id,z.id);if(w||(w=this.config.autoHeight&&z.type!=="number"?"textarea":"input",z.type==="date"&&(w="datePicker"),z.type==="boolean"&&(w="checkbox"),B&&(w=B),(0,s.isDefined)(L==null?void 0:L.text)&&(w=this.config.autoHeight?"textarea":"input")),z.type==="number"&&!((0,s.isDefined)(L==null?void 0:L.text)&&["input","textarea"].includes(w))&&!["input","select","combobox"].includes(w))return;this.events.fire(c.GridEvents.beforeEditStart,[F,z,w])&&(!((T=this.config.$editable)===null||T===void 0)&&T.editor||this.config.$editable&&this.config.$editable.row===S&&this.config.$editable.col===$&&this.config.$editable.editorType===w||(this.config.$editable={row:F.id,col:z.id,isSpan:!!L,editorType:w},this.selection.config.disabled||this.selection.setCell(S.toString(),$.toString()),this.paint(),this.events.fire(c.GridEvents.afterEditStart,[F,z,w])))}else(0,a.dhxWarning)("item not found")},H.prototype.editEnd=function(S){this.config.$editable&&this.config.$editable.editor&&this.config.$editable.editor.endEdit(S)},H.prototype.getSortingState=function(){return{dir:this._sortDir,by:this._sortBy}},H.prototype.getHeaderFilter=function(S){var $=this,w=this.getColumn(S);if(w){var T=null;return w.header.forEach(function(F){F.content&&(T=$.content[F.content].element[S])}),T}},H.prototype.edit=function(S,$,w){this.editCell(S,$,w)},H.prototype.paint=function(){var S=this.config.hotkeys?Object.keys(this.config.hotkeys).length:0;!this.keyManager||this.keyManager.getKeyStorageLength()-S||this._initHotKey(!0),A.prototype.paint.call(this)},H.prototype._createView=function(){var S=this;return(0,d.create)({render:function($,w){return S._destructed?(0,d.el)("div"):(0,h.render)($,w,S._htmlEvents,S.selection,S._uid)},hooks:this._initHooks()},this)},H.prototype._parseColumns=function(S){S===void 0&&(S=!1);var $=this.config.columns.filter(function(w){return!w.hidden});this.normalizeColumns({config:this.config,columns:$,configChanged:S}),(0,n.countColumns)(this.config,$)},H.prototype.normalizeColumns=function(S){var $,w,T,F=this,z=S.config,B=S.columns,L=S.configChanged;z.$headerHeightMap=[],z.$footerHeightMap=[],z.$headerHeight=z.$footerHeight=0;for(var M=0,P=B;M<P.length;M++){(U=P[M]).htmlEnable=($=U.htmlEnable)!==null&&$!==void 0?$:z.htmlEnable,U.$cellCss=U.$cellCss||{},(0,n.normalizeArray)(U,"header"),(0,n.normalizeArray)(U,"footer"),U.minWidth&&U.minWidth<20&&(U.minWidth=20),U.maxWidth&&U.maxWidth<20&&(U.maxWidth=20);var V=U.minWidth||100;U.width&&(V=(V=U.maxWidth&&U.minWidth?U.width>=U.minWidth&&U.width<=U.maxWidth?U.width:U.width>=U.maxWidth?U.maxWidth:U.minWidth:U.maxWidth?U.width<=U.maxWidth?U.width:U.maxWidth>100?U.maxWidth:100:U.minWidth?U.width>=U.minWidth?U.width:U.minWidth:U.width)<20?20:V),U.$width=U.$width&&!L?U.$width:V,U.$width>U.maxWidth&&(U.$width=U.maxWidth),U.$width<U.minWidth&&(U.$width=U.minWidth)}for(var R=function(Z){if(!((w=Z.header)===null||w===void 0)&&w.length){var Q=0;Z.header.forEach(function(et,ot){(Q=z.headerAutoHeight?F.getNormalizeContentHeight(et,Z,z):z.headerRowHeight)>(z.$headerHeightMap[ot]||0)&&(z.$headerHeightMap[ot]=Math.max(Q,z.headerRowHeight))})}if(!((T=Z.footer)===null||T===void 0)&&T.length){var tt=0;Z.footer.forEach(function(et,ot){(tt=z.footerAutoHeight?F.getNormalizeContentHeight(et,Z,z):z.footerRowHeight)>(z.$footerHeightMap[ot]||0)&&(z.$footerHeightMap[ot]=Math.max(tt,z.footerRowHeight))})}},q=0,G=B;q<G.length;q++){var U;R(U=G[q])}z.$headerHeight=z.$headerHeightMap.reduce(function(Z,Q){return Z+Q},0),z.$footerHeight=z.$footerHeightMap.reduce(function(Z,Q){return Z+Q},0)},H.prototype.getNormalizeContentHeight=function(S,$,w){return this.config.footerRowHeight},H.prototype._parseData=function(){this._detectColsTypes(),this.config.data=this.data.map(function(S){return S}),this.config.data=this._prepareData(this.data),this._checkMarks(),this._applyLocalFilter(),this._checkFilters(),this._render()},H.prototype._createCollection=function(S){this.data=new a.DataCollection({prep:S},this.events)},H.prototype._getRowIndex=function(S){return this.data.getIndex(S)},H.prototype._setEventHandlers=function(){var S=this,$=function(w){var T=w.source,F=w.target,z=v(w,["source","target"]);T!=null&&T.length&&T.map(function(B){return S.data.exists(B)&&S.data.update(B,z)}),S.data.exists(F)&&S.data.update(F,z)};this.data.events.on(a.DataEvents.load,function(){S._applyLocalFilter(!0),S._parseData(),S.config.autoEmptyRow&&S._addEmptyRow(),S.config.data instanceof a.DataCollection?(0,d.awaitRedraw)().then(function(){return S._normalizeSpans()}):S._normalizeSpans()}),this.data.events.on(a.DataEvents.change,function(w,T,F){if(T!=="load")if(T!=="setPage"){if(T==="sort")F.dir?S._sortDir=F.dir:S._sortBy===F.by?S._sortDir=S._sortDir==="asc"?"desc":"asc":S._sortDir="asc",S._sortBy=F.by;else if(T==="add"||T==="update"||T==="remove"){if((0,s.isId)(w)&&T==="remove"){var z=S.selection.getCells().find(function(L){return L.row.id===w});z&&S.selection.removeCell(z.row.id,z.column.id)}S.config.data=S._prepareData(S.data)}else(0,a.isTreeCollection)(S.data)&&(S.config.data=S._prepareData(S.data)),S._adjustColumns();if((0,s.isId)(w)&&(S._checkFilters(),S._checkSelectFilterValue()),S._detectColsTypes(),S._removeMarks(),S._checkMarks(),S.config.autoEmptyRow&&(!S._activeFilters||(0,s.isEmptyObj)(S._activeFilters))){var B=S.data.find({by:"$emptyRow",match:!0});if(B){if(B.id===w)return;S.data.move(B.id,S.data.getLength()-1)}else S._addEmptyRow()}switch(T){case"add":case"remove":case"sort":S._normalizeSpans()}S._render()}else(0,d.awaitRedraw)().then(function(){var L=S.config.columns.find(function(M){return M.hidden!==!0});S.scrollTo(S.data.getId(F[0]).toString(),L.id.toString()),S._render()})}),this.data.events.on(a.DataEvents.filter,function(w){w||S.data.getRawFilters({permanent:!0})||S._applyLocalFilter(),!w||(0,a.isOnlyPermanentFilters)(w)?(S._filterData=S.data.map(function(T){return T})||[],S._setUniqueData(),S._clearFilterValue()):S._checkFilters(),S._removeMarks(),S._checkMarks(),S._normalizeSpans(),S.paint()}),this.data.events.on(a.DataEvents.removeAll,function(){S._hiddenFilters={},S.config.columns.map(function(w){w.header.map(function(T){!T.content||T.content!=="selectFilter"&&T.content!=="comboFilter"||(w.$uniqueData=[])})}),(0,s.isEmptyObj)(S._activeFilters)||S.data.resetFilter(),S._clearFilterValue(!0)}),this.events.on(a.DragEvents.beforeDrag,function(w,T){return S.data.getItem(w.start)?S.events.fire(c.GridEvents.beforeRowDrag,[w,T]):S.config.dragItem==="column"||S.config.dragItem==="both"?S.events.fire(c.GridEvents.beforeColumnDrag,[w,T]):void 0}),this.events.on(a.DragEvents.dragStart,function(w,T){var F=w.source,z=w.target,B=w.start;$({source:F,target:z,$dragtarget:!0}),S.data.getItem(B)?(S.events.fire(c.GridEvents.dragRowStart,[w,T]),S._autoScroll("vertical")):S.config.dragItem!=="column"&&S.config.dragItem!=="both"||(S.events.fire(c.GridEvents.dragColumnStart,[w,T]),S._autoScroll("horizontal"))}),this.events.on(a.DragEvents.dragIn,function(w,T){S.data.getItem(w.start)?S.events.fire(c.GridEvents.dragRowIn,[w,T]):S.config.dragItem!=="column"&&S.config.dragItem!=="both"||S.events.fire(c.GridEvents.dragColumnIn,[w,T])}),this.events.on(a.DragEvents.dragOut,function(w,T){S.data.getItem(w.start)?S.events.fire(c.GridEvents.dragRowOut,[w,T]):S.config.dragItem!=="column"&&S.config.dragItem!=="both"||S.events.fire(c.GridEvents.dragColumnOut,[w,T])}),this.events.on(a.DragEvents.canDrop,function(w,T){var F=w,z=F.source,B=F.target,L=F.dragItem;delete w.dragItem,$({source:z,target:B,$drophere:!0}),L==="row"?S.events.fire(c.GridEvents.canRowDrop,[w,T]):S.config.dragItem!=="column"&&S.config.dragItem!=="both"||S.events.fire(c.GridEvents.canColumnDrop,[w,T])}),this.events.on(a.DragEvents.cancelDrop,function(w,T){var F=w.source,z=w.target,B=w.start;$({source:F,target:z,$drophere:void 0,$dragtarget:void 0}),S.data.getItem(B)?S.events.fire(c.GridEvents.cancelRowDrop,[w,T]):S.config.dragItem!=="column"&&S.config.dragItem!=="both"||S.events.fire(c.GridEvents.cancelColumnDrop,[w,T])}),this.events.on(a.DragEvents.beforeDrop,function(w,T){return S.config.dragItem!=="row"||S.config.dragMode!=="both"&&S.config.dragMode!=="target"?S.config.dragItem==="column"||S.config.dragItem==="both"?S.events.fire(c.GridEvents.beforeColumnDrop,[w,T]):void 0:S.events.fire(c.GridEvents.beforeRowDrop,[w,T])}),this.events.on(a.DragEvents.afterDrop,function(w,T){var F,z;if(S.data.getItem(w.start)){var B=w.source;if(B.some(function(et){return et==w.target}))return;for(var L=S.data.getItem(w.start),M=0,P=S.config.columns;M<P.length;M++){var V=P[M];L[V.id]===void 0&&S.data.update(L.id,((F={})[V.id]=null,F),!0)}var R=S.data.getInitialData(),q=R==null?void 0:R.findIndex(function(et){return et.id==w.start}),G=R==null?void 0:R.findIndex(function(et){return et.id==w.target});if(q>-1&&G>-1)if(((z=w.source)===null||z===void 0?void 0:z.length)>1){for(var U=[],Z=function(et){var ot=R==null?void 0:R.findIndex(function(st){return st.id==et}),rt=R==null?void 0:R.splice(ot,1)[0];U.push(rt)},Q=0,tt=B;Q<tt.length;Q++)Z(tt[Q]);G=R==null?void 0:R.findIndex(function(et){return et.id==w.target}),G>0&&++G,R==null||R.splice.apply(R,f([G,0],U,!1))}else R==null||R.splice(G,0,R==null?void 0:R.splice(q,1)[0]);S.config.data=S._prepareData(R||S.data.map(function(et){return et})),S.data.parse(S.config.data),S._checkFilters(),S.paint(),S.events.fire(c.GridEvents.afterRowDrop,[w,T])}else S.config.dragItem!=="column"&&S.config.dragItem!=="both"||S.events.fire(c.GridEvents.afterColumnDrop,[w,T])}),this.events.on(a.DragEvents.afterDrag,function(w,T){var F=w.source,z=w.target,B=w.start;$({source:F,target:z,$dragtarget:void 0}),S.data.getItem(B)?S.events.fire(c.GridEvents.afterRowDrag,[w,T]):S.config.dragItem!=="column"&&S.config.dragItem!=="both"||S.events.fire(c.GridEvents.afterColumnDrag,[w,T]),S.config.data=S._prepareData(S.data instanceof Array?S.data.map(function(L){return L}):S.data.getInitialData()||S.data),S.data.parse(S.config.data),S._normalizeSpans()}),this.events.on(c.GridEvents.cellMouseDown,function(w,T,F){F.targetTouches?(S._touch.timer=setTimeout(function(){S._dragStart(F)},S._touch.duration),S._touch.timeStamp?(S._touch.dblDuration>=S._touch.timeStamp-+F.timeStamp.toFixed()&&((T.editable!==!1&&S.config.editable||T.editable)&&S.editCell(w.id,T.id,T.editorType),F.preventDefault(),S.events.fire(c.GridEvents.cellDblClick,[w,T,F])),S._touch.timeStamp=null):S._touch.timeStamp=+F.timeStamp.toFixed(),setTimeout(function(){S._touch.timeStamp=null},S._touch.dblDuration)):S._dragStart(F)}),this._events.on(c.GridSystemEvents.cellTouchMove,function(w,T,F){S._touch.start&&F.preventDefault(),S._clearTouchTimer()}),this._events.on(c.GridSystemEvents.cellTouchEnd,function(){S._touch.start=!1,S._clearTouchTimer()}),this.events.on(c.GridEvents.filterChange,function(w,T,F,z){var B,L,M;if(S.events.fire(c.GridEvents.beforeFilter,[w,T])){if(S.config.autoEmptyRow){var P=S.data.find({by:"$emptyRow",match:!0});P&&S.data.remove(P.id)}S._activeFilters||(S._activeFilters={});var V=S.getColumn(T),R=V.header.filter(function(G){return G.content===F&&G.customFilter!==void 0})[0];if(F==="comboFilter"&&w!==void 0||F!=="comboFilter"&&w!==""){var q=(0,n.getEditorOptions)(V);V.editorType!=="combobox"&&V.editorType!=="select"&&V.editorType!=="multiselect"||!q||(w=Array.isArray(w)?w.map(function(G){var U;return((U=q.find(function(Z){return typeof Z=="string"?Z===G:Z.value===G}))===null||U===void 0?void 0:U.id)||G}):(L=(B=q.find(function(G){return typeof G=="string"?G===w:G.value===w}))===null||B===void 0?void 0:B.id)!==null&&L!==void 0?L:w),S._activeFilters[T]={by:T,match:w,compare:(M=R==null?void 0:R.customFilter)!==null&&M!==void 0?M:function(G){var U=S.getColumn(G);return function(Z,Q,tt,et){return S.content[F].match({val:Z,match:Q,obj:tt,multi:et,col:U})}}(T),multi:(V==null?void 0:V.editorType)==="multiselect"}}else delete S._activeFilters[T];z||S.data.filter(S._activeFilters)}}),this.events.on(c.GridEvents.scroll,function(w){S._scroll={top:w.y,left:w.x},S.editEnd(),S.paint()}),this.events.on(c.GridEvents.cellDblClick,function(w,T,F){(0,u.locateNodeByClassName)(F,"dhx_boolean-cell")||w.hasOwnProperty("$groupName")||(T.editable!==!1&&S.config.editable||T.editable)&&S.editCell(w.id,T.id,T.editorType)}),this.events.on(c.GridEvents.afterEditEnd,function(w,T,F){var z,B;if(!(!((B=S.config.$editable)===null||B===void 0)&&B.editor)||S.config.$editable.col===F.id&&S.config.$editable.row===T.id){var L,M;S.config.$editable?(L=S.config.$editable.row,M=S.config.$editable.col):(L=T.id,M=F.id);var P=S.getSpan(L,M);if((0,s.isDefined)(P==null?void 0:P.text)&&w!==void 0)P.text=w.toString();else{var V=S.data.getItem(L);delete V.$emptyRow,w!==void 0&&S.data.update(L,m(m({},V),((z={})[M]=w,z)))}S.config.$editable=null,S.paint()}}),this.events.on(c.GridEvents.headerCellMouseDown,function(w,T){var F=T.target.getAttribute("dhx_resized");F&&S.events.fire(c.GridEvents.beforeResizeStart,[w,T])&&(0,C.startResize)(S,F.toString(),T,function(){S.paint(),S.config.$resizing=null,S.events.fire(c.GridEvents.afterResizeEnd,[w,T])}),T.targetTouches&&(S._touch.timeStamp?(S._touch.dblDuration>=S._touch.timeStamp-+T.timeStamp.toFixed()&&(T.preventDefault(),S.events.fire(c.GridEvents.headerCellDblClick,[w,T])),S._touch.timeStamp=null):S._touch.timeStamp=+T.timeStamp.toFixed(),setTimeout(function(){S._touch.timeStamp=null},S._touch.dblDuration))}),this.events.on(c.GridEvents.footerCellDblClick,function(w,T){T.targetTouches&&(S._touch.timeStamp?(S._touch.dblDuration>=S._touch.timeStamp-+T.timeStamp.toFixed()&&(T.preventDefault(),S.events.fire(c.GridEvents.footerCellDblClick,[w,T])),S._touch.timeStamp=null):S._touch.timeStamp=+T.timeStamp.toFixed(),setTimeout(function(){S._touch.timeStamp=null},S._touch.dblDuration))}),this.events.on(c.GridEvents.resize,function(){return S._parseColumns()}),this.events.on(c.GridEvents.afterResizeEnd,function(w){var T;S.config.columns=(T=S.config.columns)===null||T===void 0?void 0:T.map(function(F){return F.id==w.id&&(F.width=w.$width),F}),S._parseColumns()})},H.prototype._addEmptyRow=function(){var S=this.data.getId(this.data.getLength()-1),$=this.data.getItem(S),w=this.config.columns.filter(function(T){return!T.hidden});(0,t.isRowEmpty)($)||this.data.add(w.reduce(function(T,F){return T[F.id]="",T},{$emptyRow:!0}))},H.prototype._sort=function(S,$,w){var T=this;$||($=this._sortBy===S&&this._sortDir==="asc"?"desc":"asc"),this.data.sort({by:S,dir:$,as:w??function(F){var z=T.getColumn(S);return F&&z.type==="date"?typeof F=="string"?(0,g.stringToDate)(F,z.format).getTime():F.getTime():F?"".concat(F):""}}),this.events.fire(c.GridEvents.afterSort,[this.getColumn(S),$])},H.prototype._clearTouchTimer=function(){this._touch.timer&&(clearTimeout(this._touch.timer),this._touch.timer=null)},H.prototype._checkFilters=function(S){if(S===void 0&&(S=!1),(0,s.isEmptyObj)(this._activeFilters))S&&this.data.resetFilter(),this._filterData=this.data.map(function(w){return w})||[],this._setUniqueData();else{var $=this.data.getRawFilters({permanent:!0});this.data.filter($,{$restore:!0},!0),this._filterData=this.data.map(function(w){return w})||[],this._setUniqueData(),this.data.filter(null,{$restore:!0},!0),this._filterData=this.data.map(function(w){return w})||[],this._setUniqueData(!0)}},H.prototype._setUniqueData=function(S){var $=this;S===void 0&&(S=!1),this._filterData&&this.config.columns.forEach(function(w){w.header.forEach(function(T){if(T.content&&(T.content==="selectFilter"||T.content==="comboFilter")){var F=w.header.some(function(M){var P;return(P=M.filterConfig)===null||P===void 0?void 0:P.multiselection}),z=w.header.some(function(M){var P;return(P=M.filterConfig)===null||P===void 0?void 0:P.filter});if(!S||S&&!F&&!z){var B=(0,n.getUnique)($._filterData,w.id,F),L=(0,n.getEditorOptions)(w);w.editorType!=="combobox"&&w.editorType!=="select"&&w.editorType!=="multiselect"||!L||(B=B.map(function(M){var P=L.find(function(V){return typeof V=="string"?M===V:M===V.id});return P&&typeof P!="string"?P.value:M})),B=w.type!=="string"?Array.from(new Set(B.map(function(M){return(0,n.toFormat)(M,w.type,w.format)}))):B,S?w.$activeFilterData=B:(w.$uniqueData=B,w.$activeFilterData&&delete w.$activeFilterData)}}})})},H.prototype._checkSelectFilterValue=function(){var S,$=(S=this.content)===null||S===void 0?void 0:S.selectFilter;if($)for(var w in $.value){var T=this.getColumn(w),F=$.value[w];T.hidden||!F||T.$uniqueData.includes(F)||$.element[w].clear()}},H.prototype._clearFilterValue=function(S){var $=this;S===void 0&&(S=!1),["selectFilter","inputFilter"].map(function(w){var T;return(T=$.content)===null||T===void 0?void 0:T[w]}).filter(function(w){return w}).forEach(function(w){for(var T in w.value)!w.value[T]||!S&&$.getColumn(T).hidden||w.element[T].clear(!0)})},H.prototype._adjustColumns=function(){var S=this;if(typeof this.config.adjust=="boolean"||this.config.adjust==="data"||this.config.adjust==="header"||this.config.adjust==="footer"){if(!(T=this.config.columns.filter(function(F){return!F.hidden})).length)return;var $=this.config.data&&this.config.data.length?this.config.data:this.data.map(function(F){return F}),w=this._adjustColumnsWidth({rows:$,cols:T,totalCols:T});this.config.$totalWidth=T.reduce(function(F,z){z.$fixed=!0;var B=z.maxWidth,L=z.minWidth,M=w[z.id];return z.$width=M,B&&M>B&&(z.$width=B),L&&z.$width<L&&(z.$width=L),F+z.$width},0)}else{var T;if(!(T=this.config.columns.filter(function(F){return!F.hidden&&F.adjust})).length)return;T.forEach(function(F){S.adjustColumnWidth(F.id,F.adjust)})}},H.prototype._prepareData=function(S){var $=this;return(this.config.autoHeight||this.config.headerAutoHeight||this.config.footerAutoHeight)&&(this.config.autoHeight=this.config.headerAutoHeight=this.config.footerAutoHeight=!1),this._normalizeDataType(),this._adjustColumns(),S.map(function(w){return w.$height=w.height||$.config.rowHeight,w})},H.prototype._adjustColumnsWidth=function(S){var $,w,T,F,z=this,B=S.rows,L=S.cols,M=S.adjust,P=M===void 0?this.config.adjust:M,V={};if(P==="header"||P===!0){var R=L.filter(function(ct){return ct.header});if(tt=(0,n.getMaxColsWidth)(this._prepareColumnData(R,"header"),R,{font:"bold 14.4px Arial"},"header"))for(var q=0,G=Object.entries(tt);q<G.length;q++){var U=G[q],Z=U[0],Q=U[1];V=Object.assign(V,(($={})[Z]=+Q+24+(F=this.getColumn(Z),(0,t.isSortable)(z.config,F)?16:0),$))}}if(P==="footer"||P===!0){var tt;if(R=L.filter(function(ct){return ct.footer}),tt=(0,n.getMaxColsWidth)(this._prepareColumnData(R,"footer"),R,{font:"bold 14.4px Arial"},"footer"))for(var et=0,ot=Object.entries(tt);et<ot.length;et++){var rt=ot[et];Z=rt[0],Q=rt[1],(V[Z]&&V[Z]<+Q+24||!V[Z])&&(V=Object.assign(V,((w={})[Z]=+Q+24,w)))}}if((P==="data"||P===!0)&&(tt=(0,n.getMaxColsWidth)(B,L,{font:"normal 14.4px Arial"},"data")))for(var st=0,ut=Object.entries(tt);st<ut.length;st++){var at=ut[st];Z=at[0],Q=at[1],(V[Z]&&V[Z]<+Q+24||!V[Z])&&(V=Object.assign(V,((T={})[Z]=+Q+24,T)))}return V},H.prototype._prepareColumnData=function(S,$){for(var w,T,F,z,B,L,M,P,V,R,q,G,U,Z=[],Q=0;Q<S.length;Q++){for(var tt=[],et=0;et<((T=S[Q])===null||T===void 0?void 0:T[$].length);et++){var ot={};if(!((z=(F=S[Q])===null||F===void 0?void 0:F[$][et])===null||z===void 0)&&z.text){var rt=(L=(B=S[Q])===null||B===void 0?void 0:B[$][et])===null||L===void 0?void 0:L.htmlEnable;ot[S[Q].id]=((P=(M=S[Q])===null||M===void 0?void 0:M[$][et])===null||P===void 0?void 0:P.text)||"",rt&&(ot[S[Q].id]=(0,t.removeHTMLTags)(ot[S[Q].id])),tt.push(ot)}else if(!((R=(V=S[Q])===null||V===void 0?void 0:V[$][et])===null||R===void 0)&&R.content){var st=(q=this.content)===null||q===void 0?void 0:q[(U=(G=S[Q])===null||G===void 0?void 0:G[$][et])===null||U===void 0?void 0:U.content];typeof st.calculate=="function"?ot[S[Q].id]=(st==null?void 0:st.toHtml(this.getColumn(S[Q].id),m(m({},this.config),{datacollection:this.data})))||"":ot[S[Q].id]="",tt.push(ot)}}for(var ut=0;ut<tt.length;ut++)for(var at=0,ct=Object.entries(tt[ut]);at<ct.length;at++){var ft=ct[at],vt=ft[0],_t=ft[1];Z[ut]=m({},Z[ut])||{},Z[ut]=Object.assign(Z[ut],((w={})[vt]=_t,w))}}return Z},H.prototype._dragStart=function(S){if(this.config.dragMode&&(this.config.dragItem==="row"||this.config.dragItem==="both")&&!this.config.$editable){var $=this.getColumn(S.target.getAttribute("data-dhx-col-id"));if(($==null?void 0:$.draggable)===!1)return;var w=(0,u.locateNode)(S,"data-dhx-id"),T=w&&w.getAttribute("data-dhx-id");return S.targetTouches&&(this._touch.start=!0),a.dragManager.onMouseDown(S,[T],[this._getRowGhost([T])])}},H.prototype._getRowGhost=function(S){var $=this._container||(0,u.toNode)(this._uid),w=S.map(function(F){return $.querySelector('.dhx_grid-row[data-dhx-id="'.concat(F,'"]'))}),T=document.createElement("div");return w.forEach(function(F){return F&&T.appendChild(F.cloneNode(!0))}),T},H.prototype._initHooks=function(){var S=this;return{didMount:function(){S._canDataParse(!0)&&(S._container||S._applyAutoWidth(),S.data.parse(S.config.data)),S.config.autoWidth&&S._parseColumns()}}},H.prototype._normalizeDataType=function(){var S=this,$=this.config.columns.reduce(function(w,T){return T.type==="number"&&w.push(T),w},[]);$.length&&this.data.forEach(function(w){for(var T,F=0,z=$;F<z.length;F++){var B=z[F],L=(0,n.getValueForNumberColumn)(B,w[B.id]);if(Number.isNaN(L))throw new Error("Incorrect data in column with type 'number', see docs: https://docs.dhtmlx.com/suite/grid/api/api_gridcolumn_properties/");w[B.id]!==L&&S.data.update(w.id,((T={})[B.id]=L,T),!0)}})},H.prototype._applyLocalFilter=function(S){S===void 0&&(S=!1),S?this.data.filter(function($){return $},{$local:!0},!0):this.data.filter(function($){return!$.hidden},{$local:!0,permanent:!0},!0)},H.prototype._normalizeSpans=function(){var S,$=this;this.config.spans=(S=this.config.spans)===null||S===void 0?void 0:S.map(function(w){return(0,O.normalizeSpan)(w,$.config,$.data)})},H.prototype._canDataParse=function(S){var $;return S===void 0&&(S=!1),!!(!(($=this.config.data)===null||$===void 0)&&$.length&&this.config.data instanceof Array&&this.config.columns)&&(this.config.autoWidth&&this.config.autoHeight?S:!S)},H.prototype._init=function(){this.events=new p.EventSystem(this),this._events=new p.EventSystem(this),this._attachDataCollection(),this.export=new i.Exporter("grid",this.version,this),this._setEventHandlers()},H.prototype._attachDataCollection=function(){var S=this;if(this.config.data instanceof a.DataCollection)return this.data=this.config.data,this.data.config.collapsed=this.config.collapsed,void(this.config.data=this.data.serialize());this._createCollection(function($){return $.spans&&(S.config.spans=$.spans,$=$.data),$})},H.prototype._setMarks=function(S,$){for(var w=[],T=0,F=this.data.map(function(L){return w.push(L[S.id]),{id:L.id,data:L[S.id],row:L}});T<F.length;T++){var z=F[T],B=$(z.data,w,z.row,S);B&&(S.$cellCss=S.$cellCss||{},S.$cellCss[z.id]+=" "+B)}},H.prototype._checkMarks=function(){var S=this;this.config.columns.map(function($){var w=$.mark;w&&(typeof w=="function"?S._setMarks($,w):S._setMarks($,function(T,F){var z=[];F.forEach(function(M){M!=null&&M!==""&&z.push(parseFloat(M))});var B=(0,s.getMinArrayNumber)(z),L=(0,s.getMaxArrayNumber)(z);return w.max&&L===parseFloat(T)?w.max:!(!w.min||B!==parseFloat(T))&&w.min}))})},H.prototype._removeMarks=function(){this.config.columns.forEach(function(S){S.mark&&(S.$cellCss={})})},H.prototype._detectColsTypes=function(){this.config.columns.forEach(function(S){return S.type?S:S.format?(S.type="number",S):void(S.type||(S.type="string"))})},H.prototype._destroyContent=function(){for(var S in this.content)S==="comboFilter"&&this.content[S].destroy()},H.prototype._render=function(){this.paint()},H.prototype._initHotKey=function(S){S===void 0&&(S=!1);var $=(0,k.getKeysHandlers)(this);for(var w in $)this.keyManager.exist(w)||this.keyManager.addHotKey(w,$[w]);if(!S)for(var w in this.config.hotkeys)this.keyManager.addHotKey(w,this.config.hotkeys[w])},H.prototype._normalizeConfig=function(S){return Object.keys(S).forEach(function($){$.startsWith("$")&&delete S[$]}),S},H.prototype._autoScroll=function(S){var $,w,T,F=!(($=this.scrollView)===null||$===void 0)&&$.config.enable?(w=this.getRootNode())===null||w===void 0?void 0:w.querySelector(".scroll-view"):(T=this.getRootNode())===null||T===void 0?void 0:T.querySelector(".dhx_grid-body");if(F){var z=null,B=F.getBoundingClientRect(),L=B.top,M=B.bottom,P=B.left,V=B.right,R=B.height,q=B.width,G=function(Z){Z==="up"||Z==="down"?F.scrollBy(0,Z==="up"?-40:40):F.scrollBy(Z==="left"?-40:40,0),z=setTimeout(function(){G(Z)},100)},U=function(Z){var Q=Z.clientX,tt=Z.clientY;switch(S){case"horizontal":Q>V-30&&Q<V&&tt>L&&tt<M?z||G("right"):Q>P&&Q<P+30&&tt>L&&tt<M?z||G("left"):z&&(clearTimeout(z),z=null);break;case"vertical":tt>M-30&&tt<M&&Q>P&&Q<V?z||G("down"):tt>L&&tt<L+30&&Q>P&&Q<V?z||G("up"):z&&(clearTimeout(z),z=null)}};(q<F.scrollWidth||R<F.scrollHeight)&&(document.addEventListener("pointermove",U),document.addEventListener("pointerup",function(){document.removeEventListener("pointermove",U),z&&clearTimeout(z)},{once:!0}))}},H.prototype._applyAutoWidth=function(){var S,$,w=this._container||((S=this.getRootView().node.parent)===null||S===void 0?void 0:S.el);if(w){var T=(0,h.getElementSizes)(w),F=($=this.scrollView)===null||$===void 0?void 0:$.config.enable;(0,h.applyAutoWidth)(this.config,T,!0,!1,F)}},H}(r.View);_.Grid=D},function(W,_,y){var b=this&&this.__createBinding||(Object.create?function(m,v,f,d){d===void 0&&(d=f);var p=Object.getOwnPropertyDescriptor(v,f);p&&!("get"in p?!v.__esModule:p.writable||p.configurable)||(p={enumerable:!0,get:function(){return v[f]}}),Object.defineProperty(m,d,p)}:function(m,v,f,d){d===void 0&&(d=f),m[d]=v[f]}),E=this&&this.__exportStar||function(m,v){for(var f in m)f==="default"||Object.prototype.hasOwnProperty.call(v,f)||b(v,m,f)};Object.defineProperty(_,"__esModule",{value:!0}),E(y(145),_),E(y(78),_)},function(W,_,y){var b,E=this&&this.__extends||(b=function(a,i){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])},b(a,i)},function(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=a}b(a,i),a.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}),m=this&&this.__assign||function(){return m=Object.assign||function(a){for(var i,n=1,e=arguments.length;n<e;n++)for(var t in i=arguments[n])Object.prototype.hasOwnProperty.call(i,t)&&(a[t]=i[t]);return a},m.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.Cell=void 0;var v=y(1),f=y(0),d=y(5),p=y(50),u=y(146),s=y(3),l=y(49),r=function(a){function i(n,e){var t=a.call(this,n,e)||this;t._disabled=[];var o=n;return o&&o.isVisible&&(t._parent=o),t._parent&&t._parent.events?t.events=t._parent.events:t.events=new s.EventSystem(t),t.config.full=t.config.full===void 0?!!(t.config.header||t.config.collapsable||t.config.headerHeight||t.config.headerIcon||t.config.headerImage):t.config.full,t._afterWindowResized=t._resizedWindow.bind(t),t.id=t.config.id||(0,v.uid)(),t._initHandlers(),t._progress=!!t.config.progressDefault,t._stopProgressDefault=!1,t._isXDirection()&&!e.width&&(e.$autoWidth=!0),t._isXDirection()||e.height||(e.$autoHeight=!0),t}return E(i,a),i.prototype.paint=function(){var n;if(this.isVisible()){var e=this.getRootView();e?e.redraw():(n=this._parent)===null||n===void 0||n.paint()}},i.prototype.isVisible=function(){var n;if(!this._parent)return!(!this._container||!this._container.tagName)||!!this.getRootNode();var e=(n=this._parent.config)===null||n===void 0?void 0:n.activeView;return(!e||e===this.id)&&!this.config.hidden&&(!this._parent||this._parent.isVisible())},i.prototype.hide=function(){this.events.fire(p.LayoutEvents.beforeHide,[this.id])&&(this.config.hidden=!0,this._resetCellsSize(),this._parent&&this._parent.paint&&this._parent.paint(),this.events.fire(p.LayoutEvents.afterHide,[this.id]))},i.prototype.show=function(){this.events.fire(p.LayoutEvents.beforeShow,[this.id])&&(this._parent&&this._parent.config&&this._parent.config.activeView!==void 0?this._parent.config.activeView=this.id:this.config.hidden=!1,this._parent&&!this._parent.isVisible()&&this._parent.show(),this.paint(),this.events.fire(p.LayoutEvents.afterShow,[this.id]))},i.prototype.expand=function(){this.events.fire(p.LayoutEvents.beforeExpand,[this.id])&&(this.config.collapsed=!1,this._checkNextSize()||this._checkNextSize(this._getAnyFlexCell()),this.events.fire(p.LayoutEvents.afterExpand,[this.id]),this.paint())},i.prototype.collapse=function(){this.events.fire(p.LayoutEvents.beforeCollapse,[this.id])&&(this.config.collapsed=!0,this._checkNextSize()||this._checkNextSize(this._getAnyFlexCell()),this.events.fire(p.LayoutEvents.afterCollapse,[this.id]),this.paint())},i.prototype.toggle=function(){this.config.collapsed?this.expand():this.collapse()},i.prototype._checkNextSize=function(n){var e=n??this._getNextCell();return!!e&&(this._isXDirection()&&e.config.$autoWidth&&e.config.width?(e.config.width=void 0,!0):!this._isXDirection()&&e.config.$autoHeight&&e.config.height?(e.config.height=void 0,!0):!n&&e._checkNextSize())},i.prototype.getParent=function(){return this._parent},i.prototype.destructor=function(){var n;this.events&&this.events.clear(),window.removeEventListener("resize",this._afterWindowResized),this._ui&&this._ui.config&&typeof((n=this._ui)===null||n===void 0?void 0:n.destructor)=="function"&&this._ui.destructor(),this.config=this.events=this.id=this._parent=this._handlers=this._uid=this._disabled=this._resizerHandlers=null,this.unmount()},i.prototype.getWidget=function(){return this._ui},i.prototype.getCellView=function(){return this._parent&&this._parent.getRefs(this._uid)},i.prototype.attach=function(n,e){return this.config.html=null,typeof n=="object"?this._ui=n:typeof n=="string"?this._ui=new window.dhx[n](null,e):typeof n=="function"&&(n.prototype instanceof d.View?this._ui=new n(null,e):this._ui={getRootView:function(){return n(e)}}),this.paint(),this._ui},i.prototype.attachHTML=function(n){this.config.html=n,this.paint()},i.prototype.detach=function(){this._stopProgressDefault=!1,this._ui=this.config.html=null,this.paint()},i.prototype.progressShow=function(){this.config.progressDefault&&(this._stopProgressDefault=!1),this._progress=!0,this.paint()},i.prototype.progressHide=function(){this.config.progressDefault&&(this._stopProgressDefault=!0),this._progress=!1,this.paint()},i.prototype.isVisibleProgress=function(){return this._progress},i.prototype.toVDOM=function(n){var e,t;if(this.config===null&&(this.config={}),!this.config.hidden){var o,c=this.config.$fieldset,h=this._calculateStyle(),g=(0,v.isDefined)(this.config.padding)?isNaN(Number(this.config.padding))?{padding:this.config.padding}:{padding:"".concat(this.config.padding,"px")}:"",x=this.config.full||this.config.html?h:m(m({},h),g),C=this._checkProgress()?this._getProgressBar():null;if(!this.config.html)if(this._ui){var k=this._ui.getRootView();k.render&&(k=(0,f.inject)(k)),o=[k]}else o=n||null;var I=this.config.resizable&&!this._isLastCell()&&this._getNextCell()&&!this.config.collapsed?(0,f.el)(".dhx_layout-resizer."+(this._isXDirection()?"dhx_layout-resizer--x":"dhx_layout-resizer--y"),m(m({},this._resizerHandlers),{_ref:"resizer_"+this._uid,tabindex:0}),[(0,f.el)("span.dhx_layout-resizer__icon",{class:"dxi "+(this._isXDirection()?"dxi-dots-vertical":"dxi-dots-horizontal")})]):null,O={};if(this.config.on)for(var D in this.config.on)O["on"+D]=this.config.on[D];var A="",H=this.config.cols||this.config.rows;if(this.config.type&&H)switch(this.config.type){case"line":A=" dhx_layout-line";break;case"wide":A=" dhx_layout-wide";break;case"space":A=" dhx_layout-space"}var S=c?(0,f.el)("fieldset.dhx_form-fieldset",{class:this.config.$disabled?" dhx_form-fieldset--disabled":"",style:g,disabled:this.config.$disabled},[(0,f.el)("legend.dhx_form-fieldset-legend",{class:"dhx_form-fieldset-legend--".concat(this.config.labelAlignment||"left")},this.config.label),(0,f.el)(".dhx_layout-cell-content",{class:this._getCss(!1)},[].concat(o))]):this.config.full?[(0,f.el)("div",{tabindex:this.config.collapsable?"0":"-1",role:this.config.collapsable?"button":null,"aria-label":this.config.collapsable?"click to ".concat(this.config.collapsed?"expand":"collapse"):null,class:"dhx_layout-cell-header"+(this._isXDirection()?" dhx_layout-cell-header--col":" dhx_layout-cell-header--row")+(this.config.collapsable?" dhx_layout-cell-header--collapseble":"")+(this.config.collapsed?" dhx_layout-cell-header--collapsed":"")+(((this.getParent()||{}).config||{}).isAccordion?" dhx_layout-cell-header--accordion":""),style:{height:this.config.headerHeight},onclick:this._handlers.toggle,onkeydown:this._handlers.enterCollapse},[this.config.headerIcon&&(0,f.el)("span.dhx_layout-cell-header__icon",{class:this.config.headerIcon}),this.config.headerImage&&(0,f.el)(".dhx_layout-cell-header__image-wrapper",[(0,f.el)("img",{src:this.config.headerImage,class:"dhx_layout-cell-header__image"})]),this.config.header&&(0,f.el)("h3.dhx_layout-cell-header__title",this.config.header),this.config.collapsable?(0,f.el)("div.dhx_layout-cell-header__collapse-icon",{class:this._getCollapseIcon()}):(0,f.el)("div.dhx_layout-cell-header__collapse-icon",{class:"dxi dxi-empty"})]),this.config.collapsed?null:(0,f.el)("div",{style:m(m({},g),{height:"calc(100% - ".concat(this.config.headerHeight||37,"px)")}),class:this._getCss(!0)+" dhx_layout-cell-content"+(this.config.type?A:"")},this.config.html?[(0,f.el)("div",{".innerHTML":this.config.html,class:"dhx_layout-cell dhx_layout-cell-inner_html"})]:o)]:!this.config.html||this.config.rows&&this.config.cols&&this.config.views?o:[this.config.collapsed?null:(0,f.el)(".dhx_layout-cell-content",{style:g},[(0,f.el)(".dhx_layout-cell-inner_html",{".innerHTML":this.config.html})])],$=(0,f.el)("div",m(m(((e={_key:this._uid,_ref:this._uid})["aria-label"]=this.config.id?"tab-content-"+this.config.id:null,e["data-cell-id"]=(t=this.config.id)!==null&&t!==void 0?t:null,e),O),{class:this._getCss(!1)+(this.config.css?" "+this.config.css:"")+(this.config.collapsed?" dhx_layout-cell--collapsed":"")+(this.config.resizable?" dhx_layout-cell--resizable":"")+(this.config.type&&!this.config.full?A:""),style:c?h:x}),S||C?[].concat(S,C):null);return I?[].concat($,I):$}},i.prototype._getProgressBar=function(){return(0,f.el)("span",{class:"dhx_progress-bar"},[(0,f.sv)("svg",{viewBox:"25 25 50 50",class:"dhx_spinner"},[(0,f.sv)("circle",{cx:"50",cy:"50",r:"20",class:"path"})])])},i.prototype._getCss=function(n){return"dhx_layout-cell"},i.prototype._initHandlers=function(){var n=this;window.addEventListener("resize",this._afterWindowResized),this._handlers={enterCollapse:function(g){g.keyCode===13&&n._handlers.toggle()},collapse:function(){n.config.collapsable&&n.collapse()},expand:function(){n.config.collapsable&&n.expand()},toggle:function(){n.config.collapsable&&n.toggle()}};var e={left:null,top:null,isActive:!1,range:null,xLayout:null,nextCell:null,size:null,resizerLength:null,margin:null,collapsedSize:null},t=function(g,x){if(x===void 0&&(x={x:0,y:0}),e.isActive){var C=e.xLayout,k=g.targetTouches?g.targetTouches[0].clientX:g.clientX+x.x,I=g.targetTouches?g.targetTouches[0].clientY:g.clientY+x.y,O=C?k-e.range.min+window.pageXOffset:I-e.range.min+window.pageYOffset,D=C?"width":"height";O<0?O=e.resizerLength/2:O>e.size&&(O=e.size-e.resizerLength);var A=function($){var w;return parseInt((w=n.config[$])===null||w===void 0?void 0:w.toString())},H=A(C?"maxWidth":"maxHeight"),S=A(C?"minWidth":"minHeight");(!H||O<H)&&(!S||O>S)&&(n.config[D]=O-e.resizerLength/2+"px",e.nextCell.config[D]=e.size-O-e.resizerLength/2+"px",e.nextCell._getAnyFlexCell()&&(e.nextCell._getAnyFlexCell().config[D]=void 0),n.paint(),n.events.fire(p.LayoutEvents.resize,[n.id]))}},o={},c=function(g){if(e.isActive=!1,document.body.classList.remove("dhx_no-select--resize"),g.targetTouches)for(var x in document.removeEventListener("touchend",c),document.removeEventListener("touchmove",t),o)o[x].node.contentWindow.document.removeEventListener("touchend",c),o[x].node.contentWindow.document.removeEventListener("touchmove",o[x].listener);else for(var x in document.removeEventListener("mouseup",c),document.removeEventListener("mousemove",t),o)o[x].node.contentWindow.document.removeEventListener("mouseup",c),o[x].node.contentWindow.document.removeEventListener("mousemove",o[x].listener);n.events.fire(p.LayoutEvents.afterResizeEnd,[n.id])},h=function(g){if(g.targetTouches&&g.preventDefault(),g.which!==3&&(e.isActive&&c(g),n.events.fire(p.LayoutEvents.beforeResizeStart,[n.id]))){document.body.classList.add("dhx_no-select--resize");var x=n.getCellView(),C=n._getNextCell(),k=C.getCellView(),I=n._getResizerView(),O=x.el.getBoundingClientRect(),D=I.el.getBoundingClientRect(),A=k.el.getBoundingClientRect();e.xLayout=n._isXDirection(),e.left=O.left+window.pageXOffset,e.top=O.top+window.pageYOffset,e.collapsedSize=n._getCollapsedSize(n,C),e.margin=(0,u.getMarginSize)(n.getParent().config),e.range=(0,u.getBlockRange)(O,A,e.xLayout),e.size=e.range.max-e.range.min-e.margin-e.collapsedSize,e.isActive=!0,e.nextCell=C,e.resizerLength=e.xLayout?D.width:D.height}};this._resizerHandlers={onmousedown:function(g){h(g),document.addEventListener("mouseup",c),document.addEventListener("mousemove",t);var x=document.querySelectorAll("iframe");if(x.length)for(var C in x.forEach(function(k,I){var O={x:k.getBoundingClientRect().x,y:k.getBoundingClientRect().y};o[I]={node:k,listener:function(D){return t(D,O)}}}),o)o[C].node.contentWindow.document.addEventListener("mouseup",c),o[C].node.contentWindow.document.addEventListener("mousemove",o[C].listener)},ontouchstart:function(g){h(g),document.addEventListener("touchend",c),document.addEventListener("touchmove",t);var x=document.querySelectorAll("iframe");if(x.length)for(var C in x.forEach(function(k,I){var O={x:k.getBoundingClientRect().x,y:k.getBoundingClientRect().y};o[I]={node:k,listener:function(D){return t(D,O)}}}),o)o[C].node.contentWindow.document.addEventListener("touchend",c),o[C].node.contentWindow.document.addEventListener("touchmove",o[C].listener)},ondragstart:function(g){return g.preventDefault()}}},i.prototype._getCollapsedSize=function(n,e){var t=0,o=this._parent,c=o._cells.indexOf(n),h=o._cells.indexOf(e);if(h-c==1)return t;for(var g=c+1;g<h;g++)o._cells[g].config.collapsed&&(this._isXDirection()?t+=45:t+=Number(o._cells[g].config.headerHeight)||37);return t},i.prototype._getCollapseIcon=function(){return this._isXDirection()&&this.config.collapsed?"dxi dxi-chevron-right":this._isXDirection()&&!this.config.collapsed?"dxi dxi-chevron-left":!this._isXDirection()&&this.config.collapsed?"dxi dxi-chevron-up":this._isXDirection()||this.config.collapsed?void 0:"dxi dxi-chevron-down"},i.prototype._isLastCell=function(){var n=this._parent;return n&&n._cells.indexOf(this)===n._cells.length-1},i.prototype._getNextCell=function(){var n=this._parent,e=n._cells.indexOf(this),t=!this._isLastCell()&&n._cells[e+1];return!!t&&(t.config.hidden||t.config.collapsed?t._getNextCell():t)},i.prototype._getAnyFlexCell=function(n){var e,t=this;n===void 0&&(n=!1);var o=this._parent,c=this._isXDirection()?"$autoWidth":"$autoHeight",h=(e=o==null?void 0:o._cells)===null||e===void 0?void 0:e.filter(function(g){return g.config[c]===!0&&(!!n||g.id!==t.id)});return!!(h!=null&&h.length)&&h[h.length-1]},i.prototype._getResizerView=function(){return this._parent.getRefs("resizer_"+this._uid)},i.prototype._isXDirection=function(){return this._parent&&this._parent._xLayout},i.prototype._checkProgress=function(){return this instanceof l.Layout?this.isVisibleProgress():(this._calculateProgressState(),(this._progress||this._checkAutoProgress())&&!this.config.collapsed&&!this.config.hidden&&!this._parent.isVisibleProgress())},i.prototype._checkAutoProgress=function(){if(this._stopProgressDefault)return!1;var n=this.config,e=n.html;return n.progressDefault&&!this._ui&&!e},i.prototype._calculateProgressState=function(){if(!this._stopProgressDefault){var n=this.config,e=n.html,t=n.progressDefault;!t||this._ui||e||(this._progress=!0),t&&(this._ui||e)&&(this._progress=!1)}},i.prototype._calculateStyle=function(){var n=this.config;if(n){var e={},t=!1,o=!1;isNaN(Number(n.width))||(n.width=n.width+"px"),isNaN(Number(n.height))||(n.height=n.height+"px"),isNaN(Number(n.minWidth))||(n.minWidth=n.minWidth+"px"),isNaN(Number(n.minHeight))||(n.minHeight=n.minHeight+"px"),isNaN(Number(n.maxWidth))||(n.maxWidth=n.maxWidth+"px"),isNaN(Number(n.maxHeight))||(n.maxHeight=n.maxHeight+"px"),n.width==="content"&&(t=!0),n.height==="content"&&(o=!0);var c=n,h=c.width,g=c.height,x=c.cols,C=c.rows,k=c.minWidth,I=c.minHeight,O=c.maxWidth,D=c.maxHeight,A=c.gravity,H=c.collapsed,S=c.$fixed,$=Math.sign(A)===-1?0:A;typeof A=="boolean"&&($=A?1:0);var w=typeof A=="boolean"?!A:Math.sign(A)===-1;this._isXDirection()?(S||h||A===void 0&&(k||O))&&(w=!0):(S||g||A===void 0&&(I||D))&&(w=!0);var T=this._checkFullSizeCell(),F=w&&!T?0:T?1:$||1,z=this._isXDirection()?"x":"y";if(k===void 0||H||(e.minWidth=k),I===void 0||H||(e.minHeight=I),O!==void 0&&(e.maxWidth=O),D!==void 0&&(e.maxHeight=D),this._parent===void 0&&!z!==void 0&&(z=!0),T||h===void 0||h==="content"){if(z===!0)e.width="100%";else if(z==="x")if(t)e.flex="0 0 auto";else{var B=this._isXDirection()?"1px":"auto";e.flex="".concat(F," ").concat(x||C?"0 ".concat(B):"1 auto")}}else e.width=h;return T||g===void 0||g==="content"?z===!0?e.height="100%":z==="y"&&(o?e.flex="0 0 auto":(B=this._isXDirection()?"auto":"1px",e.flex="".concat(F," ").concat(x||C?"0 ".concat(B):"1 auto"))):e.height=g,z===!0&&n.width===void 0&&n.height===void 0&&(e.flex="".concat(F," 1 auto")),H&&(this._isXDirection()?e.width="auto":e.height="auto",e.flex="0 0 auto"),e}},i.prototype._resizedWindow=function(){var n;if(this._isLastFlexCell===void 0?this._isLastFlexCell=((n=this._getAnyFlexCell(!0))===null||n===void 0?void 0:n.id)===this.id:this._isLastFlexCell||window.removeEventListener("resize",this._afterWindowResized),this._isLastFlexCell){var e=this._isXDirection()?"width":"height";this.config[e]=void 0,this.paint()}},i.prototype._resetCellsSize=function(){var n=this,e=this._parent._cells.filter(function(h){return h!==n&&!h.config.hidden&&!h.config.collapsed}),t=this._isXDirection(),o=t?"$autoWidth":"$autoHeight",c=t?"width":"height";e.forEach(function(h){h.config[o]&&(h.config[c]=void 0)})},i.prototype._checkFullSizeCell=function(){var n=this;if(!this._parent)return!1;var e=this._isXDirection()?"$autoWidth":"$autoHeight";if(!this.config[e])return!1;var t=this._parent._cells.filter(function(o){return o!==n&&!o.config.hidden});return!!t.length&&t.every(function(o){return o.config.collapsed})},i}(d.View);_.Cell=r},function(W,_,y){var b=this&&this.__createBinding||(Object.create?function(m,v,f,d){d===void 0&&(d=f);var p=Object.getOwnPropertyDescriptor(v,f);p&&!("get"in p?!v.__esModule:p.writable||p.configurable)||(p={enumerable:!0,get:function(){return v[f]}}),Object.defineProperty(m,d,p)}:function(m,v,f,d){d===void 0&&(d=f),m[d]=v[f]}),E=this&&this.__exportStar||function(m,v){for(var f in m)f==="default"||Object.prototype.hasOwnProperty.call(v,f)||b(v,m,f)};Object.defineProperty(_,"__esModule",{value:!0}),E(y(149),_),E(y(77),_)},function(W,_,y){var b;Object.defineProperty(_,"__esModule",{value:!0}),_.PopupEvents=void 0,function(E){E.beforeHide="beforeHide",E.beforeShow="beforeShow",E.afterHide="afterHide",E.afterShow="afterShow",E.click="click"}(b||(_.PopupEvents=b={}))},function(W,_,y){var b;Object.defineProperty(_,"__esModule",{value:!0}),_.SliderEvents=void 0,function(E){E.beforeChange="beforeChange",E.change="change",E.focus="focus",E.blur="blur",E.keydown="keydown",E.mousedown="mousedown",E.mouseup="mouseup"}(b||(_.SliderEvents=b={}))},function(W,_,y){var b;Object.defineProperty(_,"__esModule",{value:!0}),_.TimepickerEvents=void 0,function(E){E.beforeChange="beforeChange",E.change="change",E.beforeApply="beforeApply",E.afterApply="afterApply",E.beforeClose="beforeClose",E.afterClose="afterClose",E.apply="apply",E.close="close",E.save="save"}(b||(_.TimepickerEvents=b={}))},function(W,_,y){var b;Object.defineProperty(_,"__esModule",{value:!0}),_.CalendarEvents=void 0,function(E){E.change="change",E.beforeChange="beforechange",E.modeChange="modeChange",E.monthSelected="monthSelected",E.yearSelected="yearSelected",E.cancelClick="cancelClick",E.dateMouseOver="dateMouseOver",E.dateHover="dateHover"}(b||(_.CalendarEvents=b={}))},function(W,_,y){var b,E=this&&this.__extends||(b=function(x,C){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,I){k.__proto__=I}||function(k,I){for(var O in I)Object.prototype.hasOwnProperty.call(I,O)&&(k[O]=I[O])},b(x,C)},function(x,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function k(){this.constructor=x}b(x,C),x.prototype=C===null?Object.create(C):(k.prototype=C.prototype,new k)}),m=this&&this.__spreadArray||function(x,C,k){if(k||arguments.length===2)for(var I,O=0,D=C.length;O<D;O++)!I&&O in C||(I||(I=Array.prototype.slice.call(C,0,O)),I[O]=C[O]);return x.concat(I||Array.prototype.slice.call(C))};Object.defineProperty(_,"__esModule",{value:!0}),_.Combobox=_.$template=void 0;var v=y(1),f=y(0),d=y(3),p=y(2),u=y(156),s=y(5),l=y(8),r=y(16),a=y(81),i=y(11),n=y(160),e=y(84),t=y(35),o=y(85),c=y(86);function h(x,C){return typeof C=="function"?C(x):x+" "+e.default.selectedItems}_.$template=function(x){return x.icon?(0,f.el)("div.dhx_combobox-options-wrapper",[(0,f.el)("span",{class:"".concat(x.icon," dhx_combobox-options__icon")}),(0,f.el)("span",{class:"dhx_combobox-options__value"},x.value)]):x.src?(0,f.el)("div.dhx_combobox-options-wrapper",[(0,f.el)("img",{class:"dhx_combobox-options__image",alt:x.value,src:x.src}),(0,f.el)("span",{class:"dhx_combobox-options__value"},x.value)]):(0,f.el)("span",{class:"dhx_combobox-options__value"},x.value)};var g=function(x){function C(k,I){var O=x.call(this,k,(0,v.extend)({listHeight:224,disabled:!1,readOnly:!1,newOptions:!1,htmlEnable:!0},I))||this;O.config.itemsCount=O.config.itemsCount||O.config.showItemsCount,O.config.helpMessage=O.config.helpMessage||O.config.help,O.config.cellHeight&&O.config.itemHeight===36&&(O.config.itemHeight=O.config.cellHeight),O.config.labelInline&&(O.config.labelPosition="left"),Array.isArray(O.config.data)?(O.events=new d.EventSystem(O),O.data=new l.DataCollection({}),O.data.parse(O.config.data)):O.config.data?(O.data=O.config.data,O.events=new d.EventSystem(O),O.events.context=O):(O.events=new d.EventSystem(O),O.data=new l.DataCollection({})),O.popup=new i.Popup,O.popup.events.on(i.PopupEvents.afterShow,function(){O.paint()}),O.popup.events.on(i.PopupEvents.afterHide,function(){O.config.multiselection&&(O._state.value=""),O.paint()}),O.popup.events.on(i.PopupEvents.beforeHide,function(A){A&&O._hideOptions()}),(O.config.readonly||O.config.readOnly)&&(O.config.readOnly=O.config.readOnly||O.config.readonly,O._keyListener=new n.KeyListener),O._state={value:"",ignoreNext:!1,canDelete:!1,unselectActive:!1,currentState:c.ComboState.default,creatingState:!1},O._initHandlers(),O._createLayout(),O.config.value&&O._setValue(O.config.value,!0),O._initEvents();var D=(0,f.create)({render:function(){return O._draw()},hooks:{didRedraw:function(){O.popup.isVisible()&&(O.focus(),O._configurePopup())}}});return O.mount(k,D),O}return E(C,x),C.prototype.focus=function(){if(this.config.disabled)return!1;this.getRootView().refs.input.el.focus()},C.prototype.blur=function(){if(this.config.disabled)return!1;this.getRootView().refs.input.el.blur(),this.popup.hide()},C.prototype.enable=function(){this.config.disabled=!1,this.paint()},C.prototype.disable=function(){this.config.disabled=!0,this.paint()},C.prototype.isDisabled=function(){return this.config.disabled},C.prototype.clear=function(){this.list.selection.remove(),this._state.value="",this._filter(),this.paint()},C.prototype.getValue=function(k){var I=this.list.selection.getId();return k?(0,v.wrapBox)(I):Array.isArray(I)?I.join(","):I},C.prototype.setValue=function(k,I){return this._setValue(k,I)},C.prototype.addOption=function(k,I){if(I===void 0&&(I=!0),k){var O;typeof k=="string"?O=this.data.add({value:k}):typeof k=="object"&&(O=this.data.add(k));var D=this.config.multiselection&&I?m(m([],this.list.selection.getId(),!0),[O],!1):O;this.setValue(D)}},C.prototype.destructor=function(){this.popup&&this.popup.destructor(),this.events&&this.events.clear(),this.list&&this.list.destructor(),this._helper&&this._helper.destructor(),this._layout&&this._layout.destructor(),this._keyListener&&this._keyListener.destructor(),this.config=this.events=this.list=this.popup=null,this._helper=this._keyListener=this._handlers=this._state=this._uid=this._isPopupConfiqureted=null,this.unmount()},C.prototype.setState=function(k){switch(k){case"success":this._state.currentState=c.ComboState.success;break;case"error":this._state.currentState=c.ComboState.error;break;default:this._state.currentState=c.ComboState.default}this.paint()},C.prototype._setValue=function(k,I){var O=this;if(I===void 0&&(I=!1),!this._exsistId(k))return!1;if(this._filter(),this.list.selection.remove(null,I),this.config.multiselection)typeof k=="string"&&(k=k.split(",")),typeof k=="number"&&(k=[k]),k.forEach(function(H){O.list.selection.add(H,!1,!1,I)});else{var D=(0,v.unwrapBox)(k);this.list.selection.add(D,!1,!1,I);var A=this.data.getItem(D);A&&(this._state.value=this._getItemText(A))}this.paint()},C.prototype._createLayout=function(){var k=this.list=new a.List(null,{$template:_.$template,template:this.config.template,htmlEnable:this.config.htmlEnable,virtual:this.config.virtual,keyNavigation:!0,multiselection:this.config.multiselection,itemHeight:this.config.itemHeight,height:this.config.listHeight,data:this.data}),I=this._layout=new r.Layout(this.popup.getContainer(),{css:"dhx_combobox-options dhx_combobox__options",rows:[{id:"select-unselect-all",hidden:!this.config.multiselection||!this.config.selectAllButton},{id:"list",height:"content"},{id:"not-found",hidden:!0}],on:{click:{".dhx_combobox__action-select-all":this._handlers.selectAll,".dhx_combobox-options__action-create-option":this._handlers.addOption}}});I.getCell("list").attach(k),this.config.multiselection&&this.config.selectAllButton&&I.getCell("select-unselect-all").attach(o.selectAllView)},C.prototype._initHandlers=function(){var k=this;this.config.helpMessage&&(this._helper=new i.Popup({css:"dhx_tooltip dhx_tooltip--forced dhx_tooltip--light"}),this._helper.attachHTML(this.config.helpMessage)),this._handlers={addOption:function(){return k.addOption(k._state.value)},showHelper:function(I){I.preventDefault(),I.stopPropagation(),k._helper.show(I.target,{mode:k.config.labelPosition==="left"?"bottom":"right",theme:I.target})},selectAll:function(){k._state.unselectActive?(k.list.selection.remove(),k.config.selectAllButton&&(k._layout.getCell("select-unselect-all").attach(o.selectAllView),k._state.unselectActive=!1)):(k.data.filter(),k.list.selection.add(),k.config.selectAllButton&&(k._layout.getCell("select-unselect-all").attach(o.unselectAllView),k._state.unselectActive=!0)),k._changePopupPosition(),k.paint()},onkeydown:function(I){if(I.key==="Tab"&&k.popup.isVisible())k._hideOptions();else if(k.popup.isVisible()||I.which!==u.KEY_CODES.DOWN_ARROW||k._showOptions(),k.popup.isVisible()&&(I.which===u.KEY_CODES.RIGHT_ARROW&&k.config.readOnly&&!k.config.multiselection&&(k.list.moveFocus(a.MOVE_DOWN),I.preventDefault()),I.which===u.KEY_CODES.LEFT_ARROW&&k.config.readOnly&&!k.config.multiselection&&(k.list.moveFocus(a.MOVE_UP),I.preventDefault()),I.which===u.KEY_CODES.DOWN_ARROW&&(k.list.moveFocus(a.MOVE_DOWN),I.preventDefault()),I.which===u.KEY_CODES.UP_ARROW&&(k.list.moveFocus(a.MOVE_UP),I.preventDefault()),I.which===u.KEY_CODES.ESC&&k._hideOptions(),I.which===u.KEY_CODES.ENTER)){if(k.data.getLength()){var O=k.list.getFocus(),D=k.config.multiselection?m(m([],k.list.selection.getId(),!0),[O],!1):O;k.setValue(D)}else k.config.newOptions&&k.addOption(k._state.value,!0);k.config.multiselection?k._updatePopup():k.data.getLength()&&k._hideOptions()}k.events.fire(c.ComboboxEvents.keydown,[I,k.list.getFocus()])},onkeyup:function(I){if(k.config.multiselection&&!k.config.itemsCount){if(k._state.ignoreNext)k._state.ignoreNext=!1;else if(I.which===u.KEY_CODES.BACKSPACE&&!k._state.value&&k.config.multiselection&&k.list.selection.getId().length){var O=k.list.selection.getId(),D=O[O.length-1];k.list.selection.remove(D),k._changePopupPosition(),k.paint()}}},oninput:function(I){if(!k.config.disabled){var O=I.target.value;k.events.fire(c.ComboboxEvents.input,[O]),k._state.value=O,k._filter(!0),O.length?k._state.canDelete=!1:(k._state.ignoreNext=!0,k._state.canDelete=!0),k.config.multiselection||(k.list.selection.remove(),k.paint()),k.popup.isVisible()||k._showOptions(),k._updatePopup()}},oninputclick:function(I){var O;if(!k.config.disabled){if(k.focus(),I.target.classList.contains("dhx_combobox__action-remove")){var D=(O=k.data.getItem((0,p.locate)(I)))===null||O===void 0?void 0:O.id;return(0,v.isId)(D)?(k.list.selection.remove(D),k._changePopupPosition(),void k.paint()):void 0}if(I.target.classList.contains("dhx_combobox__action-clear-all"))return k.list.selection.getId().forEach(function(A){return k.list.selection.remove(A)}),k.config.selectAllButton&&k._state.unselectActive&&(k._layout.getCell("select-unselect-all").attach(o.selectAllView),k._state.unselectActive=!1),void k.paint();I.preventDefault(),k.popup.isVisible()?k.focus():k._showOptions()}},toggleIcon:function(){k.focus(),k.popup.isVisible()?k._hideOptions():k._showOptions()},onfocus:function(){var I;return(I=k.events)===null||I===void 0?void 0:I.fire(c.ComboboxEvents.focus,[])},onblur:function(){var I;return(I=k.events)===null||I===void 0?void 0:I.fire(c.ComboboxEvents.blur,[])}}},C.prototype._initEvents=function(){var k=this;this.data.events.on(l.DataEvents.load,function(){k.config.value&&k._setValue(k.config.value,!0),k._filter()}),this.data.events.on(l.DataEvents.afterAdd,function(){k.config.multiselection?k._changePopupPosition():k._hideOptions()}),this.list.events.on(a.ListEvents.click,function(){k.config.multiselection||k._hideOptions(),k._changePopupPosition()}),this.list.selection.events.on(t.SelectionEvents.beforeSelect,function(I){var O=k.config.multiselection?m(m([],k.getValue(k.config.multiselection),!0),[I],!1):I;return k.events.fire(c.ComboboxEvents.beforeChange,[O])}),this.list.selection.events.on(t.SelectionEvents.afterSelect,function(){var I=k.getValue(k.config.multiselection);k.events.fire(c.ComboboxEvents.change,[I]),k._updateSelectedItem(I)}),this.list.selection.events.on(t.SelectionEvents.beforeUnSelect,function(I){var O=k.config.multiselection?k.getValue(k.config.multiselection).filter(function(D){return D!=I}):I;return k.events.fire(c.ComboboxEvents.beforeChange,[O])}),this.list.selection.events.on(t.SelectionEvents.afterUnSelect,function(){var I=k.config.multiselection,O=k.getValue(I);k.events.fire(c.ComboboxEvents.change,[O]),I&&k._updateSelectedItem(O)}),this.popup.events.on(i.PopupEvents.beforeShow,function(){if(!k.popup.isVisible()&&!k._isPopupConfiqureted)return k._configurePopup(),!1}),this.config.readOnly&&this.popup.events.on(i.PopupEvents.afterShow,function(){if(k._state.value){var I=k.list.selection.getId();k.list.setFocus(I)}else k.list.setFocus(k.data.getId(0));k._keyListener.startNewListen(function(O){return k._findBest(O)})})},C.prototype._showOptions=function(){this.events.fire(c.ComboboxEvents.beforeOpen)&&(this._state.value.length&&(this._state.canDelete=!0),this._filter(),this._configurePopup()&&(this.events.fire(c.ComboboxEvents.open),this.events.fire(c.ComboboxEvents.afterOpen)))},C.prototype._configurePopup=function(){this._isPopupConfiqureted=!0;var k=this.getRootView();return!!(k&&k.refs&&k.refs.holder)&&(this.popup.isVisible()||this._updatePopup(),!0)},C.prototype._hideOptions=function(){var k=this;this.events.fire(c.ComboboxEvents.beforeClose)&&(this.config.readOnly&&this._keyListener.endListen(),this.list.setFocus(this.data.getId(0)),this.config.multiselection||this.config.readOnly||this.list.selection.contains()||(this._state.value=""),(0,f.awaitRedraw)().then(function(){return k.popup.isVisible()&&k.popup.hide()}),this.events.fire(c.ComboboxEvents.afterClose),this.events.fire(c.ComboboxEvents.close),this.data.resetFilter(),this._filter(),this.paint())},C.prototype._filter=function(k){var I=this;if(k===void 0&&(k=!1),!this.config.readOnly){if(this.config.filter?this.data.filter(function(S){return I.config.filter(S,I._state.value)}):k&&this.data.filter(function(S){return(0,v.isExistValue)(I._getItemText(S)||"",I._state.value)}),this.config.multiselection)this.list.setFocus(this.data.getId(0));else{var O=this.data.getIndex(this.list.selection.getId());this.list.setFocus(this.data.getId(O>-1?O:0))}var D=this._layout.getCell("list"),A=this._layout.getCell("not-found");if(this.data.getLength()===0){this.config.multiselection&&this.config.selectAllButton&&this._layout.getCell("select-unselect-all").hide(),D.hide(),this._state.creatingState=!0;var H=this.config.newOptions?this._state.value:"";A.height=(0,o.emptyListHeight)(H,this.getRootView().refs.holder.el.offsetWidth),A.attach(o.emptyListView,H),A.show()}else this.config.multiselection&&this.config.selectAllButton&&this._layout.getCell("select-unselect-all").show(),!(this._state.value&&this.data.find(function(S){return S.value===I._state.value}))&&this._state.value?(this._state.creatingState=this.config.newOptions,D.show(),this.config.newOptions?(H=this._state.value,A.height=(0,o.emptyListHeight)(H,this.getRootView().refs.holder.el.offsetWidth),A.attach(o.emptyListView,H),A.show()):A.hide()):(this._state.creatingState=!1,A.isVisible()&&(D.show(),A.hide()))}},C.prototype._findBest=function(k){var I=this,O=this.data.find(function(D){return(0,v.isExistValue)(I._getItemText(D)||"",k)});O&&this.list.selection.getId()!==O.id&&(this.list.setFocus(O.id),this.paint())},C.prototype._exsistId=function(k){var I=this;return k instanceof Array?k.every(function(O){return I.data.exists(O)}):this.data.exists(k)},C.prototype._draw=function(){if(!this.config)return(0,f.el)("div");var k=this.config,I=k.multiselection,O=k.labelPosition,D=k.hiddenLabel,A=k.required,H=k.disabled,S=k.css,$=k.helpMessage,w=k.readOnly,T=k.placeholder,F=I?null:this.data.getItem(this.list.selection.getId()),z=!this.list.selection.getId()||typeof this.list.selection.getId()=="object"&&this.list.selection.getId().length===0,B=(0,p.getLabelStyle)(this.config),L=!this.config.multiselection&&(this.config.readOnly||!this.popup.isVisible()),M=L&&this.config.htmlEnable&&this.config.template,P=L&&((F==null?void 0:F.icon)||(F==null?void 0:F.src))&&!this.config.template;return(0,f.el)("div",{"data-dhx-widget-id":this._uid,onkeydown:this._handlers.onkeydown,onkeyup:this._handlers.onkeyup,class:"dhx_widget dhx_combobox"+(O==="left"?" dhx_combobox--label-inline":"")+(D?" dhx_combobox--sr_only":"")+(A?" dhx_combobox--required":"")+(H?" dhx_combobox--disabled":"")+(S?" ".concat(S):"")},[B?(0,f.el)("label.dhx_label.dhx_combobox__label",{style:B.style,class:$?"dhx_label--with-help":"",onclick:this._handlers.oninputclick},$?[(B.label||A)&&(0,f.el)("span.dhx_label__holder",B.label),(0,f.el)("span.dhx_label-help.dxi.dxi-help-circle-outline",{tabindex:"0",role:"button",onclick:this._handlers.showHelper,id:"dhx_label__help_".concat(this._uid)})]:B.label):null,(0,f.el)("div.dhx_combobox-input-box"+(H?".dhx_combobox-input-box--disabled":"")+(w?".dhx_combobox-input-box--readonly":"")+(this._state.currentState===c.ComboState.error?".dhx_combobox-input-box--state_error":"")+(this._state.currentState===c.ComboState.success?".dhx_combobox-input-box--state_success":""),{_ref:"holder"},[(0,f.el)("div.dhx_combobox-input__icon",{onclick:this._handlers.toggleIcon},[(0,f.el)("span"+(this.popup.isVisible()?".dxi.dxi-menu-up":".dxi.dxi-menu-down"))]),(0,f.el)("div.dhx_combobox-input-list-wrapper",{onclick:this._handlers.oninputclick},[(0,f.el)("ul.dhx_combobox-input-list",m(m([],this._drawSelectedItems(),!0),[(0,f.el)("li.dhx_combobox-input-list__item.dhx_combobox-input-list__item--input",[(M||P)&&F?(0,f.el)("div.dhx_combobox-input__template",{".innerHTML":M?this.config.template(F):null},P?[(0,_.$template)(F)]:null):null,(0,f.el)("input.dhx_combobox-input",{oninput:this._handlers.oninput,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,_ref:"input",_key:this._uid,type:"text",placeHolder:z&&T?T:void 0,value:w&&F?this._getItemText(F):this._state.value,readOnly:w||H,required:A,"aria-label":w?"Select value":"Type or select value","aria-describedby":$?"dhx_label__help_".concat(this._uid):null,"aria-expanded":!0})])],!1))])])])},C.prototype._drawSelectedItems=function(){var k=this;if(!this.config.multiselection)return[];if(this.config.itemsCount){var I=this.list.selection.getId().length;return I?[(0,f.el)("li.dhx_combobox-input-list__item.dhx_combobox-tag",[(0,f.el)("span.dhx_combobox-tag__value",h(I,this.config.itemsCount)),(0,f.el)("button.dhx_button.dhx_combobox-tag__action.dhx_combobox__action-clear-all",{"aria-label":"clear all"},[(0,f.el)("span.dhx_button__icon.dxi.dxi-close-circle")])])]:[]}return this.list.selection.getId().map(function(O){var D=k.data.getItem(O);if(!D)return null;var A=k._drawImageOrIcon(D);return(0,f.el)("li.dhx_combobox-input-list__item.dhx_combobox-tag",{"data-dhx-id":O},m(m([],A||!k.config.template?[A,(0,f.el)("span.dhx_combobox-tag__value",k._getItemText(D))]:[(0,f.el)("span.dhx_combobox-tag__template",{".innerHTML":k.config.template(D)})],!0),[(0,f.el)("button.dhx_button.dhx_button--icon.dhx_combobox-tag__action.dhx_combobox__action-remove",{type:"button","aria-label":"remove"},[(0,f.el)("span.dhx_button__icon.dxi.dxi-close-circle")])],!1))})},C.prototype._drawImageOrIcon=function(k){return k.src?(0,f.el)("img.dhx_combobox-tag__image",{src:k.src,alt:""}):k.icon?(0,f.el)("span.dhx_combobox-tag__icon",{class:k.icon}):null},C.prototype._getItemText=function(k){return k?k.value:null},C.prototype._updateSelectedItem=function(k){var I;this.config.multiselection?(this.config.selectAllButton&&!this._state.unselectActive&&this.data.getLength()===k.length?(this._layout.getCell("select-unselect-all").attach(o.unselectAllView),this._state.unselectActive=!0):this.config.selectAllButton&&this._state.unselectActive&&(this._layout.getCell("select-unselect-all").attach(o.selectAllView),this._state.unselectActive=!1),this._state.value&&(this._state.value="",this._state.canDelete=k.length===0,this.data.resetFilter(),this._filter())):this._state.value=(I=this._getItemText(this.data.getItem(k)))!==null&&I!==void 0?I:"",this.paint()},C.prototype._changePopupPosition=function(){var k=this;this.config.multiselection&&(0,f.awaitRedraw)().then(function(){k._updatePopup()})},C.prototype._updatePopup=function(){var k=this.getRootView().refs.holder.el;this.popup.getContainer().style.width=k.offsetWidth+"px",this.popup.show(k,{mode:"bottom",theme:this.getRootNode()})},C}(s.View);_.Combobox=g},function(W,_,y){var b=this&&this.__createBinding||(Object.create?function(m,v,f,d){d===void 0&&(d=f);var p=Object.getOwnPropertyDescriptor(v,f);p&&!("get"in p?!v.__esModule:p.writable||p.configurable)||(p={enumerable:!0,get:function(){return v[f]}}),Object.defineProperty(m,d,p)}:function(m,v,f,d){d===void 0&&(d=f),m[d]=v[f]}),E=this&&this.__exportStar||function(m,v){for(var f in m)f==="default"||Object.prototype.hasOwnProperty.call(v,f)||b(v,m,f)};Object.defineProperty(_,"__esModule",{value:!0}),E(y(82),_),E(y(159),_),E(y(83),_),E(y(52),_)},function(W,_,y){var b,E=this&&this.__extends||(b=function(t,o){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(c[g]=h[g])},b(t,o)},function(t,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=t}b(t,o),t.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}),m=this&&this.__assign||function(){return m=Object.assign||function(t){for(var o,c=1,h=arguments.length;c<h;c++)for(var g in o=arguments[c])Object.prototype.hasOwnProperty.call(o,g)&&(t[g]=o[g]);return t},m.apply(this,arguments)},v=this&&this.__spreadArray||function(t,o,c){if(c||arguments.length===2)for(var h,g=0,x=o.length;g<x;g++)!h&&g in o||(h||(h=Array.prototype.slice.call(o,0,g)),h[g]=o[g]);return t.concat(h||Array.prototype.slice.call(o))};Object.defineProperty(_,"__esModule",{value:!0}),_.List=_.MOVE_DOWN=_.MOVE_UP=void 0;var f=y(1),d=y(8),p=y(0),u=y(14),s=y(35),l=y(5),r=y(83),a=y(2),i=y(52),n=y(157);_.MOVE_UP=1,_.MOVE_DOWN=2;var e=function(t){function o(c,h){h===void 0&&(h={});var g=this,x=h.itemHeight||(h.virtual?37:null);x&&typeof x=="number"&&(x=x.toString()+"px"),(g=t.call(this,c,(0,f.extend)({itemHeight:x,keyNavigation:!0,editable:!1,selection:!0,htmlEnable:!0},h))||this)._destructed=!1,g._touch={duration:350,dblDuration:300,timer:null,start:!1,timeStamp:null};var C=g.config.data;C instanceof d.DataCollection?(g.data=C,g.events=C.events):(g.data=new d.DataCollection({}),g.events=g.data.events,C&&g.data.parse(C)),g.selection=new r.Selection({disabled:!g.config.selection,multiselection:g.config.multiselection},g.data,g.events),g.config.keyNavigation&&(g.keyManager=new u.KeyManager(function(T,F){return F==g._uid&&(!g._edited||g._edited&&T.key!=="escape")}),g._initHotKey()),g.events.on(d.DataEvents.change,function(T,F,z){F==="setPage"&&g.scrollTo(g.data.getId(z[0])),g.paint()}),g.events.on(d.DataEvents.filter,function(){g.paint()}),g.events.on(s.SelectionEvents.afterUnSelect,function(){return g.paint()}),g.events.on(s.SelectionEvents.afterSelect,function(T){(0,f.isId)(T)&&g.config.selection&&g.setFocus(T),g.paint()}),g.events.on(i.ListEvents.afterEditEnd,g.editEnd.bind(g));var k=function(T){return function(F){g.data.setMeta(g.data.getItem(F.target),"drop",T),g.paint()}};g.events.on(d.DragEvents.canDrop,k(!0)),g.events.on(d.DragEvents.cancelDrop,k(!1));var I=function(T){return function(F){F.source.map(function(z){return g.data.setMeta(g.data.getItem(z),"drag",T)}),g.paint()}};g.events.on(d.DragEvents.dragStart,I(!0)),g.events.on(d.DragEvents.afterDrag,I(!1)),g._handlers={onmousedown:function(T){g._dragStart(T)},ontouchstart:function(T){g._touch.timer=setTimeout(function(){g._dragStart(T)},g._touch.duration),g._touch.timeStamp?(g._touch.dblDuration>=g._touch.timeStamp-+T.timeStamp.toFixed()&&(T.preventDefault(),g._dblClick(T)),g._touch.timeStamp=null):g._touch.timeStamp=+T.timeStamp.toFixed(),setTimeout(function(){g._touch.timeStamp=null},g._touch.dblDuration)},ontouchmove:function(T){g._touch.start&&T.preventDefault(),g._clearTouchTimer()},ontouchend:function(){g._touch.start=!1,g._clearTouchTimer()},ondragstart:function(){return!(g.config.dragMode&&!g._edited)&&null},oncontextmenu:function(T){var F,z=(F=g.data.getItem((0,a.locate)(T)))===null||F===void 0?void 0:F.id;(0,f.isId)(z)&&g.events.fire(i.ListEvents.itemRightClick,[z,T])},onclick:function(T){var F,z=(F=g.data.getItem((0,a.locate)(T)))===null||F===void 0?void 0:F.id;(0,f.isId)(z)&&(g.selection.add(z,T.ctrlKey||T.metaKey,T.shiftKey),g.config.selection&&(g._focus=z),g.events.fire(i.ListEvents.click,[z,T]),g.paint())},ondblclick:function(T){g._dblClick(T)},onscroll:function(T){g.config.virtual&&(g._topOffset=T.target.scrollTop,g._visibleHeight=T.target.offsetHeight,g.paint())},onmouseover:function(T){var F,z=(F=g.data.getItem((0,a.locate)(T)))===null||F===void 0?void 0:F.id;(0,f.isId)(z)&&z!==(0,a.locate)(T.relatedTarget)&&g.events.fire(i.ListEvents.itemMouseOver,[z,T])}};var O=g.config.eventHandlers;if(O)for(var D=0,A=Object.entries(O);D<A.length;D++){var H=A[D],S=H[0],$=H[1];g._handlers[S]=(0,a.eventHandler)(function(T){return(0,a.locate)(T)},$,g._handlers[S])}g.config.dragMode&&d.dragManager.setItem(g._uid,g),g._topOffset=g._visibleHeight=0;var w=(0,p.create)({render:function(){return g._destructed?(0,p.el)("div"):g._renderList()},hooks:{didMount:function(T){g.config.virtual&&(g._visibleHeight=T.node.el.offsetHeight)},didRedraw:function(T){return g._didRedraw(T)}}});return g.mount(c,w),g}return E(o,t),o.prototype._didRedraw=function(c){},o.prototype._dblClick=function(c){var h,g=(0,a.locate)(c);g&&(g=(h=this.data.getItem(g))===null||h===void 0?void 0:h.id,this.config.editable&&this.editItem(g),this.events.fire(i.ListEvents.doubleClick,[g,c]))},o.prototype._clearTouchTimer=function(){this._touch.timer&&(clearTimeout(this._touch.timer),this._touch.timer=null)},o.prototype._dragStart=function(c){var h=this;this._touch.start=!0;var g=[],x=(0,a.locateNode)(c,"data-dhx-id"),C=x&&x.getAttribute("data-dhx-id"),k=this.selection.getId();return this.config.multiselection&&k instanceof Array&&(k.map(function(I){I!==C&&h.getRootView().refs[I]&&g.push(h.getRootView().refs[I].el)}),k=v([],k,!0)),typeof k=="string"&&(k=[k]),this.config.dragMode&&!this._edited?d.dragManager.onMouseDown(c,k||[C],g):null},o.prototype.disableSelection=function(){this.selection.disable()},o.prototype.enableSelection=function(){this.selection.enable()},o.prototype.editItem=function(c){this._edited=c,this.data.getItem(this._edited)&&this.events.fire(i.ListEvents.beforeEditStart,[c])?(this.paint(),this.events.fire(i.ListEvents.afterEditStart,[c])):this._edited=null},o.prototype.editEnd=function(c,h){if(this._edited){if(c!==null){var g=this.data.getItem(h);this.data.update(h,m(m({},g),{value:c})),this._changed=!0}this._edited=null,this.paint()}},o.prototype.getFocusItem=function(){return this.data.getItem(this._focus)},o.prototype.setFocus=function(c){this._focus!=c&&this.data.exists(c)&&(this._focus=c,this.events.fire(i.ListEvents.focusChange,[this.data.getIndex(this._focus),this._focus]),this.scrollTo(c),this.paint())},o.prototype.getFocus=function(){return this._focus},o.prototype.destructor=function(){this._destructed=!0,this.events&&this.events.clear(),this.keyManager&&this.keyManager.destructor(),this.selection&&this.selection.destructor(),this.config=this.events=this.selection=this.keyManager=null,this._handlers=this._focus=this._edited=this._events=this._topOffset=this._visibleHeight=this._touch=null,this.unmount()},o.prototype.scrollTo=function(c){var h=this.getRootView();if(h&&h.node&&h.node.el&&c!==void 0){var g=this.getRootNode();this._scrollTo(c,g)}},o.prototype._scrollTo=function(c,h){if(h){var g=this.data.getIndex(c);if(g!==-1){var x=this.config.virtual,C=Math.floor(g/h.children.length)||0,k=h.children[g-h.children.length*C];if(x||k){var I=x?parseInt(this.config.itemHeight):k.clientHeight,O=x?g*I:k.offsetTop;O>=h.scrollTop+h.clientHeight-I?h.scrollTo(0,O-h.clientHeight+I):O<h.scrollTop&&h.scrollTo(0,O)}}}},o.prototype._renderItem=function(c,h){var g=function(A){A.class+=" dhx_list-item--empty"},x=this.config.itemHeight;if(c.$empty)return(0,p.el)("li",{class:"dhx_list-item",style:{height:x}});var C="";this.config.template&&(C=this.config.template(c)),c.html&&(C=c.html);var k=c.id==this._focus&&this.config.keyNavigation;if(c.id==this._edited)return(0,n.getEditor)(c,this).toHTML();var I=this.data.getMetaMap(c),O=m(m(m(m({},this._events),{class:"dhx_list-item"+(I&&I.selected?" dhx_list-item--selected":"")+(k?" dhx_list-item--focus":"")+(I&&I.drop&&!this._edited?" dhx_list-item--drophere":"")+(I&&I.drag&&!this._edited?" dhx_list-item--dragtarget":"")+(this.config.dragMode&&!this._edited?" dhx_list-item--drag":"")+(c.css?" "+c.css:""),"data-dhx-id":c.id,_ref:c.id.toString(),style:{height:x},_key:c.id}),this.getItemAriaAttrs(this,c)),{tabindex:k?0:-1});if(C)return C===c.html||this.config.htmlEnable?(O[".innerHTML"]=C,(0,p.el)("li",O)):(0,p.el)("li",O,C);if(this.config.$template)return c.value||g(O),(0,p.el)("li",O,[this.config.$template(c)]);var D=c.text||c.value;return D||g(O),this.config.htmlEnable?O[".innerHTML"]=D:O.class+=" dhx_list-item--text",this.config.htmlEnable?(0,p.el)("li",O):(0,p.el)("li",O,D)},o.prototype._renderList=function(){var c=this,h=this._getRange(),g=this.data.getRawData(h[0],h[1]).map(function(x,C){return c._renderItem(x,C)});return this.config.virtual&&(g=v(v([(0,p.el)(".div",{style:{height:h[2]+"px"}})],g,!0),[(0,p.el)(".div",{style:{height:h[3]+"px"}})],!1)),(0,p.el)("ul.dhx_widget.dhx_list",m(m({style:{"max-height":this.config.height,position:"relative"},tabindex:0,class:(this.config.css?this.config.css:"")+(this.config.multiselection&&this.selection.getItem()?" dhx_no-select--pointer":""),"data-dhx-widget-id":this._uid},this._handlers),this._getListAriaAttrs(this.config,this.data.getLength())),g)},o.prototype.moveFocus=function(c,h){var g=this.data.getLength();if(g){var x=this._focus,C=x?this.data.getIndex(x):-1;h=h||1,c===_.MOVE_DOWN?x=this.data.getId(Math.min(C+h,g-1)):c===_.MOVE_UP&&(x=this.data.getId(Math.max(C-h,0))),this.setFocus(x)}},o.prototype._getRange=function(){if(this.config.virtual){var c=this._visibleHeight||parseInt(this.config.height),h=parseInt(this.config.itemHeight),g=this.data.getRawData(0,-1).length,x=g*h,C=this._topOffset;C=Math.max(0,Math.min(C,x-c));var k=Math.floor(C/h),I=Math.min(g-k,Math.floor(c/h)+5);return this._topOffset=C,[k,I+k,k*h,x-h*(I+k)]}return[0,-1,0,0]},o.prototype._getHotkeys=function(){var c=this;return{arrowDown:function(h){c.moveFocus(_.MOVE_DOWN),c._changed&&(c._changed=!1),h.preventDefault()},arrowUp:function(h){c.moveFocus(_.MOVE_UP),c._changed&&(c._changed=!1),h.preventDefault()},escape:function(){c.editEnd(null),c._changed&&(c._changed=!1)},enter:function(h){var g;if(c._changed)c._changed=!1;else{var x=c.selection.getItem(),C=x instanceof Array?(g=x[0])===null||g===void 0?void 0:g.id:x==null?void 0:x.id;c.config.editable&&!c._edited&&(x&&C===c._focus||!x)?c.editItem(c._focus):c.selection.add(c._focus),c.events.fire(i.ListEvents.click,[c._focus,h])}},"shift+enter":function(h){c.selection.add(c._focus,!1,!0),c.events.fire(i.ListEvents.click,[c._focus,h])},"ctrl+enter":function(h){c.selection.add(c._focus,!0,!1),c.events.fire(i.ListEvents.click,[c._focus,h])},"ctrl+a":function(h){c.config.multiselection&&(h.preventDefault(),c.selection.remove(),c.data.map(function(g){return g.id}).forEach(function(g){c.config.multiselection==="ctrlClick"?c.selection.add(g,!0):c.selection.add(g)}))}}},o.prototype._initHotKey=function(){var c=this._getHotkeys();for(var h in c)this.keyManager.addHotKey(h,c[h]);for(var h in this.config.hotkeys)this.keyManager.addHotKey(h,this.config.hotkeys[h])},o.prototype.getItemAriaAttrs=function(c,h){return m(m({role:"option","aria-selected":h.$selected?"true":"false"},function(g,x){return g.config.dragMode&&!g._edited?{"aria-grabbed":(!!(x.$dragtarget&&!g._edited)).toString()}:{}}(c,h)),function(g){return g.config.editable?{"aria-roledescription":"".concat(g._edited?"Press Enter to stop editing":"Double click to edit content")}:{}}(c))},o.prototype._getListAriaAttrs=function(c,h){return{role:"listbox","aria-label":"Listbox ".concat(c.title||"",", count of options = ").concat(h,".").concat(c.editable?" Content is editable.":""),"aria-multiselectable":c.selection&&c.multiselection?"true":"false","aria-readonly":c.editable?"false":"true"}},o}(l.View);_.List=e},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.Selection=void 0;var b=y(35),E=y(8),m=y(1),v=function(){function f(d,p,u){var s=this;this.config=d,this.events=u,this._data=p,this._selected=[],this._data.events.on(E.DataEvents.removeAll,function(){s._selected=[]}),typeof this.config.multiselection=="string"&&(["click","ctrlClick"].includes(this.config.multiselection)||(this.config.multiselection=!1)),this._data.events.on(E.DataEvents.beforeRemove,function(l){if(s._nextSelection=null,s._selected.length===1){var r=s._data.getIndex(l.id),a=s._data.getLength();if(a>1){var i=a==r-1?r-1:r+1;s._nextSelection=s._data.getId(i)}}}),this._data.events.on(E.DataEvents.afterRemove,function(l){var r=s._selected.indexOf(l.id);r!==-1&&s._selected.splice(r,1),(0,m.isId)(s._nextSelection)&&(s.add(s._nextSelection),s._nextSelection=null)})}return f.prototype.enable=function(){this.config.disabled=!1},f.prototype.disable=function(){this.remove(),this.config.disabled=!0},f.prototype.getId=function(){return this.config.multiselection?this._selected:this._selected[0]},f.prototype.getItem=function(){var d=this;return this.config.multiselection?this._selected.map(function(p){return d._data.getItem(p)}):this._selected.length?this._data.getItem(this._selected[0]):null},f.prototype.contains=function(d){return(0,m.isId)(d)?this._selected.includes(d):this._selected.length>0},f.prototype.remove=function(d,p){var u=this;(0,m.isId)(d)?this._unselectItem(d,p):(this._selected.forEach(function(s){return u._unselectItem(s,p)}),this._selected=[])},f.prototype.add=function(d,p,u,s){var l=this;if(!this.config.disabled)if(d!==void 0){var r=this.config.multiselection;u&&this._selected.length&&r?this._addMulti(d,s):this._addSingle(d,r&&(r!=="ctrlClick"||p),s)}else{var a=this._data.serialize().filter(function(i){var n=i.id;return!l._selected.includes(n)});a.forEach(function(i){var n=i.id;l._addMulti(n,s)})}},f.prototype.destructor=function(){var d=this;this._selected.forEach(function(p){return d._unselectItem(p,!0)})},f.prototype._addMulti=function(d,p){var u,s=this._selected[this._selected.length-1],l=this._data.getIndex(s),r=this._data.getIndex(d);for(l>r&&(l=(u=[r,l])[0],r=u[1]);l<=r;l++){var a=this._data.getId(l);this._selectItem(a,p)}},f.prototype._addSingle=function(d,p,u){var s=this;p||this._selected.forEach(function(l){l!=d&&s._unselectItem(l)}),p&&this._selected.includes(d)?this._unselectItem(d,u):this._selectItem(d,u)},f.prototype._selectItem=function(d,p){var u=this._data.getItem(d);u&&!this._data.getMeta(u,"selected")&&(p||this.events.fire(b.SelectionEvents.beforeSelect,[d]))&&(this._selected.push(d),this._data.setMeta(u,"selected",!0),p||this.events.fire(b.SelectionEvents.afterSelect,[d]))},f.prototype._unselectItem=function(d,p){(p||this.events.fire(b.SelectionEvents.beforeUnSelect,[d]))&&(this._selected=this._selected.filter(function(u){return u!==d}),this._data.setMeta(this._data.getItem(d),"selected",!1),p||this.events.fire(b.SelectionEvents.afterUnSelect,[d]))},f}();_.Selection=v},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.default={notFound:"Not Found",selectAll:"Select All",unselectAll:"Unselect All",selectedItems:"selected items",createItem:"Create"}},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.emptyListHeight=_.emptyListView=_.unselectAllView=_.selectAllView=void 0;var b=y(0),E=y(84);_.selectAllView=function(){return(0,b.el)(".dhx_list-item.dhx_combobox-options__item.dhx_combobox-options__item--select-all.dhx_combobox__action-select-all",E.default.selectAll)},_.unselectAllView=function(){return(0,b.el)(".dhx_list-item.dhx_combobox-options__item.dhx_combobox-options__item--select-all.dhx_combobox__action-select-all",E.default.unselectAll)},_.emptyListView=function(m){return(0,b.el)("ul.dhx_list",[(0,b.el)("li.dhx_list-item.dhx_combobox-options__item".concat(m?".dhx_combobox-options__action-create-option":""),{},m?"".concat(E.default.createItem,' "').concat(m,'"'):E.default.notFound)])},_.emptyListHeight=function(m,v){var f=document.createElement("canvas").getContext("2d",{alpha:!1});f.font="normal 14px Roboto";var d=m?"".concat(E.default.createItem,' "').concat(m,'"'):E.default.notFound;return 13+20*Math.ceil(f.measureText(d).width/(v-16))}},function(W,_,y){var b,E;Object.defineProperty(_,"__esModule",{value:!0}),_.ComboState=_.ComboboxEvents=void 0,function(m){m.beforeChange="beforeChange",m.change="change",m.focus="focus",m.blur="blur",m.keydown="keydown",m.input="input",m.beforeOpen="beforeOpen",m.afterOpen="afterOpen",m.beforeClose="beforeClose",m.afterClose="afterClose",m.open="open",m.close="close"}(b||(_.ComboboxEvents=b={})),function(m){m[m.default=0]="default",m[m.error=1]="error",m[m.success=2]="success"}(E||(_.ComboState=E={}))},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(s){for(var l,r=1,a=arguments.length;r<a;r++)for(var i in l=arguments[r])Object.prototype.hasOwnProperty.call(l,i)&&(s[i]=l[i]);return s},b.apply(this,arguments)},E=this&&this.__spreadArray||function(s,l,r){if(r||arguments.length===2)for(var a,i=0,n=l.length;i<n;i++)!a&&i in l||(a||(a=Array.prototype.slice.call(l,0,i)),a[i]=l[i]);return s.concat(a||Array.prototype.slice.call(l))};Object.defineProperty(_,"__esModule",{value:!0}),_.getFixedCols=_.getFixedColsHeader=void 0;var m=y(0),v=y(7),f=y(33),d=y(88),p=y(15),u=y(25);_.getFixedColsHeader=function(s,l,r){if((r!==v.Split.left||typeof s.leftSplit=="number"&&s.fixedColumns.left.length)&&(r!==v.Split.right||typeof s.rightSplit=="number"&&s.fixedColumns.right.length)){var a=s.leftSplit,i=s.rightSplit,n=s.$positions,e=s.$totalWidth,t=s.$scrollBarWidth,o=r===v.Split.right,c=o?s.fixedColumns.right:s.fixedColumns.left,h=(0,p.getTotalWidth)(c),g=(0,d.getFixedRows)(b(b({},s),{currentColumns:c,$positions:b(b({},n),{xStart:0,xEnd:o?i:a}),scroll:{top:0,left:0},filteredColumns:c}),b(b({},l),{name:"header",position:"top",shifts:{x:0,y:0}}),r),x=b(b({},l),{name:"header",position:"top"});return(0,m.el)(".dhx_".concat(x.name,"-fixed-cols"),b({onwheel:p.scrollFixedColsAndRows,class:o?"dhx_grid__cols_right--fixed":"dhx_grid__cols_left--fixed",style:{position:"absolute",top:0,left:o?e<l.wrapper.width-t.y-u.BORDERS?e-h:l.wrapper.width-h-t.y-u.BORDERS:0,width:h,overflow:"hidden"}},{role:"rowgroup","aria-rowcount":g.length}),g.body)}},_.getFixedCols=function(s,l,r,a){if((r!==v.Split.left||typeof s.leftSplit=="number"&&s.fixedColumns.left.length)&&(r!==v.Split.right||typeof s.rightSplit=="number"&&s.fixedColumns.right.length)){var i,n=s.leftSplit,e=s.rightSplit,t=s.$totalWidth,o=s.$totalHeight,c=s.headerHeight,h=s.footerHeight,g=s.$positions,x=s.scroll,C=s.data,k=s.$scrollBarWidth,I=r===v.Split.right,O=o+c+h;i=O>l.gridBodyHeight?s.$footer?O-k.x:l.gridBodyHeight:O<l.gridBodyHeight-k.x?O:s.$footer?l.gridBodyHeight:l.gridBodyHeight-k.x;var D=I?s.fixedColumns.right:s.fixedColumns.left,A=(0,p.getTotalWidth)(D),H=I?"rightFixedCols":"leftFixedCols",S=(0,f.getCells)(b(b({},s),{filteredColumns:D,$renderFrom:H,$positions:b(b({},g),{xStart:0,xEnd:I?e:n})})),$=l.sticky,w=b(b({},l),{name:"footer",position:"bottom"}),T=(0,d.getRows)(b(b({},s),{currentColumns:D,$positions:b(b({},g),{xStart:0,xEnd:I?e:n})}),b(b({},l),{name:"footer",position:"bottom"})),F=0;T.forEach(function(V){return F+=V.attrs.style.height});var z=(0,d.getFixedSpans)(b(b({},s),{filteredColumns:D}),b(b({},l),{name:"footer",position:"bottom"}),r),B=function(V){return{role:"rowgroup","aria-rowcount":V}},L=$?(0,m.el)(".dhx_".concat(w.name,"-fixed-cols"),b({onwheel:p.scrollFixedColsAndRows,class:I?"dhx_grid__cols_right--fixed":"dhx_grid__cols_left--fixed",style:{position:"absolute",top:i<l.gridBodyHeight?i-F:null,left:I?t<l.wrapper.width-k.y-u.BORDERS?t-A:l.wrapper.width-A-k.y-u.BORDERS:0,bottom:i>=l.gridBodyHeight?"".concat($?k.x:0,"px"):null}},B(T.length)),[T,(0,m.el)("span.dhx_span-spans",{class:"dhx_footer-spans",role:"presentation"},z)]):null,M=g,P=(0,f.getSpans)(b(b({},s),{$renderFrom:H}),a||(I?v.Split.right:v.Split.left));return[(0,m.el)(".dhx_grid-fixed-cols-wrap",b({style:{left:I?t<l.wrapper.width-k.y-u.BORDERS?t-A:l.wrapper.width-A-k.y-u.BORDERS:0,height:i>=l.gridBodyHeight?($?l.gridBodyHeight:l.gridBodyHeight+c)-k.x:i,paddingTop:c,overflow:"hidden",width:A}},{role:"presentation","aria-label":"Fixed column"}),[(0,m.el)(".dhx_grid-fixed-cols",b(b({onwheel:p.scrollFixedColsAndRows,class:I?"dhx_grid__cols_right--fixed":"dhx_grid__cols_left--fixed",style:{top:-x.top+c-1+"px",paddingTop:l.shifts.y,height:o,position:"absolute"},_flags:m.KEYED_LIST},(0,f.getHandlers)(M.yStart,M.xStart,s)),B(C.length)),E(E([],S,!0),[P&&(0,m.el)("span.dhx_span-spans",{role:"presentation"},[P])],!1)),I?(0,m.el)(".dhx_grid__cols-border--frozen",{role:"presentation",style:{left:0}}):(0,m.el)(".dhx_grid__cols-border--frozen",{role:"presentation",style:{right:0}})]),s.$footer?L:null]}}},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(o){for(var c,h=1,g=arguments.length;h<g;h++)for(var x in c=arguments[h])Object.prototype.hasOwnProperty.call(c,x)&&(o[x]=c[x]);return o},b.apply(this,arguments)},E=this&&this.__spreadArray||function(o,c,h){if(h||arguments.length===2)for(var g,x=0,C=c.length;x<C;x++)!g&&x in c||(g||(g=Array.prototype.slice.call(c,0,x)),g[x]=c[x]);return o.concat(g||Array.prototype.slice.call(c))};Object.defineProperty(_,"__esModule",{value:!0}),_.getFixedDataRows=_.getFixedRows=_.getFixedSpans=_.getRows=void 0;var m=y(0),v=y(26),f=y(15),d=y(7),p=y(33),u=y(87),s=y(1),l=2;function r(o,c,h,g){h&&(h.toLocaleLowerCase().includes("touch")?c._events.fire(h,[o,g]):c.events.fire(h,[o,g]))}function a(o,c,h){return{onclick:[r,o,h,d.GridEvents[c+"CellClick"]],onmouseover:[r,o,h,d.GridEvents[c+"CellMouseOver"]],onmousedown:[r,o,h,d.GridEvents[c+"CellMouseDown"]],ontouchstart:[r,o,h,d.GridEvents[c+"CellMouseDown"]],ondblclick:[r,o,h,d.GridEvents[c+"CellDblClick"]],oncontextmenu:[r,o,h,d.GridEvents[c+"CellRightClick"]],ontouchmove:[r,o,h,d.GridSystemEvents[c+"CellTouchMove"]],ontouchend:[r,o,h,d.GridSystemEvents[c+"CelltouchEnd"]]}}function i(o,c,h,g,x,C,k){x===void 0&&(x=""),k===void 0&&(k=!1);var I=c.type?"dhx_".concat(c.type,"-cell"):"dhx_string-cell",O=h.content[o.content]&&h.content[o.content].toHtml(c,h),D={};h.filteredColumns.forEach(function(H){var S=!!h.content[H[g][C].content];D[H.id]=S&&h.content[H[g][C].content].toHtml(H,h)||H[g][C].text});var A=c.template&&typeof O=="string"?c.template(O,D,c):O;return(0,m.el)(".".concat(I),{style:{class:x.trim(),padding:0}},[O&&(typeof O=="string"||typeof O=="number"?(0,m.el)("div",{class:"dhx_grid-footer-cell-text",role:"presentation",".innerHTML":k?A:null},k?null:A):O)])}function n(o,c){if(!o.data||!o.filteredColumns)return[];var h,g=c.name,x=g==="header"?o.headerAutoHeight:o.footerAutoHeight,C=o.$positions,k=o.currentColumns,I=function(D,A){var H=D.map(function(S){return S[A]||[{}]});return(0,f.transpose)(H)}(k,g),O=1;return I.map(function(D,A){var H=(g==="header"?o.$headerHeightMap:o.$footerHeightMap)[A];return(0,m.el)(".dhx_".concat(g,"-row"),b({style:{height:H}},{role:"row","aria-rowindex":A+1}),D.map(function(S,$){var w,T=S.css||"",F=k[$],z=C.xStart+$+1,B=(0,f.isHtmlEnable)(o,F,S),L="dxi dxi-sort-variant dhx_grid-sort-icon",M="none";if(o.sortBy&&"".concat(F.id)===o.sortBy&&!S.content){var P=o.sortDir||"asc";L+=" dhx_grid-sort-icon--".concat(P),T+=" dhx_grid-".concat(g,"-cell--sorted "),M=P==="asc"?"ascending":"descending"}var V=(0,f.isSortable)(o,F)&&S.text&&g!=="footer"&&S.headerSort!==!1;V&&(T+=" dhx_grid-header-cell--sortable");var R=$===0?"dhx_first-column-cell":"",q=$===k.length-1?"dhx_last-column-cell":"";S.content||(S.align?T+=" dhx_grid-header-cell--align_".concat(S.align," "):T+=" dhx_grid-header-cell--".concat(F.type==="number"||F.type==="percent"||F.type==="date"?"align_right":"align_left"," ")),T+="".concat(R," ").concat(q);var G=F.resizable!==void 0?F.resizable:o.resizable;if(G){var U=o.rightSplit&&o.$scrollBarWidth.xState&&o.fixedColumns.right.includes(F);G=(0,m.el)("div",{class:"dhx_resizer_grip_wrap","aria-hidden":"true"},[(0,m.el)("div",{class:"dhx_resizer_grip"+(U?" dhx_resizer_grip--left":" dhx_resizer_grip--right"),dhx_resized:F.id,style:{height:"".concat(100*I.length,"%")}},[(0,m.el)("div",{class:"dhx_resizer_grip_line"})])]);var Z=F.header&&((w=F.header[0])===null||w===void 0?void 0:w.colspan);Z&&(h=Z,O=1),h&&O!==h&&(A===0&&(G=null),O++),g==="footer"&&(G=null)}S.align&&(T+=" dhx_align-".concat(S.align));var Q=function(ot,rt,st){var ut={"aria-colindex":rt};return ot==="footer"||S.content?ut.role="gridcell":(ut.role="columnheader",ut["aria-sort"]=st),ut};if(S.content)return(0,m.el)(".dhx_grid-".concat(g,"-cell.dhx_grid-custom-content-cell"),b(b({class:T.trim(),"data-dhx-id":F.id,"data-dhx-text-id":S.id,_key:F.id,style:{width:F.$width,height:g==="footer"?H+l/2+"px":H+"px"}},a(F,g,o)),Q(g,z,M)),[i(S,F,o,g,"",A,B),G||null]);var tt,et="dhx_grid-header-cell-text_content";return x&&(et+=" dhx_grid-header-cell-text_content-auto-height"),(0,m.el)(".dhx_grid-".concat(g,"-cell"),b(b({class:T.trim(),"data-dhx-id":F.id,"data-dhx-text-id":S.id,_key:F.id,style:{width:F.$width,height:g==="footer"?H+l/2+"px":H+"px"}},a(F,g,o)),Q(g,z,M)),[(0,m.el)("div.dhx_grid-header-cell-text",{role:"presentation"},[(0,m.el)("span",b(b({class:et},(tt=S.text,V?{role:"button","aria-label":"Sort by ".concat(tt)}:{})),{".innerHTML":B?S.text:null}),B?null:S.text),G||null]),V&&(0,m.el)("div",{class:L,"aria-hidden":"true"})])}))})}function e(o,c,h){var g=o.columns,x=o.filteredColumns,C=(0,f.transpose)(x.map(function(A){return A[c.name]||[]})),k=c.name,I=k==="header"?o.headerAutoHeight:o.footerAutoHeight,O=k==="header"?o.$headerHeightMap:o.$footerHeightMap,D=0;return C.map(function(A,H){D=0;var S=O[H];return(0,m.el)(".dhx_span-row",{class:"dhx_header-row","aria-hidden":"true"},A.map(function($,w){var T,F=x[w];if(h===d.Split.right&&w===0&&!$.colspan){var z=(0,f.transpose)(g.map(function(gt){return gt[c.name]||[]}));t:for(var B=0;B<z[H].length;B++){var L=z[H][B];if(L.colspan>1){for(var M=g.slice(B,B+L.colspan),P=0;P<M.length;P++)if(M[P].id===F.id){T={cell:L,col:g[B],widthBefore:(0,v.getWidth)(M,P,0),isLastCol:B+L.colspan>=g.length};break t}}}}var V=(T==null?void 0:T.cell)||$,R=(T==null?void 0:T.col)||F,q=(0,f.isHtmlEnable)(o,F,$);D+=R.hidden?0:R.$width;var G=w===0?"dhx_first-column-cell":"",U=h?1:o.fixedColumns.right.length+1,Z=$.colspan&&(0,v.getReducedColspan)(g,F.id,$.colspan),Q=T!=null&&T.isLastCol||w===x.length-U||(Z||1)+(w-1)>=x.length-U?"dhx_last-column-cell":"",tt=S,et=S*H;if(V.rowspan){for(var ot=V.rowspan-1;ot>0;)tt+=O[H+ot],ot--;tt-=1}if(V.rowspan||V.colspan)for(et=0,B=H-1;B>=0;B--)et+=O[B];var rt=(0,f.isSortable)(o,R)&&V.rowspan&&V.text&&c.name!=="footer"&&V.headerSort!==!1,st="dxi dxi-sort-variant dhx_grid-sort-icon";o.sortBy&&"".concat(R.id)===o.sortBy&&!V.content&&(st+=" dhx_grid-sort-icon--".concat(o.sortDir||"asc"));var ut=R.align?"dhx_align-".concat(R.align):R.type!=="number"&&R.type!=="percent"&&R.type!=="date"||V.colspan?"dhx_align-left":"dhx_align-right",at="dhx_grid-".concat(k,"-cell ").concat(G," ").concat(Q," ").concat(V.rowspan?"dhx_span-cell__rowspan":""," ").concat(V.align?"dhx_align-".concat(V.align):ut," ").concat(V.css?V.css:"");rt&&(at+=" dhx_grid-header-cell--sortable"),V.content||(V.align?at+=" dhx_grid-header-cell--align_".concat(V.align," "):at+=" dhx_grid-header-cell--".concat(R.type==="number"||R.type==="percent"||R.type==="date"?"align_right":"align_left"," "));var ct=null;V.content&&((ct=i(V,R,o,k,at,H)).attrs.style=b(b({},ct.attrs.style),{width:"100%",borderRight:"0"}));var ft="";D-R.$width>0&&(ft="var(--dhx-border)");var vt="dhx_grid-header-cell-text_content";I&&(vt+=" dhx_grid-header-cell-text_content-auto-height");var _t=(0,m.el)("span",{class:vt,".innerHTML":q?V.text:null},q?null:V.text);return V.colspan||V.rowspan?(0,m.el)(".dhx_span-cell",b({style:{width:(0,v.getWidth)(g,V.colspan,(0,s.findIndex)(g,function(gt){return gt.id===R.id})),height:tt,left:D-R.$width-((T==null?void 0:T.widthBefore)||0),borderLeft:ft,top:et},class:at.trim(),"data-dhx-id":R.id,"data-dhx-text-id":V.id},a(R,k,o)),[ct||V.rowspan?(0,m.el)("div.dhx_grid-header-cell-text",{role:"presentation"},[_t]):_t,rt&&(0,m.el)("div",{class:st}),h===d.Split.left&&Z&&w+Z>x.length||T?(0,m.el)(".dhx_grid__cols-border--frozen",{role:"presentation",style:{left:((T==null?void 0:T.widthBefore)||(0,v.getWidth)(x,x.length-w,w))-l/2}}):null]):null}).filter(function($){return $}))})}function t(o){return{role:"rowgroup","aria-rowcount":o}}_.getRows=n,_.getFixedSpans=e,_.getFixedRows=function(o,c,h){var g,x=o.leftSplit,C=o.$totalWidth,k=n(o,c),I=e(o,c,h),O=null;if(c.name==="footer"&&!c.sticky){var D=o.rightSplit,A=o.fixedColumns,H=function(w){w===void 0&&(w=!1);var T=w?A.right:A.left;return!w&&x>=0||w&&D>=0?n(b(b({},o),{currentColumns:T,$positions:b(b({},o.$positions),{xStart:0,xEnd:w?D:x})}),c):[]};O=E(E([],H(),!0),H(!0),!0)}var S,$=((g={position:"sticky"})[c.position]=0,g);return c.sticky||($.left=-o.scroll.left,S=-o.scroll.left,$.position="relative"),(0,m.el)(".dhx_".concat(c.name,"-wrapper").concat(o.rightSplit?".dhx_grid__rows_right--fixed":""),{class:c.sticky?"":"dhx_compatible-".concat(c.name),style:b(b({},$),{left:c.sticky?S:0,height:c.name==="footer"?o[c.name+"Height"]+l/2:o[c.name+"Height"],width:c.sticky?C:c.wrapper.width-l}),role:"presentation"},[(0,m.el)(".dhx_grid-".concat(c.name).concat(x?".dhx_grid_fixed_left":""),{style:{height:c.name==="footer"?o[c.name+"Height"]+l/2:o[c.name+"Height"],left:S,paddingLeft:c.shifts.x,width:C},role:"presentation"},[(0,m.el)(".dhx_".concat(c.name,"-rows"),b({},t(E([],k,!0).length)),E([],k,!0)),(0,m.el)(".dhx_".concat(c.name,"-spans"),{style:{marginLeft:-c.shifts.x},class:"dhx_".concat(c.name,"-rows"),role:"presentation"},I),O&&(0,m.el)(".dhx_".concat(c.name,"-fixed-cols"),{style:{position:"absolute",top:0,left:o.scroll.left+"px",height:"100%"}},O)]),(0,m.el)("div",{style:{width:C},role:"presentation"})])},_.getFixedDataRows=function(o,c,h){if(!(h===d.Split.top&&typeof o.topSplit!="number"||h===d.Split.bottom&&typeof o.bottomSplit!="number")){var g=o.$totalWidth,x=o.topSplit,C=o.bottomSplit,k=o.$positions,I=o.data,O=o.$totalHeight,D=o.$width,A=o.headerHeight,H=o.footerHeight,S=o.$scrollBarWidth,$=h===d.Split.bottom,w=$?o.fixedRows.bottom:o.fixedRows.top,T=$?"bottomFixedRows":"topFixedRows",F=(0,p.getCells)(b(b({},o),{data:w,$renderFrom:T,$positions:b(b({},k),{yStart:0,yEnd:$?C:x})})),z=w.reduce(function(V,R){return V+R.$height},0),B=(0,p.getSpans)(b(b({},o),{$renderFrom:T,data:I}),$?d.Split.bottom:d.Split.top),L=(0,f.getTotalHeight)(o.fixedRows.bottom),M=function(V){return(0,u.getFixedCols)(b(b({},o),{headerHeight:0,data:w,$renderFrom:T,scroll:b(b({},o.scroll),{top:-1}),$positions:b(b({},k),{yStart:0,yEnd:$?C:x}),$totalHeight:z,$data:I}),b(b({},c),{shifts:b(b({},c.shifts),{y:0})}),V,h)||[]},P=E(E([],M(d.Split.left),!0),M(d.Split.right),!0);return[(0,m.el)(".dhx_grid-fixed-data-rows-wrap",{class:$?"dhx_grid__rows_bottom--fixed":"",style:{top:$?O+A+H<c.wrapper.height-S.x-l?O+A-L+l/2:c.wrapper.height-L-H-l/2-S.x:A,overflow:"hidden",height:z>c.wrapper.height?c.wrapper.height:z,width:g+S.y+l<D?g:D-S.y-l}},E(E([(0,m.el)(".dhx_grid-fixed-cols",b(b({onwheel:f.scrollFixedColsAndRows,style:{left:-o.scroll.left+"px",paddingLeft:c.shifts.x,position:"absolute",width:g},_flags:m.KEYED_LIST},(0,p.getHandlers)(0,k.xStart,o)),t(I.length)),[(0,m.el)(".dhx_grid-fixed-rows",{class:o.rightSplit?"dhx_grid__rows_right--fixed":""},E(E([],F,!0),[B&&(0,m.el)(".dhx_span-spans",{role:"presentation"},[B])],!1))])],P,!0),[o.bottomSplit?(0,m.el)(".dhx_grid__rows-border--frozen",{role:"presentation"}):null],!1))]}}},function(W,_,y){var b,E=this&&this.__extends||(b=function(s,l){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i])},b(s,l)},function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function r(){this.constructor=s}b(s,l),s.prototype=l===null?Object.create(l):(r.prototype=l.prototype,new r)}),m=this&&this.__assign||function(){return m=Object.assign||function(s){for(var l,r=1,a=arguments.length;r<a;r++)for(var i in l=arguments[r])Object.prototype.hasOwnProperty.call(l,i)&&(s[i]=l[i]);return s},m.apply(this,arguments)},v=this&&this.__spreadArray||function(s,l,r){if(r||arguments.length===2)for(var a,i=0,n=l.length;i<n;i++)!a&&i in l||(a||(a=Array.prototype.slice.call(l,0,i)),a[i]=l[i]);return s.concat(a||Array.prototype.slice.call(l))};Object.defineProperty(_,"__esModule",{value:!0}),_.Card=void 0;var f=y(0),d=y(28),p=y(19),u=function(s){function l(r,a){return s.call(this,r,a)||this}return E(l,s),l.prototype.render=function(){var r=this,a=this.config,i=a.id,n=a.angle,e=a.width,t=a.height,o=a.headerColor,c=a.$group,h=a.$selected,g=c||h?h?2:1:0,x=this.config.$selected?o:"#E4E4E4",C=this.getCoords(this.config),k=[];return Array.isArray(this.config.dir)?this.config.dir.forEach(function(I,O){k.push((0,p.getCircleTpl)(r.config,O))}):k.push((0,p.getCircleTpl)(this.config)),(0,f.el)("div.dhx_diagram_item.dhx_diagram_shape.dhx_diagram_shape_card",{_key:i,"data-dhx-id":i,class:this.getCss(),style:{transform:"rotate(".concat(n||0,"deg)"),position:"absolute",top:C.y,left:C.x,zIndex:g}},v([(0,f.el)("div",{style:{height:t,width:e,border:"1px solid ".concat(x),borderRadius:"1px"}}),(0,p.getHeaderTpl)(this.config),(0,p.getTextTemplate)(this.config,this.getContent())],k,!0))},l.prototype.setDefaults=function(r,a){var i=r.width,n=r.height,e=r.text,t=r.headerColor,o=r.fixed,c=a.width?parseFloat(a.width):140,h=a.height?parseFloat(a.height):90;return r.width=i||c,r.height=n||h,r.text=typeof e=="string"?e:a.text||"",r.headerColor=t||a.headerColor||"",r.fixed=o||!1,r.editable=typeof r.editable!="boolean"||r.editable,r},l.prototype.getContent=function(){var r=this.config,a=r.$editable,i=r.text;return(0,f.el)("span.dhx_diagram_item__text",{style:(0,p.getShapeCss)(m(m({},this.config),{textAlign:"center",textVerticalAlign:"center"}))},a?[this.getEditorNode()]:i)},l}(d.BaseShape);_.Card=u},function(W,_,y){var b,E=this&&this.__extends||(b=function(u,s){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,r){l.__proto__=r}||function(l,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(l[a]=r[a])},b(u,s)},function(u,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function l(){this.constructor=u}b(u,s),u.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}),m=this&&this.__spreadArray||function(u,s,l){if(l||arguments.length===2)for(var r,a=0,i=s.length;a<i;a++)!r&&a in s||(r||(r=Array.prototype.slice.call(s,0,a)),r[a]=s[a]);return u.concat(r||Array.prototype.slice.call(s))};Object.defineProperty(_,"__esModule",{value:!0}),_.CustomShape=void 0;var v=y(0),f=y(28),d=y(19),p=function(u){function s(l,r){var a=u.call(this,l,r)||this;return a.shapes=r.shapes,a}return E(s,u),s.prototype.render=function(){var l=this,r=this.config,a=r.id,i=r.angle,n=r.width,e=r.height,t=r.$group,o=r.$selected,c=t||o?o?2:1:0,h=this.getCoords(this.config),g=[];return Array.isArray(this.config.dir)?this.config.dir.forEach(function(x,C){g.push((0,d.getCircleTpl)(l.config,C))}):g.push((0,d.getCircleTpl)(this.config)),(0,v.el)("div.dhx_diagram_item.dhx_diagram_shape.dhx_diagram_shape_template",{_key:a,class:this.getCss(),"data-dhx-id":a,style:{transform:"rotate(".concat(i||0,"deg)"),zIndex:c,position:"absolute",height:e,width:n,top:h.y,left:h.x}},m([this._getCustomContent()],g,!0))},s.prototype.setDefaults=function(l,r){Object.keys(r).forEach(function(n){l[n]=l[n]||r[n]});var a=r.width?parseFloat(r.width):140,i=r.height?parseFloat(r.height):90;return l.width=l.width||a,l.height=l.height||i,l.x=l.x||0,l.y=l.y||0,l.fixed=l.fixed||!1,l},s.prototype._getCustomContent=function(){var l=this.config,r=l.type,a=l.width,i=l.height,n=this.shapes[r];if(typeof n=="function")return(0,v.el)("div.dhx_diagram_shape__content",{style:{width:a,height:i}},this._getShapeFromFunction(n))},s.prototype._normalizeConfigText=function(l){var r=this;return Array.isArray(l)?l.forEach(function(a){return r._normalizeConfigText(a)}):typeof l=="string"&&(l.includes("&")&&(l=l.replace(/&/g,"&amp;")),l.includes("<")&&(l=l.replace(/</g,"&lt;")),l.includes(">")&&(l=l.replace(/>/g,"&gt;")),l.includes("'")&&(l=l.replace(/'/g,"&apos;")),l.includes('"')&&(l=l.replace(/"/g,"&quot;"))),l},s.prototype._getShapeFromFunction=function(l){var r=this,a={};Object.entries(this.config).forEach(function(n){var e=n[0],t=n[1];(e!=="id"&&e!=="type"&&e!=="preview"&&!e.startsWith("$")&&typeof t=="string"||Array.isArray(t))&&(a[e]=r._normalizeConfigText(t))});var i=new DOMParser().parseFromString(l(Object.assign({},this.config,a)),"text/xml");return[(0,v.jsonToVDOM)((0,v.xmlToJson)(i))]},s}(f.BaseShape);_.CustomShape=p},function(W,_,y){var b,E=this&&this.__extends||(b=function(s,l){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i])},b(s,l)},function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function r(){this.constructor=s}b(s,l),s.prototype=l===null?Object.create(l):(r.prototype=l.prototype,new r)}),m=this&&this.__assign||function(){return m=Object.assign||function(s){for(var l,r=1,a=arguments.length;r<a;r++)for(var i in l=arguments[r])Object.prototype.hasOwnProperty.call(l,i)&&(s[i]=l[i]);return s},m.apply(this,arguments)},v=this&&this.__spreadArray||function(s,l,r){if(r||arguments.length===2)for(var a,i=0,n=l.length;i<n;i++)!a&&i in l||(a||(a=Array.prototype.slice.call(l,0,i)),a[i]=l[i]);return s.concat(a||Array.prototype.slice.call(l))};Object.defineProperty(_,"__esModule",{value:!0}),_.ShapesCollection=void 0;var f=y(1),d=y(8),p=y(27),u=function(s){function l(r,a){var i=s.call(this,r,a)||this;return i._groupChildren={},i._children={},i._roots=[],i.events.on(p.DataEvents.change,function(n,e,t){var o,c=(o=t==null?void 0:t.$item)===null||o===void 0?void 0:o.getBaseType();if(i.config.diagramConfig.type==="default")switch(e){case"add":c!=="group"&&c!=="swimlane"||(c==="swimlane"&&i._checkSwimlaneCells(t),i._setGroupChildren(t));break;case"update":c!=="group"&&c!=="swimlane"||i._setGroupChildren(t);break;case"remove":c!=="group"&&c!=="swimlane"||i._removeGroupChildren(t)}else e==="add"&&t.parent&&i._addCore({from:t.parent,to:t.id},-1);e==="remove"&&(i._removeNested(t),i._removeCore(t.$parent)),i._mark_chains()}),i.events.on(p.DataEvents.filter,function(){return i._mark_chains()}),i}return E(l,s),l.prototype.getChildren=function(r,a){a===void 0&&(a=!0);var i=this._groupChildren[r]||this._children[r],n=[];if(i&&(n=v(v([],n,!0),i,!0),a))for(var e=0;e<i.length;e++)n=v(v([],n,!0),this.getChildren(i[e].id),!0);return n},l.prototype.eachChild=function(r,a,i){i===void 0&&(i=!0);var n=this._groupChildren[r]||this._children[r];if(n)for(var e=0;e<n.length;e++){var t=n[e];a.call(this,t),(this._groupChildren[t.id]||this._children[t.id])&&i&&this.eachChild(t.id,a)}},l.prototype.eachParent=function(r,a,i){i===void 0&&(i=!1);var n=this.getItem(r);if(n&&!this._roots.includes(r)){i&&a.call(this,n);var e=this.getItem(n.parent||n.$group);a.call(this,e),this.eachParent(n.parent||n.$group,a)}},l.prototype.getNearId=function(r){var a=this._pull[r];if(!a)return this._order.length?this._order[0].id:"";for(var i=a,n=this.config.diagramConfig.type;(n==="org"||n==="mindmap")&&i.$parent;)if((i=this._pull[this._pull[i.$parent].from]).open===!1)return i.id;return a.id},l.prototype.mapVisible=function(r){var a=this,i=[],n=this.config.diagramConfig.type;if(n==="mindmap"||n==="org")for(var e=this.getRoots(),t=0;t<e.length;t++)this._eachBranch(this.getItem(e[t]),r,i);else this.forEach(function(o){if(!o.hidden){if(o.$item.getBaseType()==="line"){var c=a.getItem(o.from)||{},h=a.getItem(o.to)||{};if(c.hidden||h.hidden)return;a._setLineLevel(o,c,h)}i.push(r(o))}});return i},l.prototype.getRoots=function(){return this._roots},l.prototype.getRoot=function(r){if(r&&this.exists(r)){var a=this.getItem(r);return a.$group||a.parent?this.getRoot(a.$group||a.parent):r}},l.prototype.serialize=function(){return this._serialize(v([],s.prototype.serialize.call(this),!0))||[]},l.prototype._serialize=function(r){var a=this;if(r.length)return r.map(function(i){if((0,f.isType)(i)==="object"){var n=m({},i);return Object.entries(n).forEach(function(e){var t=e[0],o=e[1];t.startsWith("$")?delete n[t]:Array.isArray(o)?n[t]=a._serialize(o):(0,f.isType)(o)==="object"&&(n[t]=a._serialize([o])[0])}),n}return i})},l.prototype._removeNested=function(r){var a=this,i=this.config.diagramConfig.type,n=r.$connection,e=r.$group;if(i==="default"&&(e&&this._setGroupChildren(this.getItem(e)),r.$item.getBaseType()==="line"&&this.eachChild(r.id,function(o){return a._removeCore(o.id)})),n)for(var t=0;t<n.length;t++)i!=="mindmap"&&i!=="org"||(this._removeNested(this.getItem(n[t][1])),this._removeCore(n[t][1])),this._removeCore(n[t][0]),this.eachChild(n[t][0],function(o){return a._removeCore(o.id)})},l.prototype._eachBranch=function(r,a,i){if(!r.hidden&&(i.push(a(r)),r.open!==!1)){var n=r.$connection;if(n)for(var e=0;e<n.length;e++){var t=this.getItem(n[e][1]);t.hidden||(i.push(a(this.getItem(n[e][0]))),this._eachBranch(t,a,i))}}},l.prototype._parse_data=function(r){for(var a=this,i=[],n=!1,e=0;e<r.length;e++){var t=r[e];t.parent&&!n&&i.push({from:t.parent,to:t.id}),t.from&&(n=!0)}i.length&&!n&&(r=r.concat(i)),s.prototype._parse_data.call(this,r),this._mark_chains(),this.mapVisible(function(o){var c=o==null?void 0:o.$item.getBaseType();c!=="group"&&c!=="swimlane"||(c==="swimlane"&&a._checkSwimlaneCells(o),a._setGroupChildren(o))})},l.prototype._mark_chains=function(){var r=this;this._roots=[],this._children={};var a={},i={},n={},e={},t={},o=this.config.diagramConfig.type;if(this.forEach(function(h){if(h.$item.getBaseType()==="line"){var g=h;i[g.to]=g.id,a[g.from]||(a[g.from]=[]),a[g.from].push([h.id,g.to]),o==="default"&&(a[g.to]||(a[g.to]=[]),a[g.to].push([h.id,g.from])),n[g.to]=g.from}o==="org"&&(h.assistant&&(e[h.parent]||(e[h.parent]=[]),e[h.parent].push(h.id)),h.partner&&(t[h.parent]||(t[h.parent]=[]),t[h.parent].push(h.id)))}),this.forEach(function(h){var g=h.$item.getBaseType(),x=h.id,C=r.config.diagramConfig,k=C.type,I=C.lineConfig;h.$typeConfig={type:k,lineConfig:I},g==="shape"&&(h.$connection=a[x]),k==="default"?(h.$group||r._roots.push(x),g==="lineTitle"&&(r._children[h.parent]||(r._children[h.parent]=[]),r._children[h.parent].push(h),h.$item.parent=r.getItem(h.parent))):g==="shape"&&(h.$parent=i[x],h.parent||(h.parent=n[x]),h.parent?(r._children[h.parent]||(r._children[h.parent]=[]),r._children[h.parent].push(h)):r._roots.push(x),e[x]?h.$assistants=e[x]:delete h.$assistants,t[x]?h.$partners={common:t[x]}:delete h.$partners)}),o!=="default"){if(o==="mindmap"){var c=this.getItem(this._roots[0]);!(0,f.isEmptyObj)(c==null?void 0:c.openDir)&&Object.values(c==null?void 0:c.openDir).every(function(h){return!h})&&(c.open=!1)}this._setBranchLevel(this.getItem(this._roots[0]))}},l.prototype._setBranchLevel=function(r,a){if(a===void 0&&(a=0),r){var i=r==null?void 0:r.$connection;if(i)for(var n=void 0,e=0;e<i.length;e++)(n=this.getItem(i[e][1])).hidden||(r.$level=a,this._setBranchLevel(n,a+1));r.$level=a++}},l.prototype._setLineLevel=function(r,a,i){if(a||i){var n=0;if(a!=null&&a.$group&&(a!=null&&a.id)){var e=[];this.eachParent(a.id,function(o){return(o==null?void 0:o.id)&&e.push(o.id)}),e.length>n&&(n=e.length)}if(i!=null&&i.$group&&(i!=null&&i.id)){var t=[];this.eachParent(i.id,function(o){return(o==null?void 0:o.id)&&t.push(o.id)}),t.length>n&&(n=t.length)}r.$level=n}else r.$level=0},l.prototype._setGroupChildren=function(r){var a;if(r){if(this._groupChildren[r.id]=[],r.groupChildren||(r.groupChildren=[]),(a=r==null?void 0:r.layout)===null||a===void 0?void 0:a.length){var i=new Set(r.layout.flat(1/0));r.groupChildren=Array.from(i)}var n=r.groupChildren;if(Array.isArray(n)&&n.length)for(var e=0;e<n.length;e++){var t=this._pull[n[e]];t&&(t.$group=r.id,this._groupChildren[r.id].push(t),t.$item.getBaseType()!=="group"||this._groupChildren[t.id]||this._setGroupChildren(t))}this._setGroupVisible(r)}},l.prototype._removeGroupChildren=function(r){var a=r.id;if(this._groupChildren[a].length)for(var i=0;i<this._groupChildren[a].length;i++)this.remove(this._groupChildren[a][i].id);delete this._groupChildren[a]},l.prototype._setGroupVisible=function(r){var a=this,i=r.id,n=r.open,e=r.header;!(e!=null&&e.enable)||!(e!=null&&e.closable)||n?this.eachChild(i,function(t){var o,c;!((o=a._pull[t.$group])===null||o===void 0)&&o.open&&!(!((c=a._pull[t.$group])===null||c===void 0)&&c.hidden)&&a.update(t.id,{hidden:!n},!0)}):this.eachChild(i,function(t){return a.update(t.id,{hidden:!n},!0)})},l.prototype._checkSwimlaneCells=function(r){for(var a=r.layout,i={},n=0;n<a.length;n++)for(var e=a[n],t=0;t<e.length;t++){var o=e[t];i[o]||this.exists(o)||(i[o]={type:"$sgroup",id:o})}this.add(Object.values(i))},l}(d.DataCollection);_.ShapesCollection=u},function(W,_,y){var b,E,m;Object.defineProperty(_,"__esModule",{value:!0}),_.DirVectors=_.Direction=_.LineMode=void 0,function(v){v[v.Direct=1]="Direct",v[v.Edges=2]="Edges"}(E||(_.LineMode=E={})),function(v){v[v.Top=1]="Top",v[v.Bottom=2]="Bottom",v[v.Right=3]="Right",v[v.Left=4]="Left"}(m||(_.Direction=m={})),_.DirVectors=((b={})[m.Bottom]={x:0,y:1},b[m.Top]={x:0,y:-1},b[m.Right]={x:1,y:0},b[m.Left]={x:-1,y:0},b)},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.setHeaderColor=void 0;var b=["#FF9800","#607D8B","#00C7B5","#03A9F4","#9575CD","#F06292"];_.setHeaderColor=function(E){E.forEach(function(m){var v=m.$connection;if(v){var f=E.getItem(v[0][1]).headerColor;m.$expandColor=f||b[(m.$level+1)%b.length]}var d=b[m.$level%b.length];m.partner&&(d=b[(m.$level-1)%b.length]),m.assistant&&(d=b[(m.$level+2)%b.length]),m.stroke=m.stroke||d,m.headerColor=m.headerColor||d})}},function(W,_,y){var b,E=this&&this.__extends||(b=function(r,a){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(i[e]=n[e])},b(r,a)},function(r,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function i(){this.constructor=r}b(r,a),r.prototype=a===null?Object.create(a):(i.prototype=a.prototype,new i)}),m=this&&this.__assign||function(){return m=Object.assign||function(r){for(var a,i=1,n=arguments.length;i<n;i++)for(var e in a=arguments[i])Object.prototype.hasOwnProperty.call(a,e)&&(r[e]=a[e]);return r},m.apply(this,arguments)},v=this&&this.__spreadArray||function(r,a,i){if(i||arguments.length===2)for(var n,e=0,t=a.length;e<t;e++)!n&&e in a||(n||(n=Array.prototype.slice.call(a,0,e)),n[e]=a[e]);return r.concat(n||Array.prototype.slice.call(a))};Object.defineProperty(_,"__esModule",{value:!0}),_.Swimlane=void 0;var f=y(0),d=y(1),p=y(57),u=y(58),s=y(19),l=function(r){function a(i,n){var e=r.call(this,i,n)||this;return e.subHeaderNearCells={rows:[],cols:[]},e.children={},e}return E(a,r),a.prototype.getBaseType=function(){return"swimlane"},a.prototype.isEditable=function(i){var n,e;if(i){var t=this.getSubHeaderType(i),o=this.config[t==="col"?"subHeaderCols":"subHeaderRows"],c=(o==null?void 0:o.headers).find(function(h){var g=h.id;return i===g});return typeof(c==null?void 0:c.editable)=="boolean"?c.editable:o==null?void 0:o.editable}return(e=(n=this.config)===null||n===void 0?void 0:n.header)===null||e===void 0?void 0:e.editable},a.prototype.getChildHtmlNodes=function(i,n){return this.removeExtraDefaults(n),this.setExtraDefaults(i,n),r.prototype.getChildHtmlNodes.call(this,i,n)},a.prototype.render=function(i){var n,e=this.config,t=e.id,o=e.header,c=e.open,h=e.$width,g=e.$height,x=e.subHeaderCols,C=e.subHeaderRows,k=i||this.data.getChildren(this.id,!1);n=this.getChildHtmlNodes(this.config,k);var I=!(o!=null&&o.enable)||!(o!=null&&o.closable)||c;if(n.length||!I){this.setServiceProp(this.config);var O=o==null?void 0:o.enable,D=I&&(x==null?void 0:x.enable),A=I&&(C==null?void 0:C.enable),H="dhx_diagram_item dhx_diagram_group ";return o!=null&&o.enable&&(H+="dhx_diagram_group--position_".concat(o.position)),(0,f.el)("div.dhx_diagram_swimlane",{_key:t},[(0,f.el)("div",{"data-dhx-id":t,class:"".concat(H," ").concat(this.getCss()),style:(0,s.getSwimlaneContainerStyle)(this.config,this.getCoords(this.config))},[(0,f.el)("div.dhx_diagram_group__children",v([(0,f.sv)("svg.dhx_diagram_group__children",{xmlns:"http://www.w3.org/2000/svg",reserveAspectRatio:"none",width:h,height:g},this.getChildSvgNodes(this.config,this.data))],n,!0)),O&&this.getGroupHeader(this.config,this.getEditorNode()),D&&this.getSubHeaderNode(this.config,"cols"),A&&this.getSubHeaderNode(this.config,"rows")]),(0,f.el)("div.dhx_diagram_group--background",{style:(0,s.getSwimlaneBackGround)(this.config,this.getCoords(this.config))})])}},a.prototype.setDefaults=function(i){this.setServiceProp(i),r.prototype.setDefaults.call(this,i);var n={fontSize:14,lineHeight:14,textAlign:"center",textVerticalAlign:"center",fontStyle:"normal",fontWeight:"500",fontColor:"#4C4C4C",iconColor:"#808080",editable:!0,fill:"#EEF1F6"};return i.subHeaderRows&&(i.subHeaderRows=m(m({height:40,enable:!0,position:"left"},n),i.subHeaderRows),Array.isArray(i.subHeaderRows.headers)||(i.subHeaderRows.headers=[])),i.subHeaderCols&&(i.subHeaderCols=m(m({height:40,enable:!0,position:"top"},n),i.subHeaderCols),Array.isArray(i.subHeaderCols.headers)||(i.subHeaderCols.headers=[])),i},a.prototype.setExtraDefaults=function(i,n){var e,t,o,c,h,g,x,C,k=i.layout,I=i.height,O=i.width,D=i.header,A=i.x,H=i.y,S=i.subHeaderCols,$=i.subHeaderRows,w=i.style,T=w.stroke,F=w.strokeWidth,z={},B=0,L=0,M=this.getHeaderStates(i),P=M.isHeaderBottom,V=M.isHeaderLeft,R=M.isHeaderRight,q=M.isHeaderTop,G=M.isSubHeaderBottom,U=M.isSubHeaderLeft,Z=M.isSubHeaderRight,Q=M.isSubHeaderTop,tt=parseFloat(D==null?void 0:D.height)||0,et=parseFloat($==null?void 0:$.height)||0,ot=parseFloat(S==null?void 0:S.height)||0;if(I){var rt=0;(q||P)&&(rt+=tt),(Q||G)&&(rt+=ot),B=(I-rt)/k.length}if(O){rt=0,(R||V)&&(rt+=tt),(Z||U)&&(rt+=et);for(var st=0,ut=0;ut<k.length;ut++){var at=k[ut].length;at>st&&(st=at)}L=(O-rt)/st}this.subHeaderNearCells={rows:[],cols:[]},this.children={};for(var ct=0;ct<n.length;ct++)this.children[n[ct].id]=n[ct];for(ct=0;ct<k.length;ct++)for(var ft=k[ct],vt=0;vt<ft.length;vt++){var _t=ft[vt],gt=z[_t],j=vt!==0&&z[ft[vt-1]],nt=ct!==0&&z[k[ct-1][vt]];if(!gt&&this.children[_t]){z[_t]=this.children[_t],z[_t].height=B,z[_t].width=L,z[_t].$rowCount=1,z[_t].$colCount=1,vt===0?(rt=0,V&&(rt+=tt),U&&(rt+=et),z[_t].x=A+rt,this.subHeaderNearCells.rows.push(z[_t])):z[_t].x=j.x+j.width,ct===0?(rt=0,q&&(rt+=tt),Q&&(rt+=ot),z[_t].y=H+rt,this.subHeaderNearCells.cols.push(z[_t])):z[_t].y=nt.y+nt.height;var xt=this.subHeaderNearCells.rows.length-1;!((e=i==null?void 0:i.subHeaderRows)===null||e===void 0)&&e.enable&&(!((t=i.subHeaderRows)===null||t===void 0)&&t.headers[xt]||(i.subHeaderRows.headers[xt]={text:p.default.shapebar.untitled,id:(0,d.uid)()}),!((c=(o=i.subHeaderRows)===null||o===void 0?void 0:o.headers[xt])===null||c===void 0)&&c.id||(i.subHeaderRows.headers[xt].id=(0,d.uid)()));var bt=this.subHeaderNearCells.cols.length-1;!((h=i==null?void 0:i.subHeaderCols)===null||h===void 0)&&h.enable&&(!((g=i.subHeaderCols)===null||g===void 0)&&g.headers[bt]||(i.subHeaderCols.headers[bt]={text:p.default.shapebar.untitled,id:(0,d.uid)()}),!((C=(x=i.subHeaderCols)===null||x===void 0?void 0:x.headers[bt])===null||C===void 0)&&C.id||(i.subHeaderCols.headers[bt].id=(0,d.uid)())),z[_t].style.stroke=T,z[_t].style.strokeWidth=F}else gt&&(j===gt&&nt!==gt&&(z[_t].width+=L,z[_t].$colCount++),nt===gt&&j!==gt&&(z[_t].height+=B,z[_t].$rowCount++));j&&j!==gt&&(z[_t].$borderPosition.left=!0),nt&&nt!==gt&&(z[_t].$borderPosition.top=!0)}z=null},a.prototype.removeExtraDefaults=function(i){for(var n=0;n<i.length;n++)i[n].$borderPosition={left:!1,top:!1}},a.prototype.getSubHeaderNode=function(i,n){var e,t,o=i.header,c=i.subHeaderCols,h=i.subHeaderRows,g=i.height,x=i.width,C=i.id,k=this.getHeaderStates(i),I=k.isHeaderBottom,O=k.isHeaderLeft,D=k.isHeaderRight,A=k.isHeaderTop,H=k.isSubHeaderBottom,S=k.isSubHeaderLeft,$=k.isSubHeaderRight,w=k.isSubHeaderTop,T=parseFloat(o==null?void 0:o.height)||0,F=parseFloat(h==null?void 0:h.height)||0,z=parseFloat(c==null?void 0:c.height)||0,B=0,L=0,M=0,P=0;n==="cols"&&(L=z,B=x,w&&A&&(P=T),H&&(P=g-z,I&&(P=g-T-z)),O&&(M=T,B=x-T),D&&(B=x-T)),n==="rows"&&(L=g,B=F,S&&O&&(M=T),$&&(M=x-F,D&&(M=x-F-T)),A&&(P=T,L=g-T),I&&(L=g-T),w&&(P+=z,L-=z),H&&(L-=z));for(var V={height:L,width:B,top:P,left:M},R=this.subHeaderNearCells[n].length,q=n==="cols"?c.headers:h.headers,G=[],U=0;U<R;U++){var Z=q[U],Q=n==="rows"?(e=this.subHeaderNearCells.rows[U])===null||e===void 0?void 0:e.height:"100%",tt="100%";if(Z.$subMenu={enable:!0,data:[]},Z.$subMenu.enable){var et="".concat(C,"/").concat(Z.id,"/");n==="cols"&&(Z.$subMenu.data=[{id:et+"add_column_left",value:p.default.menuAddColumnLeft,icon:"dxi dxi-table-column-plus-before",add:"left"},{id:et+"add_column_right",value:p.default.menuAddColumnRight,icon:"dxi dxi-table-column-plus-after",add:"right"},{id:et+"move_column_left",value:p.default.menuMoveColumnLeft,icon:"dxi dxi-arrow-left",disabled:U===0,move:"left"},{id:et+"move_column_right",value:p.default.menuMoveColumnRight,icon:"dxi dxi-arrow-right",disabled:U===R-1,move:"right"},{type:"separator"},{id:et+"remove",value:p.default.menuDeleteCol,icon:"dxi dxi-delete-outline",disabled:R===1,remove:"col"}]),n==="rows"&&(Z.$subMenu.data=[{id:et+"add_row_up",value:p.default.menuAddRowUp,icon:"dxi dxi-table-row-plus-before",add:"up"},{id:et+"add_row_down",value:p.default.menuAddRowDown,icon:"dxi dxi-table-row-plus-after",add:"down"},{id:et+"move_row_up",value:p.default.menuMoveRowUp,icon:"dxi dxi-arrow-up",disabled:U===0,move:"up"},{id:et+"move_row_down",value:p.default.menuMoveRowDown,icon:"dxi dxi-arrow-down",disabled:U===R-1,move:"down"},{type:"separator"},{id:et+"remove",value:p.default.menuDeleteRow,icon:"dxi dxi-delete-outline",disabled:R===1,remove:"row"}])}n==="cols"&&(tt=(t=this.subHeaderNearCells.cols[U])===null||t===void 0?void 0:t.width,(S&&U===0||$&&U===R-1)&&(tt+=F)),G.push(this.getSubHeaderCellNode(m(m({},Z),{type:n,index:U,width:tt,height:Q}),this.config,this.getEditorNode()))}return(0,f.el)("div.dhx_diagram_swimlane__subheader.dhx_diagram_swimlane__subheader--position_".concat(n),{style:V},v([],G,!0))},a.prototype.getSubHeaderCellNode=function(i,n,e){var t=this.getHeaderStates(n),o=t.isSubHeaderLeft,c=t.isSubHeaderTop,h=n.style,g=h.strokeWidth,x=h.stroke,C=i.width,k=i.height,I=i.id,O=i.text,D=i.type,A=i.index,H=D==="cols"?n.subHeaderCols:n.subHeaderRows,S=H.lineHeight,$=H.textAlign,w=H.textVerticalAlign,T=H.fontSize,F=H.fontColor,z=H.fontStyle,B=H.fontWeight,L=H.fill,M=H.iconColor,P={lineHeight:i.lineHeight||S,textAlign:i.textAlign||$,textVerticalAlign:i.textVerticalAlign||w,fontSize:i.fontSize||T,fontColor:i.fontColor||F,fontStyle:i.fontStyle||z,fontWeight:i.fontWeight||B},V={width:C,height:k};if(D==="cols"){var R=A!==0?", ".concat(g,"px 0px 0px ").concat(x," inset"):"";V.boxShadow="0px ".concat(c?"-":"").concat(g,"px 0px ").concat(x," inset ").concat(R)}if(D==="rows"){var q=A!==0?", 0px ".concat(g,"px 0px ").concat(x," inset"):"";V.boxShadow="".concat(o?"-":"").concat(g,"px 0px 0px ").concat(x," inset ").concat(q)}return(0,f.el)("div.dhx_diagram_swimlane__subheader_container",{_key:I,subheader_id:I,style:V},[(0,f.el)("div.dhx_diagram_swimlane__subheader_text",{style:m({},(0,s.getTextStyle)(m(m({},P),{container:{width:C,height:k}})))},n.$editable&&this.editableProperty.editableId===I?[e]:O),i.$subMenu.enable&&(0,s.getMenuIcon)({dir:D,color:i.iconColor||M}),(0,f.el)("div",{style:{position:"absolute",width:C,height:k,background:i.fill||L,zIndex:-1}})])},a.prototype.getHeaderStates=function(i){var n=i.header,e=i.subHeaderRows,t=i.subHeaderCols;return{isHeaderTop:(n==null?void 0:n.enable)&&(n==null?void 0:n.position)==="top",isHeaderBottom:(n==null?void 0:n.enable)&&(n==null?void 0:n.position)==="bottom",isHeaderRight:(n==null?void 0:n.enable)&&(n==null?void 0:n.position)==="right",isHeaderLeft:(n==null?void 0:n.enable)&&(n==null?void 0:n.position)==="left",isSubHeaderTop:(t==null?void 0:t.enable)&&(t==null?void 0:t.position)==="top",isSubHeaderBottom:(t==null?void 0:t.enable)&&(t==null?void 0:t.position)==="bottom",isSubHeaderRight:(e==null?void 0:e.enable)&&(e==null?void 0:e.position)==="right",isSubHeaderLeft:(e==null?void 0:e.enable)&&(e==null?void 0:e.position)==="left"}},a.prototype.getSubHeaderType=function(i){var n,e,t=this.config,o=t.subHeaderCols,c=t.subHeaderRows,h=(c==null?void 0:c.enable)&&((n=c==null?void 0:c.headers)===null||n===void 0?void 0:n.length),g=(o==null?void 0:o.enable)&&(o==null?void 0:o.headers.length),x=-1,C=-1;return h&&(x=c.headers.findIndex(function(k){var I=k.id;return i===I}),x!==-1&&(e="row")),g&&(C=o.headers.findIndex(function(k){var I=k.id;return i===I}),C!==-1&&(e="col")),e},a}(u.BaseGroup);_.Swimlane=l},function(W,_,y){var b,E=this&&this.__extends||(b=function(p,u){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&(s[r]=l[r])},b(p,u)},function(p,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function s(){this.constructor=p}b(p,u),p.prototype=u===null?Object.create(u):(s.prototype=u.prototype,new s)}),m=this&&this.__spreadArray||function(p,u,s){if(s||arguments.length===2)for(var l,r=0,a=u.length;r<a;r++)!l&&r in u||(l||(l=Array.prototype.slice.call(u,0,r)),l[r]=u[r]);return p.concat(l||Array.prototype.slice.call(u))};Object.defineProperty(_,"__esModule",{value:!0}),_.Group=void 0;var v=y(0),f=y(19),d=function(p){function u(s,l){return p.call(this,s,l)||this}return E(u,p),u.prototype.setDefaults=function(s){return s.width=s.width||300,s.height=s.height||200,this.setServiceProp(s),p.prototype.setDefaults.call(this,s),s},u.prototype.render=function(){this.setServiceProp(this.config);var s=this.config,l=s.id,r=s.header,a=s.$width,i=s.$height,n="dhx_diagram_item dhx_diagram_group ";r!=null&&r.enable&&(n+="dhx_diagram_group--position_".concat(r.position));var e=this.getChildHtmlNodes(this.config,this.data),t=this.getChildSvgNodes(this.config,this.data);return(0,v.el)("div",{_key:l,"data-dhx-id":l,class:"".concat(n," ").concat(this.getCss()),style:(0,f.getGroupContainerStyle)(this.config,this.getCoords(this.config))},[(0,v.el)("div.dhx_diagram_group__children",m([(0,v.sv)("svg.dhx_diagram_group__children",{xmlns:"http://www.w3.org/2000/svg",reserveAspectRatio:"none",width:a,height:i},t)],e,!0)),(r==null?void 0:r.enable)&&this.getGroupHeader(this.config,this.getEditorNode())])},u}(y(58).BaseGroup);_.Group=d},function(W,_,y){var b,E=this&&this.__extends||(b=function(p,u){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&(s[r]=l[r])},b(p,u)},function(p,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function s(){this.constructor=p}b(p,u),p.prototype=u===null?Object.create(u):(s.prototype=u.prototype,new s)}),m=this&&this.__assign||function(){return m=Object.assign||function(p){for(var u,s=1,l=arguments.length;s<l;s++)for(var r in u=arguments[s])Object.prototype.hasOwnProperty.call(u,r)&&(p[r]=u[r]);return p},m.apply(this,arguments)},v=this&&this.__spreadArray||function(p,u,s){if(s||arguments.length===2)for(var l,r=0,a=u.length;r<a;r++)!l&&r in u||(l||(l=Array.prototype.slice.call(u,0,r)),l[r]=u[r]);return p.concat(l||Array.prototype.slice.call(u))};Object.defineProperty(_,"__esModule",{value:!0}),_.GroupSwimlane=void 0;var f=y(0),d=function(p){function u(s,l){var r=p.call(this,s,l)||this;return r.setServiceProp(s),r}return E(u,p),u.prototype.setServiceProp=function(s){var l=s.height,r=s.width,a=s.$borderPosition;s.$captureArea=s.$captureArea||"out",s.$borderPosition=m({left:!1,top:!1},a),s.entryArea.catchArea=25,s.$width=r,s.$height=l},u.prototype.setDefaults=function(s){return p.prototype.setDefaults.call(this,s),delete s.header,s},u.prototype.render=function(){this.setServiceProp(this.config);var s=this.config,l=s.id,r=s.header,a=s.$width,i=s.$height,n="dhx_diagram_item dhx_diagram_group ";r!=null&&r.enable&&(n+="dhx_diagram_group--position_".concat(r.position," "));var e=this.getChildHtmlNodes(this.config,this.data),t=this.getChildSvgNodes(this.config,this.data);return(0,f.el)("div.dhx_diagram_group_swimlane",{_key:l},[(0,f.el)("div",{"data-dhx-id":l,class:"".concat(n," ").concat(this.getCss()),style:function(o,c){var h,g=o.$width,x=o.$height,C=o.$captureArea,k=o.$borderPosition,I=o.style,O=I.overFill,D=I.partiallyFill,A=I.fill,H=I.strokeWidth,S=I.stroke;switch(C){case"over":h=O;break;case"partially":h=D;break;default:h=A}var $=k!=null&&k.left?H:0,w=k!=null&&k.top?H:0,T="".concat($,"px ").concat(w,"px 0px ").concat(S," inset");return{position:"absolute",background:h,width:g,height:x,top:c.y,left:c.x,boxShadow:T}}(this.config,this.getCoords(this.config))},[(0,f.el)("div.dhx_diagram_group__children",v([(0,f.sv)("svg.dhx_diagram_group__children",{xmlns:"http://www.w3.org/2000/svg",reserveAspectRatio:"none",width:a,height:i},t)],e,!0))])])},u}(y(58).BaseGroup);_.GroupSwimlane=d},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.drag=void 0;var b=function(){function E(){var m=this;this._moveHandler=function(v){var f=v.clientX,d=v.clientY;if(v.pointerType==="touch"&&v.preventDefault(),m._handler.onMove&&(Math.abs(f-m._start.x)>5||Math.abs(d-m._start.y)>5)){m._isMove=!0;var p={x:f-m._start.x,y:d-m._start.y};m._handler.onMove(v,p,m._context),m._start.x+=p.x*m._scale,m._start.y+=p.y*m._scale}},this._upHandler=function(v){v.pointerType==="touch"&&v.preventDefault(),document.removeEventListener("pointermove",m._moveHandler),document.removeEventListener("pointerup",m._upHandler),document.body.classList.remove("dhx_noselect"),m._isMove?m._handler.onUp(v):typeof m._handler.connectOnUp=="function"&&m._handler.connectOnUp(v),m._isMove=m._handler=m._start=null}}return E.prototype.start=function(m,v,f,d){this._handler=v,this._context=f,this._scale=d||1,this._start={x:m.clientX,y:m.clientY},document.addEventListener("pointermove",this._moveHandler),document.addEventListener("pointerup",this._upHandler),document.body.classList.add("dhx_noselect")},E}();_.drag=new b},function(W,_,y){var b,E=this&&this.__extends||(b=function(o,c){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var x in g)Object.prototype.hasOwnProperty.call(g,x)&&(h[x]=g[x])},b(o,c)},function(o,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function h(){this.constructor=o}b(o,c),o.prototype=c===null?Object.create(c):(h.prototype=c.prototype,new h)}),m=this&&this.__assign||function(){return m=Object.assign||function(o){for(var c,h=1,g=arguments.length;h<g;h++)for(var x in c=arguments[h])Object.prototype.hasOwnProperty.call(c,x)&&(o[x]=c[x]);return o},m.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.BaseDiagramEditor=void 0;var v=y(1),f=y(0),d=y(3),p=y(14),u=y(5),s=y(29),l=y(97),r=y(99),a=y(209),i=y(210),n=y(211),e=y(37),t=function(o){function c(h,g){var x=o.call(this,h,(0,v.extend)({scale:1,grid:!0,gridStep:10,shapeToolbar:!0,defaults:{},resizePoints:!0},g))||this;return x._touch={duration:350},x.version="6.0.1",x.events=new d.EventSystem(x),x._initDiagram(),x._initUI(h),x.history=new r.HistoryManager(x.diagram.data),x.model=new i.CopyManager(x),x._keyManager=new p.KeyManager(function(C,k){return k===x.diagram._uid}),x._setHandlers(),x}return E(c,o),c.prototype.paint=function(){this.view.paint()},c.prototype.parse=function(h){this.diagram.data.parse(h)},c.prototype.serialize=function(){return this.diagram.data.serialize()},c.prototype.zoomIn=function(h){h===void 0&&(h=.05),this.config.scale=this.diagram.config.scale+=h,this.events.fire(e.DiagramEditorEvents.zoomIn,[h]),this.paint()},c.prototype.zoomOut=function(h){h===void 0&&(h=.05),this.config.scale=this.diagram.config.scale=this.config.scale<=h?h:this.config.scale-h,this.events.fire(e.DiagramEditorEvents.zoomOut,[h]),this.paint()},c.prototype.import=function(h){this.diagram.data.parse(h.data.serialize())},c.prototype.destructor=function(){this._keyManager&&this._keyManager.destructor(),this.view&&this.view.destructor(),this.diagram&&this.diagram.destructor(),this.events&&this.events.clear(),this.history.reset(),this.view=this.diagram=this.events=this.history=this.model=this._resizer=this._selectionBox=null,this.unmount()},c.prototype._setHandlers=function(){var h=this;this._initHotkeys(),this.diagram.events.on(s.SelectionEvents.afterUnSelect,function(g){var x=g.id,C=h.diagram.data.getItem(x);C!=null&&C.$connectMode&&(C.$connectMode=!1),h.paint()}),[s.DataEvents.change,s.DataEvents.filter,s.SelectionEvents.afterSelect].forEach(function(g){return h.diagram.events.on(g,function(){return h.paint()})}),[e.DiagramEditorEvents.zoomIn,e.DiagramEditorEvents.zoomOut].forEach(function(g){h.events.on(g,function(){var x=document.getElementById("scaleValue");x&&(x.innerText=(100*h.diagram.config.scale).toFixed(0)+"%")})}),this.diagram.events.on(s.DiagramEvents.emptyAreaMouseDown,function(g){if(h._resizer.connect.removeNearShape(),g.button===0){var x=h.diagram.getRootView().node.el,C=h.getBlockSelectedCoords(g,x);g.pointerType==="mouse"?(h._dragStart(g,x,C),h.paint()):(document.addEventListener("contextmenu",function(k){return k.preventDefault()},{once:!0}),h._touch.timer=setTimeout(function(){h._dragStart(g,x,C)},h._touch.duration),document.addEventListener("pointerup",function(k){k.timeStamp-g.timeStamp<h._touch.duration&&h._clearTouchTimer()},{once:!0}),document.addEventListener("pointermove",function(k){k.timeStamp-g.timeStamp<h._touch.duration&&h._clearTouchTimer()},{once:!0}),h.paint())}}),(0,f.awaitRedraw)().then(function(){h.view.getRootView().node.el.addEventListener("wheel",function(g){(g.ctrlKey||g.metaKey)&&((g.deltaY||g.detail||g.wheelDelta)>0?h.zoomOut():h.zoomIn(),g.preventDefault?g.preventDefault():g.returnValue=!1)})}),this.diagram.events.on(s.DiagramEvents.beforeRender,function(g){return h._diagramSize=g})},c.prototype._initHotkeys=function(){var h=this;this._keyManager.addHotKey("ctrl+a",function(g){if(!h.editbar.isFocused()){g.preventDefault();var x=[];h.diagram.data.forEach(function(O){h.config.type!=="default"&&O.$item.getBaseType()==="line"||x.push(O.id)});for(var C=0,k=x;C<k.length;C++){var I=k[C];h.diagram.selection.add({id:I,join:!0,batch:x})}h.paint()}}),this._keyManager.addHotKey("ctrl+shift+a",function(g){h.editbar.isFocused()||(g.preventDefault(),h.diagram.selection.remove())}),this._keyManager.addHotKey("delete",function(){h.editbar.isFocused()||h._removeSelected()}),this._keyManager.addHotKey("backspace",function(){h.editbar.isFocused()||h.diagram.editor.isEditable()||h._removeSelected()}),this._keyManager.addHotKey("ctrl+z",function(){h.editbar.isFocused()||h.history.undo()}),this._keyManager.addHotKey("ctrl+shift+z",function(){h.editbar.isFocused()||h.history.redo()}),this._keyManager.addHotKey("arrowLeft",function(){h.editbar.isFocused()||h.diagram.selection.getIds().forEach(function(g){var x=h.diagram.data.getItem(g);x.$group||h._moveItem(x,h.config.gridStep,"left")})}),this._keyManager.addHotKey("arrowRight",function(){h.editbar.isFocused()||h.diagram.selection.getIds().forEach(function(g){var x=h.diagram.data.getItem(g);x.$group||h._moveItem(x,h.config.gridStep,"right")})}),this._keyManager.addHotKey("arrowUp",function(){h.editbar.isFocused()||h.diagram.selection.getIds().forEach(function(g){var x=h.diagram.data.getItem(g);x.$group||h._moveItem(x,h.config.gridStep,"up")})}),this._keyManager.addHotKey("arrowDown",function(){h.editbar.isFocused()||h.diagram.selection.getIds().forEach(function(g){var x=h.diagram.data.getItem(g);x.$group||h._moveItem(x,h.config.gridStep,"down")})}),this._keyManager.addHotKey("alt+ctrl+c",function(g){g.preventDefault(),h.editbar.isFocused()||h.model.copyStyles()}),this._keyManager.addHotKey("alt+ctrl+v",function(){h.editbar.isFocused()||h.model.pasteStyles()}),this._keyManager.addHotKey("alt+1",function(){h.view.isVisible("shapebar")?h.view.hide("shapebar"):h.view.show("shapebar")}),this._keyManager.addHotKey("alt+2",function(){h.view.isVisible("editbar")?h.view.hide("editbar"):h.view.show("editbar")}),this._keyManager.addHotKey("alt+3",function(){h.config.grid=!h.config.grid,h.paint()})},c.prototype._getDefaults=function(){var h={};return Object.keys(s.flowShapes).forEach(function(g){return h[g]={}}),h=m(m({},h),{text:{text:"Text"}}),m(m({},h),this.config.defaults)},c.prototype._removeItem=function(h){var g=this.diagram.data.getItem(h);!g||(g==null?void 0:g.$level)===0&&this.config.type!=="default"||(this.diagram.data.remove(h),this._resizer.onUp())},c.prototype._getToolbarConfig=function(h){var g=h.type,x=h.shapeToolbar,C=[];switch(g){case"mindmap":C.push.apply(C,(0,n.getMindmapShapeToolbar)(s.locale));break;case"org":C.push.apply(C,(0,n.getOrgShapeToolbar)(s.locale));break;default:C.push.apply(C,(0,n.getDefaultShapeToolbar)(s.locale,this.config))}if(typeof x=="boolean"&&x)return C;if(Array.isArray(x)&&x.length){var k=[];return x.forEach(function(I){typeof I=="boolean"&&I&&k.push.apply(k,C);var O=C.find(function(D){return D.id===I});typeof I=="string"&&O&&k.push(O),(0,v.isObject)(I)&&typeof(I==null?void 0:I.id)=="string"&&typeof(I==null?void 0:I.content)=="string"&&k.push(I)}),k}return[]},c.prototype._moveItem=function(h,g,x){var C=this;if(!(arguments.length<3)&&h){var k=h.$item,I=h.id,O=h.x,D=h.y,A=h.dx,H=A===void 0?0:A,S=h.dy,$=S===void 0?0:S,w=k.getBaseType();w!=="group"&&w!=="swimlane"||this.diagram.data.eachChild(I,function(F){switch(x){case"left":if(C.config.type==="default")F.x=F.x%g==0?F.x-g:Math.ceil((F.x-g)/g)*g;else{var z=F.dx||0,B=F.x;F.dx=(B+z)%g==0?H-g:Math.ceil((B+z-g)/g)*g-B}break;case"right":C.config.type==="default"?F.x=F.x%g==0?F.x+g:Math.floor((F.x+g)/g)*g:(z=F.dx||0,B=F.x,F.dx=(B+z)%g==0?z+g:Math.floor((B+z+g)/g)*g-B);break;case"up":if(C.config.type==="default")F.y=F.y%g==0?F.x-g:Math.ceil((F.y-g)/g)*g;else{var L=F.dy||0,M=F.dy||0;F.dy=(M+L)%g==0?L-g:Math.ceil((M+L-g)/g)*g-M}break;case"down":C.config.type==="default"?F.y=F.y%g==0?F.x+g:Math.floor((F.y+g)/g)*g:(L=F.dy||0,M=F.dy||0,F.dy=(M+L)%g==0?L+g:Math.floor((M+L+g)/g)*g-M)}});var T={};switch(x){case"left":T=this.config.type==="default"?{x:O%g==0?O-g:Math.ceil((O-g)/g)*g}:{dx:(O+H)%g==0?H-g:Math.ceil((O+H-g)/g)*g-O};break;case"right":T=this.config.type==="default"?{x:O%g==0?O+g:Math.floor((O+g)/g)*g}:{dx:(O+H)%g==0?H+g:Math.floor((O+H+g)/g)*g-O};break;case"up":T=this.config.type==="default"?{y:D%g==0?D-g:Math.ceil((D-g)/g)*g}:{dy:(D+$)%g==0?$-g:Math.ceil((D+$-g)/g)*g-D};break;case"down":T=this.config.type==="default"?{y:D%g==0?D+g:Math.floor((D+g)/g)*g}:{dy:(D+$)%g==0?$+g:Math.floor((D+$+g)/g)*g-D}}this.diagram.data.update(I,T)}},c.prototype._removeSelected=function(){var h=this,g=this.diagram.selection.getIds();if(g.length)if(g.length===1){var x=this.diagram.selection.getItem();this._removeItem(x.id)}else g.forEach(function(C){return h._removeItem(C)}),this.diagram.selection.remove()},c.prototype._dragStart=function(h,g,x){var C=this;this._selectionBox=new a.SelectionBox(x,this.diagram),l.drag.start(h,{onMove:function(k){C._selectionBox.end=C.getBlockSelectedCoords(k,g),C.paint()},onUp:function(){h.pointerType==="touch"&&C._clearTouchTimer(),C._selectionBox.isValid()&&C._selectionBox.addSelected(),C._selectionBox=null,C.paint()}},null)},c.prototype._clearTouchTimer=function(){this._touch.timer&&(clearTimeout(this._touch.timer),this._touch.timer=null),document.body.classList.remove("dhx_notouch")},c.prototype.getBlockSelectedCoords=function(h,g){var x=g.getBoundingClientRect(),C=this.diagram.config.margin,k=this._diagramSize||{left:-C.x,top:-C.y},I=this.diagram.config.scale,O=g.scrollLeft,D=g.scrollTop;return{x:(h.clientX-x.left+O)/I-C.x+(k.left+C.x),y:(h.clientY-x.top+D)/I-C.y+(k.top+C.y),$rx:h.clientX-x.left+O,$ry:h.clientY-x.top+D}},c}(u.View);_.BaseDiagramEditor=t},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.HistoryManager=void 0;var b=y(8),E=function(){function m(v){var f=this;this.saveDelay=500,this.disabled=!1,this._data=v,this.reset(),this._data.events.on(b.DataEvents.change,function(d,p){f._inProgress||!p||f.disabled||f.add(f._data.serialize())})}return m.prototype.enable=function(){this.reset(),this.disabled=!1},m.prototype.disable=function(){this.disabled=!0},m.prototype.add=function(v){if(!this.disabled){this._position!==this._state.length-1&&(this._state=this._state.slice(0,this._position+1));var f=this._state.length-1,d=new Date,p={time:d,state:v};d.valueOf()-this._state[f].time.valueOf()>this.saveDelay?(this._state.push(p),this._position++):this._state[f]=p}},m.prototype.reset=function(){this._inProgress||(this._state=[{time:new Date,state:this._data.serialize()}],this._position=0)},m.prototype.undo=function(v){this.isUndo()&&!this.disabled&&(v?(this._position=0,this._state=this._state.slice(0,1)):this._position--,this._apply(this._state[this._position]))},m.prototype.redo=function(){this.isRedo()&&!this.disabled&&(this._position++,this._apply(this._state[this._position]))},m.prototype.isUndo=function(){return this._position>0},m.prototype.isRedo=function(){return this._position+1<=this._state.length-1},m.prototype._apply=function(v){this._inProgress=!0,this._data.parse(JSON.parse(JSON.stringify(v.state))),this._inProgress=!1},m}();_.HistoryManager=E},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(s){for(var l,r=1,a=arguments.length;r<a;r++)for(var i in l=arguments[r])Object.prototype.hasOwnProperty.call(l,i)&&(s[i]=l[i]);return s},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.View=void 0;var E=y(101),m=y(16),v=y(212),f=y(214),d=y(215),p=y(216),u=function(){function s(l,r){var a,i,n,e,t,o;this._views={},this._editor=r,this._diagram=r.diagram,this._config=r.config.view,this._isDefault=this._diagram.config.type==="default";var c=this._isDefault?" dhx_editor-default":" dhx_editor-org",h=[{id:"area",css:"dhx_editor_area"},{id:"editbar",width:(a=this._config.editbar.width)!==null&&a!==void 0?a:d.base.editbar.width,css:"dhx_editor_editbar "+(((i=this._config.editbar)===null||i===void 0?void 0:i.css)||""),hidden:!this.isViewEnable("editbar")}];this._isDefault&&h.unshift({id:"shapebar",width:(n=this._config.shapebar.width)!==null&&n!==void 0?n:d.base.shapebar.width,css:"dhx_editor_shapebar "+(((e=this._config.shapebar)===null||e===void 0?void 0:e.css)||""),hidden:!this.isViewEnable("shapebar")}),this._layout=new m.Layout(l,{height:"100%",css:"dhx_editor"+c,rows:[{id:"toolbar",height:"content",css:"dhx_editor_toolbar "+(((t=this._config.toolbar)===null||t===void 0?void 0:t.css)||""),hidden:!this.isViewEnable("toolbar")},{id:"main",css:"dhx_editor__wrapper",cols:h}]}),this.events=this._layout.events,this._toolbar=new v.Toolbar(b({items:this._isDefault?E.defaultToolbarItems:E.orgToolbarItems},this._config.toolbar||{}),this._editor),this._editbar=new p.Editbar(this._layout.getCell("editbar"),this._config.editbar,this._editor),this._views.toolbar=this._toolbar,this._views.editbar=this._editbar,this._isDefault&&(this._shapebar=new f.Shapebar(b(b({},this._config.shapebar||{}),{preview:b({gap:d.base.shapebar.gap,scale:d.base.shapebar.scale},((o=this._config.shapebar)===null||o===void 0?void 0:o.preview)||{})}),this._editor),this._layout.getCell("shapebar").attach(this._shapebar),this._views.shapebar=this._shapebar),this._layout.getCell("toolbar").attach(this._toolbar),this._layout.getCell("area").attach(this._diagram)}return s.prototype.hide=function(l){var r=this;l&&(l=l.toLocaleLowerCase(),this._views[l])?this._layout.getCell(l).hide():this._layout.forEach(function(a){return r._views[a.id]&&a.hide()})},s.prototype.show=function(l){var r=this;l&&(l=l.toLocaleLowerCase(),this._views[l])?this._layout.getCell(l).show():this._layout.forEach(function(a){return r._views[a.id]&&a.show()})},s.prototype.isVisible=function(l){var r;return(r=this._layout.getCell(l==null?void 0:l.toLocaleLowerCase()))===null||r===void 0?void 0:r.isVisible()},s.prototype.getViews=function(){return this._views},s.prototype.paint=function(){this._layout.paint(),this._diagram.paint()},s.prototype.destructor=function(){this._layout.destructor()},s.prototype.getRootView=function(){return this._layout.getRootView()},s.prototype.isViewEnable=function(l){var r,a;return!!((a=(r=this._config[l])===null||r===void 0?void 0:r.show)!==null&&a!==void 0?a:this._config[l])},s}();_.View=u},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.meta=_.orgToolbarItems=_.defaultToolbarItems=void 0;var b=y(1),E=y(0);function m(d,p){var u,s;p.config.type==="default"&&p.diagram.autoPlace({root:p.diagram.selection.getIds()[0],placeMode:d,mode:(u=p.config.autoplacement)===null||u===void 0?void 0:u.mode,graphPadding:(s=p.config.autoplacement)===null||s===void 0?void 0:s.graphPadding})}function v(d,p){return!!p&&(!p.dataset.dhxTheme&&d==="light"||p.dataset.dhxTheme===d)}function f(d){(0,E.awaitRedraw)().then(function(){var p=document.getElementById("scaleValue");p&&(p.innerText=(100*d.config.scale).toFixed(0)+"%")})}_.defaultToolbarItems=["file","edit","view","arrange","spacer","scale"],_.orgToolbarItems=["file","edit","view","spacer","scale"],_.meta=function(d,p){return{separator:{type:"separator"},spacer:{type:"spacer"},file:{id:"$file",type:"menuItem",value:d.toolbar.file,items:["importJson","export"]},importJson:{id:"$importJson",value:d.toolbar.importJson,handler:function(u){var s=document.createElement("input");s.type="file",s.setAttribute("accept","application/JSON"),s.onchange=function(l){var r,a=new FileReader;a.onload=function(){u.parse(a.result)},a.readAsText((r=l.target.files)===null||r===void 0?void 0:r[0])},s.click()}},export:{id:"$export",value:d.toolbar.export,items:["exportJson","exportPdf","exportPng"]},exportJson:{id:"$exportJson",value:d.toolbar.exportJson,handler:function(u){var s=JSON.stringify(u.serialize());(0,b.downloadFile)(s,"data.json","text/json")}},exportPdf:{id:"$exportPdf",value:d.toolbar.exportPdf,handler:function(u){return u.diagram.export.pdf()}},exportPng:{id:"$exportPng",value:d.toolbar.exportPng,handler:function(u){return u.diagram.export.png()}},edit:{id:"$edit",type:"menuItem",value:d.toolbar.edit,items:p==="default"?["undo","redo","separator","duplicate","copy","paste","separator","copyStyle","pasteStyle","separator","selectAll","selectNone"]:["undo","redo","separator","copyStyle","pasteStyle","separator","selectAll","selectNone"]},undo:{id:"$undo",value:d.toolbar.undo,hotkey:(0,b.isMacintosh)()?d.hotkey["CMD+Z"]:d.hotkey["Ctrl+Z"],handler:function(u){return u.history.undo()}},redo:{id:"$redo",value:d.toolbar.redo,hotkey:(0,b.isMacintosh)()?d.hotkey["CMD+Shift+Z"]:d.hotkey["Ctrl+Shift+Z"],handler:function(u){return u.history.redo()}},duplicate:{id:"duplicate",value:d.toolbar.duplicate,hotkey:(0,b.isMacintosh)()?d.hotkey["CMD+D"]:d.hotkey["Ctrl+D"],handler:function(u){u.model.copy(),u.model.paste()}},copy:{id:"$copy",value:d.toolbar.copy,hotkey:(0,b.isMacintosh)()?d.hotkey["CMD+C"]:d.hotkey["Ctrl+C"],handler:function(u){return u.model.copy()}},paste:{id:"$paste",value:d.toolbar.paste,hotkey:(0,b.isMacintosh)()?d.hotkey["CMD+V"]:d.hotkey["Ctrl+V"],handler:function(u){return u.model.paste()}},copyStyle:{id:"$copyStyle",value:d.toolbar.copyStyle,hotkey:(0,b.isMacintosh)()?d.hotkey["CMD+Alt+C"]:d.hotkey["Ctrl+Alt+C"],handler:function(u){return u.model.copyStyles()}},pasteStyle:{id:"$pasteStyle",value:d.toolbar.pasteStyle,hotkey:(0,b.isMacintosh)()?d.hotkey["CMD+Alt+V"]:d.hotkey["Ctrl+Alt+V"],handler:function(u){return u.model.pasteStyles()}},selectAll:{id:"$selectAll",value:d.toolbar.selectAll,hotkey:(0,b.isMacintosh)()?d.hotkey["CMD+A"]:d.hotkey["Ctrl+A"],handler:function(u){var s=[];u.diagram.data.forEach(function(i){u.config.type!=="default"&&i.$item.getBaseType()==="line"||s.push(i.id)});for(var l=0,r=s;l<r.length;l++){var a=r[l];u.diagram.selection.add({id:a,join:!0,batch:s})}u.paint()}},selectNone:{id:"$selectNone",value:d.toolbar.selectNone,hotkey:(0,b.isMacintosh)()?d.hotkey["CMD+Shift+A"]:d.hotkey["Ctrl+Shift+A"],handler:function(u){u.diagram.selection.remove(),u.paint()}},view:{id:"$view",value:d.toolbar.view,type:"menuItem",items:p==="default"?["theme","separator","shapebar","editbar","grid","separator","connectionPoints","resizePoints","magnetic","separator","zoomIn","zoomOut"]:["theme","separator","editbar","separator","grid","separator","resizePoints","itemsDraggable","separator","zoomIn","zoomOut"]},theme:{id:"$theme",value:d.toolbar.theme,items:["themeLight","themeDark","themeLightContrast","themeDarkContrast"]},themeLight:{id:"$themeLight",value:d.toolbar.themeLight,checkIcon:function(u){var s;return v("light",(s=u.view)===null||s===void 0?void 0:s._layout.getRootNode())?"dxi dxi-check":"dxi dxi-empty"},handler:function(u){var s,l=(s=u.view)===null||s===void 0?void 0:s._layout.getRootNode();(0,E.setTheme)("light",l)}},themeDark:{id:"$themeDark",value:d.toolbar.themeDark,checkIcon:function(u){var s;return v("dark",(s=u.view)===null||s===void 0?void 0:s._layout.getRootNode())?"dxi dxi-check":"dxi dxi-empty"},handler:function(u){var s,l=(s=u.view)===null||s===void 0?void 0:s._layout.getRootNode();(0,E.setTheme)("dark",l)}},themeLightContrast:{id:"$themeLightContrast",value:d.toolbar.themeLightContrast,checkIcon:function(u){var s;return v("contrast-light",(s=u.view)===null||s===void 0?void 0:s._layout.getRootNode())?"dxi dxi-check":"dxi dxi-empty"},handler:function(u){var s,l=(s=u.view)===null||s===void 0?void 0:s._layout.getRootNode();(0,E.setTheme)("contrast-light",l)}},themeDarkContrast:{id:"$themeDarkContrast",value:d.toolbar.themeDarkContrast,checkIcon:function(u){var s;return v("contrast-dark",(s=u.view)===null||s===void 0?void 0:s._layout.getRootNode())?"dxi dxi-check":"dxi dxi-empty"},handler:function(u){var s,l=(s=u.view)===null||s===void 0?void 0:s._layout.getRootNode();(0,E.setTheme)("contrast-dark",l)}},shapebar:{id:"$shapebar",value:d.toolbar.shapebar,hotkey:d.hotkey["Alt+1"],checkIcon:function(u){var s;return!((s=u.view)===null||s===void 0)&&s.isVisible("shapebar")?"dxi dxi-check":"dxi dxi-empty"},handler:function(u){u.view.isVisible("shapebar")?u.view.hide("shapebar"):u.view.show("shapebar")}},editbar:{id:"$editbar",value:d.toolbar.editbar,hotkey:d.hotkey["Alt+2"],checkIcon:function(u){var s;return!((s=u.view)===null||s===void 0)&&s.isVisible("editbar")?"dxi dxi-check":"dxi dxi-empty"},handler:function(u){u.view.isVisible("editbar")?u.view.hide("editbar"):u.view.show("editbar")}},grid:{id:"$grid",value:d.toolbar.grid,hotkey:d.hotkey["Alt+3"],checkIcon:function(u){return u.config.grid?"dxi dxi-check":"dxi dxi-empty"},handler:function(u){u.config.grid=!u.config.grid,u.paint()}},magnetic:{id:"$magnetic",value:d.toolbar.magnetic,checkIcon:function(u){var s,l;return((l=(s=u.config.magnetic)===null||s===void 0?void 0:s.show)!==null&&l!==void 0?l:u.config.magnetic)?"dxi dxi-check":"dxi dxi-empty"},handler:function(u){typeof u.config.magnetic=="boolean"&&(u.config.magnetic=!u.config.magnetic),typeof u.config.magnetic=="object"&&(u.config.magnetic.show=!u.config.magnetic.show),u._resizer.setConfig({magnetic:u.config.magnetic}),u.paint()}},connectionPoints:{id:"$connectionPoints",value:d.toolbar.connectionPoints,checkIcon:function(u){return u.config.connectionPoints?"dxi dxi-check":"dxi dxi-empty"},handler:function(u){u.config.connectionPoints=!u.config.connectionPoints,u.diagram.data.forEach(function(s){return s.$connectMode=!1}),u._resizer.setConfig({connectionPoints:u.config.connectionPoints}),u.paint()}},resizePoints:{id:"$resizePoints",value:d.toolbar.resizePoints,checkIcon:function(u){return u.config.resizePoints?"dxi dxi-check":"dxi dxi-empty"},handler:function(u){u.config.resizePoints=!u.config.resizePoints,u._resizer.setConfig({resizePoints:u.config.resizePoints}),u.paint()}},itemsDraggable:{id:"$itemsDraggable",value:d.toolbar.itemsDraggable,checkIcon:function(u){return u.config.itemsDraggable?"dxi dxi-check":"dxi dxi-empty"},handler:function(u){u.config.itemsDraggable=!u.config.itemsDraggable,u.paint()}},zoomIn:{id:"$zoomIn",value:d.toolbar.zoomIn,icon:"dxi dxi-plus",handler:function(u){u.zoomIn(),f(u)},hotkey:(0,b.isMacintosh)()?d.hotkey["CMD+Mousewheel"]:d.hotkey["Ctrl+Mousewheel"]},zoomOut:{id:"$zoomOut",value:d.toolbar.zoomOut,icon:"dxi dxi-minus",handler:function(u){u.zoomOut(),f(u)},hotkey:(0,b.isMacintosh)()?d.hotkey["CMD+Mousewheel"]:d.hotkey["Ctrl+Mousewheel"]},arrange:{id:"$arrange",value:d.toolbar.arrange,type:"menuItem",items:["layout","separator","align","distribute"]},layout:{id:"$layout",value:d.toolbar.layout,items:["layoutMode","separator","layoutOrthogonal","layoutRadial"]},layoutMode:{id:"$layoutMode",value:d.toolbar.layoutMode,items:["layoutModeDirect","layoutModeEdges"]},layoutModeDirect:{id:"$layoutModeDirect",value:d.toolbar.layoutModeDirect,handler:function(u){u.config.autoplacement.mode="direct"},checkIcon:function(u){var s;return((s=u.config.autoplacement)===null||s===void 0?void 0:s.mode)==="direct"?"dxi dxi-check":"dxi dxi-empty"}},layoutModeEdges:{id:"$layoutModeEdges",value:d.toolbar.layoutModeEdges,handler:function(u){u.config.autoplacement.mode="edges"},checkIcon:function(u){var s;return((s=u.config.autoplacement)===null||s===void 0?void 0:s.mode)==="edges"?"dxi dxi-check":"dxi dxi-empty"}},layoutOrthogonal:{id:"$layoutOrthogonal",value:d.toolbar.layoutOrthogonal,handler:function(u){return m("orthogonal",u)}},layoutRadial:{id:"$layoutRadial",value:d.toolbar.layoutRadial,handler:function(u){return m("radial",u)}},align:{id:"$align",value:d.toolbar.align,items:["alignHorizontalLeft","alignHorizontalCenter","alignHorizontalRight","separator","alignVerticalTop","alignVerticalCenter","alignVerticalBottom"]},alignHorizontalLeft:{id:"$alignHorizontalLeft",value:d.toolbar.alignHorizontalLeft,handler:function(u){var s=u.diagram.selection.getIds().map(function(l){return u.diagram.data.getItem(l)});u.alignItems(s,-1,"x")}},alignHorizontalCenter:{id:"$alignHorizontalCenter",value:d.toolbar.alignHorizontalCenter,handler:function(u){var s=u.diagram.selection.getIds().map(function(l){return u.diagram.data.getItem(l)});u.alignItems(s,0,"x")}},alignHorizontalRight:{id:"$alignHorizontalRight",value:d.toolbar.alignHorizontalRight,handler:function(u){var s=u.diagram.selection.getIds().map(function(l){return u.diagram.data.getItem(l)});u.alignItems(s,1,"x")}},alignVerticalTop:{id:"$alignVerticalTop",value:d.toolbar.alignVerticalTop,handler:function(u){var s=u.diagram.selection.getIds().map(function(l){return u.diagram.data.getItem(l)});u.alignItems(s,-1,"y")}},alignVerticalCenter:{id:"$alignVerticalCenter",value:d.toolbar.alignVerticalCenter,handler:function(u){var s=u.diagram.selection.getIds().map(function(l){return u.diagram.data.getItem(l)});u.alignItems(s,0,"y")}},alignVerticalBottom:{id:"$alignVerticalBottom",value:d.toolbar.alignVerticalBottom,handler:function(u){var s=u.diagram.selection.getIds().map(function(l){return u.diagram.data.getItem(l)});u.alignItems(s,1,"y")}},distribute:{id:"$distribute",value:d.toolbar.distribute,items:["distributeVertical","distributeHorizontal"]},distributeVertical:{id:"$distributeVertical",value:d.toolbar.distributeVertical,handler:function(u){var s=u.diagram.selection.getIds().map(function(l){return u.diagram.data.getItem(l)});u.distributeItems(s,"y")}},distributeHorizontal:{id:"$distributeHorizontal",value:d.toolbar.distributeHorizontal,handler:function(u){var s=u.diagram.selection.getIds().map(function(l){return u.diagram.data.getItem(l)});u.distributeItems(s,"x")}},scale:{id:"$scale",type:"customHTML",html:`
			<div class="dhx_toolbar_item-scale">
				<button class="dhx_toolbar_item-scale__button">
					<i class="dxi dxi-minus dhx_toolbar_item-scale__button--zoom-out"></i>
				</button>
				<span id="scaleValue" class="dhx_toolbar_item-scale__text"></span>
				<button class="dhx_toolbar_item-scale__button">
					<i class="dxi dxi-plus dhx_toolbar_item-scale__button--zoom-in"></i>
				</button>
			</div>
		`,handler:function(u,s){s.target.classList.contains("dhx_toolbar_item-scale__button--zoom-in")&&u.zoomIn(),s.target.classList.contains("dhx_toolbar_item-scale__button--zoom-out")&&u.zoomOut()},checkIcon:function(u){return f(u)}}}}},function(W,_,y){var b=this&&this.__createBinding||(Object.create?function(m,v,f,d){d===void 0&&(d=f);var p=Object.getOwnPropertyDescriptor(v,f);p&&!("get"in p?!v.__esModule:p.writable||p.configurable)||(p={enumerable:!0,get:function(){return v[f]}}),Object.defineProperty(m,d,p)}:function(m,v,f,d){d===void 0&&(d=f),m[d]=v[f]}),E=this&&this.__exportStar||function(m,v){for(var f in m)f==="default"||Object.prototype.hasOwnProperty.call(v,f)||b(v,m,f)};Object.defineProperty(_,"__esModule",{value:!0}),E(y(103),_),E(y(213),_)},function(W,_,y){var b,E=this&&this.__extends||(b=function(l,r){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(a[n]=i[n])},b(l,r)},function(l,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function a(){this.constructor=l}b(l,r),l.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}),m=this&&this.__assign||function(){return m=Object.assign||function(l){for(var r,a=1,i=arguments.length;a<i;a++)for(var n in r=arguments[a])Object.prototype.hasOwnProperty.call(r,n)&&(l[n]=r[n]);return l},m.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.Toolbar=void 0;var v=y(1),f=y(0),d=y(2),p=y(21),u=y(30),s=function(l){function r(a,i){var n=l.call(this,a,(0,v.extend)({navigationType:"click",$name:"toolbar"},i))||this;return n._currentRoot=null,n.mount(a,(0,f.create)({render:function(){return n._draw(a)}})),n}return E(r,l),r.prototype.getState=function(a){if(!(0,v.isDefined)(a)||this.data.getItem(a)){var i={};for(var n in this.data.eachChild(this.data.getRoot(),function(e){e.twoState&&!e.group?i[e.id]=e.active:e.type!=="input"&&e.type!=="selectButton"&&e.type!=="datePicker"||(i[e.id]=e.value)},!1),this._groups)this._groups[n].active&&(i[n]=this._groups[n].active);return(0,v.isId)(a)?i[a]:i}},r.prototype.setState=function(a){var i,n=function(o){if(e._groups&&e._groups[o])e._groups[o].active&&(e.data.update(e._groups[o].active,{active:!1}),e._groups[o].active=a[o],e.data.update(a[o],{active:!0}));else{var c=e.data.getItem(o);switch(c.type){case"input":e.data.update(o,{value:a[o]});break;case"selectButton":var h=(i=c.items)===null||i===void 0?void 0:i.find(function(g){return g.value===a[o]});e.data.update(o,{value:a[o],icon:h==null?void 0:h.icon});break;case"datePicker":c.$calendar?a[o]?c.$calendar.setValue(a[o]):c.$calendar.clear():e.data.update(o,{value:a[o]});break;default:e.data.update(o,{active:a[o]})}}},e=this;for(var t in a)n(t)},r.prototype.setFocus=function(a){if(this.data.getItem(a)&&this.data.getItem(a).type==="input"){var i=this.getRootNode().querySelector('[data-dhx-id="'.concat(a,'"]'));i&&i.focus()}},r.prototype._customHandlers=function(){var a=this;return{input:function(i){var n=(0,d.locate)(i),e=a.data.getItem(n);if(e){var t=i.target.value;a.data.update(n,{value:t}),e.type==="input"&&a.events.fire(u.NavigationBarEvents.input,[n,t])}},tooltip:function(i){var n=(0,d.locateNode)(i);if(n){var e=n.getAttribute("data-dhx-id"),t=a.data.getItem(e);t!=null&&t.tooltip&&(0,p.tooltip)(t.tooltip,{node:n,position:p.Position.bottom})}}}},r.prototype._getFactory=function(){return(0,u.createFactory)({widget:this,defaultType:"navItem",allowedTypes:["button","imageButton","selectButton","navItem","menuItem","separator","spacer","title","input","customHTML","datePicker","customHTMLButton"],widgetName:"toolbar"})},r.prototype._draw=function(a){var i=this,n=this.data.getLength()?this.data.reduce(function(e,t){switch(t.type){case"title":return e||20;case"button":return t.size==="small"&&(!e||e<=28)?28:e||32;default:return 32}},0)+24:null;return(0,f.el)("nav.dhx_widget.dhx_toolbar",{style:{height:n},class:this.config.css?this.config.css:""},[(0,f.el)("ul.dhx_navbar.dhx_navbar--horizontal",m(m({"data-dhx-widget-id":this._uid,tabindex:0},function(e){return{role:"toolbar","aria-label":e||""}}(a)),{onclick:this._handlers.onclick,onmousedown:this._handlers.onmousedown,oninput:this._handlers.input,onmouseover:this._handlers.tooltip,onkeydown:this._handlers.onkeydown,onmousemove:this._handlers.onmousemove,onmouseleave:this._handlers.onmouseleave,_hooks:{didInsert:function(e){e.el.addEventListener("keyup",function(t){if(t.which===9){var o=(0,d.locateNode)(document.activeElement);if(o){var c=o.getAttribute("data-dhx-id"),h=i.data.getItem(c);h!=null&&h.tooltip&&(0,p.tooltip)(h.tooltip,{node:o,position:p.Position.bottom,force:!0})}}},!0)}}}),this.data.map(function(e){return i._factory(e)},this.data.getRoot(),!1))])},r.prototype._getMode=function(a,i){return a.id===i?"bottom":"right"},r.prototype._close=function(a){this._activePosition=null,this._currentRoot=null,l.prototype._close.call(this,a)},r.prototype._setRoot=function(a){this.data.getParent(a)===this.data.getRoot()&&(this._currentRoot=a)},r}(u.Navbar);_.Toolbar=s},function(W,_,y){(function(b){var E,m=this&&this.__extends||(E=function(z,B){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,M){L.__proto__=M}||function(L,M){for(var P in M)Object.prototype.hasOwnProperty.call(M,P)&&(L[P]=M[P])},E(z,B)},function(z,B){if(typeof B!="function"&&B!==null)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");function L(){this.constructor=z}E(z,B),z.prototype=B===null?Object.create(B):(L.prototype=B.prototype,new L)}),v=this&&this.__assign||function(){return v=Object.assign||function(z){for(var B,L=1,M=arguments.length;L<M;L++)for(var P in B=arguments[L])Object.prototype.hasOwnProperty.call(B,P)&&(z[P]=B[P]);return z},v.apply(this,arguments)},f=this&&this.__rest||function(z,B){var L={};for(var M in z)Object.prototype.hasOwnProperty.call(z,M)&&B.indexOf(M)<0&&(L[M]=z[M]);if(z!=null&&typeof Object.getOwnPropertySymbols=="function"){var P=0;for(M=Object.getOwnPropertySymbols(z);P<M.length;P++)B.indexOf(M[P])<0&&Object.prototype.propertyIsEnumerable.call(z,M[P])&&(L[M[P]]=z[M[P]])}return L},d=this&&this.__spreadArray||function(z,B,L){if(L||arguments.length===2)for(var M,P=0,V=B.length;P<V;P++)!M&&P in B||(M||(M=Array.prototype.slice.call(B,0,P)),M[P]=B[P]);return z.concat(M||Array.prototype.slice.call(B))};Object.defineProperty(_,"__esModule",{value:!0}),_.Form=void 0;var p=y(3),u=y(5),s=y(16),l=y(1),r=y(218),a=y(219),i=y(105),n=y(220),e=y(41),t=y(221),o=y(223),c=y(224),h=y(225),g=y(226),x=y(227),C=y(6),k=y(106),I=y(235),O=y(236),D=y(241),A=y(242),H=y(243),S=y(110),$=y(244),w=y(4),T=y(0),F=function(z){function B(L,M){var P=z.call(this,null,(0,l.extend)({disabled:!1,hidden:!1,css:""},M))||this;return P._isValid=!0,P._state={},P.events=new p.EventSystem(P),P.container=L,P._initUI(L),P.config.hidden&&P.hide(!0),P.config.disabled&&P.disable(),P.events.on(w.FormEvents.afterShow,function(){P._formContainerShow()}),P.events.on(w.FormEvents.afterHide,function(){Object.values(P._attachments).some(function(V){return!V.config.hidden})||P._formContainerHide()}),(0,T.awaitRedraw)().then(function(){var V=P.layout.getRootNode();V&&(V.setAttribute("role","form"),P.config.title&&V.setAttribute("aria-label",P.config.title))}),P}return m(B,z),B.prototype.paint=function(){z.prototype.paint.call(this),this.layout.paint()},B.prototype.send=function(L,M,P){var V=this;if(M===void 0&&(M="POST"),this.events.fire(w.FormEvents.beforeSend))return new b(function(R,q){var G=new XMLHttpRequest;switch(G.onload=function(){G.status>=200&&G.status<300?R(G.response||G.responseText):q({status:G.status,statusText:G.statusText})},G.onloadend=function(){G.readyState===XMLHttpRequest.DONE&&G.status===200&&V.events.fire(w.FormEvents.afterSend)},G.onerror=function(){q({status:G.status,statusText:G.statusText})},M==="GET"&&(L+="?"+encodeURIComponent(JSON.stringify(V.getValue()))),G.open(M,L),P||G.setRequestHeader("Content-Type","application/json"),M){case"POST":V._send(),G.send(P?V.getValue(!0):JSON.stringify(V.getValue()));break;case"DELETE":case"PUT":G.send(P?V.getValue(!0):JSON.stringify(V.getValue()));break;default:G.send()}})},B.prototype.clear=function(L){switch(L){case w.ClearMethod.value:this._clear();break;case w.ClearMethod.validation:this._clearValidate();break;default:this._clear(),this._clearValidate()}this.paint()},B.prototype.setValue=function(L){for(var M in L)for(var P in this._attachments)typeof this._attachments[P].setValue=="function"&&this._attachments[P].config.name===M&&this._attachments[P].setValue(L[M])},B.prototype.getValue=function(L){if(L){var M=new FormData,P=function(q){Array.isArray(V._state[q])?V._state[q].forEach(function(G,U){return M.append(q+"[".concat(U,"]"),G)}):M.append(q,V._state[q])},V=this;for(var R in this._state)P(R);return M}return v({},this._state)},B.prototype.getItem=function(L){for(var M in this._attachments)if(M==L)return this._attachments[M]},B.prototype.validate=function(L){for(var M in L===void 0&&(L=!1),this._isValid=!0,this._attachments)typeof this._attachments[M].validate=="function"&&(0,C.isVerify)(this._attachments[M].config)&&!this._attachments[M].validate(L)&&(this._isValid=!1,!L&&this.events.fire(w.FormEvents.validationFail,[M,this._attachments[M]]));return this._isValid},B.prototype.setProperties=function(L,M){if(typeof L=="string"&&M&&!(0,l.isEmptyObj)(M))for(var P in this._attachments)typeof this._attachments[P].setProperties=="function"&&P===L&&this._attachments[P].setProperties(M);if(typeof L=="object"&&!(0,l.isEmptyObj)(L))for(var P in this._attachments)typeof this._attachments[P].setProperties!="function"||(0,l.isEmptyObj)(L[P])||this._attachments[P].setProperties(L[P])},B.prototype.getProperties=function(L){if(L){for(var M in this._attachments)if(typeof this._attachments[M].getProperties=="function"&&M===L)return this._attachments[M].getProperties()}var P={};for(var M in this._attachments)typeof this._attachments[M].getProperties=="function"&&(P[M]=this._attachments[M].getProperties());return P},B.prototype.show=function(){if(this.config.hidden||Object.values(this._attachments).some(function(M){return!M.config.hidden}))for(var L in this._formContainerShow(),this._attachments)typeof this._attachments[L].show=="function"&&this._attachments[L].show()},B.prototype.hide=function(L){if(!this.config.hidden||L)for(var M in this._formContainerHide(),this._attachments)typeof this._attachments[M].hide=="function"&&this._attachments[M].hide(L)},B.prototype.setFocus=function(L){for(var M in this._attachments){var P=this._attachments[M];P.config.type!=="radiogroup"&&P.config.type!=="checkboxgroup"||P.focus(L),P.config.name===L&&P.focus()}},B.prototype.blur=function(L){for(var M in L||this.forEach(function(V){typeof V.blur=="function"&&V.blur()}),this._attachments){var P=this._attachments[M];P.config.type!=="radiogroup"&&P.config.type!=="checkboxgroup"||P.blur(L),P.config.name===L&&P.blur()}},B.prototype.isVisible=function(L){if(!L)return!this.config.hidden;for(var M in this._attachments)if(M===L)return!this._attachments[M].config.hidden},B.prototype.disable=function(){for(var L in this.config.disabled=!0,this._attachments)typeof this._attachments[L].disable=="function"&&this._attachments[L].disable()},B.prototype.enable=function(){for(var L in this.config.disabled=!1,this._attachments)typeof this._attachments[L].enable=="function"&&this._attachments[L].enable()},B.prototype.isDisabled=function(L){if(!L)return this.config.disabled;for(var M in this._attachments)if(M===L)return this._attachments[M].config.disabled},B.prototype.forEach=function(L){for(var M=Object.values(this._attachments),P=0;P<M.length;P++)L.call(this,M[P],P,M)},B.prototype.destructor=function(){for(var L in this.unmount(),this._attachments)typeof this._attachments[L].destructor=="function"&&this._attachments[L].destructor();this.events&&this.events.clear(),this.layout&&this.layout.destructor(),this.config=this._attachments=this._state=this._uid=this.container=this.events=this._isValid=null},B.prototype.getRootView=function(){return this.layout.getRootView()},B.prototype._addLayoutItem=function(L){var M=L.id=L.id||(0,l.uid)(),P=L.name=L.name||M.toString();L.type=L.type&&L.type.toLowerCase();var V=L.padding,R=f(L,["padding"]),q=L.width,G=L.height;switch(L.type!=="spacer"&&!G&&(G="content"),R.type){case"button":case"togglegroup":q=R.width||!R.full&&"content";break;case"simplevault":R.$vaultHeight=G}this._initItemHandlers(L,P);var U={id:P,width:q,height:G,padding:V,hidden:R.hidden,css:this.getCellCSS(R)};return L.type==="fieldset"&&(U.$fieldset=!0,U.label=L.label,U.labelAlignment=L.labelAlignment,this._createLayoutConfig(L,U)),U},B.prototype._initItemHandlers=function(L,M){var P=this;switch(L.type){case"avatar":var V=this._attachments[M]=new A.Avatar(null,L);this._state[M]=V.getValue(),V.events.on(w.ItemEvent.beforeChange,function(j){return P.events.fire(w.FormEvents.beforeChange,[M,j])}),V.events.on(w.ItemEvent.change,function(j){P._state[M]=j,P.events.fire(w.FormEvents.change,[M,j])}),V.events.on(w.ItemEvent.beforeHide,function(j,nt){if(!nt)return P.events.fire(w.FormEvents.beforeHide,[M,j])}),V.events.on(w.ItemEvent.beforeShow,function(j){return P.events.fire(w.FormEvents.beforeShow,[M,j])}),V.events.on(w.ItemEvent.afterHide,function(j,nt){P.layout.getCell(M).hide(),!nt&&P.events.fire(w.FormEvents.afterHide,[M,j])}),V.events.on(w.ItemEvent.afterShow,function(j){P.layout.getCell(M).show(),P.events.fire(w.FormEvents.afterShow,[M,j])}),V.events.on(w.ItemEvent.beforeValidate,function(j){return P.events.fire(w.FormEvents.beforeValidate,[M,j])}),V.events.on(w.ItemEvent.afterValidate,function(j,nt){P.events.fire(w.FormEvents.afterValidate,[M,j,nt])}),V.events.on(w.ItemEvent.beforeChangeProperties,function(j){return P.events.fire(w.FormEvents.beforeChangeProperties,[M,j])}),V.events.on(w.ItemEvent.afterChangeProperties,function(j){P._changeProps(M,j,V.config),P.events.fire(w.FormEvents.afterChangeProperties,[M,j]),P.paint()}),V.events.on(w.ItemEvent.focus,function(j){P.events.fire(w.FormEvents.focus,[M,j])}),V.events.on(w.ItemEvent.blur,function(j){P.events.fire(w.FormEvents.blur,[M,j])}),V.events.on(w.ItemEvent.keydown,function(j){P.events.fire(w.FormEvents.keydown,[j,M])});break;case"toggle":var R=this._attachments[M]=new S.ToggleButton(null,L);this._state[M]=R.getValue(),R.events.on(w.ItemEvent.beforeChange,function(j){return P.events.fire(w.FormEvents.beforeChange,[M,j])}),R.events.on(w.ItemEvent.change,function(j){P._state[M]=j,P.events.fire(w.FormEvents.change,[M,j])}),R.events.on(w.ItemEvent.beforeHide,function(j,nt){if(!nt)return P.events.fire(w.FormEvents.beforeHide,[M,j])}),R.events.on(w.ItemEvent.beforeShow,function(j){return P.events.fire(w.FormEvents.beforeShow,[M,j])}),R.events.on(w.ItemEvent.afterHide,function(j,nt){P.layout.getCell(M).hide(),!nt&&P.events.fire(w.FormEvents.afterHide,[M,j])}),R.events.on(w.ItemEvent.afterShow,function(j){P.layout.getCell(M).show(),P.events.fire(w.FormEvents.afterShow,[M,j])}),R.events.on(w.ItemEvent.beforeChangeProperties,function(j){return P.events.fire(w.FormEvents.beforeChangeProperties,[M,j])}),R.events.on(w.ItemEvent.afterChangeProperties,function(j){P._changeProps(M,j,R.config),P.events.fire(w.FormEvents.afterChangeProperties,[M,j]),P.paint()}),R.events.on(w.ItemEvent.focus,function(j){P.events.fire(w.FormEvents.focus,[M,j])}),R.events.on(w.ItemEvent.blur,function(j){P.events.fire(w.FormEvents.blur,[M,j])}),R.events.on(w.ItemEvent.keydown,function(j){P.events.fire(w.FormEvents.keydown,[j,M])});break;case"togglegroup":var q=this._attachments[M]=new $.ToggleGroup(null,L);this._state[M]=q.getValue(),q.events.on(w.ItemEvent.beforeChange,function(j){return P.events.fire(w.FormEvents.beforeChange,[M,j])}),q.events.on(w.ItemEvent.change,function(j){P._state[M]=j,P.events.fire(w.FormEvents.change,[M,j])}),q.events.on(w.ItemEvent.beforeHide,function(j,nt,xt){if(!xt)return P.events.fire(w.FormEvents.beforeHide,[M,j,nt])}),q.events.on(w.ItemEvent.beforeShow,function(j,nt){return P.events.fire(w.FormEvents.beforeShow,[M,j,nt])}),q.events.on(w.ItemEvent.afterHide,function(j,nt,xt){!q.isVisible()&&P.layout.getCell(M).hide(),!xt&&P.events.fire(w.FormEvents.afterHide,[M,j,nt])}),q.events.on(w.ItemEvent.afterShow,function(j,nt){P.layout.getCell(M).show(),P.events.fire(w.FormEvents.afterShow,[M,j,nt])}),q.events.on(w.ItemEvent.beforeChangeProperties,function(j){return P.events.fire(w.FormEvents.beforeChangeProperties,[M,j])}),q.events.on(w.ItemEvent.afterChangeProperties,function(j){P._changeProps(M,j,q.config),P.events.fire(w.FormEvents.afterChangeProperties,[M,j]),P.paint()}),q.events.on(w.ItemEvent.focus,function(j,nt){P.events.fire(w.FormEvents.focus,[M,j,nt])}),q.events.on(w.ItemEvent.blur,function(j,nt){P.events.fire(w.FormEvents.blur,[M,j,nt])}),q.events.on(w.ItemEvent.keydown,function(j,nt){P.events.fire(w.FormEvents.keydown,[j,M,nt])});break;case"button":var G=this._attachments[M]=new a.Button(null,L);G.events.on(w.ItemEvent.beforeChangeProperties,function(j){return P.events.fire(w.FormEvents.beforeChangeProperties,[M,j])}),G.events.on(w.ItemEvent.afterChangeProperties,function(j){P._changeProps(M,j,G.config),P.events.fire(w.FormEvents.afterChangeProperties,[M,j]),P.paint()}),G.events.on(w.ItemEvent.click,function(j){j.preventDefault(),P.events.fire(w.FormEvents.click,[M,j]),P.events.fire(w.FormEvents.buttonClick,[M,j]),G.config.submit&&P.validate()&&G.config.url&&P.send(G.config.url)}),G.events.on(w.ItemEvent.beforeHide,function(j,nt){if(!nt)return P.events.fire(w.FormEvents.beforeHide,[M,j])}),G.events.on(w.ItemEvent.beforeShow,function(j){return P.events.fire(w.FormEvents.beforeShow,[M,j])}),G.events.on(w.ItemEvent.afterHide,function(j,nt){P.layout.getCell(M).hide(),!nt&&P.events.fire(w.FormEvents.afterHide,[M,j])}),G.events.on(w.ItemEvent.afterShow,function(j){P.layout.getCell(M).show(),P.events.fire(w.FormEvents.afterShow,[M,j])}),G.events.on(w.ItemEvent.focus,function(j){P.events.fire(w.FormEvents.focus,[M,j])}),G.events.on(w.ItemEvent.blur,function(j){P.events.fire(w.FormEvents.blur,[M,j])}),G.events.on(w.ItemEvent.keydown,function(j){P.events.fire(w.FormEvents.keydown,[j,M])});break;case"datepicker":var U=this._attachments[M]=new r.DatePicker(null,L);this._state[M]=U.getValue(L.valueFormat==="Date"),U.events.on(w.ItemEvent.beforeChangeProperties,function(j){return P.events.fire(w.FormEvents.beforeChangeProperties,[M,j])}),U.events.on(w.ItemEvent.afterChangeProperties,function(j){P._changeProps(M,j,U.config),P._state[M]=U.getValue(L.valueFormat==="Date"),P.events.fire(w.FormEvents.afterChangeProperties,[M,j]),P.paint()}),U.events.on(w.ItemEvent.beforeChange,function(j){return P.events.fire(w.FormEvents.beforeChange,[M,j])}),U.events.on(w.ItemEvent.change,function(j){P._state[M]=j,P.events.fire(w.FormEvents.change,[M,j])}),U.events.on(w.ItemEvent.beforeHide,function(j,nt){if(!nt)return P.events.fire(w.FormEvents.beforeHide,[M,j])}),U.events.on(w.ItemEvent.beforeShow,function(j){return P.events.fire(w.FormEvents.beforeShow,[M,j])}),U.events.on(w.ItemEvent.afterHide,function(j,nt){P.layout.getCell(M).hide(),!nt&&P.events.fire(w.FormEvents.afterHide,[M,j])}),U.events.on(w.ItemEvent.afterShow,function(j){P.layout.getCell(M).show(),P.events.fire(w.FormEvents.afterShow,[M,j])}),U.events.on(w.ItemEvent.beforeValidate,function(j){return P.events.fire(w.FormEvents.beforeValidate,[M,j])}),U.events.on(w.ItemEvent.afterValidate,function(j,nt){P.events.fire(w.FormEvents.afterValidate,[M,j,nt])}),U.events.on(w.ItemEvent.focus,function(j){P.events.fire(w.FormEvents.focus,[M,j])}),U.events.on(w.ItemEvent.blur,function(j){P.events.fire(w.FormEvents.blur,[M,j])}),U.events.on(w.ItemEvent.keydown,function(j){P.events.fire(w.FormEvents.keydown,[j,M])});break;case"checkbox":var Z=this._attachments[M]=new i.Checkbox(null,L);this._state[M]=Z.getValue(),Z.events.on(w.ItemEvent.beforeChangeProperties,function(j){return P.events.fire(w.FormEvents.beforeChangeProperties,[M,j])}),Z.events.on(w.ItemEvent.afterChangeProperties,function(j){P._changeProps(M,j,Z.config),P._state[M]=Z.getValue(),P.events.fire(w.FormEvents.afterChangeProperties,[M,j]),P.paint()}),Z.events.on(w.ItemEvent.beforeChange,function(j){return P.events.fire(w.FormEvents.beforeChange,[M,j])}),Z.events.on(w.ItemEvent.change,function(j){P._state[M]=j,P.events.fire(w.FormEvents.change,[M,j])}),Z.events.on(w.ItemEvent.beforeHide,function(j,nt){if(!nt)return P.events.fire(w.FormEvents.beforeHide,[M,j])}),Z.events.on(w.ItemEvent.beforeShow,function(j){return P.events.fire(w.FormEvents.beforeShow,[M,j])}),Z.events.on(w.ItemEvent.afterHide,function(j,nt){P.layout.getCell(M).hide(),!nt&&P.events.fire(w.FormEvents.afterHide,[M,j])}),Z.events.on(w.ItemEvent.afterShow,function(j){P.layout.getCell(M).show(),P.events.fire(w.FormEvents.afterShow,[M,j])}),Z.events.on(w.ItemEvent.beforeValidate,function(j){return P.events.fire(w.FormEvents.beforeValidate,[M,j])}),Z.events.on(w.ItemEvent.afterValidate,function(j,nt){P.events.fire(w.FormEvents.afterValidate,[M,j,nt])}),Z.events.on(w.ItemEvent.focus,function(j){P.events.fire(w.FormEvents.focus,[M,j])}),Z.events.on(w.ItemEvent.blur,function(j){P.events.fire(w.FormEvents.blur,[M,j])}),Z.events.on(w.ItemEvent.keydown,function(j){P.events.fire(w.FormEvents.keydown,[j,M])});break;case"checkboxgroup":var Q=this._attachments[M]=new n.CheckboxGroup(null,L);this._state[M]=Q.getValue(),Q.events.on(w.ItemEvent.beforeChangeProperties,function(j){return P.events.fire(w.FormEvents.beforeChangeProperties,[M,j])}),Q.events.on(w.ItemEvent.afterChangeProperties,function(j){P._changeProps(M,j,Q.config),P._state[M]=Q.getValue(),P.events.fire(w.FormEvents.afterChangeProperties,[M,j]),P.paint()}),Q.events.on(w.ItemEvent.beforeChange,function(j){return P.events.fire(w.FormEvents.beforeChange,[M,j])}),Q.events.on(w.ItemEvent.change,function(j){P._state[M]=j,P.events.fire(w.FormEvents.change,[M,j])}),Q.events.on(w.ItemEvent.beforeHide,function(j,nt,xt){if(!xt)return P.events.fire(w.FormEvents.beforeHide,[M,j,nt])}),Q.events.on(w.ItemEvent.beforeShow,function(j,nt){return P.events.fire(w.FormEvents.beforeShow,[M,j,nt])}),Q.events.on(w.ItemEvent.afterHide,function(j,nt,xt){!Q.isVisible()&&P.layout.getCell(M).hide(),!xt&&P.events.fire(w.FormEvents.afterHide,[M,j,nt])}),Q.events.on(w.ItemEvent.afterShow,function(j,nt){P.layout.getCell(M).show(),P.events.fire(w.FormEvents.afterShow,[M,j,nt])}),Q.events.on(w.ItemEvent.beforeValidate,function(j){return P.events.fire(w.FormEvents.beforeValidate,[M,j])}),Q.events.on(w.ItemEvent.afterValidate,function(j,nt){P.events.fire(w.FormEvents.afterValidate,[M,j,nt])}),Q.events.on(w.ItemEvent.focus,function(j,nt){P.events.fire(w.FormEvents.focus,[M,j,nt])}),Q.events.on(w.ItemEvent.blur,function(j,nt){P.events.fire(w.FormEvents.blur,[M,j,nt])}),Q.events.on(w.ItemEvent.keydown,function(j,nt){P.events.fire(w.FormEvents.keydown,[j,M,nt])});break;case"combo":var tt=this._attachments[M]=new g.Combo(null,L);this._state[M]=tt.getValue(),tt.events.on(w.ItemEvent.beforeChangeProperties,function(j){return P.events.fire(w.FormEvents.beforeChangeProperties,[M,j])}),tt.events.on(w.ItemEvent.afterChangeProperties,function(j){P._changeProps(M,j,tt.config),P._state[M]=tt.getValue(),P.events.fire(w.FormEvents.afterChangeProperties,[M,j]),P.paint()}),tt.events.on(w.ItemEvent.beforeChange,function(j){return P.events.fire(w.FormEvents.beforeChange,[M,j])}),tt.events.on(w.ItemEvent.change,function(j){P._state[M]=j,P.events.fire(w.FormEvents.change,[M,j])}),tt.events.on(w.ItemEvent.beforeHide,function(j,nt){if(!nt)return P.events.fire(w.FormEvents.beforeHide,[M,j])}),tt.events.on(w.ItemEvent.beforeShow,function(j){return P.events.fire(w.FormEvents.beforeShow,[M,j])}),tt.events.on(w.ItemEvent.afterHide,function(j,nt){P.layout.getCell(M).hide(),!nt&&P.events.fire(w.FormEvents.afterHide,[M,j])}),tt.events.on(w.ItemEvent.afterShow,function(j){P.layout.getCell(M).show(),P.events.fire(w.FormEvents.afterShow,[M,j])}),tt.events.on(w.ItemEvent.beforeValidate,function(j){return P.events.fire(w.FormEvents.beforeValidate,[M,j])}),tt.events.on(w.ItemEvent.afterValidate,function(j,nt){P.events.fire(w.FormEvents.afterValidate,[M,j,nt])}),tt.events.on(w.ItemEvent.focus,function(j){P.events.fire(w.FormEvents.focus,[M,j])}),tt.events.on(w.ItemEvent.blur,function(j){P.events.fire(w.FormEvents.blur,[M,j])}),tt.events.on(w.ItemEvent.keydown,function(j,nt){P.events.fire(w.FormEvents.keydown,[j,M,nt])});break;case"input":var et=this._attachments[M]=new e.Input(null,L);this._state[M]=et.getValue(),et.events.on(w.ItemEvent.beforeChangeProperties,function(j){return P.events.fire(w.FormEvents.beforeChangeProperties,[M,j])}),et.events.on(w.ItemEvent.afterChangeProperties,function(j){P._changeProps(M,j,et.config),P._state[M]=et.getValue(),P.events.fire(w.FormEvents.afterChangeProperties,[M,j]),P.paint()}),et.events.on(w.ItemEvent.beforeChange,function(j){return P.events.fire(w.FormEvents.beforeChange,[M,j])}),et.events.on(w.ItemEvent.change,function(j){P._state[M]=j,P.events.fire(w.FormEvents.change,[M,j])}),et.events.on(w.ItemEvent.beforeHide,function(j,nt){if(!nt)return P.events.fire(w.FormEvents.beforeHide,[M,j])}),et.events.on(w.ItemEvent.beforeShow,function(j){return P.events.fire(w.FormEvents.beforeShow,[M,j])}),et.events.on(w.ItemEvent.afterHide,function(j,nt){P.layout.getCell(M).hide(),!nt&&P.events.fire(w.FormEvents.afterHide,[M,j])}),et.events.on(w.ItemEvent.afterShow,function(j){P.layout.getCell(M).show(),P.events.fire(w.FormEvents.afterShow,[M,j])}),et.events.on(w.ItemEvent.beforeValidate,function(j){return P.events.fire(w.FormEvents.beforeValidate,[M,j])}),et.events.on(w.ItemEvent.afterValidate,function(j,nt){P.events.fire(w.FormEvents.afterValidate,[M,j,nt])}),et.events.on(w.ItemEvent.focus,function(j){P.events.fire(w.FormEvents.focus,[M,j])}),et.events.on(w.ItemEvent.blur,function(j){P.events.fire(w.FormEvents.blur,[M,j])}),et.events.on(w.ItemEvent.keydown,function(j){P.events.fire(w.FormEvents.keydown,[j,M])});break;case"radiogroup":var ot=this._attachments[M]=new t.RadioGroup(null,L);this._state[M]=ot.getValue(),ot.events.on(w.ItemEvent.beforeChangeProperties,function(j){return P.events.fire(w.FormEvents.beforeChangeProperties,[M,j])}),ot.events.on(w.ItemEvent.afterChangeProperties,function(j){P._changeProps(M,j,ot.config),P._state[M]=ot.getValue(),P.events.fire(w.FormEvents.afterChangeProperties,[M,j]),P.paint()}),ot.events.on(w.ItemEvent.beforeChange,function(j){return P.events.fire(w.FormEvents.beforeChange,[M,j])}),ot.events.on(w.ItemEvent.change,function(j){P._state[M]=j,P.events.fire(w.FormEvents.change,[M,j])}),ot.events.on(w.ItemEvent.beforeHide,function(j,nt,xt){if(!xt)return P.events.fire(w.FormEvents.beforeHide,[M,j,nt])}),ot.events.on(w.ItemEvent.beforeShow,function(j,nt){return P.events.fire(w.FormEvents.beforeShow,[M,j,nt])}),ot.events.on(w.ItemEvent.afterHide,function(j,nt,xt){!ot.isVisible()&&P.layout.getCell(M).hide(),!xt&&P.events.fire(w.FormEvents.afterHide,[M,j,nt])}),ot.events.on(w.ItemEvent.afterShow,function(j,nt){P.layout.getCell(M).show(),P.events.fire(w.FormEvents.afterShow,[M,j,nt])}),ot.events.on(w.ItemEvent.beforeValidate,function(j){return P.events.fire(w.FormEvents.beforeValidate,[M,j])}),ot.events.on(w.ItemEvent.afterValidate,function(j,nt){P.events.fire(w.FormEvents.afterValidate,[M,j,nt])}),ot.events.on(w.ItemEvent.focus,function(j,nt){P.events.fire(w.FormEvents.focus,[M,j,nt])}),ot.events.on(w.ItemEvent.blur,function(j,nt){P.events.fire(w.FormEvents.blur,[M,j,nt])}),ot.events.on(w.ItemEvent.keydown,function(j,nt){P.events.fire(w.FormEvents.keydown,[j,M,nt])});break;case"select":var rt=this._attachments[M]=new o.Select(null,L);this._state[M]=rt.getValue(),rt.events.on(w.ItemEvent.beforeChangeProperties,function(j){return P.events.fire(w.FormEvents.beforeChangeProperties,[M,j])}),rt.events.on(w.ItemEvent.afterChangeProperties,function(j){P._changeProps(M,j,rt.config),P._state[M]=rt.getValue(),P.events.fire(w.FormEvents.afterChangeProperties,[M,j]),P.paint()}),rt.events.on(w.ItemEvent.changeOptions,function(j){P.layout.getCell(M).config.options=d([],j,!0)}),rt.events.on(w.ItemEvent.beforeChange,function(j){return P.events.fire(w.FormEvents.beforeChange,[M,j])}),rt.events.on(w.ItemEvent.change,function(j){P._state[M]=j,P.events.fire(w.FormEvents.change,[M,j])}),rt.events.on(w.ItemEvent.beforeHide,function(j,nt){if(!nt)return P.events.fire(w.FormEvents.beforeHide,[M,j])}),rt.events.on(w.ItemEvent.beforeShow,function(j){return P.events.fire(w.FormEvents.beforeShow,[M,j])}),rt.events.on(w.ItemEvent.afterHide,function(j,nt){P.layout.getCell(M).hide(),!nt&&P.events.fire(w.FormEvents.afterHide,[M,j])}),rt.events.on(w.ItemEvent.afterShow,function(j){P.layout.getCell(M).show(),P.events.fire(w.FormEvents.afterShow,[M,j])}),rt.events.on(w.ItemEvent.beforeValidate,function(j){return P.events.fire(w.FormEvents.beforeValidate,[M,j])}),rt.events.on(w.ItemEvent.afterValidate,function(j,nt){P.events.fire(w.FormEvents.afterValidate,[M,j,nt])}),rt.events.on(w.ItemEvent.focus,function(j){P.events.fire(w.FormEvents.focus,[M,j])}),rt.events.on(w.ItemEvent.blur,function(j){P.events.fire(w.FormEvents.blur,[M,j])}),rt.events.on(w.ItemEvent.keydown,function(j){P.events.fire(w.FormEvents.keydown,[j,M])});break;case"simplevault":var st=this._attachments[M]=new k.SimpleVault(null,L);this._state[M]=st.getValue(),st.events.on(w.ItemEvent.beforeChangeProperties,function(j){return P.events.fire(w.FormEvents.beforeChangeProperties,[M,j])}),st.events.on(w.ItemEvent.afterChangeProperties,function(j){P._changeProps(M,j,st.config),P._state[M]=st.getValue(),P.events.fire(w.FormEvents.afterChangeProperties,[M,j]),P.paint()}),st.events.on(w.ItemEvent.beforeChange,function(j){return P.events.fire(w.FormEvents.beforeChange,[M,j])}),st.events.on(w.ItemEvent.change,function(j){P._state[M]=j,P.events.fire(w.FormEvents.change,[M,j])}),st.events.on(w.ItemEvent.beforeHide,function(j,nt){if(!nt)return P.events.fire(w.FormEvents.beforeHide,[M,j])}),st.events.on(w.ItemEvent.beforeShow,function(j){return P.events.fire(w.FormEvents.beforeShow,[M,j])}),st.events.on(w.ItemEvent.afterHide,function(j,nt){P.layout.getCell(M).hide(),!nt&&P.events.fire(w.FormEvents.afterHide,[M,j])}),st.events.on(w.ItemEvent.afterShow,function(j){P.layout.getCell(M).show(),P.events.fire(w.FormEvents.afterShow,[M,j])}),st.events.on(w.ItemEvent.beforeValidate,function(j){return P.events.fire(w.FormEvents.beforeValidate,[M,j])}),st.events.on(w.ItemEvent.afterValidate,function(j,nt){P.events.fire(w.FormEvents.afterValidate,[M,j,nt])});break;case"slider":var ut=this._attachments[M]=new x.SliderForm(null,L);this._state[M]=ut.getValue(),ut.events.on(w.ItemEvent.beforeChange,function(j){return P.events.fire(w.FormEvents.beforeChange,[M,j])}),ut.events.on(w.ItemEvent.change,function(j){P._state[M]=j,P.events.fire(w.FormEvents.change,[M,j])}),ut.events.on(w.ItemEvent.beforeHide,function(j,nt){if(!nt)return P.events.fire(w.FormEvents.beforeHide,[M,j])}),ut.events.on(w.ItemEvent.beforeShow,function(j){return P.events.fire(w.FormEvents.beforeShow,[M,j])}),ut.events.on(w.ItemEvent.afterHide,function(j,nt){P.layout.getCell(M).hide(),!nt&&P.events.fire(w.FormEvents.afterHide,[M,j])}),ut.events.on(w.ItemEvent.afterShow,function(j){P.layout.getCell(M).show(),P.events.fire(w.FormEvents.afterShow,[M,j])}),ut.events.on(w.ItemEvent.focus,function(j){P.events.fire(w.FormEvents.focus,[M,j])}),ut.events.on(w.ItemEvent.blur,function(j){P.events.fire(w.FormEvents.blur,[M,j])}),ut.events.on(w.ItemEvent.keydown,function(j){P.events.fire(w.FormEvents.keydown,[j,M])});break;case"textarea":var at=this._attachments[M]=new c.Textarea(null,L);this._state[M]=at.getValue(),at.events.on(w.ItemEvent.beforeChangeProperties,function(j){return P.events.fire(w.FormEvents.beforeChangeProperties,[M,j])}),at.events.on(w.ItemEvent.afterChangeProperties,function(j){P._changeProps(M,j,at.config),P._state[M]=at.getValue(),P.events.fire(w.FormEvents.afterChangeProperties,[M,j]),P.paint()}),at.events.on(w.ItemEvent.beforeChange,function(j){return P.events.fire(w.FormEvents.beforeChange,[M,j])}),at.events.on(w.ItemEvent.change,function(j){P._state[M]=j,P.events.fire(w.FormEvents.change,[M,j])}),at.events.on(w.ItemEvent.beforeHide,function(j,nt){if(!nt)return P.events.fire(w.FormEvents.beforeHide,[M,j])}),at.events.on(w.ItemEvent.beforeShow,function(j){return P.events.fire(w.FormEvents.beforeShow,[M,j])}),at.events.on(w.ItemEvent.afterHide,function(j,nt){P.layout.getCell(M).hide(),!nt&&P.events.fire(w.FormEvents.afterHide,[M,j])}),at.events.on(w.ItemEvent.afterShow,function(j){P.layout.getCell(M).show(),P.events.fire(w.FormEvents.afterShow,[M,j])}),at.events.on(w.ItemEvent.beforeValidate,function(j){return P.events.fire(w.FormEvents.beforeValidate,[M,j])}),at.events.on(w.ItemEvent.afterValidate,function(j,nt){P.events.fire(w.FormEvents.afterValidate,[M,j,nt])}),at.events.on(w.ItemEvent.focus,function(j){P.events.fire(w.FormEvents.focus,[M,j])}),at.events.on(w.ItemEvent.blur,function(j){P.events.fire(w.FormEvents.blur,[M,j])}),at.events.on(w.ItemEvent.keydown,function(j){P.events.fire(w.FormEvents.keydown,[j,M])});break;case"text":var ct=this._attachments[M]=new h.Text(null,L);this._state[M]=ct.getValue(),ct.events.on(w.ItemEvent.beforeChangeProperties,function(j){return P.events.fire(w.FormEvents.beforeChangeProperties,[M,j])}),ct.events.on(w.ItemEvent.afterChangeProperties,function(j){P._changeProps(M,j,ct.config),P._state[M]=ct.getValue(),P.events.fire(w.FormEvents.afterChangeProperties,[M,j]),P.paint()}),ct.events.on(w.ItemEvent.beforeChange,function(j){return P.events.fire(w.FormEvents.beforeChange,[M,j])}),ct.events.on(w.ItemEvent.change,function(j){P._state[M]=j,P.events.fire(w.FormEvents.change,[M,j])}),ct.events.on(w.ItemEvent.beforeHide,function(j,nt){if(!nt)return P.events.fire(w.FormEvents.beforeHide,[M,j])}),ct.events.on(w.ItemEvent.beforeShow,function(j){return P.events.fire(w.FormEvents.beforeShow,[M,j])}),ct.events.on(w.ItemEvent.afterHide,function(j,nt){P.layout.getCell(M).hide(),!nt&&P.events.fire(w.FormEvents.afterHide,[M,j])}),ct.events.on(w.ItemEvent.afterShow,function(j){P.layout.getCell(M).show(),P.events.fire(w.FormEvents.afterShow,[M,j])}),ct.events.on(w.ItemEvent.beforeValidate,function(j){return P.events.fire(w.FormEvents.beforeValidate,[M,j])}),ct.events.on(w.ItemEvent.afterValidate,function(j,nt){P.events.fire(w.FormEvents.afterValidate,[M,j,nt])});break;case"timepicker":var ft=this._attachments[M]=new I.TimePicker(null,L);this._state[M]=L.value&&ft.getValue(L.valueFormat==="timeObject")||"",ft.events.on(w.ItemEvent.beforeChangeProperties,function(j){return P.events.fire(w.FormEvents.beforeChangeProperties,[M,j])}),ft.events.on(w.ItemEvent.afterChangeProperties,function(j){P._changeProps(M,j,ft.config),P._state[M]=ft.getValue(L.valueFormat==="timeObject"),P.events.fire(w.FormEvents.afterChangeProperties,[M,j]),P.paint()}),ft.events.on(w.ItemEvent.beforeChange,function(j){return P.events.fire(w.FormEvents.beforeChange,[M,j])}),ft.events.on(w.ItemEvent.change,function(j){P._state[M]=j,P.events.fire(w.FormEvents.change,[M,j])}),ft.events.on(w.ItemEvent.beforeHide,function(j,nt){if(!nt)return P.events.fire(w.FormEvents.beforeHide,[M,j])}),ft.events.on(w.ItemEvent.beforeShow,function(j){return P.events.fire(w.FormEvents.beforeShow,[M,j])}),ft.events.on(w.ItemEvent.afterHide,function(j,nt){P.layout.getCell(M).hide(),!nt&&P.events.fire(w.FormEvents.afterHide,[M,j])}),ft.events.on(w.ItemEvent.afterShow,function(j){P.layout.getCell(M).show(),P.events.fire(w.FormEvents.afterShow,[M,j])}),ft.events.on(w.ItemEvent.beforeValidate,function(j){return P.events.fire(w.FormEvents.beforeValidate,[M,j])}),ft.events.on(w.ItemEvent.afterValidate,function(j,nt){P.events.fire(w.FormEvents.afterValidate,[M,j,nt])}),ft.events.on(w.ItemEvent.focus,function(j){P.events.fire(w.FormEvents.focus,[M,j])}),ft.events.on(w.ItemEvent.blur,function(j){P.events.fire(w.FormEvents.blur,[M,j])}),ft.events.on(w.ItemEvent.keydown,function(j){P.events.fire(w.FormEvents.keydown,[j,M])});break;case"colorpicker":var vt=this._attachments[M]=new O.ColorPicker(null,L);this._state[M]=vt.getValue(),vt.events.on(w.ItemEvent.beforeChangeProperties,function(j){return P.events.fire(w.FormEvents.beforeChangeProperties,[M,j])}),vt.events.on(w.ItemEvent.afterChangeProperties,function(j){P._changeProps(M,j,vt.config),P._state[M]=vt.getValue(),P.events.fire(w.FormEvents.afterChangeProperties,[M,j]),P.paint()}),vt.events.on(w.ItemEvent.beforeChange,function(j){return P.events.fire(w.FormEvents.beforeChange,[M,j])}),vt.events.on(w.ItemEvent.change,function(j){P._state[M]=j,P.events.fire(w.FormEvents.change,[M,j])}),vt.events.on(w.ItemEvent.beforeHide,function(j,nt){if(!nt)return P.events.fire(w.FormEvents.beforeHide,[M,j])}),vt.events.on(w.ItemEvent.beforeShow,function(j){return P.events.fire(w.FormEvents.beforeShow,[M,j])}),vt.events.on(w.ItemEvent.afterHide,function(j,nt){P.layout.getCell(M).hide(),!nt&&P.events.fire(w.FormEvents.afterHide,[M,j])}),vt.events.on(w.ItemEvent.afterShow,function(j){P.layout.getCell(M).show(),P.events.fire(w.FormEvents.afterShow,[M,j])}),vt.events.on(w.ItemEvent.beforeValidate,function(j){return P.events.fire(w.FormEvents.beforeValidate,[M,j])}),vt.events.on(w.ItemEvent.afterValidate,function(j,nt){P.events.fire(w.FormEvents.afterValidate,[M,j,nt])}),vt.events.on(w.ItemEvent.focus,function(j){P.events.fire(w.FormEvents.focus,[M,j])}),vt.events.on(w.ItemEvent.blur,function(j){P.events.fire(w.FormEvents.blur,[M,j])}),vt.events.on(w.ItemEvent.keydown,function(j){P.events.fire(w.FormEvents.keydown,[j,M])});break;case"fieldset":var _t=this._attachments[M]=new H.Fieldset(L);_t.events.on(w.ItemEvent.beforeChangeProperties,function(j){return P.events.fire(w.FormEvents.beforeChangeProperties,[M,j])}),_t.events.on(w.ItemEvent.afterChangeProperties,function(j){P._changeProps(M,j,_t.config),P.events.fire(w.FormEvents.afterChangeProperties,[M,j]),P.paint()});break;default:var gt=this._attachments[M]=new D.Spacer(null,L);gt.events.on(w.ItemEvent.beforeChangeProperties,function(j){return P.events.fire(w.FormEvents.beforeChangeProperties,[M,j])}),gt.events.on(w.ItemEvent.afterChangeProperties,function(j){P._changeProps(M,j,gt.config),P.events.fire(w.FormEvents.afterChangeProperties,[M,j]),P.paint()}),gt.events.on(w.ItemEvent.beforeHide,function(j){if(!j)return P.events.fire(w.FormEvents.beforeHide,[M])}),gt.events.on(w.ItemEvent.beforeShow,function(){return P.events.fire(w.FormEvents.beforeShow,[M])}),gt.events.on(w.ItemEvent.afterHide,function(j){P.layout.getCell(M).hide(),!j&&P.events.fire(w.FormEvents.afterHide,[M])}),gt.events.on(w.ItemEvent.afterShow,function(){P.layout.getCell(M).show(),P.events.fire(w.FormEvents.afterShow,[M])})}},B.prototype._changeProps=function(L,M,P){var V=["width","height","css","padding","label","labelAlignment","align"];for(var R in M)V.includes(R)&&(0,l.isDefined)(M[R])&&(this.layout.getCell(L).config[R]=R==="css"?this.getCellCSS(P):M[R])},B.prototype.getCellCSS=function(L){var M=L.css?L.css+" dhx_form-element":"dhx_form-element";switch(L.type){case"button":case"togglegroup":L.full&&!L.width&&(M+=" dhx_button--full-gravity");break;case"text":L.width==="content"&&(M+=" dhx_form-element--fit-content")}return M},B.prototype._addLayoutItems=function(L){var M=this;return L.map(function(P){if((0,C.isBlock)(P)){var V={width:"content",height:"content"};return M._createLayoutConfig(P,V),V}return M._addLayoutItem(P)})},B.prototype._checkLayoutConfig=function(L,M){return(0,l.isDefined)(L.css)&&(M.css=L.css),(0,l.isDefined)(L.title)&&(M.header=L.title),(0,l.isDefined)(L.padding)&&(M.padding=L.padding),(0,l.isDefined)(L.width)&&(M.width=L.width),(0,l.isDefined)(L.height)&&(M.height=L.height),(0,l.isDefined)(L.align)&&(M.align=L.align),M},B.prototype._createLayoutConfig=function(L,M){M=this._checkLayoutConfig(L,M),(0,l.isDefined)(L.rows)?M.rows=this._addLayoutItems(L.rows):(0,l.isDefined)(L.cols)&&(M.cols=this._addLayoutItems(L.cols))},B.prototype._initUI=function(L){this._attachments={};var M={padding:"8px"};this.config.css+=" dhx_form",this._createLayoutConfig(this.config,M),this.layout=new s.Layout(L,M),(0,C.setAttacments)(this._attachments,this.layout)},B.prototype._clear=function(){for(var L in this._state={},this._attachments){var M=this._attachments[L].config.name;typeof this._attachments[L].clear=="function"&&(this._attachments[L].clear(),M?this._state[M]=this._attachments[L].getValue():this._state[L]=this._attachments[L].getValue())}},B.prototype._clearValidate=function(){for(var L in this._attachments)typeof this._attachments[L].clearValidate=="function"&&this._attachments[L].clearValidate()},B.prototype._formContainerShow=function(){this.config.hidden=!1,this.getRootView().node&&(this.getRootView().node.el.style.display="flex")},B.prototype._formContainerHide=function(){this.config.hidden=!0,this.getRootView().node&&(this.getRootView().node.el.style.display="none")},B.prototype._send=function(){for(var L in this._attachments)typeof this._attachments[L].send=="function"&&this._attachments[L].send()},B}(u.View);_.Form=F}).call(this,y(17))},function(W,_,y){var b,E=this&&this.__extends||(b=function(a,i){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])},b(a,i)},function(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=a}b(a,i),a.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}),m=this&&this.__spreadArray||function(a,i,n){if(n||arguments.length===2)for(var e,t=0,o=i.length;t<o;t++)!e&&t in i||(e||(e=Array.prototype.slice.call(i,0,t)),e[t]=i[t]);return a.concat(e||Array.prototype.slice.call(i))};Object.defineProperty(_,"__esModule",{value:!0}),_.Checkbox=void 0;var v=y(0),f=y(3),d=y(6),p=y(11),u=y(4),s=y(9),l=y(1),r=function(a){function i(n,e){e===void 0&&(e={});var t=a.call(this,n,e)||this;return t.events=new f.EventSystem,t._propsItem=["required","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage","text"],t._props=m(m([],d.baseProps,!0),t._propsItem,!0),t._initView(e),t._initHandlers(),t.mount(n,(0,v.create)({render:function(){return t._draw()}})),t}return E(i,a),i.prototype.setProperties=function(n,e){if(e===void 0&&(e=!1),n&&!(0,l.isEmptyObj)(n)&&(e||this.events.fire(u.ItemEvent.beforeChangeProperties,[this.getProperties()]))){for(var t in n)this._props.includes(t)&&(this.config[t]=n[t]);!e&&this.events.fire(u.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},i.prototype.getProperties=function(){for(var n={},e=0,t=this._props;e<t.length;e++){var o=t[e];n[o]=this.config[o]}return n},i.prototype.show=function(){this.config.hidden&&this.events.fire(u.ItemEvent.beforeShow,[this.getValue()])&&(this.config.hidden=!1,this.events.fire(u.ItemEvent.afterShow,[this.getValue()]))},i.prototype.hide=function(n){this.config.hidden&&!n||!this.events.fire(u.ItemEvent.beforeHide,[this.getValue(),n])||(this.config.hidden=!0,this.events.fire(u.ItemEvent.afterHide,[this.getValue(),n]))},i.prototype.isVisible=function(){return!this.config.hidden},i.prototype.disable=function(){this.config.disabled=!0,this.paint()},i.prototype.enable=function(){var n;this.config.disabled=!1,!((n=this.parent)===null||n===void 0)&&n.isDisabled()&&this.parent.enable(),this.paint()},i.prototype.isDisabled=function(){return!!this.config.disabled},i.prototype.validate=function(n){n===void 0&&(n=!1);var e=this.getValue();if(!n&&!this.events.fire(u.ItemEvent.beforeValidate,[e]))return!1;var t=!0;return(this.config.required||this.config.$required)&&(t=!!this.config.checked),n||(this.setValidationStatus(t?"success":"error"),this.events.fire(u.ItemEvent.afterValidate,[e,t]),this.paint()),t},i.prototype.clearValidate=function(){this.setValidationStatus(),this.paint()},i.prototype.setValue=function(n,e){e===void 0&&(e=!1),n!==void 0&&n!==this.config.checked&&(e||this.events.fire(u.ItemEvent.beforeChange,[this._getValue(n)]))&&(this.config.checked=!!n,e||(this.events.fire(u.ItemEvent.change,[this.getValue()]),(0,d.isVerify)(this.config)&&this.validate()))},i.prototype.getValue=function(){return this._getValue(this.config.checked)},i.prototype.clear=function(n){this.config.checked&&(n||this.events.fire(u.ItemEvent.beforeChange,[this._getValue(!1)]))&&(this.config.checked=!1,n||this.events.fire(u.ItemEvent.change,[this.getValue()]),(0,d.isVerify)(this.config)&&this.setValidationStatus(this.validate(!0)?"success":"error"))},i.prototype.destructor=function(){this.events&&this.events.clear(),this._inGroup=this._propsItem=this._props=this._uid=this.events=null,a.prototype._destructor.call(this),this.unmount()},i.prototype.focus=function(){var n=this;(0,v.awaitRedraw)().then(function(){n.getRootView().refs.input.el.focus()})},i.prototype.blur=function(){var n=this;(0,v.awaitRedraw)().then(function(){n.getRootView().refs.input.el.blur()})},i.prototype.isChecked=function(){return!!this.config.checked},i.prototype._getValue=function(n){return typeof this.config.value=="string"?n&&this.config.value||"":!!n},i.prototype._initView=function(n){var e=this;if(this._inGroup=this.config.$group,this._inGroup){for(var t in this.config={type:n.type,id:n.id,text:"",width:"content",height:"content",padding:0},n)t!=="id"&&t!=="type"&&t!=="name"&&(this.config[t]=n[t]);this._handlers={onchange:function(o){var c=o.target.checked;e.events.fire(u.ItemEvent.beforeChange,[e._getValue(c)])?(e.config.checked=c,e.events.fire(u.ItemEvent.change,[e.getValue()]),(0,d.isVerify)(e.config)&&e.validate()):e.getRootView().refs.input.el.checked=!c},onfocus:function(){return e.events.fire(u.ItemEvent.focus,[e.getValue(),e.config.id])},onblur:function(){return e.events.fire(u.ItemEvent.blur,[e.getValue(),e.config.id])},onkeydown:function(o){e.events.fire(u.ItemEvent.keydown,[o,e.config.id])}}}else{for(var t in this.config={type:n.type,id:n.id,name:n.name,checked:!1,disabled:!1,required:!1,label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"},n)t!=="id"&&t!=="type"&&t!=="name"&&(this.config[t]=n[t]);this.config.helpMessage&&(this._helper=new p.Popup({css:"dhx_tooltip dhx_tooltip--forced dhx_tooltip--light"}),this._helper.attachHTML(this.config.helpMessage)),this._handlers={showHelper:function(o){o.preventDefault(),o.stopPropagation(),e._helper.show(o.target,{mode:e.config.labelPosition==="left"?"bottom":"right",theme:e.getRootNode()})},hideHelper:function(o){o.preventDefault(),o.stopPropagation(),e._helper.hide()},onchange:function(o){var c=o.target.checked;e.events.fire(u.ItemEvent.beforeChange,[e._getValue(c)])?(e.config.checked=c,e.events.fire(u.ItemEvent.change,[e.getValue()]),(0,d.isVerify)(e.config)&&e.validate()):e.getRootView().refs.input.el.checked=!c},onfocus:function(){return e.events.fire(u.ItemEvent.focus,[e.getValue()])},onblur:function(){var o;return(o=e.events)===null||o===void 0?void 0:o.fire(u.ItemEvent.blur,[e.getValue()])},onkeydown:function(o){e.events.fire(u.ItemEvent.keydown,[o])}}}},i.prototype._initHandlers=function(){var n=this;this.events.on(u.ItemEvent.change,function(){return n.paint()})},i.prototype._draw=function(){var n=this.config,e=n.id,t=n.value,o=n.checked,c=n.disabled,h=n.name,g=n.required,x=n.$required,C=n.text,k=n.label,I=n.labelWidth,O=n.helpMessage;return(0,v.el)("label.dhx_checkbox.dhx_form-group.dhx_form-group--checkbox",{class:(0,d.getFormItemCss)(this.config,(0,d.isVerify)(this.config)||!!x)},this._inGroup?[(0,v.el)(".dhx_checkbox__holder",[(0,v.el)("input.dhx_checkbox__input",{type:"checkbox",id:e,value:t||"",name:h||"",disabled:c,checked:o,onchange:this._handlers.onchange,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,required:g,_ref:"input"}),(0,v.el)("span.dhx_checkbox__visual-input"),(0,v.el)("span.dhx_text",[C])])]:[k||I||O||g?this._drawLabel():null,(0,v.el)(".dhx_checkbox__container",[(0,v.el)(".dhx_checkbox__holder",[(0,v.el)("input.dhx_checkbox__input",{type:"checkbox","data-dhx-id":h||e,id:e,_key:e||this._uid,value:t,name:h,disabled:c,checked:o,onchange:this._handlers.onchange,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,required:g,_ref:"input","aria-label":k||"checkbox ".concat(C||""),"aria-describedby":O?"dhx_label__help_".concat(e||this._uid):null}),(0,v.el)("span.dhx_checkbox__visual-input"),(0,v.el)("span.dhx_text",[C])]),g&&(0,d.getValidationMessage)(this.config)&&(0,v.el)("span.dhx_input__caption",(0,d.getValidationMessage)(this.config))])])},i}(s.Label);_.Checkbox=r},function(W,_,y){var b,E=this&&this.__extends||(b=function(c,h){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,x){g.__proto__=x}||function(g,x){for(var C in x)Object.prototype.hasOwnProperty.call(x,C)&&(g[C]=x[C])},b(c,h)},function(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function g(){this.constructor=c}b(c,h),c.prototype=h===null?Object.create(h):(g.prototype=h.prototype,new g)}),m=this&&this.__assign||function(){return m=Object.assign||function(c){for(var h,g=1,x=arguments.length;g<x;g++)for(var C in h=arguments[g])Object.prototype.hasOwnProperty.call(h,C)&&(c[C]=h[C]);return c},m.apply(this,arguments)},v=this&&this.__spreadArray||function(c,h,g){if(g||arguments.length===2)for(var x,C=0,k=h.length;C<k;C++)!x&&C in h||(x||(x=Array.prototype.slice.call(h,0,C)),x[C]=h[C]);return c.concat(x||Array.prototype.slice.call(h))};Object.defineProperty(_,"__esModule",{value:!0}),_.SimpleVault=_.FileStatus=void 0;var f,d=y(0),p=y(3),u=y(2),s=y(1),l=y(8),r=y(228),a=y(11),i=y(6),n=y(234),e=y(4),t=y(9);(function(c){c.queue="queue",c.uploaded="uploaded",c.failed="failed",c.inprogress="inprogress"})(f||(_.FileStatus=f={}));var o=function(c){function h(g,x){var C=c.call(this,g,x)||this;return C._propsItem=["required","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage"],C._propsSimpleVault=["params","headerParams","target","fieldName","singleRequest","updateFromResponse","autosend","accept","validation"],C._props=v(v(v([],i.baseProps,!0),C._propsItem,!0),C._propsSimpleVault,!0),C.events=new p.EventSystem(C),C.data=new l.DataCollection,C._uploader=new r.Uploader(m({target:"",accept:"",fieldName:"file",singleRequest:!1,updateFromResponse:!0,autosend:!1},x),C.data,C.data.events),C._initView(m(m({},C._uploader.config),x)),C._initHandlers(),C.mount(g,(0,d.create)({render:function(){return C._draw()}})),C}return E(h,c),h.prototype.send=function(g){this._uploader.send(g)},h.prototype.selectFile=function(){this._uploader.selectFile()},h.prototype.setValue=function(g){g.length&&(this.data.parse(g),(0,i.isVerify)(this.config)&&this.validate())},h.prototype.getValue=function(){return this.data.serialize()},h.prototype.clear=function(){this.getValue().length!==0&&this.events.fire(e.ItemEvent.beforeChange,[[]])&&(this.data.removeAll(),this.events.fire(e.ItemEvent.change,[this.getValue()]),(0,i.isVerify)(this.config)&&this.setValidationStatus(this.validate(!0)?"success":"error"),this.paint())},h.prototype.disable=function(){this.config.disabled=!0,this.paint()},h.prototype.enable=function(){var g;this.config.disabled=!1,!((g=this.parent)===null||g===void 0)&&g.isDisabled()&&this.parent.enable(),this.paint()},h.prototype.isDisabled=function(){return this.config.disabled},h.prototype.show=function(){var g=this.config,x=g.value;g.hidden&&this.events.fire(e.ItemEvent.beforeShow,[x])&&(this.config.hidden=!1,this.events.fire(e.ItemEvent.afterShow,[x]))},h.prototype.hide=function(g){var x=this.config,C=x.value;x.hidden&&!g||!this.events.fire(e.ItemEvent.beforeHide,[C,g])||(this.config.hidden=!0,this.events.fire(e.ItemEvent.afterHide,[C,g]))},h.prototype.isVisible=function(){return!this.config.hidden},h.prototype.validate=function(g){g===void 0&&(g=!1);for(var x=[],C=1;C<arguments.length;C++)x[C-1]=arguments[C];var k=x.length?x[0]:this.getValue();if(!g&&!this.events.fire(e.ItemEvent.beforeValidate,[k]))return!1;var I=!0;return this.config.required&&(I=!!k.length),typeof this.config.validation=="function"&&(I=this.config.validation(k)),g||(this.setValidationStatus(I?"success":"error"),this.events.fire(e.ItemEvent.afterValidate,[k,I]),this.paint()),I},h.prototype.clearValidate=function(){this.setValidationStatus(),this.paint()},h.prototype.setProperties=function(g){if(g&&!(0,s.isEmptyObj)(g)&&this.events.fire(e.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var x in g)this._props.includes(x)&&(this.config[x]=g[x],this._propsSimpleVault.includes(x)&&(this._uploader.config[x]=g[x]));this.events.fire(e.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},h.prototype.getProperties=function(){for(var g={},x=0,C=this._props;x<C.length;x++){var k=C[x];g[k]=this.config[k]}return g},h.prototype.focus=function(){var g,x,C;(C=(x=(g=this.getRootView())===null||g===void 0?void 0:g.refs)===null||x===void 0?void 0:x.input)===null||C===void 0||C.el.focus(),this.paint()},h.prototype.blur=function(){var g,x,C;(C=(x=(g=this.getRootView())===null||g===void 0?void 0:g.refs)===null||x===void 0?void 0:x.input)===null||C===void 0||C.el.blur(),this.paint()},h.prototype.destructor=function(){this.events&&this.events.clear(),this._helper&&this._helper.destructor(),this.config=this.events=this._uid=this._helper=this._handlers=this._uploader=this.data=null,this._propsItem=this._propsSimpleVault=this._props=this._dragover=this._dragoverTimeout=null,this.unmount()},h.prototype._initView=function(g){var x;this.config=m({type:g.type,id:g.id,name:g.name,value:[],disabled:!1,hidden:!1,css:"",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"},g),!((x=g.value)===null||x===void 0)&&x.length&&this.data.parse(g.value),this.paint()},h.prototype._initHandlers=function(){var g=this;this._handlers={add:function(x){g.config.disabled||(x.preventDefault(),g._uploader.selectFile())},remove:function(x){if(!g.config.disabled){var C=(0,u.locate)(x);C&&g.data.remove(C)}},ondragover:function(x){for(var C=0,k=x.dataTransfer.types;C<k.length;C++){var I=k[C];if(I!=="Files"&&I!=="application/x-moz-file")return}g._dragoverTimeout?clearTimeout(g._dragoverTimeout):g.paint(),g._dragover=!0,g._dragoverTimeout=setTimeout(function(){g._dragover=!1,g._dragoverTimeout=null,g.paint()},150)},showHelper:function(x){x.stopPropagation(),x.preventDefault(),g._helper.show(x.target,{mode:g.config.labelPosition==="left"?"bottom":"right",theme:x.target})},hideHelper:function(x){x.preventDefault(),x.stopPropagation(),g._helper.hide()}},this._uploader.events.on("beforeUploadFile",function(x){return!(g.config.autosend&&!g.validate(!0))&&g.events.fire(e.ItemEvent.beforeUploadFile,[x,g.config.value])}),this._uploader.events.on("uploadBegin",function(x){g.events.fire(e.ItemEvent.uploadBegin,[x,g.config.value])}),this._uploader.events.on("uploadComplete",function(x){g.events.fire(e.ItemEvent.uploadComplete,[x,g.config.value])}),this._uploader.events.on("uploadFail",function(x){g.events.fire(e.ItemEvent.uploadFail,[x,g.config.value])}),this._uploader.events.on("uploadFile",function(x,C){g.events.fire(e.ItemEvent.uploadFile,[x,g.config.value,C])}),this._uploader.events.on("uploadProgress",function(x){g.events.fire(e.ItemEvent.uploadProgress,[x,g.config.value])}),this.data.events.on(l.DataEvents.beforeAdd,function(x){return g.events.fire(e.ItemEvent.beforeChange,[v(v([],g.config.value,!0),[x],!1),x])}),this.data.events.on(l.DataEvents.beforeRemove,function(x){var C=g.config.value.filter(function(k){return k.id!==x.id});return g.events.fire(e.ItemEvent.beforeChange,[C,x])}),this.data.events.on(e.ItemEvent.change,function(x,C,k){if(C){var I=g.config.value=g.getValue();g._uploader.isActive&&C==="update"||(g.events.fire(e.ItemEvent.change,[I,k]),(0,i.isVerify)(g.config)&&g.validate()),g.paint()}})},h.prototype._draw=function(){var g=this;this.config.helpMessage&&(this._helper||(this._helper=new a.Popup({css:"dhx_tooltip dhx_tooltip--forced dhx_tooltip--light"})),this._helper.attachHTML(this.config.helpMessage));var x=this.data.getLength()?(0,d.el)("ul.dhx_simplevault__files.dhx_simplevault-files",{class:this.config.$vaultHeight?"":"dhx_simplevault-files__fixed"},this.data.map(function(T){return(0,d.el)("li.dhx_simplevault-files__item",[(0,d.el)("span.dhx_simplevault-files__item-name",T.file&&T.file.name||T.name),(0,d.el)(".dhx_button.dhx_simplevault-files__delete.dhx_button--icon.dhx_button--view_link.dhx_button--size_small.dhx_button--color_secondary.dhx_button--circle",{"data-dhx-id":T.id,onclick:g._handlers.remove},[(0,d.el)("span.dxi.dxi-delete-forever")])])})):null,C=this.config,k=C.id,I=C.helpMessage,O=C.disabled,D=C.required,A=C.label,H=C.hidden,S=C.accept,$=(0,u.getLabelStyle)(this.config),w=H?" dhx_form-group--hidden":"";return(0,d.el)(".dhx_form-group.dhx_form-group--simplevault",{class:(0,i.getFormItemCss)(this.config,(0,i.isVerify)(this.config))+w},[$&&(0,d.el)("legend.dhx_label",{class:I?"dhx_label--with-help":"",style:$.style,onclick:this._handlers.add,"aria-label":A||"select files"},I?[($.label||D)&&(0,d.el)("span.dhx_label__holder",$.label),(0,d.el)("span.dhx_label-help.dxi.dxi-help-circle-outline",{tabindex:"0",role:"button",onclick:this._handlers.showHelper,onfocus:this._handlers.showHelper,onblur:this._handlers.hideHelper})]:$.label),(0,d.el)(".dhx_input__wrapper",{id:this._uid},[(0,d.el)("div",{_hooks:{didInsert:function(T){g._uploader.linkDropArea(T.el)}},ondragover:this._handlers.ondragover,class:"dhx_simplevault"+(this._dragover?" dhx_simplevault--on-drag":"")},[(0,d.el)("div.dhx_simplevault-loader",[(0,d.el)("span.dhx_simplevault__icon.dxi.dxi-vault")]),(0,d.el)(".dhx_simplevault__drop-area",[(0,d.el)("input.dhx_simplevault__input",{_ref:"input",type:"file",id:k,disabled:O,accept:S}),(0,d.el)("span.dhx_simplevault__icon.dxi.dxi-vault"),(0,d.el)("span.dhx_simplevault__title",[(0,d.el)("span",n.default.simpleVaultText),(0,d.el)("br"),(0,d.el)("label.dhx_simplevault__label",{onclick:this._handlers.add,for:k}," "+n.default.simpleVaultLabel)])]),x]),(0,i.getValidationMessage)(this.config)&&(0,d.el)("span.dhx_input__caption",{},(0,i.getValidationMessage)(this.config))])])},h}(t.Label);_.SimpleVault=o},function(W,_,y){(function(b){Object.defineProperty(_,"__esModule",{value:!0}),_.Uploader=void 0;var E=y(1),m=y(2),v=y(8),f=y(42),d=function(){function p(u,s,l){u===void 0&&(u={}),this.config=(0,E.extend)({autosend:!0,updateFromResponse:!0,fieldName:"file",accept:""},u),this.data=s||new v.DataCollection,this.events=l||this.data.events,this.isActive=!1,this._fileInput=document.createElement("input"),this._fileInput.type="file",this._fileInput.accept=this.config.accept,this._fileInput.multiple=!0,this._initEvents(),this._dropAreas=new Map}return p.prototype.selectFile=function(){this._fileInput.click()},p.prototype.linkDropArea=function(u){var s=this,l=(0,m.toNode)(u),r=function(i){return i.preventDefault()},a=function(i){i.preventDefault(),s.parseFiles(i.dataTransfer)};l.addEventListener("dragover",r),l.addEventListener("drop",a),this._dropAreas.set(l,{dragover:r,drop:a})},p.prototype.unlinkDropArea=function(u){var s=this;if(u){var l=(0,m.toNode)(u);this._unlinkDropArea(l),this._dropAreas.delete(l)}else this._dropAreas.forEach(function(r,a){s._unlinkDropArea(a)}),this._dropAreas.clear()},p.prototype.parseFiles=function(u){if(u.items&&u.items[0]&&u.items[0].webkitGetAsEntry)this._parseAsWebkitEntry(u.items);else{for(var s=u.files,l=0;l<s.length;l++)this._addFile(s[l]);this.config.autosend&&this.send()}},p.prototype.send=function(u){var s=this;if(!this._uploadInfo||!this.isActive){var l=this.data.findAll(function(n){return n.status===f.FileStatus.queue||n.status===f.FileStatus.failed}).filter(function(n){return s.events.fire(f.UploaderEvents.beforeUploadFile,[n])});if(l.length)if(this.isActive=!0,this._uploadInfo={files:l,count:l.length,size:l.reduce(function(n,e){return n+e.file.size},0)},this.events.fire(f.UploaderEvents.uploadBegin,[l]),this.events.fire(f.UploaderEvents.uploadProgress,[0,0,this._uploadInfo.size]),this.config.singleRequest)this._xhrSend(l,u);else for(var r=0,a=l;r<a.length;r++){var i=a[r];this._xhrSend([i],u)}}},p.prototype.abort=function(u){if(u){var s=this.data.getItem(u);s&&s.request&&s.request.readyState!==4&&s.request.abort()}else{if(!this._uploadInfo||!this._uploadInfo.files)return;for(var l=0,r=this._uploadInfo.files;l<r.length;l++){var a=r[l];this.abort(a.id)}}},p.prototype._unlinkDropArea=function(u){var s=this._dropAreas.get(u);if(s){var l=s.dragover,r=s.drop;u.removeEventListener("dragover",l),u.removeEventListener("drop",r)}},p.prototype._initEvents=function(){var u=this;this._fileInput.addEventListener("change",function(){for(var s=u._fileInput.files,l=0;l<s.length;l++)u._addFile(s[l]);u.config.autosend&&u.send(),u._fileInput.value=null})},p.prototype._xhrSend=function(u,s){for(var l=this,r=this._createFormData(u,s),a=new XMLHttpRequest,i=this.config.headerParams,n=0,e=u;n<e.length;n++){var t=e[n];this.data.update(t.id,{request:a,status:f.FileStatus.inprogress,progress:0})}if(a.open("POST",this.config.target),i)for(var o in i)a.setRequestHeader(o,i[o]);a.upload.onprogress=function(c){for(var h=0,g=u;h<g.length;h++){var x=g[h];l.data.update(x.id,{progress:c.loaded/c.total,status:f.FileStatus.inprogress})}var C=l._uploadInfo.files.reduce(function(O,D){return O+D.size*D.progress},0)||0,k=l._uploadInfo.size,I=C/l._uploadInfo.size*100||0;l.events.fire(f.UploaderEvents.uploadProgress,[I,C,k])},a.onloadend=function(){l._uploadInfo.count=l.config.singleRequest?0:l._uploadInfo.count-1;for(var c=a.status===200?f.FileStatus.uploaded:f.FileStatus.failed,h=a.status===200&&a.response?JSON.parse(a.response):null,g=0,x=u;g<x.length;g++){var C=x[g];l.data.update(C.id,{status:c}),c===f.FileStatus.uploaded?(l.config.updateFromResponse&&h&&(l.config.singleRequest&&h[C.id]?l.data.update(C.id,h[C.id]):l.config.singleRequest||l.data.update(C.id,h)),l.events.fire(f.UploaderEvents.uploadFile,[C,h])):l.events.fire(f.UploaderEvents.uploadFail,[C])}l._uploadInfo.count===0&&(l.isActive=!1,l.events.fire(f.UploaderEvents.uploadComplete,[l._uploadInfo.files]))},a.send(r)},p.prototype._parseAsWebkitEntry=function(u){for(var s=this,l=[],r=0;r<u.length;r++){var a=u[r].webkitGetAsEntry();l.push(this._traverseFileTree(a))}b.all(l).then(function(){s.config.autosend&&s.send()})},p.prototype._createFormData=function(u,s){var l=this.config.fieldName,r=new FormData,a=this.config.params;if(s)for(var i in s)r.append(i,s[i]);if(a)for(var i in a)r.append(i,a[i]);for(var n=u.length>1?"[]":"",e=0,t=u;e<t.length;e++){var o=t[e];r.append(l+n,o.file,o.file.name),r.append(l+"_fullname"+n,o.path+o.file.name);var c=typeof o.id=="object"?o.id:o.id.toString();r.append(l+"_id"+n,c)}return r},p.prototype._addFile=function(u,s){s===void 0&&(s="");var l={id:(0,E.uid)(),file:u,progress:0,status:f.FileStatus.queue,src:null,path:s};this.data.add(l)},p.prototype._traverseFileTree=function(u){var s=this;return new b(function(l){var r=0,a=function(i,n){i.isFile?(r++,i.file(function(e){r--,s._addFile(e,n),r===0&&l()})):i.isDirectory&&function(e,t){r++,e.readEntries(function(o){r--;for(var c=0,h=o;c<h.length;c++){var g=h[c];a(g,t)}r===0&&l()})}(i.createReader(),n+i.name+"/")};a(u,"")})},p}();_.Uploader=d}).call(this,y(17))},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.palette=_.grayShades=void 0,_.grayShades=["#000000","#4C4C4C","#666666","#808080","#999999","#B3B3B3","#CCCCCC","#E6E6E6","#F2F2F2","#FFFFFF"],_.palette=[["#D4DAE4","#B0B8CD","#949DB1","#727A8C","#5E6677","#3F4757","#1D2534"],["#FFCDD2","#FE9998","#F35C4E","#E94633","#D73C2D","#CA3626","#BB2B1A"],["#F9E6AD","#F4D679","#EDB90F","#EAA100","#EA8F00","#EA7E00","#EA5D00"],["#BCE4CE","#90D2AF","#33B579","#36955F","#247346","#1D5B38","#17492D"],["#BDF0E9","#92E7DC","#02D7C5","#11B3A5","#018B80","#026B60","#024F43"],["#B3E5FC","#81D4FA","#29B6F6","#039BE5","#0288D1","#0277BD","#01579B"],["#AEC1FF","#88A3F9","#5874CD","#2349AE","#163FA2","#083596","#002381"],["#C5C0DA","#9F97C1","#7E6BAD","#584A8F","#4F4083","#473776","#3A265F"],["#D6BDCC","#C492AC","#A9537C","#963A64","#81355A","#6E3051","#4C2640"],["#D2C5C1","#B4A09A","#826358","#624339","#5D4037","#4E342E","#3E2723"]]},function(W,_,y){var b;Object.defineProperty(_,"__esModule",{value:!0}),_.ColorpickerEvents=void 0,function(E){E.beforeChange="beforeChange",E.change="change",E.apply="apply",E.cancelClick="cancelClick",E.modeChange="modeChange",E.selectClick="selectClick",E.colorChange="colorChange",E.viewChange="viewChange"}(b||(_.ColorpickerEvents=b={}))},function(W,_,y){var b,E=this&&this.__extends||(b=function(a,i){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])},b(a,i)},function(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=a}b(a,i),a.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}),m=this&&this.__assign||function(){return m=Object.assign||function(a){for(var i,n=1,e=arguments.length;n<e;n++)for(var t in i=arguments[n])Object.prototype.hasOwnProperty.call(i,t)&&(a[t]=i[t]);return a},m.apply(this,arguments)},v=this&&this.__spreadArray||function(a,i,n){if(n||arguments.length===2)for(var e,t=0,o=i.length;t<o;t++)!e&&t in i||(e||(e=Array.prototype.slice.call(i,0,t)),e[t]=i[t]);return a.concat(e||Array.prototype.slice.call(i))};Object.defineProperty(_,"__esModule",{value:!0}),_.ToggleButton=void 0;var f=y(4),d=y(5),p=y(0),u=y(3),s=y(6),l=y(1),r=function(a){function i(n,e){var t=a.call(this,n,m({full:!1,selected:!1,disabled:!1,hidden:!1,width:"content",height:"content",text:"",icon:"",offIcon:"",offText:"",css:"",padding:""},e))||this;return t.events=new u.EventSystem,t.props=v(v([],t.config.$group?[]:s.baseProps,!0),["value","offIcon","offText","icon","text","full"],!1),t.initHandlers(),t.mount(n,(0,p.create)({render:function(){return t.draw()}})),t}return E(i,a),i.prototype.setValue=function(n,e){n===void 0&&(n=!1),e===void 0&&(e=!1),typeof n=="boolean"&&n!==this.config.selected&&(e||this.events.fire(f.ItemEvent.beforeChange,[n]))&&(this.config.selected=n,!e&&this.events.fire(f.ItemEvent.change,[this.getValue()]),this.paint())},i.prototype.getValue=function(){var n=this.config,e=n.value,t=n.selected;return typeof e=="string"?t?e:"":typeof e=="number"?t?e:0:!!t},i.prototype.isSelected=function(){return!!this.config.selected},i.prototype.show=function(){this.config.hidden&&this.events.fire(f.ItemEvent.beforeShow,[this.getValue()])&&(this.config.hidden=!1,this.events.fire(f.ItemEvent.afterShow,[this.getValue()]))},i.prototype.hide=function(n){n===void 0&&(n=!1),this.config.hidden&&!n||!this.events.fire(f.ItemEvent.beforeHide,[this.getValue(),n])||(this.config.hidden=!0,this.events.fire(f.ItemEvent.afterHide,[this.getValue(),n]))},i.prototype.isVisible=function(){return!this.config.hidden},i.prototype.focus=function(){var n=this;(0,p.awaitRedraw)().then(function(){n.getRootView().refs.button.el.focus(),n.paint()})},i.prototype.blur=function(){var n=this;(0,p.awaitRedraw)().then(function(){n.getRootView().refs.button.el.blur(),n.paint()})},i.prototype.disable=function(){this.config.disabled=!0,this.paint()},i.prototype.enable=function(){var n;this.config.disabled=!1,!((n=this.parent)===null||n===void 0)&&n.isDisabled()&&this.parent.enable(),this.paint()},i.prototype.isDisabled=function(){return!!this.config.disabled},i.prototype.setProperties=function(n){if(n&&!(0,l.isEmptyObj)(n)&&this.events.fire(f.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var e in n)this.props.includes(e)&&(this.config[e]=n[e]);this.events.fire(f.ItemEvent.afterChangeProperties,[this.getProperties()])}},i.prototype.getProperties=function(){for(var n={},e=0,t=this.props;e<t.length;e++){var o=t[e];n[o]=this.config[o]}return n},i.prototype.destructor=function(){this.events.clear(),this.unmount()},i.prototype.draw=function(){var n=this.config,e=n.id,t=n.name,o=n.selected,c=n.disabled,h=n.hidden,g=n.text,x=n.offText,C=n.icon,k=n.offIcon,I=n.full,O=n.$group,D=n.$gap,A=n.$extraCss,H=n.css;return(0,p.el)("button.dhx_toggle",{"data-dhx-id":t||e,role:"button",type:"button","aria-pressed":o,"aria-label":g||t,disabled:c,class:(O?"":"dhx_form-group dhx_form-group--toggle ")+(o?"dhx_toggle--selected ":"")+(c?"dhx_toggle--disabled ":"")+(h?"dhx_toggle--hidden ":"")+(I?"dhx_toggle--full ":"")+(O&&A||"")+(O&&H||""),style:{marginLeft:D},onclick:this.handlers.onclick,onfocus:this.handlers.onfocus,onblur:this.handlers.onblur,onkeydown:this.handlers.onkeydown,_ref:"button"},[C&&(0,p.el)("i.dhx_toggle__icon",{class:o?C:k||C}),g&&(0,p.el)("span.dhx_toggle__text",{},o?g:x||g)])},i.prototype.initHandlers=function(){var n=this;this.handlers={onclick:function(){return n.setValue(!n.config.selected)},onfocus:function(){return n.events.fire(f.ItemEvent.focus,[n.getValue()])},onblur:function(){return n.events.fire(f.ItemEvent.blur,[n.getValue()])},onkeydown:function(e){return n.events.fire(f.ItemEvent.keydown,[e])}}},i}(d.View);_.ToggleButton=r},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(v){for(var f,d=1,p=arguments.length;d<p;d++)for(var u in f=arguments[d])Object.prototype.hasOwnProperty.call(f,u)&&(v[u]=f[u]);return v},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0});var E=y(43),m=y(10);_.default=b(b({},m.default),{type:"toggle",$handler:function(v){var f=v.id,d=v.value,p=v.editor,u=v.key;p.diagram.data.update(f,(0,E.getModifiedObject)(u,d,Array.isArray(u)&&p.diagram.data.getItem(f)||{}))},$setValue:function(v){var f=v.control,d=v.value;typeof d!="boolean"?f.setValue(d===this.value):f.setValue(!!d)},$layout:function(v){return b(b({},v),{type:"toggle"})}})},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.setValueFromCssVariable=_.getHeaderColor=void 0;var b=y(1);_.getHeaderColor=function(E,m){m===void 0&&(m="child");var v=["#FF9800","#607D8B","#00C7B5","#03A9F4","#9575CD","#F06292"];return v[(E.$level+{child:1,partner:0,assistant:3}[m])%v.length]},_.setValueFromCssVariable=function E(m,v){for(var f in m){var d=m[f];(0,b.isObject)(d)&&E(d,v),typeof d=="string"&&d.startsWith("var(--")&&(m[f]=getComputedStyle(v).getPropertyValue(d.substring(4,d.length-1)))}}},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.cssManager=_.CssManager=void 0;var b=y(1),E=function(){function m(){this._classes={};var v=document.createElement("style");v.id="dhx_generated_styles",this._styleCont=document.head.appendChild(v)}return m.prototype.update=function(){this._styleCont.innerHTML!==this._generateCss()&&(document.head.appendChild(this._styleCont),this._styleCont.innerHTML=this._generateCss())},m.prototype.remove=function(v){delete this._classes[v],this.update()},m.prototype.add=function(v,f,d){d===void 0&&(d=!1);var p=this._toCssString(v),u=this._findSameClassId(p);return u&&f&&f!==u?(this._classes[f]=this._classes[u],f):u||this._addNewClass(p,f,d)},m.prototype.get=function(v){if(this._classes[v]){for(var f={},d=0,p=this._classes[v].split(";");d<p.length;d++){var u=p[d];if(u){var s=u.split(":");f[s[0]]=s[1]}}return f}return null},m.prototype.destructor=function(){this._classes=this._styleCont=null},m.prototype._findSameClassId=function(v){for(var f in this._classes)if(v===this._classes[f])return f;return null},m.prototype._addNewClass=function(v,f,d){var p=f||"dhx_generated_class_".concat((0,b.uid)());return this._classes[p]=v,d||this.update(),p},m.prototype._toCssString=function(v){var f="";for(var d in v){var p=v[d],u=d.replace(/[A-Z]{1}/g,function(s){return"-".concat(s.toLowerCase())});f+="".concat(u,":").concat(p,";")}return f},m.prototype._generateCss=function(){var v="";for(var f in this._classes){var d=this._classes[f];v+=".".concat(f,"{").concat(d,`}
`)}return v},m}();_.CssManager=E,_.cssManager=new E},function(W,_,y){y(115),y(116),y(117),y(118),y(119),y(278),W.exports=y(45)},function(W,_){Object.values=Object.values?Object.values:function(y){var b=Object.prototype.toString.call(y);if(y==null)throw new TypeError("Cannot convert undefined or null to object");if(~["[object String]","[object Object]","[object Array]","[object Function]"].indexOf(b)){if(Object.keys)return Object.keys(y).map(function(v){return y[v]});var E=[];for(var m in y)y.hasOwnProperty(m)&&E.push(y[m]);return E}return[]},Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(y){for(var b=[],E=1;E<arguments.length;E++)b[E-1]=arguments[E];if(y==null)throw new TypeError("Cannot convert first argument to object");for(var m=Object(y),v=0;v<b.length;v++){var f=b[v];if(f!=null)for(var d=Object.keys(Object(f)),p=0,u=d.length;p<u;p++){var s=d[p],l=Object.getOwnPropertyDescriptor(f,s);l!==void 0&&l.enumerable&&(m[s]=f[s])}}return m}})},function(W,_){Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(y,b){if(this==null)throw new TypeError('"this" is null or not defined');var E=Object(this),m=E.length>>>0;if(m===0)return!1;for(var v,f,d=0|b,p=Math.max(d>=0?d:m-Math.abs(d),0);p<m;){if((v=E[p])===(f=y)||typeof v=="number"&&typeof f=="number"&&isNaN(v)&&isNaN(f))return!0;p++}return!1},configurable:!0,writable:!0}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(y){if(this==null)throw new TypeError('"this" is null or not defined');var b=Object(this),E=b.length>>>0;if(typeof y!="function")throw new TypeError("predicate must be a function");for(var m=arguments[1],v=0;v<E;){var f=b[v];if(y.call(m,f,v,b))return f;v++}},configurable:!0,writable:!0}),Array.prototype.findIndex||(Array.prototype.findIndex=function(y){if(this==null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof y!="function")throw new TypeError("predicate must be a function");for(var b,E=Object(this),m=E.length>>>0,v=arguments[1],f=0;f<m;f++)if(b=E[f],y.call(v,b,f,E))return f;return-1})},function(W,_){String.prototype.includes||(String.prototype.includes=function(y,b){return typeof b!="number"&&(b=0),!(b+y.length>this.length)&&this.indexOf(y,b)!==-1}),String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{enumerable:!1,configurable:!0,writable:!0,value:function(y,b){return b=b||0,this.indexOf(y,b)===b}}),String.prototype.padStart||(String.prototype.padStart=function(y,b){return y>>=0,b=String(b||" "),this.length>y?String(this):((y-=this.length)>b.length&&(b+=b.repeat(y/b.length)),b.slice(0,y)+String(this))}),String.prototype.padEnd||(String.prototype.padEnd=function(y,b){return y>>=0,b=String(b||" "),this.length>y?String(this):((y-=this.length)>b.length&&(b+=b.repeat(y/b.length)),String(this)+b.slice(0,y))})},function(W,_){if(Element&&!Element.prototype.matches){var y=Element.prototype;y.matches=y.matchesSelector||y.mozMatchesSelector||y.msMatchesSelector||y.oMatchesSelector||y.webkitMatchesSelector}if("classList"in SVGElement.prototype||Object.defineProperty(SVGElement.prototype,"classList",{get:function(){var v=this;return{contains:function(f){return v.className.baseVal.split(" ").indexOf(f)!==-1},add:function(f){return v.setAttribute("class",v.getAttribute("class")+" "+f)},remove:function(f){var d=v.getAttribute("class").replace(new RegExp("(\\s|^)".concat(f,"(\\s|$)"),"g"),"$2");v.classList.contains(f)&&v.setAttribute("class",d)},toggle:function(f){this.contains(f)?this.remove(f):this.add(f)}}},configurable:!0}),!Object.entries){var b=Function.bind.call(Function.call,Array.prototype.reduce),E=Function.bind.call(Function.call,Object.prototype.propertyIsEnumerable),m=Function.bind.call(Function.call,Array.prototype.concat);Object.entries=function(v){return b(Object.keys(v),function(f,d){return m(f,typeof d=="string"&&E(v,d)?[[d,v[d]]]:[])},[])}}Event.prototype.composedPath||(Event.prototype.composedPath=function(){if(this.path)return this.path;var v=this.target;for(this.path=[];v.parentNode!==null;)this.path.push(v),v=v.parentNode;return this.path.push(document,window),this.path})},function(W,_){Math.sign=Math.sign||function(y){return(y=+y)==0||isNaN(y)?y:y>0?1:-1}},function(W,_,y){(function(b){var E=b!==void 0&&b||typeof self<"u"&&self||window,m=Function.prototype.apply;function v(f,d){this._id=f,this._clearFn=d}_.setTimeout=function(){return new v(m.call(setTimeout,E,arguments),clearTimeout)},_.setInterval=function(){return new v(m.call(setInterval,E,arguments),clearInterval)},_.clearTimeout=_.clearInterval=function(f){f&&f.close()},v.prototype.unref=v.prototype.ref=function(){},v.prototype.close=function(){this._clearFn.call(E,this._id)},_.enroll=function(f,d){clearTimeout(f._idleTimeoutId),f._idleTimeout=d},_.unenroll=function(f){clearTimeout(f._idleTimeoutId),f._idleTimeout=-1},_._unrefActive=_.active=function(f){clearTimeout(f._idleTimeoutId);var d=f._idleTimeout;d>=0&&(f._idleTimeoutId=setTimeout(function(){f._onTimeout&&f._onTimeout()},d))},y(121),_.setImmediate=typeof self<"u"&&self.setImmediate||b!==void 0&&b.setImmediate||this&&this.setImmediate,_.clearImmediate=typeof self<"u"&&self.clearImmediate||b!==void 0&&b.clearImmediate||this&&this.clearImmediate}).call(this,y(44))},function(W,_,y){(function(b,E){(function(m,v){if(!m.setImmediate){var f,d,p,u,s,l=1,r={},a=!1,i=m.document,n=Object.getPrototypeOf&&Object.getPrototypeOf(m);n=n&&n.setTimeout?n:m,{}.toString.call(m.process)==="[object process]"?f=function(o){E.nextTick(function(){t(o)})}:function(){if(m.postMessage&&!m.importScripts){var o=!0,c=m.onmessage;return m.onmessage=function(){o=!1},m.postMessage("","*"),m.onmessage=c,o}}()?(u="setImmediate$"+Math.random()+"$",s=function(o){o.source===m&&typeof o.data=="string"&&o.data.indexOf(u)===0&&t(+o.data.slice(u.length))},m.addEventListener?m.addEventListener("message",s,!1):m.attachEvent("onmessage",s),f=function(o){m.postMessage(u+o,"*")}):m.MessageChannel?((p=new MessageChannel).port1.onmessage=function(o){t(o.data)},f=function(o){p.port2.postMessage(o)}):i&&"onreadystatechange"in i.createElement("script")?(d=i.documentElement,f=function(o){var c=i.createElement("script");c.onreadystatechange=function(){t(o),c.onreadystatechange=null,d.removeChild(c),c=null},d.appendChild(c)}):f=function(o){setTimeout(t,0,o)},n.setImmediate=function(o){typeof o!="function"&&(o=new Function(""+o));for(var c=new Array(arguments.length-1),h=0;h<c.length;h++)c[h]=arguments[h+1];var g={callback:o,args:c};return r[l]=g,f(l),l++},n.clearImmediate=e}function e(o){delete r[o]}function t(o){if(a)setTimeout(t,0,o);else{var c=r[o];if(c){a=!0;try{(function(h){var g=h.callback,x=h.args;switch(x.length){case 0:g();break;case 1:g(x[0]);break;case 2:g(x[0],x[1]);break;case 3:g(x[0],x[1],x[2]);break;default:g.apply(v,x)}})(c)}finally{e(o),a=!1}}}}})(typeof self>"u"?b===void 0?this:b:self)}).call(this,y(44),y(122))},function(W,_){var y,b,E=W.exports={};function m(){throw new Error("setTimeout has not been defined")}function v(){throw new Error("clearTimeout has not been defined")}function f(n){if(y===setTimeout)return setTimeout(n,0);if((y===m||!y)&&setTimeout)return y=setTimeout,setTimeout(n,0);try{return y(n,0)}catch{try{return y.call(null,n,0)}catch{return y.call(this,n,0)}}}(function(){try{y=typeof setTimeout=="function"?setTimeout:m}catch{y=m}try{b=typeof clearTimeout=="function"?clearTimeout:v}catch{b=v}})();var d,p=[],u=!1,s=-1;function l(){u&&d&&(u=!1,d.length?p=d.concat(p):s=-1,p.length&&r())}function r(){if(!u){var n=f(l);u=!0;for(var e=p.length;e;){for(d=p,p=[];++s<e;)d&&d[s].run();s=-1,e=p.length}d=null,u=!1,function(t){if(b===clearTimeout)return clearTimeout(t);if((b===v||!b)&&clearTimeout)return b=clearTimeout,clearTimeout(t);try{return b(t)}catch{try{return b.call(null,t)}catch{return b.call(this,t)}}}(n)}}function a(n,e){this.fun=n,this.array=e}function i(){}E.nextTick=function(n){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];p.push(new a(n,e)),p.length!==1||u||f(r)},a.prototype.run=function(){this.fun.apply(null,this.array)},E.title="browser",E.browser=!0,E.env={},E.argv=[],E.version="",E.versions={},E.on=i,E.addListener=i,E.once=i,E.off=i,E.removeListener=i,E.removeAllListeners=i,E.emit=i,E.prependListener=i,E.prependOnceListener=i,E.listeners=function(n){return[]},E.binding=function(n){throw new Error("process.binding is not supported")},E.cwd=function(){return"/"},E.chdir=function(n){throw new Error("process.chdir is not supported")},E.umask=function(){return 0}},function(W,_,y){y.r(_)},function(W,_,y){y.r(_)},function(W,_,y){/**
* Copyright (c) 2017, Leon Sorokin
* All rights reserved. (MIT Licensed)
*
* domvm.js (DOM ViewModel)
* A thin, fast, dependency-free vdom view layer
* @preserve https://github.com/leeoniya/domvm (v3.2.6, micro build)
*/W.exports=function(){var b=1,E=2,m=3,v=4,f=5,d=typeof window<"u",p=(d?window:{}).requestAnimationFrame,u={};function s(){}var l=Array.isArray;function r(N){return N!=null}function a(N){return N!=null&&N.constructor===Object}function i(N,Y,X,K){N.splice.apply(N,[X,K].concat(Y))}function n(N){var Y=typeof N;return Y==="string"||Y==="number"}function e(N){return typeof N=="function"}function t(N){return typeof N=="object"&&e(N.then)}function o(N){for(var Y=arguments,X=1;X<Y.length;X++)for(var K in Y[X])N[K]=Y[X][K];return N}function c(N,Y,X){for(var K;K=Y.shift();)Y.length===0?N[K]=X:N[K]=N=N[K]||{}}function h(N,Y){for(var X=[],K=Y;K<N.length;K++)X.push(N[K]);return X}function g(N,Y){for(var X in N)if(N[X]!==Y[X])return!1;return!0}function x(N,Y){var X=N.length;if(Y.length!==X)return!1;for(var K=0;K<X;K++)if(N[K]!==Y[K])return!1;return!0}function C(N){if(!p)return N;var Y,X,K;function J(){Y=0,N.apply(X,K)}return function(){X=this,K=arguments,Y||(Y=p(J))}}function k(N,Y,X){return function(){return N.apply(X,Y)}}function I(N){var Y,X,K=N.slice(),J=[];J.push(0);for(var it=0,dt=N.length;it<dt;++it){var yt=J[J.length-1];if(N[yt]<N[it])K[it]=yt,J.push(it);else{for(Y=0,X=J.length-1;Y<X;){var pt=(Y+X)/2|0;N[J[pt]]<N[it]?Y=pt+1:X=pt}N[it]<N[J[Y]]&&(Y>0&&(K[it]=J[Y-1]),J[Y]=it)}}for(X=J[(Y=J.length)-1];Y-- >0;)J[Y]=X,X=K[X];return J}function O(N,Y){var X,K=0,J=Y.length-1;if(J<=2147483647)for(;K<=J;){if(Y[X=K+J>>1]===N)return X;Y[X]<N?K=X+1:J=X-1}else for(;K<=J;){if(Y[X=Math.floor((K+J)/2)]===N)return X;Y[X]<N?K=X+1:J=X-1}return K==Y.length?null:K}function D(N){return N[0]==="o"&&N[1]==="n"}function A(N){return N[0]==="_"}function H(N){return N==="style"}function S(N){N&&N.el&&N.el.offsetHeight}function $(N){return N.node!=null&&N.node.el!=null}function w(N,Y){switch(Y){case"value":case"checked":case"selected":return!0}return!1}function T(N){for(N=N||u;N.vm==null&&N.parent;)N=N.parent;return N.vm}function F(){}var z=F.prototype={constructor:F,type:null,vm:null,key:null,ref:null,data:null,hooks:null,ns:null,el:null,tag:null,attrs:null,body:null,flags:0,_class:null,_diff:null,_dead:!1,_lis:!1,idx:null,parent:null};function B(N){var Y=new F;return Y.type=E,Y.body=N,Y}var L={},M=/\[(\w+)(?:=(\w+))?\]/g;function P(N){var Y,X,K,J,it=L[N];if(it==null)for(L[N]=it={tag:(Y=N.match(/^[-\w]+/))?Y[0]:"div",id:(X=N.match(/#([-\w]+)/))?X[1]:null,class:(K=N.match(/\.([-\w.]+)/))?K[1].replace(/\./g," "):null,attrs:null};J=M.exec(N);)it.attrs==null&&(it.attrs={}),it.attrs[J[1]]=J[2]||"";return it}var V=1,R=2,q=4,G=8;function U(N,Y,X,K){var J=new F;J.type=b,r(K)&&(J.flags=K),J.attrs=Y;var it=P(N);if(J.tag=it.tag,it.id||it.class||it.attrs){var dt=J.attrs||{};if(it.id&&!r(dt.id)&&(dt.id=it.id),it.class&&(J._class=it.class,dt.class=it.class+(r(dt.class)?" "+dt.class:"")),it.attrs)for(var yt in it.attrs)r(dt[yt])||(dt[yt]=it.attrs[yt]);J.attrs=dt}var pt=J.attrs;return r(pt)&&(r(pt._key)&&(J.key=pt._key),r(pt._ref)&&(J.ref=pt._ref),r(pt._hooks)&&(J.hooks=pt._hooks),r(pt._data)&&(J.data=pt._data),r(pt._flags)&&(J.flags=pt._flags),r(J.key)||(r(J.ref)?J.key=J.ref:r(pt.id)?J.key=pt.id:r(pt.name)&&(J.key=pt.name+(pt.type==="radio"||pt.type==="checkbox"?pt.value:"")))),X!=null&&(J.body=X),J}function Z(N,Y,X){c(N,["refs"].concat(Y.split(".")),X)}function Q(N){for(;N=N.parent;)N.flags|=V}function tt(N,Y,X,K){if(N.type!==f&&N.type!==v){N.parent=Y,N.idx=X,N.vm=K,N.ref!=null&&Z(T(N),N.ref,N);var J=N.hooks,it=K&&K.hooks;(J&&(J.willRemove||J.didRemove)||it&&(it.willUnmount||it.didUnmount))&&Q(N),l(N.body)&&et(N)}}function et(N){for(var Y=N.body,X=0;X<Y.length;X++){var K=Y[X];K===!1||K==null?Y.splice(X--,1):l(K)?i(Y,K,X--,1):(K.type==null&&(Y[X]=K=B(""+K)),K.type===E?K.body==null||K.body===""?Y.splice(X--,1):X>0&&Y[X-1].type===E?(Y[X-1].body+=K.body,Y.splice(X--,1)):tt(K,N,X,null):tt(K,N,X,null))}}var ot={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,order:!0,lineClamp:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function rt(N,Y){return isNaN(Y)||ot[N]?Y:Y+"px"}function st(N,Y){var X=(N.attrs||u).style,K=Y?(Y.attrs||u).style:null;if(X==null||n(X))N.el.style.cssText=X;else{for(var J in X){var it=X[J];(K==null||it!=null&&it!==K[J])&&(N.el.style[J]=rt(J,it))}if(K)for(var dt in K)X[dt]==null&&(N.el.style[dt]="")}}var ut=[];function at(N,Y,X,K,J){if(N!=null){var it=X.hooks[Y];if(it){if(Y[0]!=="d"||Y[1]!=="i"||Y[2]!=="d")return it(X,K);J?S(X.parent)&&it(X,K):ut.push([it,X,K])}}}function ct(N){var Y;if(ut.length)for(S(N.node);Y=ut.shift();)Y[0](Y[1],Y[2])}var ft=d?document:null;function vt(N){for(;N._node==null;)N=N.parentNode;return N._node}function _t(N,Y){return Y!=null?ft.createElementNS(Y,N):ft.createElement(N)}function gt(N){return ft.createTextNode(N)}function j(N){return ft.createComment(N)}function nt(N){return N.nextSibling}function xt(N){return N.previousSibling}function bt(N){var Y=N.vm,X=Y!=null&&at(Y.hooks,"willUnmount",Y,Y.data),K=at(N.hooks,"willRemove",N);if((N.flags&V)===V&&l(N.body))for(var J=0;J<N.body.length;J++)bt(N.body[J]);return X||K}function Dt(N,Y,X){var K=Y._node,J=K.vm;if(l(K.body))if((K.flags&V)===V)for(var it=0;it<K.body.length;it++)Dt(Y,K.body[it].el);else wt(K);delete Y._node,N.removeChild(Y),at(K.hooks,"didRemove",K,null,X),J!=null&&(at(J.hooks,"didUnmount",J,J.data,X),J.node=null)}function Ot(N,Y){var X=Y._node;if(!X._dead){var K=bt(X);K!=null&&t(K)?(X._dead=!0,K.then(k(Dt,[N,Y,!0]))):Dt(N,Y)}}function wt(N){for(var Y=N.body,X=0;X<Y.length;X++){var K=Y[X];delete K.el._node,K.vm!=null&&(K.vm.node=null),l(K.body)&&wt(K)}}function kt(N){var Y=N.el;if(!(N.flags&V))l(N.body)&&wt(N),Y.textContent=null;else{var X=Y.firstChild;do{var K=nt(X);Ot(Y,X)}while(X=K)}}function Ct(N,Y,X){var K=Y._node,J=Y.parentNode!=null,it=Y!==X&&J?null:K.vm;it!=null&&at(it.hooks,"willMount",it,it.data),at(K.hooks,J?"willReinsert":"willInsert",K),N.insertBefore(Y,X),at(K.hooks,J?"didReinsert":"didInsert",K),it!=null&&at(it.hooks,"didMount",it,it.data)}function Lt(N,Y,X){Ct(N,Y,X?nt(X):null)}var Vt={};function Nt(N){o(Vt,N)}function Wt(N){var Y=this,X=Y,K=h(arguments,1).concat(X,X.data);do{var J=Y.onemit,it=J?J[N]:null;if(it){it.apply(Y,K);break}}while(Y=Y.parent());Vt[N]&&Vt[N].apply(Y,K)}var Yt=s;function Pt(N){Yt=N.onevent||Yt,N.onemit&&Nt(N.onemit)}function jt(N,Y,X){N[Y]=X}function ge(N,Y,X,K,J){var it=N.apply(J,Y.concat([X,K,J,J.data]));J.onevent(X,K,J,J.data,Y),Yt.call(null,X,K,J,J.data,Y),it===!1&&(X.preventDefault(),X.stopPropagation())}function le(N){var Y,X,K=vt(N.target),J=T(K),it=N.currentTarget._node.attrs["on"+N.type];if(l(it))ge(Y=it[0],X=it.slice(1),N,K,J);else for(var dt in it)if(N.target.matches(dt)){var yt=it[dt];l(yt)?(Y=yt[0],X=yt.slice(1)):(Y=yt,X=[]),ge(Y,X,N,K,J)}}function Bt(N,Y,X,K){if(X!==K){var J=N.el;X==null||e(X)?jt(J,Y,X):K==null&&jt(J,Y,le)}}function Gt(N,Y,X){Y[0]==="."&&(Y=Y.substr(1),X=!0),X?N.el[Y]="":N.el.removeAttribute(Y)}function Xt(N,Y,X,K,J){var it=N.el;X==null?!J&&Gt(N,Y,!1):N.ns!=null?it.setAttribute(Y,X):Y==="class"?it.className=X:Y==="id"||typeof X=="boolean"||K?it[Y]=X:Y[0]==="."?it[Y.substr(1)]=X:it.setAttribute(Y,X)}function ce(N,Y,X){var K=N.attrs||u,J=Y.attrs||u;if(K!==J){for(var it in K){var dt=K[it],yt=w(N.tag,it),pt=yt?N.el[it]:J[it];dt===pt||(H(it)?st(N,Y):A(it)||(D(it)?Bt(N,it,dt,pt):Xt(N,it,dt,yt,X)))}for(var it in J)!(it in K)&&!A(it)&&Gt(N,it,w(N.tag,it)||D(it))}}function Ut(N,Y,X,K){return N.type===v&&(Y=N.data,X=N.key,K=N.opts,N=N.view),new be(N,Y,X,K)}function Qt(N){for(var Y=0;Y<N.body.length;Y++){var X=N.body[Y],K=X.type;if(K<=m)Ct(N.el,zt(X));else if(K===v)K=(J=Ut(X.view,X.data,X.key,X.opts)._redraw(N,Y,!1)).node.type,Ct(N.el,zt(J.node));else if(K===f){var J;(J=X.vm)._redraw(N,Y),K=J.node.type,Ct(N.el,J.node.el)}}}function zt(N,Y){return N.el==null&&(N.type===b?(N.el=Y||_t(N.tag,N.ns),N.attrs!=null&&ce(N,u,!0),(N.flags&G)===G&&N.body.body(N),l(N.body)?Qt(N):N.body!=null&&N.body!==""&&(N.el.textContent=N.body)):N.type===E?N.el=Y||gt(N.body):N.type===m&&(N.el=Y||j(N.body))),N.el._node=N,N.el}function ve(N,Y){return Y[N.idx+1]}function _e(N,Y){return Y[N.idx-1]}function de(N){return N.parent}window.lisMove=Jt;var ee=1,qt=2;function Kt(N,Y,X,K,J,it,dt,yt){return function(pt,At,It,St,oe,Ht){var Tt,Rt;if(St[K]!=null){if((Tt=St[K]._node)==null)return void(St[K]=N(St[K]));if(de(Tt)!==pt)return Rt=N(St[K]),Tt.vm!=null?Tt.vm.unmount(!0):Ot(At,St[K]),void(St[K]=Rt)}if(St[J]==oe)return qt;if(St[J].el==null)X(At,zt(St[J]),St[K]),St[J]=Y(St[J],It);else if(St[J].el===St[K])St[J]=Y(St[J],It),St[K]=N(St[K]);else{if(Ht||Tt!==St[dt])return Ht&&St[K]!=null?Jt(N,Y,X,K,J,At,It,Tt,St):ee;Rt=St[K],St[K]=N(Rt),yt(At,Rt,St[it]),St[it]=Rt}}}function Jt(N,Y,X,K,J,it,dt,yt,pt){if(yt._lis)X(it,pt[J].el,pt[K]),pt[J]=Y(pt[J],dt);else{var At=O(yt.idx,pt.tombs);yt._lis=!0;var It=N(pt[K]);X(it,pt[K],At!=null?dt[pt.tombs[At]].el:At),At==null?pt.tombs.push(yt.idx):pt.tombs.splice(At,0,yt.idx),pt[K]=It}}var Ft=Kt(nt,ve,Ct,"lftSib","lftNode","rgtSib","rgtNode",Lt),me=Kt(xt,_e,Lt,"rgtSib","rgtNode","lftSib","lftNode",Ct);function ue(N,Y){var X=Y.body,K=N.el,J=N.body,it={lftNode:J[0],rgtNode:J[J.length-1],lftSib:(X[0]||u).el,rgtSib:(X[X.length-1]||u).el};t:for(;;){for(;;){var dt=Ft(N,K,J,it,null,!1);if(dt===ee)break;if(dt===qt)break t}for(;;){var yt=me(N,K,J,it,it.lftNode,!1);if(yt===ee)break;if(yt===qt)break t}ne(N,K,J,it);break}}function ne(N,Y,X,K){for(var J=Array.prototype.slice.call(Y.childNodes),it=[],dt=0;dt<J.length;dt++){var yt=J[dt]._node;yt.parent===N&&it.push(yt.idx)}for(var pt=I(it).map(function(It){return it[It]}),At=0;At<pt.length;At++)X[pt[At]]._lis=!0;for(K.tombs=pt;Ft(N,Y,X,K,null,!0)!==qt;);}function ie(N){return N.el._node.parent!==N.parent}function Mt(N,Y,X){return Y[X]}function $e(N,Y,X){for(;X<Y.length;X++){var K=Y[X];if(K.vm!=null){if(N.type===v&&K.vm.view===N.view&&K.vm.key===N.key||N.type===f&&K.vm===N.vm)return K}else if(!ie(K)&&N.tag===K.tag&&N.type===K.type&&N.key===K.key&&(N.flags&~V)==(K.flags&~V))return K}return null}function Ve(N,Y,X){return Y[Y._keys[N.key]]}function ye(N,Y){at(Y.hooks,"willRecycle",Y,N);var X=N.el=Y.el,K=Y.body,J=N.body;if(X._node=N,N.type!==E||J===K){N.attrs==null&&Y.attrs==null||ce(N,Y,!1);var it=l(K),dt=l(J),yt=(N.flags&G)===G;it?dt||yt?an(N,Y):J!==K&&(J!=null?X.textContent=J:kt(Y)):dt?(kt(Y),Qt(N)):J!==K&&(X.firstChild?X.firstChild.nodeValue=J:X.textContent=J),at(Y.hooks,"didRecycle",Y,N)}else X.nodeValue=J}function an(N,Y){var X=N.body,K=X.length,J=Y.body,it=J.length,dt=(N.flags&G)===G,yt=(N.flags&R)===R,pt=(N.flags&q)===q,At=!yt&&N.type===b,It=!0,St=pt?Ve:yt||dt?Mt:$e;if(pt){for(var oe={},Ht=0;Ht<J.length;Ht++)oe[J[Ht].key]=Ht;J._keys=oe}if(At&&K===0)return kt(Y),void(dt&&(N.body=[]));var Tt,Rt,bn=0,Be=!1,Zt=0;if(dt)var ze={key:null},We=Array(K);for(Ht=0;Ht<K;Ht++){if(dt){var Ie=!1,Oe=null;It&&(pt&&(ze.key=X.key(Ht)),Tt=St(ze,J,Zt)),Tt!=null?(Rt=Tt.idx,(Oe=X.diff(Ht,Tt))===!0?(($t=Tt).parent=N,$t.idx=Ht,$t._lis=!1):Ie=!0):Ie=!0,Ie&&(tt($t=X.tpl(Ht),N,Ht),$t._diff=Oe??X.diff(Ht),Tt!=null&&ye($t,Tt)),We[Ht]=$t}else{var $t,he=($t=X[Ht]).type;if(he<=m)(Tt=It&&St($t,J,Zt))&&(ye($t,Tt),Rt=Tt.idx);else if(he===v){if(Tt=It&&St($t,J,Zt)){Rt=Tt.idx;var Pe=Tt.vm._update($t.data,N,Ht)}else Pe=Ut($t.view,$t.data,$t.key,$t.opts)._redraw(N,Ht,!1);he=Pe.node.type}else if(he===f){var xn=$($t.vm);he=(Pe=$t.vm._update($t.data,N,Ht,xn)).node.type}}if(!pt&&Tt!=null&&(Rt===Zt?++Zt===it&&K>it&&(Tt=null,It=!1):Be=!0,it>100&&Be&&++bn%10==0))for(;Zt<it&&ie(J[Zt]);)Zt++}dt&&(N.body=We),At&&ue(N,Y)}function be(N,Y,X,K){var J=this;J.view=N,J.data=Y,J.key=X,K&&(J.opts=K,J.config(K));var it=a(N)?N:N.call(J,J,Y,X,K);e(it)?J.render=it:(J.render=it.render,J.config(it)),J._redrawAsync=C(function(dt){return J.redraw(!0)}),J._updateAsync=C(function(dt){return J.update(dt,!0)}),J.init&&J.init.call(J,J,J.data,J.key,K)}var Ee=be.prototype={constructor:be,_diff:null,init:null,view:null,key:null,data:null,state:null,api:null,opts:null,node:null,hooks:null,onevent:s,refs:null,render:null,mount:sn,unmount:ln,config:function(N){var Y=this;N.init&&(Y.init=N.init),N.diff&&(Y.diff=N.diff),N.onevent&&(Y.onevent=N.onevent),N.hooks&&(Y.hooks=o(Y.hooks||{},N.hooks)),N.onemit&&(Y.onemit=o(Y.onemit||{},N.onemit))},parent:function(){return T(this.node.parent)},root:function(){for(var N=this.node;N.parent;)N=N.parent;return N.vm},redraw:function(N){var Y=this;return N?Y._redraw(null,null,$(Y)):Y._redrawAsync(),Y},update:function(N,Y){var X=this;return Y?X._update(N,null,null,$(X)):X._updateAsync(N),X},_update:dn,_redraw:cn,_redrawAsync:null,_updateAsync:null};function sn(N,Y){var X=this;return Y?(kt({el:N,flags:0}),X._redraw(null,null,!1),N.nodeName.toLowerCase()!==X.node.tag?(zt(X.node),Ct(N.parentNode,X.node.el,N),N.parentNode.removeChild(N)):Ct(N.parentNode,zt(X.node,N),N)):(X._redraw(null,null),N&&Ct(N,X.node.el)),N&&ct(X),X}function ln(N){var Y=this,X=Y.node;Ot(X.el.parentNode,X.el),N||ct(Y)}function je(N,Y,X,K){return X!=null&&(X.body[K]=Y,Y.idx=K,Y.parent=X,Y._lis=!1),N}function cn(N,Y,X){var K,J,it=N==null,dt=this,yt=dt.node&&dt.node.el&&dt.node.el.parentNode,pt=dt.node;if(dt.diff!=null&&(K=dt._diff,dt._diff=J=dt.diff(dt,dt.data),pt!=null)){var At=l(K)?x:g;if(K===J||At(K,J))return je(dt,pt,N,Y)}yt&&at(dt.hooks,"willRedraw",dt,dt.data);var It=dt.render.call(dt,dt,dt.data,K,J);if(It===pt)return je(dt,pt,N,Y);if(dt.refs=null,dt.key!=null&&It.key!==dt.key&&(It.key=dt.key),dt.node=It,N?(tt(It,N,Y,dt),N.body[Y]=It):pt&&pt.parent?(tt(It,pt.parent,pt.idx,dt),pt.parent.body[pt.idx]=It):tt(It,null,null,dt),X!==!1)if(pt)if(pt.tag!==It.tag||pt.key!==It.key){pt.vm=It.vm=null;var St=pt.el.parentNode,oe=nt(pt.el);Ot(St,pt.el),Ct(St,zt(It),oe),pt.el=It.el,It.vm=dt}else ye(It,pt);else zt(It);return yt&&at(dt.hooks,"didRedraw",dt,dt.data),it&&yt&&ct(dt),dt}function dn(N,Y,X,K){var J=this;return N!=null&&J.data!==N&&(at(J.hooks,"willUpdate",J,N),J.data=N),J._redraw(Y,X,K)}function Fe(N,Y,X,K){var J,it;return X==null?a(Y)?J=Y:it=Y:(J=Y,it=X),U(N,J,it,K)}var Re="http://www.w3.org/2000/svg";function un(N,Y,X,K){var J=Fe(N,Y,X,K);return J.ns=Re,J}function hn(N){var Y=new F;return Y.type=m,Y.body=N,Y}function Ce(N,Y,X,K){this.view=N,this.data=Y,this.key=X,this.opts=K}function fn(N,Y,X,K){return new Ce(N,Y,X,K)}function ke(N){this.vm=N}function pn(N){return new ke(N)}function gn(N){var Y=new F;return Y.type=b,Y.el=Y.key=N,Y}function vn(N,Y){var X=N.length,K={items:N,length:X,key:function(J){return Y.key(N[J],J)},diff:function(J,it){var dt=Y.diff(N[J],J);if(it==null)return dt;var yt=it._diff;return(dt===yt||l(yt)?x(dt,yt):g(dt,yt))||dt},tpl:function(J){return Y.tpl(N[J],J)},map:function(J){return Y.tpl=J,K},body:function(J){for(var it=Array(X),dt=0;dt<X;dt++){var yt=K.tpl(dt);yt._diff=K.diff(dt),it[dt]=yt,tt(yt,J,dt)}J.body=it}};return K}Ce.prototype={constructor:Ce,type:v,view:null,data:null,key:null,opts:null},ke.prototype={constructor:ke,type:f,vm:null};var Se={config:Pt,ViewModel:be,VNode:F,createView:Ut,defineElement:Fe,defineSvgElement:un,defineText:B,defineComment:hn,defineView:fn,injectView:pn,injectElement:gn,lazyList:vn,FIXED_BODY:R,DEEP_REMOVE:V,KEYED_LIST:q,LAZY_LIST:G};function _n(N,Y){mn(this,N,Y)}function mn(N,Y,X){if(Y.type!=null){if(N.vm!=null)return;tt(Y,N.parent,N.idx,null),N.parent.body[N.idx]=Y,ye(Y,N),X&&S(Y),ct(T(Y))}else{var K=Object.create(N);K.attrs=o({},N.attrs);var J=o(N.attrs,Y);if(N._class!=null){var it=J.class;J.class=it!=null&&it!==""?N._class+" "+it:N._class}ce(N,K),X&&S(N)}}function Le(N,Y){var X=N.body;if(l(X))for(var K=0;K<X.length;K++){var J=X[K];J.vm!=null?Y.push(J.vm):Le(J,Y)}return Y}function Ne(N){var Y,X,K=arguments,J=K.length;if(J>1){var it=1;a(K[1])&&(X=K[1],it=2),Y=J===it+1&&(n(K[it])||l(K[it])||X&&(X._flags&G)===G)?K[it]:h(K,it)}return U(N,X,Y)}function yn(){var N=Ne.apply(null,arguments);return N.ns=Re,N}return z.patch=_n,Ee.emit=Wt,Ee.onemit=null,Ee.body=function(){return Le(this.node,[])},Se.defineElementSpread=Ne,Se.defineSvgElementSpread=yn,Se}()},function(W,_,y){var b,E=this&&this.__extends||(b=function(u,s){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,r){l.__proto__=r}||function(l,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(l[a]=r[a])},b(u,s)},function(u,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function l(){this.constructor=u}b(u,s),u.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.ContextMenu=void 0;var m=y(1),v=y(2),f=y(21),d=y(30),p=function(u){function s(l,r){var a=u.call(this,l,(0,m.extend)({$name:"context-menu"},r))||this;return a._isContextMenu=!0,a}return E(s,u),s.prototype.showAt=function(l,r){if(r===void 0&&(r="bottom"),l instanceof MouseEvent)this._close(l),this._changeActivePosition({left:window.pageXOffset+l.x+1,right:window.pageXOffset+l.x+1,top:window.pageYOffset+l.y,bottom:window.pageYOffset+l.y,zIndex:(0,f.getZIndex)(l.target)},r);else if(window.TouchEvent&&l instanceof TouchEvent)this._close(l),this._changeActivePosition({left:window.pageXOffset+l.touches[0].clientX,right:window.pageXOffset+l.touches[0].clientX,top:window.pageYOffset+l.touches[0].clientY,bottom:window.pageYOffset+l.touches[0].clientY,zIndex:(0,f.getZIndex)(l.target)},r);else if(l instanceof HTMLElement||typeof l=="string"){var a=(0,v.toNode)(l);this._changeActivePosition((0,v.getRealPosition)(a),r)}},s.prototype._getFactory=function(){return(0,d.createFactory)({widget:this,defaultType:"menuItem",allowedTypes:["menuItem","spacer","separator","customHTML","customHTMLButton"],widgetName:"context-menu"})},s.prototype._close=function(l){var r=this;this.events.on(d.NavigationBarEvents.afterHide,function(){r._activeMenu=null,r._changeActivePosition(null,null)}),u.prototype._close.call(this,l)},s.prototype._getMode=function(l,r,a){return a?this._mode:"right"},s.prototype._changeActivePosition=function(l,r){this._activePosition=l,this._mode=r,this._listenOuterClick(),this.paint()},s}(d.Navbar);_.ContextMenu=p},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.message=void 0;var b=y(1),E=y(2),m=y(46),v=new WeakMap,f=new Map;function d(p,u){var s=document.createElement("div");return s.setAttribute("data-position",u),s.className="dhx_message-container dhx_message-container--"+u+(p===document.body?" dhx_message-container--in-body":""),s}_.message=function(p){var u;typeof p=="string"&&(p={text:p}),p.position=p.position||m.MessageContainerPosition.topRight;var s=document.createElement("div");s.className="dhx_widget dhx_message "+(p.css||""),s.setAttribute("role","alert");var l=p.text&&(0,b.uid)();l&&s.setAttribute("aria-describedby",l),p.html?s.innerHTML=p.html:(s.innerHTML='<span class="dhx_message__text" id='.concat(l,`></span>
		`).concat(p.icon?'<span class="dhx_message__icon dxi '.concat(p.icon,'"></span>'):""),s.querySelector("#".concat(l)).textContent=p.text);var r=p.node?(0,E.toNode)(p.node):document.body;getComputedStyle(r).position==="static"&&(r.style.position="relative");var a=f.get(r);a?a[p.position]||(a[p.position]={stack:[],container:d(r,p.position)}):f.set(r,((u={})[p.position]={stack:[],container:d(r,p.position)},u));var i=f.get(r)[p.position],n=i.stack,e=i.container;function t(c){c===void 0&&(c=!0),s&&(function(h,g){g&&clearTimeout(v.get(h));var x=h.parentNode,C=x.getAttribute("data-position"),k=x.parentNode,I=f.get(k);if(I){var O=I[C];if(O){var D=O.stack,A=D.indexOf(h);A!==-1&&(x.removeChild(h),D.splice(A,1),D.length===0&&k.removeChild(x))}}}(s,c),s=null)}if(n.length===0&&r.appendChild(e),n.push(s),e.appendChild(s),p.expire){var o=setTimeout(function(){return t(!1)},p.expire);v.set(s,o)}return s.onclick=function(){return t()},{close:function(){return t()}}}},function(W,_,y){(function(b){Object.defineProperty(_,"__esModule",{value:!0}),_.alert=void 0;var E=y(65),m=y(66),v=y(1);_.alert=function(f){var d=f.buttons&&f.buttons[0]?f.buttons[0]:E.default.apply,p=(0,m.blockScreen)(f.blockerCss);return new b(function(u){var s="dhx_alert__".concat((0,v.uid)(),"_content"),l="dhx_alert__".concat((0,v.uid)(),"_header"),r=document.createElement("div");r.setAttribute("role","alert"),r.setAttribute("aria-modal","true"),f.text&&r.setAttribute("aria-describedby",s),f.header&&r.setAttribute("aria-labelledby",l),r.className="dhx_widget dhx_alert "+(f.css||"");var a=function(n){n.key!=="Escape"&&n.key!=="Esc"||(i(n),u(!1))};function i(n){n.preventDefault(),p(),document.body.removeChild(r),document.removeEventListener("keydown",a)}r.innerHTML=`
			`.concat(f.header?"<div id=".concat(l,' class="dhx_alert__header"> ').concat(f.htmlEnable!==!1?f.header:""," </div>"):"",`
			`).concat(f.text?"<div id=".concat(s,' class="dhx_alert__content">').concat(f.htmlEnable!==!1?f.text:"","</div>"):"",`
			<div class="dhx_alert__footer `).concat(f.buttonsAlignment?"dhx_alert__footer--"+f.buttonsAlignment:"",`">
				<button type="button" aria-label="confirm" class="dhx_alert__apply-button dhx_button dhx_button--view_flat dhx_button--color_primary dhx_button--size_medium">`).concat(d,`</button>
			</div>`),f.htmlEnable===!1&&(f.header&&(r.querySelector("#".concat(l)).textContent=f.header),f.text&&(r.querySelector("#".concat(s)).textContent=f.text)),document.body.appendChild(r),r.querySelector(".dhx_alert__apply-button").focus(),r.querySelector("button").addEventListener("click",function(n){i(n),u(!0)}),document.addEventListener("keydown",a)})}}).call(this,y(17))},function(W,_,y){(function(b){Object.defineProperty(_,"__esModule",{value:!0}),_.confirm=void 0;var E=y(65),m=y(66),v=y(1);_.confirm=function(f){f.buttonsAlignment=f.buttonsAlignment||"right";var d=f.buttons&&f.buttons[1]?f.buttons[1]:E.default.apply,p=f.buttons&&f.buttons[0]?f.buttons[0]:E.default.reject,u=(0,m.blockScreen)("dhx_alert__overlay-confirm "+(f.blockerCss||""));return new b(function(s){var l=document.createElement("div");l.setAttribute("role","alertdialog"),l.setAttribute("aria-modal","true");var r,a=f.header&&(0,v.uid)(),i=f.header&&(0,v.uid)();i&&l.setAttribute("aria-describedby",i),a&&l.setAttribute("aria-labelledby",a);var n=function(o){u(),l.removeEventListener("click",e),document.removeEventListener("keydown",t),document.body.removeChild(l),s(o)},e=function(o){o.target.tagName==="BUTTON"&&n(o.target.classList.contains("dhx_alert__confirm-aply"))},t=function(o){o.key==="Escape"||o.key==="Esc"?(l.querySelector(".dhx_alert__confirm-aply").focus(),n(o.target.classList.contains("dhx_alert__confirm-reject"))):o.key==="Tab"&&(r==="aply"?(r="reject",l.querySelector(".dhx_alert__confirm-reject").focus()):(r="aply",l.querySelector(".dhx_alert__confirm-aply").focus()),o.preventDefault())};l.className="dhx_widget dhx_alert dhx_alert--confirm"+(f.css?" "+f.css:""),l.innerHTML=`
		`.concat(f.header?'<div class="dhx_alert__header" id='.concat(a,"> ").concat(f.htmlEnable!==!1?f.header:""," </div>"):"",`
		`).concat(f.text?'<div class="dhx_alert__content" id='.concat(i,">").concat(f.htmlEnable!==!1?f.text:"","</div>"):"",`
			<div class="dhx_alert__footer `).concat(f.buttonsAlignment?"dhx_alert__footer--"+f.buttonsAlignment:"",`">
				<button type="button" aria-label="reject" class="dhx_alert__confirm-reject dhx_button dhx_button--view_link dhx_button--color_primary dhx_button--size_medium">`).concat(p,`</button>
				<button type="button"  aria-label="aply"class="dhx_alert__confirm-aply dhx_button dhx_button--view_flat dhx_button--color_primary dhx_button--size_medium">`).concat(d,`</button>
			</div>`),f.htmlEnable===!1&&(f.header&&(l.querySelector("#".concat(a)).textContent=f.header),f.text&&(l.querySelector("#".concat(i)).textContent=f.text)),document.body.appendChild(l),r="aply",l.querySelector(".dhx_alert__confirm-aply").focus(),l.addEventListener("click",e),document.addEventListener("keydown",t)})}}).call(this,y(17))},function(W,_,y){var b,E=this&&this.__extends||(b=function(n,e){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(t[c]=o[c])},b(n,e)},function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=n}b(n,e),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}),m=this&&this.__assign||function(){return m=Object.assign||function(n){for(var e,t=1,o=arguments.length;t<o;t++)for(var c in e=arguments[t])Object.prototype.hasOwnProperty.call(e,c)&&(n[c]=e[c]);return n},m.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.Navbar=void 0;var v=y(1),f=y(0),d=y(3),p=y(21),u=y(2),s=y(14),l=y(5),r=y(8),a=y(38),i=function(n){function e(t,o){var c=n.call(this,t,o)||this;return c._isContextMenu=!1,c._documentHaveListener=!1,c.config=(0,v.extend)({rootId:typeof t=="string"&&t||c._uid},o),c._rootItem={},Array.isArray(c.config.data)?(c.events=new d.EventSystem(c),c.data=new r.TreeCollection({rootId:c.config.rootId},c.events)):c.config.data&&c.config.data.events?(c.data=c.config.data,c.events=c.data.events,c.events.context=c):(c.events=new d.EventSystem(c),c.data=new r.TreeCollection({rootId:c.config.rootId},c.events)),c._documentClick=function(h){if(c._documentHaveListener){var g=(0,u.locateNode)(h),x=c.data.getRoot(),C=g&&g.getAttribute("data-dhx-id"),k=c.data.getParent(C),I="ontouchstart"in window||navigator.msMaxTouchPoints;document.removeEventListener("click",c._documentClick),c._documentHaveListener=!1,((!I||g)&&c._isContextMenu||x!==k&&k&&c.data.getItem(C))&&k&&c.data.getItem(C)&&(!c._isContextMenu||x===(0,u.locate)(h,"data-dhx-widget-id"))||c._close(h)}},c._currentRoot=c.data.getRoot(),c._factory=c._getFactory(),c._initHandlers(),c._keyManager=new s.KeyManager(function(h,g){return g===c._uid}),c._initEvents(),Array.isArray(c.config.data)&&c.data.parse(c.config.data),c}return E(e,n),e.prototype.paint=function(){n.prototype.paint.call(this),this._isContextMenu&&!this._vpopups&&this._init(),this._vpopups&&this._vpopups.redraw()},e.prototype.disable=function(t){var o=this;t!==void 0?this._setProp(t,"disabled",!0):this.data.forEach(function(c){var h=c.id;return o._setProp(h,"disabled",!0)})},e.prototype.enable=function(t){var o=this;t!==void 0?this._setProp(t,"disabled",!1):this.data.forEach(function(c){var h=c.id;return o._setProp(h,"disabled",!1)})},e.prototype.isDisabled=function(t){var o=this.data.getItem(t);if(o)return o.disabled||!1},e.prototype.show=function(t){var o=this;t!==void 0?this._setProp(t,"hidden",!1):this.data.forEach(function(c){var h=c.id;return o._setProp(h,"hidden",!1)})},e.prototype.hide=function(t){var o=this;t!==void 0?this._setProp(t,"hidden",!0):this.data.forEach(function(c){var h=c.id;return o._setProp(h,"hidden",!0)})},e.prototype.destructor=function(){this.events.clear(),this._keyManager&&this._keyManager.destructor(),this._vpopups&&this._vpopups.node&&this._vpopups.unmount(),this.unmount()},e.prototype.select=function(t,o){var c=this;if(o===void 0&&(o=!0),!(0,v.isId)(t))throw new Error("Function argument cannot be empty, for more info check documentation https://docs.dhtmlx.com");o&&this.unselect(),this.data.update(t,{active:!0}),this.data.eachParent(t,function(h){c.data.update(h.id,{active:!0})})},e.prototype.unselect=function(t){var o=this;(0,v.isId)(t)?(this.data.update(t,{active:!1}),this.data.eachChild(t,function(c){o.data.update(c.id,{active:!1})})):this.data.forEach(function(c){o.data.update(c.id,{active:!1})})},e.prototype.isSelected=function(t){if((0,v.isId)(t)&&this.data.getItem(t))return!!this.data.getItem(t).active},e.prototype.getSelected=function(){var t=[];return this.data.forEach(function(o){o.active&&t.push(o.id)}),t},e.prototype._customHandlers=function(){return{}},e.prototype._close=function(t){var o=this;this._popupActive&&this.events.fire(a.NavigationBarEvents.beforeHide,[this._activeMenu,t])&&(this._activeParents&&this._activeParents.forEach(function(c){return o.data.exists(c)&&o.data.update(c,{$activeParent:!1})}),this.config.navigationType==="click"&&(this._isActive=!1),clearTimeout(this._currentTimeout),this._popupActive=!1,this._activeMenu=null,this._vpopups.node&&this._vpopups.unmount(),this._vpopups=null,this.events.fire(a.NavigationBarEvents.afterHide,[t]),this.paint())},e.prototype._init=function(){var t,o=this;if(!this._isContextMenu||this._activePosition){var c=this.getRootNode()||document.documentElement,h=(t=c==null?void 0:c.closest("[data-dhx-theme]"))===null||t===void 0?void 0:t.getAttribute("data-dhx-theme");this._vpopups=(0,f.create)({render:function(){var g;return(0,f.el)("div",{"data-dhx-widget-id":o._uid,"data-dhx-theme":h||"light",class:"dhx_".concat((g=o.config)===null||g===void 0?void 0:g.$name,"--popup-menu ").concat(o._isContextMenu?" dhx_context-menu":""," ").concat(o.config.css?o.config.css.split(" ").map(function(x){return o._isContextMenu?x:x+"--popup-menu"}).join(" "):""),onmousemove:o._handlers.onmousemove,onmouseleave:o._handlers.onmouseleave,onclick:o._handlers.onclick,onmousedown:o._handlers.onmousedown,onkeydown:o._handlers.onkeydown},o._drawPopups())}}),this._vpopups.mount(document.body)}},e.prototype._initHandlers=function(){var t=this;this._isActive=this.config.navigationType!=="click",this._handlers=m({onkeydown:function(o){var c=(0,u.locate)(o)||void 0;(0,u.locateNode)(o,"data-dhx-widget-id").contains(document.activeElement)&&t.events.fire(a.NavigationBarEvents.keydown,[o,c])},onmousemove:function(o){if(t._isActive){var c=(0,u.locateNode)(o);if(c){var h=c.getAttribute("data-dhx-id");if(t._activeMenu!==h){if(t.data.haveItems(h)){t._vpopups||t._init(),t._setRoot(h);var g=(0,u.getRealPosition)(c);t.data.update(h,{$position:g},!1)}t._activeItemChange(h,o)}}}},onmouseleave:function(o){if(t.config.navigationType!=="click")if(t._popupActive){var c=(0,u.locateNode)(o,"data-dhx-id","relatedTarget");if(c){var h=c.getAttribute("data-dhx-id");if(t.data.getItem(h)||(t._close(o),t._activeItemChange(null,o)),t.data.haveItems(h)){t._vpopups||t._init();var g=(0,u.getRealPosition)(c);t.data.update(h,{$position:g},!1),t._activeItemChange(h,o)}}else t._close(o),t._activeItemChange(null,o)}else t._activeItemChange(null,o)},onclick:function(o){var c=(0,u.locateNode)(o);if(c){var h=c.getAttribute("data-dhx-id");if(!t.isDisabled(h)){var g=t.data.getItem(h);if(!(g!=null&&g.multiClick))if(t.data.haveItems(h)){if(t._vpopups||t._init(),h===t._currentRoot)return;t._isActive||(t._isActive=!0),t._setRoot(h);var x=(0,u.getRealPosition)(c);t.data.update(h,{$position:x},!1),t._activeItemChange(h,o),t.events.fire(a.NavigationBarEvents.click,[h,o])}else switch(g==null?void 0:g.type){case"input":case"title":break;case"menuItem":case"selectButton":t._onMenuItemClick(h,o);break;case"imageButton":case"button":case"customButton":case"customHTML":case"navItem":g.twoState&&t.data.update(g.id,{active:!g.active}),t.events.fire(a.NavigationBarEvents.click,[h,o]),t._close(o);break;default:t._close(o)}}}},onmousedown:function(o){var c=(0,u.locateNode)(o);if(c){var h=c.getAttribute("data-dhx-id"),g=t.data.getItem(h);if(g!=null&&g.multiClick){var x,C=365,k=function(){t.events.fire(a.NavigationBarEvents.click,[h,o]),C>50&&(C-=55),x=setTimeout(k,C)},I=function(){clearTimeout(x),document.removeEventListener("mouseup",I)};k(),document.addEventListener("mouseup",I)}}}},this._customHandlers())},e.prototype._initEvents=function(){var t=this,o=null;[a.DataEvents.change,a.DataEvents.filter].forEach(function(c){t.events.on(c,function(){return t.paint(),o&&clearTimeout(o),void(o=setTimeout(function(){var h={};t.data.eachChild(t.data.getRoot(),function(g){g.group&&(g.twoState=!0,function(x,C){x[C.group]?(C.active&&(x[C.group].active=C.id),x[C.group].elements.push(C.id)):x[C.group]={active:C.active?C.id:null,elements:[C.id]}}(h,g))},!0),t._groups=h,t._resetHotkeys(),o=null,t.paint()},100))})}),this.events.on(a.NavigationBarEvents.click,function(c){var h=t.data.getItem(c),g=t.data.getItem(h==null?void 0:h.parent);if(g&&g.type==="selectButton"&&t.data.update(h.parent,{value:h.value,icon:h.icon}),h==null?void 0:h.group){var x=t._groups[h.group];x.active&&t.data.update(x.active,{active:!1}),x.active=h.id,t.data.update(h.id,{active:!0})}}),this.events.on(a.NavigationBarEvents.inputChange,function(c,h){t.data.update(c,{value:h})}),this._customInitEvents()},e.prototype._getMode=function(t,o,c){return t.parent===o?"bottom":"right"},e.prototype._drawMenuItems=function(t,o){var c=this;return o===void 0&&(o=!0),this.data.map(function(h){return c._factory(h,o)},t,!1)},e.prototype._setRoot=function(t){},e.prototype._getParents=function(t,o){var c=[],h=!1,g=this.data.getItem(t),x=g&&g.disabled;return this.data.eachParent(t,function(C){C.id===o?(c.push(C.id),h=!0):h||c.push(C.id)},!x),this._isContextMenu&&this._activePosition&&c.push(o),c},e.prototype._listenOuterClick=function(){this._documentHaveListener||(document.addEventListener("click",this._documentClick,!0),this._documentHaveListener=!0)},e.prototype._customInitEvents=function(){},e.prototype._drawPopups=function(){var t=this,o=this._activeMenu;if(!this._isContextMenu&&!o)return null;var c=this.getRootNode(),h=c&&c.offsetParent&&c.offsetParent.offsetParent,g=(0,p.getZIndex)(h),x=this._currentRoot,C=this._getParents(o,x);return this._activeParents=C,C.forEach(function(k){return t.data.exists(k)&&t.data.update(k,{$activeParent:!0},!1)}),C.map(function(k){if(!t.data.haveItems(k))return null;var I=t.data.getItem(k)||t._rootItem;return t._popupActive=!0,(0,f.el)("ul",m({class:"dhx_widget dhx_menu"+(t.config.menuCss?" "+t.config.menuCss:""),_key:k,_hooks:{didInsert:function(O){var D=O.el.getBoundingClientRect(),A=D.width,H=D.height,S=t._isContextMenu&&t._activePosition&&k===x?t._activePosition:I.$position,$=t._getMode(I,x,S===t._activePosition),w=(0,u.calculatePosition)(S,{mode:$,auto:!0,width:A,height:H});I.$style=m(m({},w),{zIndex:t._activePosition&&t._activePosition.zIndex||g}),O.patch({style:I.$style})},didRecycle:function(O,D){if(t._isContextMenu&&t._activePosition&&k===x){var A=D.el.getBoundingClientRect(),H=A.width,S=A.height,$=(0,u.calculatePosition)(t._activePosition,{mode:t._getMode(I,x,!0),width:H,height:S});I.$style=m(m({},$),{zIndex:t._activePosition.zIndex||g}),D.patch({style:I.$style})}}},tabindex:0,style:I.$style||{position:"absolute"}},function(O){return{role:"menu","aria-labeledby":O.id,"aria-live":"polite"}}(I)),t._drawMenuItems(k))}).reverse()},e.prototype._onMenuItemClick=function(t,o){var c=this.data.getItem(t);c.disabled||(c.twoState&&this.data.update(c.id,{active:!c.active}),this.events.fire(a.NavigationBarEvents.click,[t,o]),this._close(o))},e.prototype._activeItemChange=function(t,o){var c=this;if(this._activeParents){var h=this._getParents(t,this._currentRoot);this._activeParents.forEach(function(g){c.data.exists(g)&&!h.includes(g)&&c.data.update(g,{$activeParent:!1},!1)})}(0,v.isId)(t)&&!this._documentHaveListener&&this._listenOuterClick(),(0,v.isId)(t)&&this.data.haveItems(t)?(this._activeMenu===t&&this._popupActive||this.events.fire(a.NavigationBarEvents.openMenu,[t]),clearTimeout(this._currentTimeout),this.paint()):(clearTimeout(this._currentTimeout),this._currentTimeout=setTimeout(function(){return c.paint()},400)),this._activeMenu=t},e.prototype._resetHotkeys=function(){var t=this;this._keyManager.removeHotKey(null,this),this.data.map(function(o){o.hotkey&&t._keyManager.addHotKey(o.hotkey,function(){return t._onMenuItemClick(o.id,null)})})},e.prototype._setProp=function(t,o,c){var h,g=this;Array.isArray(t)?t.forEach(function(x){var C;return g.data.update(x,((C={})[o]=c,C))}):this.data.update(t,((h={})[o]=c,h))},e}(l.View);_.Navbar=i},function(W,_,y){(function(b){var E=this&&this.__assign||function(){return E=Object.assign||function(u){for(var s,l=1,r=arguments.length;l<r;l++)for(var a in s=arguments[l])Object.prototype.hasOwnProperty.call(s,a)&&(u[a]=s[a]);return u},E.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.Loader=void 0;var m=y(1),v=y(23),f=y(22),d=y(1),p=function(){function u(s,l){this._parent=s,this._changes=l}return u.prototype.load=function(s,l){var r=this;if(!s.config||this._parent.events.fire(f.DataEvents.beforeLazyLoad,[]))return this._parent.loadData=s.load().then(function(a){return a?r.parse(a,l):[]}).catch(function(a){r._parent.events.fire(f.DataEvents.loadError,[a])})},u.prototype.parse=function(s,l){var r=this;if(l===void 0&&(l=f.DataDriver.json),l!=="json"||(0,v.hasJsonOrArrayStructure)(s)||this._parent.events.fire(f.DataEvents.loadError,["Uncaught SyntaxError: Unexpected end of input"]),!((s=(l=(0,v.toDataDriver)(l)).toJsonArray(s))instanceof Array)){var a=s.total_count-1,i=s.from;if(s=s.data,this._parent.getLength()!==0)return s.forEach(function(o,c){var h=i+c,g=r._parent.getId(h);if((0,m.isId)(g)){var x=r._parent.getItem(g);if(x&&x.$empty){var C=o.id||x.id;(0,d.isDefined)(o.id)&&r._parent.changeId(g,C,!0),r._parent.update(C,E(E({},o),{$empty:void 0}),!0)}}else(0,v.dhxWarning)("item not found")}),this._parent.events.fire(f.DataEvents.afterLazyLoad,[i,s.length]),this._parent.events.fire(f.DataEvents.change),s;for(var n=[],e=0,t=0;e<=a;e++)e>=i&&e<=i+s.length-1?(n.push(s[t]),t++):n.push({$empty:!0});s=n}return this._parent.getInitialData()&&this._parent.removeAll(),this._parent.$parse(s),s},u.prototype.save=function(s){for(var l=this,r=this._getUniqueOrder(),a=function(t){if(t.saving||t.pending)(0,v.dhxWarning)("item is saving");else{var o=i._findPrevState(t.id);if(o&&o.saving){var c=new b(function(h,g){o.promise.then(function(){t.pending=!1,h(l._setPromise(t,s))}).catch(function(x){l._removeFromOrder(o),l._setPromise(t,s),(0,v.dhxWarning)(x),g(x)})});i._addToChain(c),t.pending=!0}else i._setPromise(t,s)}},i=this,n=0,e=r;n<e.length;n++)a(e[n]);r.length&&this._parent.saveData.then(function(){l._saving=!1})},u.prototype.updateChanges=function(s){this._changes=s},u.prototype._setPromise=function(s,l){var r,a=this;switch(s.status){case"remove":r="delete";break;case"add":r="insert";break;default:r=s.status}return s.promise=l.save(s.obj,r),s.promise.then(function(){a._removeFromOrder(s)}).catch(function(i){s.saving=!1,s.error=!0,(0,v.dhxError)(i)}),s.saving=!0,this._saving=!0,this._addToChain(s.promise),s.promise},u.prototype._addToChain=function(s){this._parent.saveData&&this._saving?this._parent.saveData=this._parent.saveData.then(function(){return s}):this._parent.saveData=s},u.prototype._findPrevState=function(s){for(var l=0,r=this._changes.order;l<r.length;l++){var a=r[l];if(a.id===s)return a}return null},u.prototype._removeFromOrder=function(s){this._changes.order=this._changes.order.filter(function(l){return!(0,v.isEqualObj)(l,s)})},u.prototype._getUniqueOrder=function(){return this._changes.order.reduce(function(s,l){var r=s.findIndex(function(i){return i.id===l.id}),a=r>-1?s[r]:null;return a&&a.saving===!1&&a.status==="add"?l.status==="remove"?s.splice(r,1):a.obj=l.obj:a&&a.saving===!1&&a.status==="update"?s.splice(r,1,l):s.push(l),s},[])},u}();_.Loader=p}).call(this,y(17))},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.XMLDriver=void 0;var b=y(133);function E(v,f){f=f||{};var d=v.attributes;if(d&&d.length)for(var p=0;p<d.length;p++)f[d[p].name]=d[p].value;var u=v.childNodes;for(p=0;p<u.length;p++)if(u[p].nodeType===1){var s=u[p].tagName;f[s]?(typeof f[s].push!="function"&&(f[s]=[f[s]]),f[s].push(E(u[p],{}))):f[s]=E(u[p],{})}return f}var m=function(){function v(){}return v.prototype.toJsonArray=function(f){return this.getRows(f)},v.prototype.toJsonObject=function(f){var d;return typeof f=="string"&&(d=this._fromString(f)),E(d)},v.prototype.serialize=function(f){return(0,b.jsonToXML)(f)},v.prototype.getFields=function(f){return f},v.prototype.getRows=function(f){if(typeof f=="string"&&(f=this._fromString(f)),f){var d=f.childNodes&&f.childNodes[0]&&f.childNodes[0].childNodes;return d&&d.length?this._getRows(d):null}return[]},v.prototype._getRows=function(f){for(var d=[],p=0;p<f.length;p++)f[p].tagName==="item"&&d.push(this._nodeToJS(f[p]));return d},v.prototype._fromString=function(f){try{return new DOMParser().parseFromString(f,"text/xml")}catch{return null}},v.prototype._nodeToJS=function(f){var d={};if(this._haveAttrs(f))for(var p=f.attributes,u=0;u<p.length;u++){var s=p[u],l=s.name,r=s.value;d[l]=this._toType(r)}if(f.nodeType===3)return d.value=d.value||this._toType(f.textContent),d;var a=f.childNodes;if(a)for(u=0;u<a.length;u++){var i=a[u],n=i.tagName;n&&(n==="items"&&i.childNodes?d[n]=this._getRows(i.childNodes):this._haveAttrs(i)?d[n]=this._nodeToJS(i):d[n]=this._toType(i.textContent))}return d},v.prototype._toType=function(f){return f==="false"||f==="true"?f==="true":f},v.prototype._haveAttrs=function(f){return f.attributes&&f.attributes.length},v}();_.XMLDriver=m},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.jsonToXML=void 0;var b=4;function E(v){return" ".repeat(v)}function m(v,f){f===void 0&&(f=b);var d=E(f)+`<item>
`;for(var p in v)Array.isArray(v[p])?(d+=E(f+b)+"<".concat(p,`>
`),d+=v[p].map(function(u){return m(u,f+2*b)}).join(`
`)+`
`,d+=E(f+b)+"</".concat(p,`>
`)):d+=E(f+b)+"<".concat(p,">").concat(v[p],"</").concat(p,`>
`);return d+=E(f)+"</item>"}_.jsonToXML=function(v,f){f===void 0&&(f="root");for(var d=`<?xml version="1.0" encoding="iso-8859-1"?>
<`.concat(f,">"),p=0;p<v.length;p++)d+=`
`+m(v[p]);return d+`
</`.concat(f,">")}},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.Sort=void 0;var b=y(23),E=function(){function m(){}return m.prototype.sort=function(v,f,d){this._createSorter(f),d===f&&(f=null),(d||f)&&this._sort(v,d,f)},m.prototype._createSorter=function(v){var f=this;v&&!v.rule&&(v.rule=function(d,p){var u,s,l=(u=f._checkVal(v.as,d[v.by]))!==null&&u!==void 0?u:"",r=(s=f._checkVal(v.as,p[v.by]))!==null&&s!==void 0?s:"";return(0,b.naturalCompare)(l.toString(),r.toString())})},m.prototype._checkVal=function(v,f){return v?v.call(this,f):f},m.prototype._sort=function(v,f,d){var p=this,u={asc:1,desc:-1};return v.sort(function(s,l){var r=0;return f&&(r=f.rule.call(p,s,l)*(u[f.dir]||u.asc)),r===0&&d&&(r=d.rule.call(p,s,l)*(u[d.dir]||u.asc)),r})},m}();_.Sort=E},function(W,_,y){var b,E=this&&this.__extends||(b=function(r,a){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(i[e]=n[e])},b(r,a)},function(r,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function i(){this.constructor=r}b(r,a),r.prototype=a===null?Object.create(a):(i.prototype=a.prototype,new i)}),m=this&&this.__spreadArray||function(r,a,i){if(i||arguments.length===2)for(var n,e=0,t=a.length;e<t;e++)!n&&e in a||(n||(n=Array.prototype.slice.call(a,0,e)),n[e]=a[e]);return r.concat(n||Array.prototype.slice.call(a))};Object.defineProperty(_,"__esModule",{value:!0}),_.TreeCollection=void 0;var v=y(1),f=y(68),d=y(32),p=y(23),u=y(22);function s(r,a,i,n){n!==void 0&&n!==-1&&r[i]&&r[i][n]?r[i].splice(n,0,a):(r[i]||(r[i]=[]),r[i].push(a))}var l=function(r){function a(i,n){var e,t=r.call(this,i,n)||this;t._childs={};var o=t._root=i&&i.rootId||"_ROOT_"+(0,v.uid)();return t._childs=((e={})[o]=[],e),t._initChilds=null,t}return E(a,r),a.prototype.add=function(i,n,e){var t,o=this;if(n===void 0&&(n=-1),e===void 0&&(e=this._root),this.events.fire(u.DataEvents.beforeAdd,[i]))return typeof i!="object"&&(i={value:i}),t=Array.isArray(i)?i.map(function(c,h){return o._add(c,n,e,h)}):this._add(i,n,e),this._reapplyFilters(!1),t},a.prototype.getRoot=function(){return this._root},a.prototype.getParent=function(i,n){if(n===void 0&&(n=!1),!this._pull[i])return null;var e=this._pull[i].parent;return n?this._pull[e]:e},a.prototype.getItems=function(i){return this._childs&&this._childs[i]?this._childs[i]:[]},a.prototype.getLength=function(i){return i===void 0&&(i=this._root),this._childs[i]?this._childs[i].length:null},a.prototype.removeAll=function(i){var n;if((0,v.isId)(i)){if(this._childs[i])for(var e=0,t=m([],this._childs[i],!0);e<t.length;e++){var o=t[e];this.remove(o.id)}}else{r.prototype.removeAll.call(this);var c=this._root;this._initChilds=null,this._childs=((n={})[c]=[],n)}},a.prototype.getIndex=function(i){var n=this.getParent(i);return n&&this._childs[n]?this._childs[n].findIndex(function(e){return(e==null?void 0:e.id)==i}):-1},a.prototype.sort=function(i){var n=this;if(i){for(var e in this._childs)this._sort.sort(this._childs[e],i);if(this._initChilds&&Object.keys(this._initChilds).length)for(var e in this._initChilds)this._sort.sort(this._initChilds[e],i)}else this._childs={},this._parse_data(Object.keys(this._pull).map(function(t){return n._pull[t]})),this._reapplyFilters(!1);this.events.fire(u.DataEvents.change,[void 0,"sort",i])},a.prototype.filter=function(i,n,e){if(n!=null&&n.$restore&&(i=this._normalizeFilters(i||this._filters)),!(i&&(n!=null&&n.add)||(this.restoreOrder(),n==null?void 0:n.$restore)))for(var t in this._filters){var o=this._filters[t],c=o.rule,h=o.config;h!=null&&h.permanent?this._applyFilter(c,h):delete this._filters[t]}var g;if(i&&!(n!=null&&n.$restore))g=(n==null?void 0:n.id)||(0,v.uid)(),n||(n={}),n.type=n.type||u.TreeFilterType.all,this._filters[g]={rule:i,config:n},this._applyFilter(i,n);else for(var t in i)this._applyFilter(i[t],this._filters[t].config);if(!e){var x=this._getPureFilters(this._filters);this.events.fire(u.DataEvents.filter,[(0,v.isEmptyObj)(x)?null:x])}return g},a.prototype.restoreOrder=function(){this._initChilds&&(this._childs=this._initChilds,this._initChilds=null)},a.prototype.copy=function(i,n,e,t){var o=this;return e===void 0&&(e=this),t===void 0&&(t=this._root),i instanceof Array?i.map(function(c,h){return o._copy(c,n,e,t,h)}):this._copy(i,n,e,t)},a.prototype.move=function(i,n,e,t){var o=this;return e===void 0&&(e=this),t===void 0&&(t=this._root),i instanceof Array?i.map(function(c,h){return o._move(c,n,e,t,h)}):this._move(i,n,e,t)},a.prototype.forEach=function(i,n,e){if(n===void 0&&(n=this._root),e===void 0&&(e=1/0),this.haveItems(n)&&!(e<1))for(var t=this._childs[n],o=0;o<t.length;o++)i.call(this,t[o],o,t),this.haveItems(t[o].id)&&this.forEach(i,t[o].id,--e)},a.prototype.eachChild=function(i,n,e,t){if(e===void 0&&(e=!0),t===void 0&&(t=function(){return!0}),this.haveItems(i))for(var o=0;o<this._childs[i].length;o++)n.call(this,this._childs[i][o],o),e&&t(this._childs[i][o])&&this.eachChild(this._childs[i][o].id,n,e,t)},a.prototype.getNearId=function(i){return i},a.prototype.loadItems=function(i,n){var e=this;if(n===void 0&&(n=u.DataDriver.json),this.events.fire(u.DataEvents.beforeItemLoad,[i])){var t=this.config.autoload.toString(),o=t+(t.includes("?")?"&id=".concat(i):"?id=".concat(i));new d.DataProxy(o).load().then(function(c){c=(n=(0,p.toDataDriver)(n)).toJsonArray(c),e._parse_data(c,i),e.events.fire(u.DataEvents.change),e.events.fire(u.DataEvents.afterItemLoad,[i])}).catch(function(c){e.events.fire(u.DataEvents.loadError,[c])})}},a.prototype.refreshItems=function(i,n){n===void 0&&(n=u.DataDriver.json),this.removeAll(i),this.loadItems(i,n)},a.prototype.eachParent=function(i,n,e){e===void 0&&(e=!1);var t=this.getItem(i);if(t&&(e&&n.call(this,t),t.parent!==this._root)){var o=this.getItem(t.parent);n.call(this,o),this.eachParent(t.parent,n)}},a.prototype.haveItems=function(i){return i in this._childs},a.prototype.canCopy=function(i,n){if(i===n)return!1;var e=!0;return this.eachParent(n,function(t){return t.id===i?e=!1:null}),e},a.prototype.serialize=function(i,n){i===void 0&&(i=u.DataDriver.json);var e=this._serialize(this._root,n),t=(0,p.toDataDriver)(i);if(t)return t.serialize(e)},a.prototype.getId=function(i,n){if(n===void 0&&(n=this._root),this._childs[n]&&this._childs[n][i])return this._childs[n][i].id},a.prototype.map=function(i,n,e){n===void 0&&(n=this._root),e===void 0&&(e=!0);var t=[];if(!this.haveItems(n))return t;for(var o=0;o<this._childs[n].length;o++)if(t.push(i.call(this,this._childs[n][o],o,this._childs)),e){var c=this.map(i,this._childs[n][o].id,e);t=t.concat(c)}return t},a.prototype.getRawData=function(i,n,e,t,o){var c;return o=o??this._root,this._childs[o]?(c=o===this._root?r.prototype.getRawData.call(this,i,n,this._childs[o]):this._childs[o],t===2?this.flatten(c):c):[]},a.prototype.flatten=function(i){var n=this,e=[];return i.forEach(function(t){e.push(t);var o=n._childs[t.id];o&&t.$opened&&(e=e.concat(n.flatten(o)))}),e},a.prototype._add=function(i,n,e,t){n===void 0&&(n=-1),e===void 0&&(e=this._root),this._setParent(i,e),t>0&&n!==-1&&(n+=1);var o=r.prototype._add.call(this,i,n);if(Array.isArray(i.items))for(var c=0,h=i.items;c<h.length;c++){var g=h[c];this.add(g,-1,i.id)}return o},a.prototype._setParent=function(i,n){i.parent=i.parent?i.parent.toString():n;var e=this._pull[i.parent];e&&!e.items&&(e.items=[])},a.prototype._copy=function(i,n,e,t,o){if(e===void 0&&(e=this),t===void 0&&(t=this._root),!this.exists(i))return null;var c=this._childs[i];if(o&&(n=n===-1?-1:n+o),e===this&&!this.canCopy(i,t))return null;var h=(0,p.copyWithoutInner)(this.getItem(i),{items:!0});if(e.exists(i)&&(h.id=(0,v.uid)()),(0,p.isTreeCollection)(e)){if(this.exists(i)&&(h.parent=t,e!==this&&t===this._root&&(h.parent=e.getRoot()),e.add(h,n),i=h.id),c)for(var g=0,x=c;g<x.length;g++){var C=x[g].id,k=this.getIndex(C);typeof i=="string"&&this.copy(C,k,e,i)}return i}e.add(h,n)},a.prototype._move=function(i,n,e,t,o){if(e===void 0&&(e=this),t===void 0&&(t=this._root),!this.exists(i))return null;if(o&&(n=n===-1?-1:n+o),e!==this){if(!(0,p.isTreeCollection)(e))return e.add((0,p.copyWithoutInner)(this.getItem(i)),n),void this.remove(i);var c=this.copy(i,n,e,t);return this.remove(i),c}if(!this.canCopy(i,t))return null;var h=this.getParent(i),g=this.getIndex(i),x=this._childs[h].splice(g,1)[0];return x.parent=t,this._childs[h].length||delete this._childs[h],this.haveItems(t)||(this._childs[t]=[]),n===-1?n=this._childs[t].push(x):this._childs[t].splice(n,0,x),this.events.fire(u.DataEvents.change,[i,"update",this.getItem(i)]),i},a.prototype._reset=function(i){var n;if((0,v.isId)(i))for(var e=0,t=m([],this._childs[i],!0);e<t.length;e++){var o=t[e];this.remove(o.id)}else{r.prototype._reset.call(this);var c=this._root;this._initChilds=null,this._childs=((n={})[c]=[],n)}},a.prototype._removeCore=function(i){if(this._pull[i]){var n=this.getParent(i);this._childs[n]=this._childs[n].filter(function(e){return e.id!==i}),n===this._root||this._childs[n].length||delete this._childs[n],this._initChilds&&this._initChilds[n]&&(this._initChilds[n]=this._initChilds[n].filter(function(e){return e.id!==i}),n===this._root||this._initChilds[n].length||delete this._initChilds[n]),this._initOrder&&this._initOrder.length&&(this._initOrder=this._initOrder.filter(function(e){return e.id!==i})),this._fastDeleteChilds(this._childs,i),this._initChilds&&this._fastDeleteChilds(this._initChilds,i)}},a.prototype._addToOrder=function(i,n,e){var t=this._childs,o=this._initChilds,c=n.parent;this._pull[n.id]=n,n.parent&&this._pull[n.parent]&&this._pull[n.parent].items&&!this._pull[n.parent].items.find(function(h){return h.id===n.id})&&this._pull[n.parent].items.push(n),r.prototype._addToOrder.call(this,i,n,e),s(t,n,c,e),o&&s(o,n,c,e)},a.prototype._parse_data=function(i,n){var e;n===void 0&&(n=this._root);for(var t=this._order.length,o=0,c=i;o<c.length;o++){var h=c[o];this.config.init&&(h=this.config.init(h)),h&&typeof h!="object"&&(h={value:h}),h.id=(e=h.id)!==null&&e!==void 0?e:(0,v.uid)(),h.parent=h.parent===void 0||h.parent===null||h.parent&&h.$items?n:h.parent,this._pull[h.id]&&(0,p.dhxError)("Item ".concat(h.id," already exist")),this._pull[h.id]=h,this._order[t++]=h,this._childs[h.parent]||(this._childs[h.parent]=[]),this._childs[h.parent].push(h),h.items&&h.items instanceof Object&&this._parse_data(h.items,h.id)}},a.prototype._fastDeleteChilds=function(i,n){if(this._pull[n]&&delete this._pull[n],i[n]){for(var e=0;e<i[n].length;e++)this._fastDeleteChilds(i,i[n][e].id);delete i[n]}},a.prototype._recursiveFilter=function(i,n,e,t,o){var c=this,h=this._childs[e];if(h){var g=function(D){switch(n.type){case u.TreeFilterType.all:return!0;case u.TreeFilterType.level:return t===n.level;case u.TreeFilterType.leafs:return!c.haveItems(D.id)}};if(typeof i=="function"){var x=function(D){return g(D)&&i(D)};(C=h.filter(x)).length?o[e]=C:e===this._root&&(o[e]=[])}else{var C;x=function(D){var A,H=!0;for(var S in i)if(i[S].by&&i[S].match!==""&&(H=i[S].compare?i[S].compare(D[i[S].by],i[S].match,D):((A=D[i[S].by])===null||A===void 0?void 0:A.toString().toLocaleLowerCase().indexOf(i[S].match.toString().toLowerCase()))!==-1),!H)break;return g(D)&&H},(C=h.filter(x)).length?o[e]=C:e===this._root&&(o[e]=[])}for(var k=0,I=h;k<I.length;k++){var O=I[k];this._recursiveFilter(i,n,O.id,t+1,o)}}},a.prototype._serialize=function(i,n){var e=this;return i===void 0&&(i=this._root),this.map(function(t){var o={};for(var c in t)c==="parent"||c==="items"||c.startsWith("$")||(o[c]=t[c]);return n&&(o=n(o)),e.haveItems(t.id)&&(o.items=e._serialize(t.id,n)),o},i,!1)},a.prototype._applyFilter=function(i,n){var e=this;if(i&&(typeof i=="function"||!(0,v.isEmptyObj)(i))){var t;this._initOrder||(this._initOrder=this._order),this._initChilds||(this._initChilds=this._childs);var o={};if(typeof i!="function")if(t={},(0,v.isDefined)(i.by))t[i.by]=i;else for(var c in i)t[c]=i[c];else t=i;this._recursiveFilter(t,n,this._root,0,o),Object.keys(o).forEach(function(h){for(var g=e.getParent(h),x=e.getItem(h);g;)o[g]||(o[g]=[]),x&&!o[g].find(function(C){return C.id===x.id})&&o[g].push(x),x=e.getItem(g),g=e.getParent(g)}),this._childs=o}},a.prototype._normalizeFilters=function(i){var n={};for(var e in i)n[e]=i[e].rule;return n},a}(f.DataCollection);_.TreeCollection=l},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(a){for(var i,n=1,e=arguments.length;n<e;n++)for(var t in i=arguments[n])Object.prototype.hasOwnProperty.call(i,t)&&(a[t]=i[t]);return a},b.apply(this,arguments)},E=this&&this.__spreadArray||function(a,i,n){if(n||arguments.length===2)for(var e,t=0,o=i.length;t<o;t++)!e&&t in i||(e||(e=Array.prototype.slice.call(i,0,t)),e[t]=i[t]);return a.concat(e||Array.prototype.slice.call(i))};Object.defineProperty(_,"__esModule",{value:!0}),_.dragManager=void 0;var m=y(2),v=y(137),f=y(170),d=y(22),p=y(23),u=y(1);function s(a){var i=a.targetTouches?a.targetTouches[0].clientX:a.clientX,n=a.targetTouches?a.targetTouches[0].clientY:a.clientY,e=document.elementFromPoint(i,n);return e!=null&&e.shadowRoot?e.shadowRoot.elementFromPoint(i,n):e}var l=function(){function a(){var i=this;this._transferData={},this._canMove=!0,this._isDrag=!1,this._onMouseMove=function(n){if(i._transferData.start){var e=n.targetTouches?n.targetTouches[0].pageX:n.pageX,t=n.targetTouches?n.targetTouches[0].pageY:n.pageY,o=i._transferData,c=o.x,h=o.y,g=o.start,x=o.componentId;if(!i._transferData.ghost){if(Math.abs(c-e)<3&&Math.abs(h-t)<3)return;var C=i._onDragStart(g,x,n);if(!C)return void i._endDrop(n);i._transferData.ghost=C,document.body.appendChild(i._transferData.ghost)}i._moveGhost(e,t),i._onDrag(n)}},this._onMouseUp=function(n){i._transferData.x&&(i._transferData.ghost?(i._removeGhost(),i._onDrop(n)):i._endDrop(n),n.targetTouches?(document.removeEventListener("touchmove",i._onMouseMove),document.removeEventListener("touchend",i._onMouseUp)):(document.removeEventListener("mousemove",i._onMouseMove),document.removeEventListener("mouseup",i._onMouseUp)))}}return a.prototype.setItem=function(i,n){f.collectionStore.setItem(i,n)},a.prototype.onMouseDown=function(i,n,e){if(i.which===1||i.targetTouches){i.targetTouches?(document.addEventListener("touchmove",this._onMouseMove,!1),document.addEventListener("touchend",this._onMouseUp,!1)):(document.addEventListener("mousemove",this._onMouseMove),document.addEventListener("mouseup",this._onMouseUp));var t=s(i),o=(0,m.locateNode)(t,"data-dhx-id"),c=o&&o.getAttribute("data-dhx-id"),h=(0,m.locate)(t,"data-dhx-widget-id");if(Array.isArray(n)&&n.includes(c)?(this._transferData.source=E([],n,!0),this._itemsForGhost=e):(this._transferData.source=[c],this._itemsForGhost=null),c&&h){var g=(0,m.getBox)(o),x=g.left,C=g.top,k=i.targetTouches?i.targetTouches[0].pageX:i.pageX,I=i.targetTouches?i.targetTouches[0].pageY:i.pageY;this._transferData.initXOffset=k-x,this._transferData.initYOffset=I-C,this._transferData.x=k,this._transferData.y=I,this._transferData.componentId=h,this._transferData.start=c,this._transferData.item=o}}},a.prototype.isDrag=function(){return this._isDrag},a.prototype.cancelCanDrop=function(i){this._canMove=!1,this._isDrag=!1;var n=this._transferData,e=n.start,t=n.source,o=n.target,c=n.dropComponentId,h={start:e,source:t,target:o},g=f.collectionStore.getItem(c);g&&o&&g.events.fire(d.DragEvents.cancelDrop,[h,i]),this._transferData.dropComponentId=null,this._transferData.target=null},a.prototype._moveGhost=function(i,n){this._transferData.ghost&&(this._transferData.ghost.style.left=i-this._transferData.initXOffset+"px",this._transferData.ghost.style.top=n-this._transferData.initYOffset+"px")},a.prototype._removeGhost=function(){document.body.removeChild(this._transferData.ghost)},a.prototype._onDrop=function(i){if(this._canMove){var n=this._transferData,e=n.start,t=n.source,o=n.target,c=n.dropComponentId,h={start:e,source:t,target:o,dropPosition:n.dropPosition},g=f.collectionStore.getItem(c),x=g&&g.config;if(g&&x.dragMode!=="source"){if(g.events.fire(d.DragEvents.beforeDrop,[h,i])){var C={id:o,component:g},k={id:e,component:this._transferData.component,newId:null};this._move(k,C),k.newId&&k.component!==C.component&&(h.start=k.newId),C.component.events.fire(d.DragEvents.afterDrop,[h,i])}this._endDrop(i)}else this._endDrop(i)}else this._endDrop(i)},a.prototype._onDragStart=function(i,n,e){var t=f.collectionStore.getItem(n),o=t.config,c=this._transferData,h={start:c.start,source:c.source,target:c.target};if(o.dragMode==="target"||t._pregroupData)return null;var g=function(x,C,k){k===void 0&&(k=!1);var I=x.getBoundingClientRect(),O=document.createElement("div"),D=x.cloneNode(!0),A=window.getComputedStyle(x.parentElement).fontSize;return D.style.width=I.width+"px",D.style.height=I.height+"px",D.style.maxHeight=I.height+"px",D.style.opacity="0.8",D.style.fontSize=A,k&&C&&C.length||O.appendChild(D),C&&C.length&&C.forEach(function(H,S){var $=H.cloneNode(!0);$.style.width=I.width+"px",$.style.height=I.height+"px",$.style.maxHeight=I.height+"px",$.style.top=12*(S+1)-I.height-I.height*S+"px",$.style.left=12*(S+1)+"px",$.style.opacity="0.6",$.style.zIndex="".concat(-S-1),k||($.style.fontSize=A,$.style.overflow="hidden"),O.appendChild($)}),O.className="dhx_drag-ghost",O}(this._transferData.item,this._itemsForGhost,o.dragItem==="row"||o.dragItem==="column"||o.dragItem==="both");return t.events.fire(d.DragEvents.beforeDrag,[h,e,g])&&(0,u.isId)(i)?(t.events.fire(d.DragEvents.dragStart,[h,e]),this._isDrag=!0,this._toggleTextSelection(!0),this._transferData.component=t,this._transferData.dragConfig=o,g):null},a.prototype._onDrag=function(i){var n=s(i),e=(0,m.locate)(n,"data-dhx-widget-id"),t=f.collectionStore.getItem(e);if(t){var o=!!(0,m.locateNodeByClassName)(n,"dhx_grid-header")||!!(0,m.locateNodeByClassName)(n,"dhx_grid-footer"),c=t.config.columns?t.config:void 0,h=c&&(c.dragItem==="both"||c.dragItem==="column");if(!o||h){var g=(0,m.locate)(n,"data-dhx-id"),x=(0,m.locate)(n,"data-dhx-root-id");if(!g&&!x)return this.cancelCanDrop(i),this._transferData.dropComponentId=e,this._transferData.target=null,void this._canDrop(i);var C=this._transferData,k=C.dropComponentId,I=C.start,O=C.source,D=C.target,A=C.componentId,H=C.dropPosition;if(t.config.dropBehaviour==="complex"){var S=function(w){var T=w.targetTouches?w.targetTouches[0].clientY:w.clientY,F=(0,m.locateNode)(s(w));if(!F)return null;var z=F.childNodes[0];if(z){var B=z.getBoundingClientRect();return(T-B.top)/B.height}}(i);this._transferData.dropPosition=S<=.25?"top":S>=.75?"bottom":"in"}else if((D===g||!g&&D===x)&&k===e)return;var $={id:I,component:this._transferData.component};t.config.dragMode!=="source"&&($.component.events.fire(d.DragEvents.dragOut,[{start:I,source:O,target:D},i]),e!==A||!(0,p.isTreeCollection)($.component.data)||(0,p.isTreeCollection)($.component.data)&&$.component.data.canCopy($.id,g)?(this.cancelCanDrop(i),this._transferData.target=g||x,this._transferData.dropComponentId=e,$.component.events.fire(d.DragEvents.dragIn,[{start:I,source:O,target:D,dropPosition:H},i])&&this._canDrop(i)):this.cancelCanDrop(i))}else this._canMove&&this.cancelCanDrop(i)}else this._canMove&&this.cancelCanDrop(i)},a.prototype._move=function(i,n){var e=i.component,t=n.component,o=i.component.data,c=n.component.data,h=0,g=n.id,x=(0,p.isTreeCollection)(c)?n.component.config.dropBehaviour:void 0,C=i.component.config.columns?i.component.config:void 0,k=C&&(C.dragItem==="both"||C.dragItem==="column")&&C.columns.map(function(B){return B.id}).filter(function(B){return B===i.id||B===n.id}).length;if(k&&i.component===n.component){if(i.id===n.id)return;var I=(O=e.config.columns.map(function(B){return b({},B)})).findIndex(function(B){return B.id===i.id});return(H=O.findIndex(function(B){return B.id===n.id}))===-1?void 0:(O.splice(H,0,O.splice(I,1)[0]),e.setColumns(O),void e.paint())}if(k&&i.component instanceof v.ProGrid&&n.component instanceof v.ProGrid){I=(O=e.config.columns.map(function(B){return b({},B)})).findIndex(function(B){return B.id===i.id});var O,D=t.config.columns.map(function(B){return b({},B)}),A=t.data.getLength(),H=D.findIndex(function(B){return B.id===n.id}),S=[],$=i.id;e.data.forEach(function(B){var L;S.push(((L={id:B.id})[$]=B[i.id],L))}),A?e.data.forEach(function(B,L){var M=t.data.getItem(B.id);M?t.data.update(M.id,b(b({},M),S[L])):t.data.add(S[L])}):t.data.parse(S);var w=O.splice(I,1)[0];return D.find(function(B){return B.id===$})||D.splice(H,0,w),t.setColumns(D),t.paint(),e.setColumns(O),void e.paint()}var T=n.id===t.config.rootParent;switch(x){case"child":break;case"sibling":g=c.getParent(g),h=c.getIndex(n.id)+1;break;case"complex":var F=this._transferData.dropPosition;T?(g=n.id,h=c.getLength()):F==="top"?(g=c.getParent(g),h=c.getIndex(n.id)):F==="bottom"&&(g=c.getParent(g),h=c.getIndex(n.id)+1);break;default:(0,u.isId)(n.id)?i.component===n.component&&c.getIndex(i.id)<c.getIndex(n.id)?h=c.getIndex(n.id)-1:(c.getIndex(i.id)>-1&&(i.newId=(0,u.uid)()),h=c.getIndex(n.id)):h=-1}if(this._transferData.dragConfig.dragCopy)this._transferData.source instanceof Array&&this._transferData.source.length>1?this._transferData.source.map(function(B){o.copy(B,h,c,g),h>-1&&h++}):o.copy(i.id,h,c,g);else if(this._transferData.source instanceof Array&&this._transferData.source.length>1)o.move(this._transferData.source,h,c,g);else if(t instanceof v.Grid&&!t.config.columns.length){var z=e.data.getItem(i.id);t.data.parse([b({},z)]),t.setColumns(E([],e.config.columns,!0)),t.paint(),e.data.remove(i.id),e.paint()}else o.move(i.id,h,c,g,i.newId)},a.prototype._endDrop=function(i){if(this._toggleTextSelection(!1),this._transferData.component){var n=this._transferData,e={start:n.start,source:n.source,target:n.target};this._transferData.component.events.fire(d.DragEvents.afterDrag,[e,i])}this.cancelCanDrop(i),this._canMove=!0,this._transferData={},this._transferData.target=null,this._transferData.dropComponentId=null},a.prototype._canDrop=function(i){this._canMove=!0;var n=this._transferData,e={start:n.start,source:n.source,target:n.target,dropPosition:n.dropPosition},t=f.collectionStore.getItem(this._transferData.dropComponentId);t&&this._transferData.target&&(t instanceof v.Grid&&(e.dragItem=this._transferData.item.classList.contains("dhx_grid-row")?"row":"column"),t.events.fire(d.DragEvents.canDrop,[e,i]))},a.prototype._toggleTextSelection=function(i){i?document.body.classList.add("dhx_no-select"):document.body.classList.remove("dhx_no-select")},a}(),r=window.dhxHelpers=window.dhxHelpers||{};r.dragManager=r.dragManager||new l,_.dragManager=r.dragManager},function(W,_,y){var b=this&&this.__createBinding||(Object.create?function(v,f,d,p){p===void 0&&(p=d);var u=Object.getOwnPropertyDescriptor(f,d);u&&!("get"in u?!f.__esModule:u.writable||u.configurable)||(u={enumerable:!0,get:function(){return f[d]}}),Object.defineProperty(v,p,u)}:function(v,f,d,p){p===void 0&&(p=d),v[p]=f[d]}),E=this&&this.__exportStar||function(v,f){for(var d in v)d==="default"||Object.prototype.hasOwnProperty.call(f,d)||b(f,v,d)};Object.defineProperty(_,"__esModule",{value:!0}),_.getTreeCell=void 0,E(y(72),_),E(y(169),_),E(y(7),_),E(y(26),_);var m=y(33);Object.defineProperty(_,"getTreeCell",{enumerable:!0,get:function(){return m.getTreeCell}}),E(y(18),_),E(y(15),_)},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(l){for(var r,a=1,i=arguments.length;a<i;a++)for(var n in r=arguments[a])Object.prototype.hasOwnProperty.call(r,n)&&(l[n]=r[n]);return l},b.apply(this,arguments)},E=this&&this.__spreadArray||function(l,r,a){if(a||arguments.length===2)for(var i,n=0,e=r.length;n<e;n++)!i&&n in r||(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return l.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(_,"__esModule",{value:!0}),_.Exporter=void 0;var m=y(15),v=y(8),f=y(1),d=y(24),p=y(2),u=y(0),s=function(){function l(r,a,i){this._name=r,this._version=a,this._view=i}return l.prototype.pdf=function(r){this._rawExport(r,"pdf",this._view)},l.prototype.png=function(r){this._rawExport(r,"png",this._view)},l.prototype.xlsx=function(r){return this._export(r)},l.prototype.csv=function(r){var a;r===void 0&&(r={}),r=b({asFile:!0,rowDelimiter:`
`,columnDelimiter:",",skipHeader:0},r),a="getRoot"in this._view.data&&r.flat?this.getFlatCSV(r):this._getCSV(r);var i=r.name||"grid_export";return r.asFile&&(0,f.downloadFile)(a,"".concat(i,".csv"),"text/csv"),a},l.prototype._export=function(r){var a=this;r===void 0&&(r={});for(var i=this._view.config.columns.filter(function(w){return!w.hidden}),n={},e=(0,m.transpose)(i.map(function(w){return w.header.map(function(T){return T.text||" "})})),t=[],o={default:{color:"#000000",background:"#FFFFFF",fontSize:14,bold:!1}},c=[],h={},g={},x=this._view.data.serialize().map(function(w,T){var F=a._view.data.getItem(w.id);F.$css&&(g[F.id]=F.$css),n[w.id]=T;var z=i.map(function(B,L){if(h[B.id]=L,w[B.id]instanceof Date){var M=B.format||"%M %d %Y";typeof w[B.id]=="string"?w[B.id]=(0,d.getFormattedDate)(M,(0,d.stringToDate)(w[B.id],M)):typeof w[B.id]=="object"&&(w[B.id]=(0,d.getFormattedDate)(M,w[B.id]))}return w[B.id]||L||!w.$groupName?(0,m.removeHTMLTags)(w[B.id]):"^ ".concat(w.$groupName)});return z}),C=[],k=this._view.content,I=function(w){if(w.footer){var T=w.id,F=O._view.data.serialize().reduce(function(Z,Q){return Q[T]===void 0||Q[T]===""||isNaN(Q[T])||Z.push(parseFloat(Q[T])),Z},[]),z=F;if(O._view.config.type==="tree"){var B=O._view.data;z=B.serialize().reduce(function(Z,Q){if(Q.$level===0)if(Q[T]===void 0||Q[T]===""||isNaN(Q[T])){var tt=0;B.eachChild(Q.id,function(et){B.haveItems(et.id)||(tt+=parseFloat(et[T]))}),Z.push(tt)}else Z.push(parseFloat(Q[T])||0);return Z},[])}if(w.footer[0].content){var L=k[w.footer[0].content].calculate(F,z);C.push((L==null?void 0:L.toString())||" ")}else C.push(w.footer[0].css||w.footer[0].text||" ")}var M=w.type==="number"||w.type==="percent"?"right":w.align;for(var P in t.push({width:w.$width,align:M}),w.$cellCss){var V="dhx_grid-cell ".concat(w.$cellCss[P].trim()),R=O._getHash(V),q="dhx_grid-row";g[P]&&(q+=" ".concat(g[P].trim())),!o[R]&&(G=(0,m.getStyleByClass)(V,q,o.default))&&(o[R]=G),o[R]&&c.push([n[P],i.indexOf(w),R])}for(var P in g)if(!w.$cellCss[P]){var G,U=O._getHash(g[P]);q="dhx_grid-row ".concat(g[P].trim()),o[U]||(G=(0,m.getStyleByClass)("dhx_grid-cell",q,o.default))&&(o[U]=G),o[U]&&c.push([n[P],i.indexOf(w),U])}},O=this,D=0,A=i;D<A.length;D++)I(A[D]);C.length&&x.push(C);var H={name:r.name||"data",columns:t,header:e,data:x,styles:{cells:c,css:o}};if(r.url){var S=document.createElement("form");S.setAttribute("target","_blank"),S.setAttribute("action",r.url),S.setAttribute("method","POST"),S.style.visibility="hidden";var $=document.createElement("textarea");$.setAttribute("name","data"),$.value=JSON.stringify(H),S.appendChild($),document.body.appendChild(S),S.submit(),setTimeout(function(){S.parentNode.removeChild(S)},100)}return H},l.prototype.getFlatCSV=function(r){var a=this._view.data,i=a.getRoot(),n=this._view.config.columns[0],e=a.getMaxLevel(),t="";a.eachChild(i,function(g){var x=function(C,k){for(var I=[],O=0;O<=e;O++)if(C&&C[n.id]){I[C.$level]=C[n.id];var D=k.getParent(C.id,!0);C=D&&D.id?D:null}else I[O]="";return I}(g,a).join(r.columnDelimiter);t+=x+Object.keys(g).reduce(function(C,k,I){return k==="id"||k==="parent"||k.startsWith("$")||I===0?C:C+r.columnDelimiter+(g[k]===null?"":g[k])},""),t+=r.rowDelimiter});var o=this._export(r),c=function(g,x){for(var C=0;C<g.length;C++)g[C]=x;return g}(new Array(e+1),""),h=o.header.map(function(g){return g.splice.apply(g,E([0,1],c,!1)),g});return new v.CsvDriver(r).serialize(h,!0)+r.rowDelimiter+t},l.prototype._getCSV=function(r){var a=this._export(r),i=a.header,n=new v.CsvDriver(r);return n.serialize(i,!0)+`
`+n.serialize(a.data,!0)},l.prototype._rawExport=function(r,a,i){var n;r===void 0&&(r={});var e=document.createElement("div");e.setAttribute("style","display: none;");var t=i.config,o=t.$headerHeight,c=o===void 0?0:o,h=t.$footerHeight,g=h===void 0?0:h,x=t.$totalHeight,C=x===void 0?0:x,k=t.$footer,I=t.columns,O="",D=i.config.exportStyles;if((typeof r.exportStyles=="boolean"||Array.isArray(r.exportStyles))&&(D=r.exportStyles),r.url=r.url||"https://export.dhtmlx.com/"+this._name+"/"+a+"/"+this._version,a==="pdf"){var A=r.pdf;r.pdf=b(b({},A),{printBackground:!1,format:(n=A==null?void 0:A.format)!==null&&n!==void 0?n:"A4"})}var H=i.config.$totalWidth,S=C+c;k&&(S+=g);for(var $=[],w=0;w<I.length;w++){var T=I[w];$.push(b(b({},T),{width:T.$width}))}var F=b(b({},i.config),{width:H,height:S,columns:$,data:i.data.getRawData(0,-1,null,2),keyNavigation:!1,selection:!1,resizable:!1}),z=new i.constructor(e,(0,f.getCloneObject)(F));(0,u.awaitRedraw)().then(function(){D===!0?O="".concat((0,p.getPageLinksCss)(),"<style>").concat((0,p.getPageInlineCss)(),"</style>"):Array.isArray(D)&&D.length&&(O="".concat((0,p.getPageLinksCss)(D)));var B=e.children[0];B==null||B.setAttribute("data-dhx-theme",r.theme||"light"),a==="png"&&(B==null||B.setAttribute("style","width: ".concat(H,"px;")));var L=`
					`.concat(O,`
					`).concat(e.innerHTML,`
				`),M=document.createElement("form");M.setAttribute("method","POST"),M.setAttribute("action",r.url),M.innerHTML='<input type="hidden" name="raw"><input type="hidden" name="config">',M.childNodes[0].value=L,M.childNodes[1].value=JSON.stringify(r),document.body.appendChild(M),M.submit(),setTimeout(function(){var P,V;z.destructor(),(P=e.parentNode)===null||P===void 0||P.removeChild(e),(V=M.parentNode)===null||V===void 0||V.removeChild(M)},100)}).catch(function(){var B;z.destructor(),(B=e.parentNode)===null||B===void 0||B.removeChild(e)})},l.prototype._getHash=function(r){return r.split("").reduce(function(a,i){var n=(a<<5)-a+i.charCodeAt(0);return Math.abs(n&n)},0).toString()},l}();_.Exporter=s},function(W,_,y){var b=this&&this.__spreadArray||function(i,n,e){if(e||arguments.length===2)for(var t,o=0,c=n.length;o<c;o++)!t&&o in n||(t||(t=Array.prototype.slice.call(n,0,o)),t[o]=n[o]);return i.concat(t||Array.prototype.slice.call(n))};Object.defineProperty(_,"__esModule",{value:!0}),_.Selection=void 0;var E=y(0),m=y(8),v=y(1),f=y(3),d=y(7),p=y(31),u=y(25),s=y(25),l=y(15),r=y(26),a=function(){function i(n,e,t,o){this._grid=n,this.config=e,this._gridId=o,this._selectedCell,this._selectedCells=[],this._type=["cell","row","complex"].includes(this._grid.config.selection)&&this._grid.config.selection||"complex",this._multiselection=!!n.config.multiselection,this.events=t||new f.EventSystem(this),this._init()}return i.prototype.setCell=function(n,e,t,o){var c,h,g,x,C,k,I,O,D,A,H,S,$=this;t===void 0&&(t=!1),o===void 0&&(o=!1);var w=this._grid.config.type==="tree";if(this._gridId&&p.focusManager.getFocusId()!==this._gridId&&p.focusManager.setFocusId(this._gridId),this._type==="row"&&((g=this._selectedCells[0])===null||g===void 0?void 0:g.row.id)===((n==null?void 0:n.id)||n)||this._type!=="row"&&((x=this._selectedCells[0])===null||x===void 0?void 0:x.row.id)===((n==null?void 0:n.id)||n)&&((C=this._selectedCells[0])===null||C===void 0?void 0:C.column.id)===((e==null?void 0:e.id)||e))t&&(this._removeCell((k=this._selectedCells[0])===null||k===void 0?void 0:k.row,(I=this._selectedCells[0])===null||I===void 0?void 0:I.column),(0,E.awaitRedraw)().then(function(){$._grid.paint(),$._setBrowserFocus()}));else if(!(this.config.disabled||this._grid.config.$editable||!this._multiselection&&this._selectedCells.length&&!this._removeCell((O=this._selectedCell)===null||O===void 0?void 0:O.row,(D=this._selectedCell)===null||D===void 0?void 0:D.column))){if(this._multiselection){if(t||o||this._removeCells(),this._selectedCells.find(function(R){return $._type==="row"?R.row.id===((n==null?void 0:n.id)||n):R.row.id===((n==null?void 0:n.id)||n)&&R.column.id===((e==null?void 0:e.id)||e)}))return void this.removeCell((n==null?void 0:n.id)||n,(e==null?void 0:e.id)||e);o&&this._selectedCells.length>1&&!w&&b([],this._selectedCells,!0).forEach(function(R,q){var G=R.row,U=R.column;q>0&&$.removeCell(G.id,U.id)})}n=this._grid.data.getItem(n&&n.id||n);var T=(H=(A=this._grid.config)===null||A===void 0?void 0:A.columns)===null||H===void 0?void 0:H.filter(function(R){return!R.hidden});if(e||(e=T==null?void 0:T[0]),(e=this._grid.getColumn(e.id||e))&&n){if(this._multiselection&&o&&this._selectedCells.length&&!w){var F=(S=this._selectedCells)===null||S===void 0?void 0:S[0],z=this._grid.data.getIndex(F.row.id),B=this._grid.data.getIndex(n.id);if(z>B&&(z=(c=[B,z])[0],B=c[1]),this._type==="cell"||this._type==="complex"){var L=T.map(function(R){return R.id}),M=L.indexOf(F.column.id),P=L.indexOf(e.id);if(M!==-1&&P!==-1){M>P&&(M=(h=[P,M])[0],P=h[1]);var V=T.slice(M,P+1);this._grid.data.mapRange(z,B,function(R){V.forEach(function(q){$._findIndex({row:R,column:q})===-1&&$._setCell(R,q)})})}}else this._grid.data.mapRange(z,B,function(R){$._findIndex({row:R,column:e})===-1&&$._setCell(R,e)})}else this._setCell(n,e);(0,E.awaitRedraw)().then(function(){$._grid.paint(),$._setBrowserFocus()})}}},i.prototype.removeCell=function(n,e){var t=this;if(n&&e&&(this._type==="cell"||this._type==="complex")){var o=this._selectedCells.find(function(c){var h=c.row,g=c.column;return h.id==n&&g.id==e});o&&this._removeCell(o.row,o.column)}else n?this._selectedCells.filter(function(c){return c.row.id==n}).forEach(function(c){var h=c.row,g=c.column;t._removeCell(h,g)}):this._removeCells();(0,E.awaitRedraw)().then(function(){t._grid.paint()})},i.prototype.getCell=function(){return this._selectedCell},i.prototype.getCells=function(){return this._selectedCells},i.prototype.disable=function(){this.removeCell(),this.config.disabled=!0,this._grid.paint()},i.prototype.enable=function(){this.config.disabled=!1,this._grid.paint()},i.prototype.toHTML=function(){var n=this;if(!this._isUnselected()){if(this._multiselection){var e=[],t={};return this._selectedCells.forEach(function(c,h,g){var x=(0,r.normalizeCell)(c,n._grid);e.push(n._toHTML(x.row,x.column,h===g.length-1||n._type==="cell"||n._type==="complex",t[c.row.id])),t[c.row.id]=!0}),e}var o=(0,r.normalizeCell)(this._selectedCell,this._grid);return this._toHTML(o.row,o.column,!0)}},i.prototype._setCell=function(n,e){n&&e&&(0,v.isDefined)(n.id)&&(0,v.isDefined)(e.id)&&this.events.fire(d.GridSelectionEvents.beforeSelect,[n,e])&&(this._selectedCell={row:n,column:e},this._multiselection?this._selectedCells.push(this._selectedCell):this._selectedCells=[this._selectedCell],this.events.fire(d.GridSelectionEvents.afterSelect,[n,e]))},i.prototype._removeCell=function(n,e,t){var o,c;if(t===void 0&&(t=!1),!(n&&e&&(0,v.isDefined)(n.id)&&(0,v.isDefined)(e.id))||!t&&!this.events.fire(d.GridSelectionEvents.beforeUnSelect,[n,e]))return!1;var h=this._selectedCells.findIndex(function(g){return g.row.id===n.id&&g.column.id===e.id});return this._selectedCells.splice(h,1),this._selectedCell&&e.id===this._selectedCell.column.id&&n.id===this._selectedCell.row.id&&(this._selectedCell=(o=this._selectedCells)===null||o===void 0?void 0:o[((c=this._selectedCells)===null||c===void 0?void 0:c.length)-1]),!t&&this.events.fire(d.GridSelectionEvents.afterUnSelect,[n,e]),!0},i.prototype._removeCells=function(n){var e=this;n===void 0&&(n=!1),b([],this._selectedCells,!0).forEach(function(t){e._removeCell(t==null?void 0:t.row,t==null?void 0:t.column,n)})},i.prototype._init=function(){var n=this;this._grid.events.on(d.GridEvents.cellClick,function(e,t,o){n.setCell(e,t,o.ctrlKey||o.metaKey,o.shiftKey)}),this._grid.data.events.on(m.DataEvents.beforeRemove,function(e){var t,o;if(e&&n._selectedCell&&n._selectedCell.row&&n._selectedCell.row.id===e.id){var c=void 0,h=n._grid.data.getIndex(e.id);if(n._grid.data instanceof m.TreeCollection){var g=n._grid.data.getItems(e.parent);c=((t=g[h+1])===null||t===void 0?void 0:t.id)||((o=g[h-1])===null||o===void 0?void 0:o.id)||e.parent}else c=n._grid.data.getId(h+1)||n._grid.data.getId(h-1);(0,v.isId)(c)&&(n.setCell(c),n._grid.paint())}}),this._grid.data.events.on(m.DataEvents.removeAll,function(){n._removeCells()}),this._grid.data.events.on(m.DataEvents.load,function(){n._removeCells(!0)})},i.prototype._toHTML=function(n,e,t,o){var c,h,g,x,C,k,I,O,D,A,H,S,$;t===void 0&&(t=!1),o===void 0&&(o=!1);var w=this._grid.data.getRawData(0,-1,null,2);if((0,v.findIndex)(w,function(Pt){return Pt.id==n.id})===-1)return null;var T,F,z,B,L=this._grid.config,M=L.topSplit,P=L.bottomSplit,V=L.$totalWidth,R=L.$totalHeight,q=L.columns,G=q==null?void 0:q.filter(function(Pt){return!Pt.hidden}),U={left:(0,u.getCurrFixedCols)(this._grid.config,d.Split.left),right:(0,u.getCurrFixedCols)(this._grid.config,d.Split.right)},Z=this._grid.data.getLength(),Q={top:M?this._grid.data.getRawData(0,M):[],bottom:P?this._grid.data.getRawData(Z-P,Z):[]},tt={left:(c=U==null?void 0:U.left)===null||c===void 0?void 0:c.map(function(Pt){return Pt.id}),right:(h=U==null?void 0:U.right)===null||h===void 0?void 0:h.map(function(Pt){return Pt.id})},et={top:Q.top.map(function(Pt){return Pt.id}),bottom:Q.bottom.map(function(Pt){return Pt.id})},ot=(g=U==null?void 0:U.left)===null||g===void 0?void 0:g.reduce(function(Pt,jt){return Pt+(jt.$width||0)},0),rt=(x=U==null?void 0:U.right)===null||x===void 0?void 0:x.reduce(function(Pt,jt){return Pt+(jt.$width||0)},0),st=Q.top.reduce(function(Pt,jt){return Pt+jt.$height},0),ut=Q.bottom.reduce(function(Pt,jt){return Pt+jt.$height},0),at=this._grid.getCellRect(n.id,e.id),ct=this._grid.getScrollState(),ft=at.y,vt=(C=et.top)===null||C===void 0?void 0:C.includes(n.id),_t=(k=tt.left)===null||k===void 0?void 0:k.includes(e.id),gt=U.left.length&&ot>at.x-ct.x,j=Q.top.length&&st>at.y-ct.y,nt=at.width,xt=at.height-1,bt=null,Dt=null,Ot=gt?ot+ct.x:at.x;if(gt&&(nt-=(_t?(0,l.getTotalWidth)(U.left.slice(0,G.indexOf(e))):ot)-(at.x-ct.x)),j&&(xt-=(vt?(0,l.getTotalHeight)(Q.top.slice(0,w.indexOf(n))):st)-(at.y-ct.y)-1,ft+=at.height-xt),vt)if(ft=at.y+ct.y,(kt=this._grid.getSpan(n.id,e.id))&&kt.rowspan>1){var wt=w.indexOf(n);bt=(0,l.getTotalHeight)(Q.top.slice(wt,wt+kt.rowspan))}else xt=M===et.top.indexOf(n.id)+1?at.height-1:at.height;if(_t&&(Ot=at.x+ct.x,(kt=this._grid.getSpan(n.id,e.id))&&kt.colspan>1?(wt=G==null?void 0:G.indexOf(e),Dt=(0,l.getTotalWidth)(U.left.slice(wt,wt+kt.colspan))):nt=U.left.length===tt.left.indexOf(e.id)+1?at.width-1:at.width),!((I=U.right)===null||I===void 0)&&I.length||P){var kt=this._grid.getSpan(n.id,e.id),Ct=this._getReverseScrollState(ct);if(!((O=U.right)===null||O===void 0)&&O.length&&(T=((D=tt.right)===null||D===void 0?void 0:D.includes(e.id))||kt&&G.indexOf(e)+(kt.colspan||1)>G.length-U.right.length,(F=V-rt<Ct.x+at.x+at.width)&&!T&&(nt-=Ct.x+at.x+at.width-V+rt),T))if(kt&&!(!((A=tt.right)===null||A===void 0)&&A.includes(kt.column))){wt=G.length-G.indexOf(e)-(kt.colspan||1);var Lt=V-rt;Ot=at.x+Ct.x<Lt+1?at.x:Lt-Ct.x+1,Dt=(0,l.getTotalWidth)(wt?U.right.slice(0,-wt):U.right)-1,nt=at.width-Ct.x}else{var Vt=!((H=tt.right)===null||H===void 0)&&H.indexOf(e.id)?0:1;Ot=at.x-Ct.x+Vt,nt=at.width-Vt}if(P&&(z=et.bottom.includes(n.id)||kt&&w.indexOf(n)+(kt.rowspan||1)>w.length-P,(B=R-ut<Ct.y+at.y+at.height)&&!z&&(xt-=Ct.y+at.y+at.height-R+ut),z))if(kt&&!et.bottom.includes(kt.row)){var Nt=R-ut;Vt=(wt=w.length-w.indexOf(n)-(kt.rowspan||1))?0:1,ft=at.y+Ct.y<Nt?at.y:Nt-Ct.y,bt=(0,l.getTotalHeight)(wt?Q.bottom.slice(0,-wt):Q.bottom)-Vt,xt=at.height-Ct.y-Vt}else ft=at.y-Ct.y,xt=at.height-(P===et.bottom.indexOf(n.id)+1?1:0)}var Wt=null;this._type!=="row"&&this._type!=="complex"||o||(Wt=(0,E.el)(".dhx_grid-selected-row",{style:{width:!((S=U.left)===null||S===void 0)&&S.length?V-ct.x:V,height:xt,minHeight:bt,minWidth:Dt,display:xt<0&&!bt?"none":"flex",top:ft,left:!(($=U.left)===null||$===void 0)&&$.length?ct.x:0,position:"absolute"}}));var Yt=null;return this._type!=="cell"&&this._type!=="complex"||!t||(Yt=(0,E.el)(".dhx_grid-selected-cell",{style:{width:nt,height:xt,top:ft,minHeight:bt,minWidth:Dt,left:Ot,position:"absolute",display:nt<0&&!Dt||xt<0&&!bt?"none":"flex",borderLeft:gt&&!_t?"none":null,borderRight:F&&!T?"none":null,borderTop:j&&!vt?"none":null,borderBottom:B&&!z?"none":null}})),(0,E.el)(".dhx_grid-selection",{style:{zIndex:20}},[Wt,Yt])},i.prototype._isUnselected=function(){return!this._selectedCell||!this._selectedCell.row||!this._selectedCell.column||this._selectedCells.length===0},i.prototype._findIndex=function(n){var e=this;n===void 0&&(n=this._selectedCell);var t=-1;return this._selectedCells.some(function(o,c){if(e._type==="cell"||e._type==="complex"){if((0,v.compare)(o.row,n.row)&&(0,v.compare)(o.column,n.column))return t=c,!0}else if(e._type==="row"&&(0,v.compare)(o.row,n.row))return t=c,!0}),t},i.prototype._setBrowserFocus=function(){var n=this._grid.getRootView().data.getRootNode();if(n){var e=n.querySelector(".dhx_grid_data");if(e&&this._selectedCell&&this._selectedCell.row&&this._selectedCell.column){var t=e.querySelector('[data-dhx-id="'.concat(this._selectedCell.row.id,'"]')),o=this._grid.getSpan(this._selectedCell.row.id,this._selectedCell.column.id);if(t){var c=o?n.querySelector(".dhx_span-spans"):null,h=c?c.querySelector('[data-dhx-col-id="'.concat(o.column,'"][data-dhx-id="').concat(o.row,'"]')):t.querySelector('[data-dhx-col-id="'.concat(this._selectedCell.column.id,'"]'));h&&(h.tabIndex=0,h.focus({preventScroll:!0}))}}}},i.prototype._getReverseScrollState=function(n){var e,t=(0,s.calcScrollBarWidth)(this._grid.config,!!(!((e=this._grid.scrollView)===null||e===void 0)&&e.config.enable)),o=this._grid.config.$totalWidth-this._grid.config.$width+u.BORDERS+t.y,c=this._grid.config.$totalHeight-this._grid.config.$height+this._grid.config.$headerHeight+this._grid.config.$footerHeight+u.BORDERS+t.x;return{x:o>0?o-n.x:0,y:c>0?c-n.y:0}},i}();_.Selection=a},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.getEditor=void 0;var b,E=y(7),m=y(141),v=y(142),f=y(143),d=y(154),p=y(155),u=y(162),s={cell:{row:null,col:null},editor:null,gridId:null};_.getEditor=function(l,r,a){var i=r.type==="boolean"?"checkbox":a.$editable.editorType;if(i===void 0&&(i=a.autoHeight?"textarea":"input"),s.cell.row===l.id&&s.cell.col===r.id&&s.gridId===a.gridId&&a.$editable.editor)return s.editor;switch(i!=="checkbox"&&(s={cell:{row:l.id,col:r.id},editor:s.editor,gridId:a.gridId}),b||(b=function(){s={cell:{row:null,col:null},editor:null,gridId:null}},a.events.on(E.GridEvents.afterEditEnd,b)),i){case"input":default:return s.editor=new m.InputEditor(l,r,a);case"textarea":return s.editor=new u.TextAreaEditor(l,r,a);case"select":return s.editor=new v.SelectEditor(l,r,a);case"datePicker":return s.editor=new f.DateEditor(l,r,a);case"checkbox":return new d.CheckboxEditor(l,r,a);case"multiselect":case"combobox":return s.editor=new p.ComboboxEditor(l,r,a)}}},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.InputEditor=void 0;var b=y(0),E=y(7),m=y(1),v=function(){function f(d,p,u){this.prevValue="",this._config=u,this._cell={row:d,col:p},this.type=p.type,this._initHandlers()}return f.prototype.endEdit=function(d){if(this._config.$editable){var p;if(!d&&(p=this._input.value,this.type==="number"))if(p=parseFloat(p),Number.isNaN(p))p="";else{var u=this._cell.col.editorConfig,s=parseFloat(u==null?void 0:u.min),l=parseFloat(u==null?void 0:u.max);(0,m.isDefined)(u==null?void 0:u.min)&&p<s&&(p=s),(0,m.isDefined)(u==null?void 0:u.max)&&p>l&&(p=l)}this._config.events.fire(E.GridEvents.beforeEditEnd,[p,this._cell.row,this._cell.col])?(this._cell.row=this._config.datacollection.getItem(this._cell.row.id),this._config.$editable=null,this._config.events.fire(E.GridEvents.afterEditEnd,[p,this._cell.row,this._cell.col])):this._input.focus()}},f.prototype.toHTML=function(d){return(0,m.isDefined)(d)&&(this.type="string"),d=d??this._cell.row[this._cell.col.id],this._input&&(d=this._input.value),this._config.$editable.editor=this,(0,b.el)("input.dhx_cell-editor.dhx_cell-editor__input",{_hooks:{didInsert:this._handlers.didInsert},_key:"cell_editor","data-dhx-id":"cell_editor",onblur:this._handlers.onBlur,oninput:this._handlers.onInput,value:d})},f.prototype._initHandlers=function(){var d=this;this._handlers={onBlur:function(){d.endEdit()},onInput:function(){if(d.type==="number"){var p=d._input.value;d.isValidWord(p)?d.prevValue=p:d._input.value=d.prevValue,!d.prevValue.length||d.prevValue==="-"||d.isCorrectRange(parseFloat(d.prevValue))?d._input.classList.remove("dhx_cell-editor__input--not-valid"):d._input.classList.add("dhx_cell-editor__input--not-valid")}},didInsert:function(p){d._input=p.el,d._input.focus()}}},f.prototype.isValidWord=function(d){var p,u=(p=d[d.length-1])===null||p===void 0?void 0:p.toLocaleLowerCase(),s=function(l,r){return l.toLocaleLowerCase().split(r.toLocaleLowerCase()).length-1};return!d.length||d==="-"||!isNaN(Number(d))&&d.trim().length===d.length||d.replace("-","").length>1&&u==="e"&&!s(this.prevValue,"e")||d.replace("-","").length>1&&u==="e"&&s(d,"e")===1},f.prototype.isCorrectRange=function(d){var p=!0,u=this._cell.col.editorConfig,s=parseFloat(u==null?void 0:u.min),l=parseFloat(u==null?void 0:u.max);return(0,m.isDefined)(u==null?void 0:u.min)&&(0,m.isDefined)(u==null?void 0:u.max)?p=d>=s&&d<=l:(0,m.isDefined)(u==null?void 0:u.min)?p=d>s:(0,m.isDefined)(u==null?void 0:u.max)&&(p=d<l),p},f}();_.InputEditor=v},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.SelectEditor=void 0;var b=y(0),E=y(7),m=y(18),v=function(){function f(d,p,u){this._config=u,this._cell={row:d,col:p},this._initHandlers()}return f.prototype.endEdit=function(d){var p;this._config.$editable&&(d||(p=this._input.value),this._config.events.fire(E.GridEvents.beforeEditEnd,[p,this._cell.row,this._cell.col])?(this._input.removeEventListener("blur",this._handlers.onBlur),this._input.removeEventListener("keydown",this._handlers.onkeydown),this._cell.row=this._config.datacollection.getItem(this._cell.row.id),this._config.$editable=null,this._config.events.fire(E.GridEvents.afterEditEnd,[p,this._cell.row,this._cell.col])):this._input.focus())},f.prototype.toHTML=function(){var d=(0,m.getEditorOptions)(this._cell.col,this._cell.row).map(function(s){return typeof s=="string"?{id:"".concat(s),value:s}:s})||[],p=this._cell.row[this._cell.col.id];this._input&&(p=this._input.options[this._input.selectedIndex].value);var u=d.map(function(s){return(0,b.el)("option",{selected:s.id.toString()===(p==null?void 0:p.toString()),value:s.id},s.value)});return this._config.$editable.editor=this,(0,b.el)("select.dhx_cell-editor.dhx_cell-editor__select",{_hooks:{didInsert:this._handlers.didInsert},_key:"cell_editor","data-dhx-id":"cell_editor"},u)},f.prototype._initHandlers=function(){var d=this;this._handlers={onBlur:function(){d.endEdit()},onkeydown:function(p){p.key==="Escape"&&d.endEdit()},didInsert:function(p){var u=p.el;d._input=u,u.focus(),u.addEventListener("blur",d._handlers.onBlur),u.addEventListener("keydown",d._handlers.onkeydown)}}},f}();_.SelectEditor=v},function(W,_,y){var b=this&&this.__rest||function(u,s){var l={};for(var r in u)Object.prototype.hasOwnProperty.call(u,r)&&s.indexOf(r)<0&&(l[r]=u[r]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function"){var a=0;for(r=Object.getOwnPropertySymbols(u);a<r.length;a++)s.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(u,r[a])&&(l[r[a]]=u[r[a]])}return l};Object.defineProperty(_,"__esModule",{value:!0}),_.DateEditor=void 0;var E=y(0),m=y(7),v=y(48),f=y(24),d=y(11),p=function(){function u(s,l,r){var a=this;this._config=r,this._cell={row:s,col:l},this._calendar=new v.Calendar(null,this._cleanConfig(l));var i=this._cell.row[this._cell.col.id],n=this._calendar.config.dateFormat;((0,f.stringToDate)(i,n,!0)||i instanceof Date)&&(this._calendar.setValue(i),this._value=this._calendar.getValue(),this._cell.row[this._cell.col.id]=this._value),this._popup=new d.Popup,this._popup.attach(this._calendar),this._calendar.events.on(v.CalendarEvents.change,function(){a.endEdit(!1,!0)}),this._popup.events.on(d.PopupEvents.afterHide,function(){a.endEdit()}),this._initHandlers()}return u.prototype.endEdit=function(s,l){var r=this;if(this._handlers&&this._config.$editable){var a=this._calendar.config.dateFormat,i=this._cell.row[this._cell.col.id],n=this._input.value;if(!s){if(i instanceof Date||l)return this._value=this._calendar.getValue(),this._input.value=this._value,void this._popup.hide();!(0,f.stringToDate)(n,a,!0)&&n||(!i||n.length!==i.length)&&i&&n||(this._value=n)}this._config.events.fire(m.GridEvents.beforeEditEnd,[this._value,this._cell.row,this._cell.col])?(this._input.removeEventListener("focus",this._handlers.onFocus),this._input.removeEventListener("change",this._handlers.onChange),document.removeEventListener("mousedown",this._handlers.onOuterClick),(0,E.awaitRedraw)().then(function(){r._popup.destructor(),r._calendar.destructor()}),this._cell.row=this._config.datacollection.getItem(this._cell.row.id),this._config.$editable=null,this._config.events.fire(m.GridEvents.afterEditEnd,[this._value,this._cell.row,this._cell.col])):this._input.focus()}},u.prototype.toHTML=function(){var s=this._cell.row[this._cell.col.id];return this._config.$editable.editor=this,document.addEventListener("mousedown",this._handlers.onOuterClick),(0,E.el)("input.dhx_cell-editor.dhx_cell-editor__input.dhx_cell-editor__datepicker",{_hooks:{didInsert:this._handlers.didInsert},_key:"cell_editor","data-dhx-id":"cell_editor",value:s})},u.prototype._cleanConfig=function(s){var l=s.editorConfig||{},r=(l.value,l.range,l.dateFormat,b(l,["value","range","dateFormat"]));return r.dateFormat=s.format,r},u.prototype._initHandlers=function(){var s=this;this._handlers={onFocus:function(){(0,E.awaitRedraw)().then(function(){s._popup.show(s._input,{centering:!0,mode:"bottom",theme:s._input})})},onChange:function(){s.endEdit()},onOuterClick:function(l){if(l.target instanceof Node){var r=s._input&&s._input.contains(l.target),a=s._popup&&s._popup.getRootNode()&&s._popup.getRootNode().contains(l.target);r||a||s._popup.hide()}},didInsert:function(l){var r=l.el;s._input=r,s._input.addEventListener("focus",s._handlers.onFocus),s._input.addEventListener("change",s._handlers.onChange),r.focus(),r.setSelectionRange(r.value.length,r.value.length)}}},u}();_.DateEditor=p},function(W,_,y){var b,E=this&&this.__extends||(b=function(e,t){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,c){o.__proto__=c}||function(o,c){for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(o[h]=c[h])},b(e,t)},function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}b(e,t),e.prototype=t===null?Object.create(t):(o.prototype=t.prototype,new o)}),m=this&&this.__assign||function(){return m=Object.assign||function(e){for(var t,o=1,c=arguments.length;o<c;o++)for(var h in t=arguments[o])Object.prototype.hasOwnProperty.call(t,h)&&(e[h]=t[h]);return e},m.apply(this,arguments)},v=this&&this.__spreadArray||function(e,t,o){if(o||arguments.length===2)for(var c,h=0,g=t.length;h<g;h++)!c&&h in t||(c||(c=Array.prototype.slice.call(t,0,h)),c[h]=t[h]);return e.concat(c||Array.prototype.slice.call(t))};Object.defineProperty(_,"__esModule",{value:!0}),_.Calendar=void 0;var f=y(1),d=y(0),p=y(3),u=y(5),s=y(73),l=y(153),r=y(24),a=y(79),i=y(2),n=function(e){function t(o,c){c===void 0&&(c={});var h=e.call(this,o,(0,f.extend)({weekStart:"sunday",thisMonthOnly:!1,dateFormat:window&&window.dhx&&window.dhx.dateFormat,width:"250px"},c))||this;switch(h._selected=[],h.events=new p.EventSystem,h.config.disabledDates=h.config.disabledDates||h.config.block,h.config.mode=h.config.mode||h.config.view,h.config.dateFormat||(h.config.timePicker?h.config.timeFormat===12?h.config.dateFormat="%d/%m/%y %h:%i %A":h.config.dateFormat="%d/%m/%y %H:%i":h.config.dateFormat="%d/%m/%y"),h.config.value&&h._setSelected(h.config.value),h.config.date?h._currentDate=r.DateHelper.toDateObject(h.config.date,h.config.dateFormat):h._getSelected()?h._currentDate=r.DateHelper.copy(h._getSelected()):h._currentDate=new Date,h.config.mode){case"month":h._currentViewMode="month";break;case"year":h._currentViewMode="year";break;case"timepicker":h._currentViewMode=h.config.timePicker?"timepicker":"calendar";break;default:h._currentViewMode="calendar"}if(h._initHandlers(),h.config.timePicker){h._timepicker=new s.Timepicker(null,{timeFormat:h.config.timeFormat,controls:!0});var g=h._getSelected()||new Date;h._timepicker.setValue(g),h._time=h._timepicker.getValue(),h._timepicker.events.on(s.TimepickerEvents.afterClose,function(){h._timepicker.setValue(h._time),h.showDate(null,"calendar")}),h._timepicker.events.on(s.TimepickerEvents.afterApply,function(){var x=h._timepicker.getValue(!0),C=x.hour,k=x.minute,I=x.AM,O=h._getSelected(),D=r.DateHelper.withHoursAndMinutes(h._getSelected()||new Date,C,k,I);h.events.fire(a.CalendarEvents.beforeChange,[D,O,!0])&&(h._selected[h._selected.length-1]=D,h.events.fire(a.CalendarEvents.change,[D,O,!0])),h._time=h._timepicker.getValue(),h.showDate(null,"calendar")})}return h.mount(o,(0,d.create)({render:function(){return h._draw()}})),h}return E(t,e),t.prototype.setValue=function(o){if(!o||o instanceof Array&&o.length===0)return!1;var c=o instanceof Array?o[0]:o,h=r.DateHelper.toDateObject(c,this.config.dateFormat),g=r.DateHelper.copy(this._getSelected());return!!this.events.fire(a.CalendarEvents.beforeChange,[h,g,!1])&&(this._selected=[],this._setSelected(o),this._timepicker&&(this._timepicker.setValue(h),this._time=this._timepicker.getValue()),this.showDate(this._getSelected()),this.events.fire(a.CalendarEvents.change,[h,g,!1]),this.paint(),!0)},t.prototype.getValue=function(o){var c=this;return o===void 0&&(o=!1),this._selected[0]?this.config.range?o?this._selected.map(function(h){return r.DateHelper.copy(h)}):this._selected.map(function(h){return(0,r.getFormattedDate)(c.config.dateFormat,h)}):o?r.DateHelper.copy(this._selected[0]):(0,r.getFormattedDate)(this.config.dateFormat,this._selected[0]):""},t.prototype.getCurrentMode=function(){return this._currentViewMode},t.prototype.showDate=function(o,c){o&&(this._currentDate=r.DateHelper.copy(o)),c&&(this._currentViewMode=c),this.paint()},t.prototype.destructor=function(){this._linkedCalendar&&this._unlink(),this._timepicker&&this._timepicker.destructor(),this.events&&this.events.clear(),this.config=this.events=null,this._uid=this._selected=this._currentDate=this._currentViewMode=this._handlers=this._timepicker=this._time=null,this.unmount()},t.prototype.clear=function(){var o=this.getValue(!0);this.events.fire(a.CalendarEvents.beforeChange,["",o,!1])&&(this.config.timePicker&&(this._timepicker.clear(),this._time=this._timepicker.getValue()),this._selected=[],this.showDate(null,this.config.mode),this.events.fire(a.CalendarEvents.change,[this.getValue(!0),o,!1,"clear"]))},t.prototype.link=function(o){var c=this;this._linkedCalendar&&this._unlink(),this._linkedCalendar=o;var h=this.getValue(!0),g=o.getValue(!0),x=h&&r.DateHelper.dayStart(h),C=g&&r.DateHelper.dayStart(g);this.config.$rangeMark&&this._linkedCalendar.config.$rangeMark||(this.config.$rangeMark=this._linkedCalendar.config.$rangeMark=function(k){if(x&&C)return k>=x&&k<=C&&function(I){if(r.DateHelper.isSameDay(C,x))return null;var O="dhx_calendar-day--in-range";return r.DateHelper.isSameDay(I,x)&&(O+=" dhx_calendar-day--first-date"),r.DateHelper.isSameDay(I,C)&&(O+=" dhx_calendar-day--last-date"),O}(k)}),this.config.disabledDates&&this._linkedCalendar.config.disabledDates||(this.config.disabledDates=function(k){if(C)return k>C},this._linkedCalendar.config.disabledDates=function(k){if(x)return k<x}),this.config.thisMonthOnly=!0,o.config.thisMonthOnly=!0,this.events.on(a.CalendarEvents.change,function(k){x=k?r.DateHelper.dayStart(k):null,c._linkedCalendar.paint()},"link"),this._linkedCalendar.events.on(a.CalendarEvents.change,function(k){C=k?r.DateHelper.dayStart(k):null,c.paint()},"link"),this._linkedCalendar.paint(),this.paint()},t.prototype._unlink=function(){this._linkedCalendar&&(this.config.$rangeMark=this._linkedCalendar.config.$rangeMark=null,this.config.disabledDates=this._linkedCalendar.config.disabledDates=null,this.events.detach(a.CalendarEvents.change,"link"),this._linkedCalendar.events.detach(a.CalendarEvents.change,"link"),this._linkedCalendar.paint(),this._linkedCalendar=null)},t.prototype._setSelected=function(o){var c=this,h=o instanceof Array?o[0]:o,g=r.DateHelper.toDateObject(h,this.config.dateFormat);if(o instanceof Array&&this.config.range){var x=[];o.forEach(function(C,k){k<2&&x.push(r.DateHelper.toDateObject(C,c.config.dateFormat))}),x.length===2&&x[0]<x[1]?x.forEach(function(C){return c._selected.push(C)}):this._selected[0]=x[0]}else this._selected[0]=g},t.prototype._getSelected=function(){return this._selected[this._selected.length-1]},t.prototype._draw=function(){switch(this._currentViewMode){case"calendar":return this.events.fire(a.CalendarEvents.modeChange,["calendar"]),this._drawCalendar();case"month":return this.events.fire(a.CalendarEvents.modeChange,["month"]),this._drawMonthSelector();case"year":return this.events.fire(a.CalendarEvents.modeChange,["year"]),this._drawYearSelector();case"timepicker":return this.events.fire(a.CalendarEvents.modeChange,["timepicker"]),this._drawTimepicker()}},t.prototype._initHandlers=function(){var o=this,c={Up:"ArrowUp",Down:"ArrowDown",Right:"ArrowRight",Left:"ArrowLeft",Esc:"Escape",Spacebar:"Space"},h=function(g){g===void 0&&(g=!1);var x=0;switch(o._currentViewMode){case"calendar":x=g?-7:7;break;case"month":case"year":x=g?-4:4}return x};this._handlers={onkeydown:{".dhx_calendar-year, .dhx_calendar-month, .dhx_calendar-day":function(g,x){switch(function(C){var k;if(C.which>=48&&C.which<=57||C.which>=65&&C.which<=90)k=String.fromCharCode(C.which);else{var I=C.which===32?C.code:C.key;k=(0,i.isIE)()&&c[I]||I}return k}(g)){case"Enter":o._selectDate(g,x);break;case"ArrowLeft":o._moveBrowseFocus(g,x,-1);break;case"ArrowRight":o._moveBrowseFocus(g,x,1);break;case"ArrowUp":o._moveBrowseFocus(g,x,h(!0));break;case"ArrowDown":o._moveBrowseFocus(g,x,h())}}},onclick:{".dhx_calendar-year, .dhx_calendar-month, .dhx_calendar-day":function(g,x){o._selectDate(g,x)},".dhx_calendar-action__cancel":function(){o.showDate(o._getSelected(),"calendar"),o.events.fire(a.CalendarEvents.cancelClick,[])},".dhx_calendar-action__show-month":function(){return o.showDate(null,"month")},".dhx_calendar-action__show-year":function(){return o.showDate(null,"year")},".dhx_calendar-action__next":function(){var g;switch(o._currentViewMode){case"calendar":g=r.DateHelper.addMonth(o._currentDate,1);break;case"month":g=r.DateHelper.addYear(o._currentDate,1);break;case"year":g=r.DateHelper.addYear(o._currentDate,12)}o.showDate(g)},".dhx_calendar-action__prev":function(){var g;switch(o._currentViewMode){case"calendar":g=r.DateHelper.addMonth(o._currentDate,-1);break;case"month":g=r.DateHelper.addYear(o._currentDate,-1);break;case"year":g=r.DateHelper.addYear(o._currentDate,-12)}o.showDate(g)},".dhx_calendar-action__show-timepicker":function(){o._currentViewMode="timepicker",o.paint()}},onmouseover:{".dhx_calendar-day":function(g,x){o.events.fire(a.CalendarEvents.dateMouseOver,[new Date(x.attrs._date),g]),o.events.fire(a.CalendarEvents.dateHover,[new Date(x.attrs._date),g])}}}},t.prototype._getData=function(o){var c,h=this;switch(this._isSelectedInCurrentRange=!1,this.config.weekStart){case"saturday":c=-1;break;case"monday":c=1;break;default:c=0}for(var g=[],x=6,C=r.DateHelper.weekStart(r.DateHelper.monthStart(o),c);x--;){for(var k=r.DateHelper.getWeekNumber(C),I=0,O=7,D=[],A=function(){var S=r.DateHelper.isWeekEnd(C),$=o.getMonth()===C.getMonth(),w=H.config.disabledDates&&H.config.disabledDates(C),T=[];if(H.config.range&&H._selected[0]&&H._selected[1]){var F=function(){if(h._selected[0]&&h._selected[1]){var B=r.DateHelper.dayStart(h._selected[0]),L=r.DateHelper.dayStart(h._selected[1]);return C>=B&&C<=L&&(r.DateHelper.isSameDay(h._selected[0],h._selected[1])?null:"dhx_calendar-day--in-range")}};H.config.$rangeMark=F}if(S&&T.push("dhx_calendar-day--weekend"),$||(H.config.thisMonthOnly?(I++,T.push("dhx_calendar-day--hidden")):T.push("dhx_calendar-day--muffled")),H.config.mark){var z=H.config.mark(C);z&&T.push(z)}H.config.$rangeMark&&(F=H.config.$rangeMark(C))&&T.push(F),w&&(S?T.push("dhx_calendar-day--weekend-disabled"):T.push("dhx_calendar-day--disabled")),H._selected.forEach(function(B,L){if(B&&r.DateHelper.isSameDay(B,C)){h._isSelectedInCurrentRange=!0;var M="dhx_calendar-day--selected";h.config.range&&(M+=" dhx_calendar-day--selected-".concat(L===0?"first ":"last")),T.push(M)}}),D.push({date:C,day:C.getDate(),css:T.join(" ")}),C=r.DateHelper.addDay(C)},H=this;O--;)A();g.push({weekNumber:k,days:D,disabledWeekNumber:I===7})}return g},t.prototype._drawCalendar=function(){var o,c=this,h=this._currentDate,g=this.config,x=g.weekStart,C=g.thisMonthOnly,k=g.css,I=g.timePicker,O=g.width;switch(x){case"saturday":o=v([r.locale.daysShort[6]],r.locale.daysShort.slice(0,-1),!0);break;case"monday":o=v(v([],r.locale.daysShort.slice(1),!0),[r.locale.daysShort[0]],!1);break;default:o=r.locale.daysShort}for(var D,A=o.map(function(V){return(0,d.el)(".dhx_calendar-weekday",V)}),H=this._getData(h),S=!0,$=this._getSelected(),w=function(V){var R={role:"button",tabindex:-1,"aria-pressed":"false"};return V&&(c._isSelectedInCurrentRange?function(q){return q&&$&&q.getTime()===$.getTime()}(V.date)&&(R.tabindex=0,R["aria-pressed"]="true"):S&&(R.tabindex=0),S=!1),R},T=[],F=[],z=0,B=H;z<B.length;z++){var L=B[z],M=L.days.map(function(V){return(0,d.el)("div.dhx_calendar-day",m({class:V.css,_date:V.date},w(V)),V.day)});!this.config.weekNumbers||L.disabledWeekNumber&&C||F.push((0,d.el)("div",{class:"dhx_calendar-week-number"},L.weekNumber)),T=T.concat(M)}this.config.weekNumbers&&(D=(0,d.el)(".dhx_calendar__week-numbers",F));var P="dhx_calendar dhx_widget"+(k?" "+k:"")+(I?" dhx_calendar--with_timepicker":"")+(this.config.weekNumbers?" dhx_calendar--with_week-numbers":"");return(0,d.el)("div",m({class:P,style:{width:this.config.weekNumbers?parseInt(O.toString())+48+"px":O}},this._handlers),[(0,d.el)(".dhx_calendar__wrapper",[this._drawHeader((0,d.el)("button.dhx_calendar-action__show-month.dhx_button.dhx_button--view_link.dhx_button--size_small.dhx_button--color_secondary.dhx_button--circle",{"aria-live":"polite",type:"button"},r.locale.months[h.getMonth()]+" "+h.getFullYear())),this.config.weekNumbers&&(0,d.el)(".dhx_calendar__dates-wrapper",[(0,d.el)(".dhx_calendar__weekdays",A),(0,d.el)(".dhx_calendar__days",T),D]),!this.config.weekNumbers&&(0,d.el)(".dhx_calendar__weekdays",A),!this.config.weekNumbers&&(0,d.el)(".dhx_calendar__days",T),I?(0,d.el)(".dhx_timepicker__actions",[(0,d.el)("button.dhx_calendar__timepicker-button.dhx_button.dhx_button--view_link.dhx_button--size_small.dhx_button--color_secondary.dhx_button--width_full.dhx_button--circle.dhx_calendar-action__show-timepicker",{type:"button"},[(0,d.el)("span.dhx_button__icon.dxi.dxi-clock-outline"),(0,d.el)("span.dhx_button__text",this._time)])]):null])])},t.prototype._drawMonthSelector=function(){var o=this._currentDate,c=o.getMonth(),h=this._getSelected()?this._getSelected().getFullYear():null,g=this.config,x=g.css,C=g.timePicker,k=g.weekNumbers,I=g.width,O=g.mode,D="dhx_calendar dhx_widget"+(x?" "+x:"")+(C?" dhx_calendar--with_timepicker":"")+(k?" dhx_calendar--with_week-numbers":""),A=!0,H=h===o.getFullYear(),S=function($){return H&&c===$};return(0,d.el)("div",m({class:D,style:{width:k?parseInt(I.toString())+48+"px":I}},this._handlers),[(0,d.el)(".dhx_calendar__wrapper",[this._drawHeader((0,d.el)("button.dhx_calendar-action__show-year.dhx_button.dhx_button--view_link.dhx_button--size_small.dhx_button--color_secondary.dhx_button--circle",{"aria-live":"polite",type:"button"},o.getFullYear())),(0,d.el)(".dhx_calendar__months",r.locale.monthsShort.map(function($,w){return(0,d.el)("div",m(m({class:"dhx_calendar-month"+(S(w)?" dhx_calendar-month--selected":"")},function(T,F){var z={role:"button",tabindex:-1,"aria-pressed":"false"};return T&&(H?S(F)&&(z.tabindex=0,z["aria-pressed"]="true"):A&&(z.tabindex=0),A=!1),z}($,w)),{_date:w}),$)})),O!=="month"?(0,d.el)(".dhx_calendar__actions",[(0,d.el)("button.dhx_button.dhx_button--color_primary.dhx_button--view_link.dhx_button--size_small.dhx_button--width_full.dhx_button--circle.dhx_calendar-action__cancel",{type:"button"},r.locale.cancel)]):null])])},t.prototype._drawYearSelector=function(){var o=this,c=this._currentDate,h=r.DateHelper.getTwelweYears(c),g=this.config,x=g.css,C=g.timePicker,k=g.weekNumbers,I=g.width,O=g.mode,D="dhx_calendar dhx_widget"+(x?" "+x:"")+(C?" dhx_calendar--with_timepicker":"")+(k?" dhx_calendar--with_week-numbers":""),A=!0,H=this._getSelected()&&h.includes(this._getSelected().getFullYear()),S=function($){return o._getSelected()&&$===o._getSelected().getFullYear()};return(0,d.el)("div",m({class:D,style:{width:k?parseInt(I.toString())+48+"px":I}},this._handlers),[(0,d.el)(".dhx_calendar__wrapper",[this._drawHeader((0,d.el)("button.dhx_button.dhx_button--view_link.dhx_button--size_small.dhx_button--color_secondary.dhx_button--circle",{"aria-live":"polite",type:"button"},h[0]+"-"+h[h.length-1])),(0,d.el)(".dhx_calendar__years",h.map(function($){return(0,d.el)("div",m({class:"dhx_calendar-year"+(S($)?" dhx_calendar-year--selected":""),_date:$},function(w){var T={role:"button",tabindex:-1,"aria-pressed":"false"};return w&&(H?S(w)&&(T.tabindex=0,T["aria-pressed"]="true"):A&&(T.tabindex=0),A=!1),T}($)),$)})),O!=="year"&&O!=="month"?(0,d.el)(".dhx_calendar__actions",[(0,d.el)("button.dhx_button.dhx_button--color_primary.dhx_button--view_link.dhx_button--size_small.dhx_button--width_full.dhx_button--circle.dhx_calendar-action__cancel",{type:"button"},r.locale.cancel)]):null])])},t.prototype._drawHeader=function(o){return(0,d.el)(".dhx_calendar__navigation",[(0,d.el)("button.dhx_calendar-navigation__button.dhx_calendar-action__prev"+l.linkButtonClasses+".dhx_button--icon.dhx_button--circle",{"aria-label":"prev",type:"button"},[(0,d.el)(".dhx_button__icon.dxi.dxi-chevron-left")]),o,(0,d.el)("button.dhx_calendar-navigation__button.dhx_calendar-action__next"+l.linkButtonClasses+".dhx_button--icon.dhx_button--circle",{"aria-label":"next",type:"button"},[(0,d.el)(".dhx_button__icon.dxi.dxi-chevron-right")])])},t.prototype._drawTimepicker=function(){var o=this.config,c=o.css,h=o.weekNumbers,g=o.width;return(0,d.el)(".dhx_widget.dhx-calendar",{class:c?" "+c:"",style:{width:h?parseInt(g.toString())+48+"px":g}},[(0,d.inject)(this._timepicker.getRootView())])},t.prototype._selectDate=function(o,c){var h=c.attrs._date,g=r.DateHelper.copy(this._getSelected());switch(this._currentViewMode){case"calendar":var x=this.config.timePicker?r.DateHelper.mergeHoursAndMinutes(h,this._getSelected()||this._currentDate):h;if(!this.events.fire(a.CalendarEvents.beforeChange,[x,g,!0]))return;this.config.range&&this._selected.length===1&&this._selected[0]<x?this._selected.push(x):(this._selected=[],this._selected[0]=x),c.el.blur(),this.showDate(this._getSelected()),this.events.fire(a.CalendarEvents.change,[h,g,!0]);break;case"month":if(this.config.mode!=="month")r.DateHelper.setMonth(this._currentDate,h),this.showDate(null,"calendar"),this.events.fire(a.CalendarEvents.monthSelected,[h]);else{var C=r.DateHelper.fromYearAndMonth(this._currentDate.getFullYear()||this._getSelected().getFullYear(),h);if(!this.events.fire(a.CalendarEvents.beforeChange,[C,g,!0]))return;this._currentDate=C,this._selected[0]=C,this.events.fire(a.CalendarEvents.change,[this._getSelected(),g,!0]),this.events.fire(a.CalendarEvents.monthSelected,[h]),this.paint()}break;case"year":if(this.config.mode!=="year")r.DateHelper.setYear(this._currentDate,h),this.showDate(null,"month"),this.events.fire(a.CalendarEvents.yearSelected,[h]);else{if(C=r.DateHelper.fromYear(h),!this.events.fire(a.CalendarEvents.beforeChange,[C,g,!0]))return;this._currentDate=C,this._selected[0]=C,this.events.fire(a.CalendarEvents.change,[this._getSelected(),g,!0]),this.events.fire(a.CalendarEvents.yearSelected,[h]),this.paint()}}},t.prototype._moveBrowseFocus=function(o,c,h){if(c){var g=c.parent.body[c.idx+h];if(g){var x=g.el;x&&(o.target.tabIndex=-1,x.tabIndex=0,x.focus({preventScroll:!0}))}}},t}(u.View);_.Calendar=n},function(W,_,y){var b,E=this&&this.__extends||(b=function(t,o){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(c[g]=h[g])},b(t,o)},function(t,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=t}b(t,o),t.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}),m=this&&this.__assign||function(){return m=Object.assign||function(t){for(var o,c=1,h=arguments.length;c<h;c++)for(var g in o=arguments[c])Object.prototype.hasOwnProperty.call(o,g)&&(t[g]=o[g]);return t},m.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.Timepicker=void 0;var v=y(1),f=y(0),d=y(3),p=y(5),u=y(16),s=y(75),l=y(151),r=y(152),a=y(78),i=y(2);function n(t,o){return isNaN(t)?0:Math.min(o,Math.max(0,t))}var e=function(t){function o(c,h){h===void 0&&(h={});var g=t.call(this,c,(0,v.extend)({timeFormat:24,controls:!1,valueFormat:"string",actions:!1},h))||this;return g.events=new d.EventSystem(g),g._time={hour:0,minute:0,AM:!0},g.config.timeFormat===12&&(g._time.hour=12),g.config.controls=g.config.controls||g.config.actions,g.config.value&&g._setValue(g.config.value),g._initUI(c),g._initHandlers(),g._initEvents(),g}return E(o,t),o.prototype.getValue=function(c){return this.config.timeFormat===12&&(this._time.hour=this._time.hour%12||12),this._getValue(this._time,c)},o.prototype.setValue=function(c){this._setValue(c),this._hoursSlider.setValue(this._time.hour),this._minutesSlider.setValue(this._time.minute),this._inputsView.paint()},o.prototype.clear=function(){this.config.timeFormat===24?this.setValue("00:00"):this.setValue("12:00AM")},o.prototype.destructor=function(){this._minutesSlider&&this._minutesSlider.destructor(),this._hoursSlider&&this._hoursSlider.destructor(),this.events&&this.events.clear(),this.layout&&this.layout.destructor(),this.config=this.events=null,this._handlers=this._time=this._inputsView=this._minutesSlider=this._hoursSlider=null,this.unmount()},o.prototype.getRootView=function(){return this.layout.getRootView()},o.prototype._getValue=function(c,h){var g=c.hour,x=c.minute,C=c.AM;if(h){var k={hour:g,minute:x};return this.config.timeFormat===12&&(k.AM=C),k}return(g<10?"0"+g:g)+":"+(x<10?"0"+x:x)+(this.config.timeFormat===12?C?"AM":"PM":"")},o.prototype._setValue=function(c){var h,g=0,x=0;if(typeof c=="number"&&(c=new Date(c)),c instanceof Date)g=c.getMinutes(),x=c.getHours();else if(Array.isArray(c))x=n(c[0],23),g=n(c[1],59),c[2]&&c[2].toLowerCase()==="pm"&&(h=!0);else if(typeof c=="string"){var C=c.match(/\d+/g);x=n(+C[0],23),g=n(+C[1],59),c.toLowerCase().includes("pm")&&(h=!0)}else typeof c=="object"&&c.hasOwnProperty("hour")&&c.hasOwnProperty("minute")&&(x=c.hour,g=c.minute,h=!c.AM);return h&&x<12&&(x+=12),this.config.timeFormat===12&&!(0,r.isTimeCheck)(c)&&x>=12&&(h=!0),this._time={hour:x,minute:g,AM:!h}},o.prototype._initUI=function(c){var h=this,g={gravity:!1,css:"dhx_widget dhx_timepicker "+(this.config.css?this.config.css:"")+(this.config.controls?" dhx_timepicker--with-controls":""),rows:[{id:"timepicker",css:"dhx_timepicker__inputs"},{id:"hour-slider",css:"dhx_timepicker__hour"},{id:"minute-slider",css:"dhx_timepicker__minute"}]};this.config.controls&&(g.rows.unshift({id:"close-action",css:"dhx_timepicker__close"}),g.rows.push({id:"save-action",css:"dhx_timepicker__save"}));var x=this.layout=new u.Layout(c,g),C=(0,f.create)({render:function(){return h._draw()}}),k=this._inputsView=(0,p.toViewLike)(C),I=this._minutesSlider=new s.Slider(null,{min:0,max:59,step:1,tooltip:!1,labelPosition:"top",label:l.default.minutes,value:this.config.value?this._time.minute:0}),O=this._hoursSlider=new s.Slider(null,{min:0,max:23,step:1,tooltip:!1,labelPosition:"top",label:l.default.hours,value:this.config.value?this._time.hour===12&&this._time.AM?0:this._time.hour:0});x.getCell("timepicker").attach(k),x.getCell("hour-slider").attach(O),x.getCell("minute-slider").attach(I),this.config.controls&&(x.getCell("save-action").attach(function(){return(0,f.el)("button.dhx_timepicker__button-save.dhx_button.dhx_button--view_flat.dhx_button--color_primary.dhx_button--size_small.dhx_button--circle.dhx_button--width_full",{onclick:h._outerHandlers.save,type:"button"},l.default.save)}),x.getCell("close-action").attach(function(){return(0,f.el)("button.dhx_timepicker__button-close.dhx_button.dhx_button--view_link.dhx_button--size_medium.dhx_button--view_link.dhx_button--color_secondary.dhx_button--icon.dhx_button--circle",{_ref:"close",onclick:h._outerHandlers.close,type:"button","aria-label":"close timepicker"},[(0,f.el)("span.dhx_button__icon.dxi.dxi-close")])}))},o.prototype._initHandlers=function(){var c=this,h=function(x){var C=n(parseInt(x.value,10),59);x.value=C.toString(),c._minutesSlider.setValue(C)},g=function(x){var C=n(parseInt(x.value,10),23);x.value=C.toString(),c._hoursSlider.setValue(C)};this._handlers={onchange:{".dhx_timepicker-input--hour":function(x){return g(x.target)},".dhx_timepicker-input--minutes":function(x){return h(x.target)}},oninput:{".dhx_timepicker-input--hour":function(x){((0,i.isSafari)()||(0,i.isFirefox)())&&g(x.target)},".dhx_timepicker-input--minutes":function(x){((0,i.isSafari)()||(0,i.isFirefox)())&&h(x.target)}}},this._outerHandlers={close:function(){c.events.fire(a.TimepickerEvents.beforeClose,[c.getValue(c._isTimeObj())])&&(c.events.fire(a.TimepickerEvents.afterClose,[c.getValue(c._isTimeObj())]),c.events.fire(a.TimepickerEvents.close,[]))},save:function(){c.events.fire(a.TimepickerEvents.beforeApply,[c.getValue(c._isTimeObj())])&&(c.events.fire(a.TimepickerEvents.afterApply,[c.getValue(c._isTimeObj())]),c.events.fire(a.TimepickerEvents.apply,[c.getValue()]),c.events.fire(a.TimepickerEvents.save,[c._time]))}}},o.prototype._initEvents=function(){var c=this;this._hoursSlider.events.on(s.SliderEvents.beforeChange,function(h){if(!(h<c._hoursSlider.config.min||h>c._hoursSlider.config.max)){var g=m({},c._time);c.config.timeFormat===12?(g.AM=h<12,g.hour=h%12||12):g.hour=h;var x=c._isTimeObj();return c.events.fire(a.TimepickerEvents.beforeChange,[c._getValue(g,x)])}}),this._hoursSlider.events.on(s.SliderEvents.change,function(h){if(!(h<c._hoursSlider.config.min||h>c._hoursSlider.config.max)){c.config.timeFormat===12?(c._time.AM=h<12,c._time.hour=h%12||12):c._time.hour=h;var g=c._isTimeObj();c.events.fire(a.TimepickerEvents.change,[c.getValue(g)]),c._inputsView.paint()}}),this._minutesSlider.events.on(s.SliderEvents.beforeChange,function(h){if(!(h<c._minutesSlider.config.min||h>c._minutesSlider.config.max)){var g=m(m({},c._time),{minute:h}),x=c._isTimeObj();return c.events.fire(a.TimepickerEvents.beforeChange,[c._getValue(g,x)])}}),this._minutesSlider.events.on(s.SliderEvents.change,function(h){if(!(h<c._minutesSlider.config.min||h>c._minutesSlider.config.max)){c._time.minute=h;var g=c._isTimeObj();c.events.fire(a.TimepickerEvents.change,[c.getValue(g)]),c._inputsView.paint()}})},o.prototype._draw=function(){return this._minutesSlider.config.label=l.default.minutes,this._hoursSlider.config.label=l.default.hours,(0,f.el)(".dhx_timepicker-inputs",m({},this._handlers),[(0,f.el)("input.dhx_timepicker-input.dhx_timepicker-input--hour",{_key:"hour",_ref:"hour",value:this.getValue(!0).hour.toString().length>1?this.getValue(!0).hour:"0"+this.getValue(!0).hour,"aria-label":"hours"}),(0,f.el)("span.dhx_timepicker-delimer",":"),(0,f.el)("input.dhx_timepicker-input.dhx_timepicker-input--minutes",{_key:"minute",value:this.getValue(!0).minute.toString().length>1?this.getValue(!0).minute:"0"+this.getValue(!0).minute,"aria-label":"minutes"}),this.config.timeFormat===12?(0,f.el)(".dhx_timepicker-ampm",this._time.AM?"AM":"PM"):null])},o.prototype._isTimeObj=function(){var c;return((c=this.config.valueFormat)===null||c===void 0?void 0:c.toLowerCase())==="timeobject"},o}(p.View);_.Timepicker=e},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.getMarginSize=_.getBlockRange=void 0,_.getBlockRange=function(b,E,m){return m===void 0&&(m=!0),m?{min:b.left+window.pageXOffset,max:E.right+window.pageXOffset}:{min:b.top+window.pageYOffset,max:E.bottom+window.pageYOffset}},_.getMarginSize=function(b){return b&&(b.type==="space"||b.type==="wide")?12:0}},function(W,_,y){var b,E=this&&this.__extends||(b=function(d,p){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,s){u.__proto__=s}||function(u,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(u[l]=s[l])},b(d,p)},function(d,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function u(){this.constructor=d}b(d,p),d.prototype=p===null?Object.create(p):(u.prototype=p.prototype,new u)});Object.defineProperty(_,"__esModule",{value:!0}),_.ProLayout=void 0;var m=y(49),v=y(148),f=function(d){function p(u,s){return d.call(this,u,s)||this}return E(p,d),p.prototype._createCell=function(u){var s;return u.rows||u.cols||u.views?(u.parent=this._root,s=new p(this,u)):s=new v.ProCell(this,u),this._root._all[s.id]=s,u.init&&u.init(s,u),s},p}(m.Layout);_.ProLayout=f},function(W,_,y){var b,E=this&&this.__extends||(b=function(u,s){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,r){l.__proto__=r}||function(l,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(l[a]=r[a])},b(u,s)},function(u,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function l(){this.constructor=u}b(u,s),u.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}),m=this&&this.__assign||function(){return m=Object.assign||function(u){for(var s,l=1,r=arguments.length;l<r;l++)for(var a in s=arguments[l])Object.prototype.hasOwnProperty.call(s,a)&&(u[a]=s[a]);return u},m.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.ProCell=void 0;var v=y(1),f=y(0),d=y(34),p=function(u){function s(l,r){var a=u.call(this,l,r)||this;return a.scrollView=new d.ScrollView(function(){return a._getFirstRootView()}),a}return E(s,u),s.prototype._getFirstRootView=function(l){return l===void 0&&(l=this),l.getParent()&&l.getParent().getRootView()?l.getParent().getRootView():this._getFirstRootView(l.getParent())},s.prototype.toVDOM=function(l){var r,a;if(this.config===null&&(this.config={}),!this.config.hidden){var i,n=this.config.$fieldset,e=this._calculateStyle(),t=(0,v.isDefined)(this.config.padding)?isNaN(Number(this.config.padding))?{padding:this.config.padding}:{padding:"".concat(this.config.padding,"px")}:"",o=this.config.full||this.config.html?e:m(m({},e),t),c=this._checkProgress()?this._getProgressBar():null;if(!this.config.html)if(this._ui){var h=this._ui.getRootView();h.render&&(h=(0,f.inject)(h)),i=h?[this.scrollView.render(h)]:h||null}else i=l?this.scrollView.render([l]):l||null;var g=this.config.resizable&&!this._isLastCell()&&this._getNextCell()&&!this.config.collapsed?(0,f.el)(".dhx_layout-resizer."+(this._isXDirection()?"dhx_layout-resizer--x":"dhx_layout-resizer--y"),m(m({},this._resizerHandlers),{_ref:"resizer_"+this._uid}),[(0,f.el)("span.dhx_layout-resizer__icon",{class:"dxi "+(this._isXDirection()?"dxi-dots-vertical":"dxi-dots-horizontal")})]):null,x={};if(this.config.on)for(var C in this.config.on)x["on"+C]=this.config.on[C];var k="",I=this.config.cols||this.config.rows;if(this.config.type&&I)switch(this.config.type){case"line":k=" dhx_layout-line";break;case"wide":k=" dhx_layout-wide";break;case"space":k=" dhx_layout-space"}var O=(0,f.el)(".dhx_layout-cell-content",{_key:"".concat(this._uid,"_html"),style:t},[(0,f.el)(".dhx_layout-cell-inner_html",{".innerHTML":this.config.html})]),D=n?(0,f.el)("fieldset.dhx_form-fieldset",{class:this.config.$disabled?" dhx_form-fieldset--disabled":"",style:t,disabled:this.config.$disabled},[(0,f.el)("legend.dhx_form-fieldset-legend",{class:"dhx_form-fieldset-legend--".concat(this.config.labelAlignment||"left")},this.config.label),(0,f.el)(".dhx_layout-cell-content",{class:this._getCss(!1)},[].concat(i))]):this.config.full?[(0,f.el)("div",{tabindex:this.config.collapsable?"0":"-1",class:"dhx_layout-cell-header"+(this._isXDirection()?" dhx_layout-cell-header--col":" dhx_layout-cell-header--row")+(this.config.collapsable?" dhx_layout-cell-header--collapseble":"")+(this.config.collapsed?" dhx_layout-cell-header--collapsed":"")+(((this.getParent()||{}).config||{}).isAccordion?" dhx_layout-cell-header--accordion":""),style:{height:this.config.headerHeight},onclick:this._handlers.toggle,onkeydown:this._handlers.enterCollapse},[this.config.headerIcon&&(0,f.el)("span.dhx_layout-cell-header__icon",{class:this.config.headerIcon}),this.config.headerImage&&(0,f.el)(".dhx_layout-cell-header__image-wrapper",[(0,f.el)("img",{src:this.config.headerImage,class:"dhx_layout-cell-header__image"})]),this.config.header&&(0,f.el)("h3.dhx_layout-cell-header__title",this.config.header),this.config.collapsable?(0,f.el)("div.dhx_layout-cell-header__collapse-icon",{class:this._getCollapseIcon()}):(0,f.el)("div.dhx_layout-cell-header__collapse-icon",{class:"dxi dxi-empty"})]),this.config.collapsed?null:(0,f.el)("div",{style:m(m({},t),{height:"calc(100% - ".concat(this.config.headerHeight||37,"px)")}),class:this._getCss(!0)+" dhx_layout-cell-content"+(this.config.type?k:"")},this.config.html?[(0,f.el)("div",{".innerHTML":this.config.html,class:"dhx_layout-cell dhx_layout-cell-inner_html"})]:i)]:!this.config.html||this.config.rows&&this.config.cols&&this.config.views?i:[this.config.collapsed?null:this.scrollView&&this.scrollView.config.enable?this.scrollView.render([O],this._uid):O],A=(0,f.el)("div",m(m(((r={_key:this._uid,_ref:this._uid})["aria-label"]=this.config.id?"tab-content-"+this.config.id:null,r["data-cell-id"]=(a=this.config.id)!==null&&a!==void 0?a:null,r),x),{class:this._getCss(!1)+(this.config.css?" "+this.config.css:"")+(this.config.collapsed?" dhx_layout-cell--collapsed":"")+(this.config.resizable?" dhx_layout-cell--resizable":"")+(this.config.type&&!this.config.full?k:""),style:n?e:o}),D||c?[].concat(D,c):null);return g?[].concat(A,g):A}},s}(y(74).Cell);_.ProCell=p},function(W,_,y){var b,E=this&&this.__extends||(b=function(n,e){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(t[c]=o[c])},b(n,e)},function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=n}b(n,e),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}),m=this&&this.__assign||function(){return m=Object.assign||function(n){for(var e,t=1,o=arguments.length;t<o;t++)for(var c in e=arguments[t])Object.prototype.hasOwnProperty.call(e,c)&&(n[c]=e[c]);return n},m.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.Slider=void 0;var v=y(1),f=y(0),d=y(3),p=y(14),u=y(5),s=y(11),l=y(77),r=y(2);function a(n,e,t){return n<e?e:n>t?t:n}var i=function(n){function e(t,o){var c=n.call(this,t,(0,v.extend)({mode:"horizontal",min:0,max:100,step:1,tooltip:!0},o))||this;c._disabled=!1,c.config.helpMessage=c.config.helpMessage||c.config.help,c.config.thumbLabel!==void 0&&(c.config.tooltip=c.config.thumbLabel),c.config.labelInline&&(c.config.labelPosition="left"),c.events=new d.EventSystem(c),c._axis=c.config.mode==="horizontal"?"clientX":"clientY",c._initStartPosition(),c._keyManager=new p.KeyManager(function(){var g,x;return document.activeElement===((x=(g=c.getRootView().refs)===null||g===void 0?void 0:g[c._isExtraActive?"extraRunner":"runner"])===null||x===void 0?void 0:x.el)}),c._initHotkeys();var h=(0,f.create)({render:function(){return c._draw()},hooks:{didMount:function(){return c._calcSliderPosition()},didRedraw:function(){return c._calcSliderPosition()}}});return c._initHandlers(),c.mount(t,h),c}return E(e,n),e.prototype.disable=function(){this._disabled=!0,this.paint()},e.prototype.enable=function(){this._disabled=!1,this.paint()},e.prototype.isDisabled=function(){return this._disabled},e.prototype.focus=function(t){this.getRootView().refs[t?"extraRunner":"runner"].el.focus()},e.prototype.blur=function(){this.getRootView().refs[this._isExtraActive?"extraRunner":"runner"].el.blur()},e.prototype.getValue=function(){var t;if(this.config.range){var o=this._getValue(this._currentPosition),c=this._getValue(this._extraCurrentPosition);t=o<c?[o,c]:[c,o]}else t=[this._getValue(this._currentPosition)];return t},e.prototype.setValue=function(t){var o=this._getValue(this._currentPosition);if(Array.isArray(t)&&t.length>1){var c=this._getValue(this._extraCurrentPosition);this.events.fire(l.SliderEvents.beforeChange,[t[0],o,!1])&&(this._setValue(t[0],!1),this.events.fire(l.SliderEvents.change,[t[0],o,!1])),this.events.fire(l.SliderEvents.beforeChange,[t[1],c,!0])&&(this._setValue(t[1],!0),this.events.fire(l.SliderEvents.change,[t[1],c,!0]))}else{if(t=parseFloat(t),isNaN(t))throw new Error("Wrong value type, for more info check documentation https://docs.dhtmlx.com/suite/slider__api__slider_setvalue_method.html");this.events.fire(l.SliderEvents.beforeChange,[t,o,!1])&&(this._setValue(t),this.events.fire(l.SliderEvents.change,[t,o,!1]))}this.paint()},e.prototype.destructor=function(){this._keyManager&&this._keyManager.destructor(),document.body.contains(this._tooltip)&&document.body.removeChild(this._tooltip),this._tooltip=null,this.unmount()},e.prototype._calcSliderPosition=function(){var t=this.getRootView();if(t){var o=t.refs.track.el.getBoundingClientRect();this._offsets={left:o.left+window.pageXOffset,top:o.top+window.pageYOffset},this._length=this.config.mode==="horizontal"?o.width:o.height}},e.prototype._initHotkeys=function(){var t=this,o={arrowLeft:function(h){h.preventDefault(),t._move(-t.config.step,h.target.classList.contains("dhx_slider__thumb--extra"))},arrowRight:function(h){h.preventDefault(),t._move(t.config.step,h.target.classList.contains("dhx_slider__thumb--extra"))},arrowUp:function(h){h.preventDefault(),t._move(t.config.step,h.target.classList.contains("dhx_slider__thumb--extra"))},arrowDown:function(h){h.preventDefault(),t._move(-t.config.step,h.target.classList.contains("dhx_slider__thumb--extra"))}};for(var c in o)this._keyManager.addHotKey(c,o[c])},e.prototype._move=function(t,o){o===void 0&&(o=!1),this.config.inverse&&(t=-t);var c=this.config,h=c.max,g=c.min,x=o?this._getValue(this._extraCurrentPosition):this._getValue(this._currentPosition),C=x+t;(C>h||C<g)&&(C=x),this.events.fire(l.SliderEvents.beforeChange,[C,x,o])&&(this._setValue(x+t,o),this.events.fire(l.SliderEvents.change,[C,x,o]),this.paint())},e.prototype._initStartPosition=function(){var t=this.config,o=t.max,c=t.min,h=t.range,g=function(k,I,O){var D;return(D=k===void 0?[]:Array.isArray(k)?k:typeof k=="string"?k.split(",").map(function(A){return parseInt(A,10)}):[k])[0]=D[0]===void 0?I:a(D[0],I,O),D[1]=D[1]===void 0?O:a(D[1],I,O),D}(this.config.value,this.config.min,this.config.max),x=g[0],C=g[1];this._currentPosition=(x-c)/(o-c)*100,h&&(this._extraCurrentPosition=(o-C)/(o-c)*100),this._currentPosition=(x-c)/(o-c)*100,h&&(this._extraCurrentPosition=(C-c)/(o-c)*100),this._isInverse()&&(this._currentPosition=100-this._currentPosition,h&&(this._extraCurrentPosition=100-this._extraCurrentPosition))},e.prototype._getValue=function(t){this._isInverse()&&(t=100-t);var o=this.config,c=o.min,h=o.max,g=o.step;if(t===100)return h;if(t===0)return c;var x=t*(h-c)/100,C=x%g,k=C>=g/2?g:0;return+(Number(c)+Number(x)-C+k).toFixed(5)},e.prototype._setValue=function(t,o){o===void 0&&(o=!1);var c=this.config,h=c.max,g=c.min;if(t>h||t<g)return!1;var x=(t-g)/(h-g)*100,C=this._isInverse()?100-x:x;o?this._extraCurrentPosition=C:this._currentPosition=C},e.prototype._initHandlers=function(){var t=this,o=function(g){g.cancelable&&g.preventDefault();var x=((g.targetTouches?g.targetTouches[0][t._axis]:g[t._axis])-t._getBegining())/t._length*100;if(t._findNewDirection){if(Math.abs(t._currentPosition-x)<1)return;x>t._currentPosition?t._possibleRange=[t._currentPosition,100]:t._possibleRange=[0,t._currentPosition],t._findNewDirection=null}t._inSide(x)&&t._updatePosition(x,t._isExtraActive),t.paint()},c=function(g){t.events.fire(l.SliderEvents.mouseup,[g]),setTimeout(function(){t._isMouseMoving=!1,t.paint()},4),g.targetTouches?(document.removeEventListener("touchend",c),document.removeEventListener("touchmove",o)):(document.removeEventListener("mouseup",c),document.removeEventListener("mousemove",o))},h=function(g){var x;if(!t._disabled&&g.which!==3)if(t.events.fire(l.SliderEvents.mousedown,[g]),t._isMouseMoving=!0,g.target.classList.contains("dhx_slider__thumb--extra")?(t._isExtraActive=!0,x=t._extraCurrentPosition):(t._isExtraActive=!1,x=t._currentPosition),t._findNewDirection=null,t.config.range){var C=t._currentPosition>t._extraCurrentPosition?[t._currentPosition,t._extraCurrentPosition]:[t._extraCurrentPosition,t._currentPosition],k=C[0],I=C[1];t._currentPosition===t._extraCurrentPosition?(t._findNewDirection=x,t._possibleRange=[0,100]):t._possibleRange=x<k?[0,k]:[I,100]}else t._possibleRange=[0,100]};this.config.helpMessage&&(this._helper=new s.Popup({css:"dhx_tooltip dhx_tooltip--forced dhx_tooltip--light"}),this._helper.attachHTML(this.config.helpMessage)),this._handlers={showHelper:function(g){g.preventDefault(),g.stopPropagation(),t._helper.show(g.target,{theme:g.target})},onmousedown:function(g){h(g),document.addEventListener("mousemove",o),document.addEventListener("mouseup",c)},ontouchstart:function(g){t._setTooltip(g),t._mouseIn=!1,h(g),document.addEventListener("touchmove",o,{passive:!1}),document.addEventListener("touchend",c),t.paint()},ontouchend:function(g){t._setTooltip(g),t._mouseIn=!1,t.paint()},onlabelClick:function(){t.getRootView().refs.runner.el.focus()},onclick:function(g){if(!t._disabled&&!t._isMouseMoving&&g.which!==3){var x=(g[t._axis]-t._getBegining())/t._length*100,C=t.getRootView().refs;t.config.range?Math.abs(t._currentPosition-x)<Math.abs(t._extraCurrentPosition-x)?(t._updatePosition(x,!1),C.runner.el.focus()):(t._updatePosition(x,!0),C.extraRunner.el.focus()):(t._updatePosition(x,!1),C.runner.el.focus()),t.paint()}},onmouseover:function(g){t._setTooltip(g),t._mouseIn=!0,t.paint()},onmouseout:function(g){t._setTooltip(g),t._mouseIn=!1,t.paint()},onfocus:function(g){t._setTooltip(g),t._focusIn=!0,t.events.fire(l.SliderEvents.focus,[]),t.paint()},onblur:function(g){t._setTooltip(g),t._focusIn=!1,t.events.fire(l.SliderEvents.blur,[]),t.paint()},onkeydown:function(g){t.events.fire(l.SliderEvents.keydown,[g])}}},e.prototype._getBegining=function(){return this.config.mode==="horizontal"?this._offsets.left-window.pageXOffset:this._offsets.top-window.pageYOffset},e.prototype._inSide=function(t){var o=this._possibleRange;return t<o[0]?(this._updatePosition(o[0],this._isExtraActive),!1):!(t>o[1])||(this._updatePosition(o[1],this._isExtraActive),!1)},e.prototype._updatePosition=function(t,o){o===void 0&&(o=!1),t>100&&(t=100),t<0&&(t=0);var c=this.config,h=c.max,g=c.min,x=o?this._extraCurrentPosition:this._currentPosition,C=this._getValue(x),k=this._getValue(t);if(C!==k&&this.events.fire(l.SliderEvents.beforeChange,[k,C,o])){var I=(k-g)/(h-g)*100,O=this._isInverse()?100-I:I;o?this._extraCurrentPosition=O:this._currentPosition=O,this.events.fire(l.SliderEvents.change,[k,C,o])}},e.prototype._getRunnerStyle=function(t){var o;t===void 0&&(t=!1);var c=this.config.mode==="horizontal"?"left":"top",h=t?this._extraCurrentPosition:this._currentPosition;return(o={})[c]=h+"%",o},e.prototype._isInverse=function(){return this.config.inverse&&this.config.mode==="horizontal"||!this.config.inverse&&this.config.mode==="vertical"},e.prototype._getRunnerCss=function(t){return t===void 0&&(t=!1),"dhx_slider__thumb"+(t?" dhx_slider__thumb--extra":"")+(this._isMouseMoving&&(t&&this._isExtraActive||!t&&!this._isExtraActive)?" dhx_slider__thumb--active":"")+(this._disabled?" dhx_slider__thumb--disabled":"")+(this._isNullable(t?this._extraCurrentPosition:this._currentPosition)&&!this.config.range?" dhx_slider__thumb--nullable":"")},e.prototype._draw=function(){var t=this.config,o=t.labelPosition,c=t.mode,h=t.hiddenLabel,g=t.tick,x=t.majorTick,C=t.css,k=t.helpMessage,I=(0,r.getLabelStyle)(m(m({},this.config),{required:!1}));return!this._tooltip||this._mouseIn&&this._focusIn&&this._isMouseMoving||document.body.contains(this._tooltip)&&document.body.removeChild(this._tooltip),(0,f.el)("div",{class:"dhx_slider dhx_slider--mode_"+c+(o==="left"?" dhx_slider--label-inline":"")+(h?" dhx_slider--label_sr":"")+(g?" dhx_slider--ticks":"")+(x?" dhx_slider--major-ticks":"")+(C?" "+C:"")+(this._disabled?" dhx_slider--disabled":""),style:{paddingBottom:this.config.tick?"16px":null}},[I?(0,f.el)("label.dhx_label.dhx_slider__label",{style:I.style,class:k?"dhx_label--with-help":"",onclick:this._handlers.onlabelClick},k?[I.label&&(0,f.el)("span.dhx_label__holder",I.label),(0,f.el)("span.dhx_label-help.dxi.dxi-help-circle-outline",{tabindex:"0",role:"button",onclick:this._handlers.showHelper})]:I.label):null,this._drawSlider()])},e.prototype._drawSlider=function(){return(0,f.el)(".dhx_widget.dhx_slider__track-holder",{"data-dhx-widget-id":this._uid},[(0,f.el)(".dhx_slider__track",{_ref:"track",onmouseover:this._handlers.onmouseover,onmouseout:this._handlers.onmouseout,onclick:this._handlers.onclick},[this._getDetector(),(0,f.el)("div",{_ref:"runner",class:this._getRunnerCss(),ontouchstart:this._handlers.ontouchstart,ontouchend:this._handlers.ontouchend,onmousedown:this._handlers.onmousedown,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,style:this._getRunnerStyle(),tabindex:0}),this.config.tooltip&&(this._mouseIn||this._focusIn||this._isMouseMoving)?this._drawTooltip():null,this.config.tooltip&&this.config.range&&(this._mouseIn||this._focusIn||this._isMouseMoving)?this._drawTooltip(!0):null,this.config.range?(0,f.el)("div",{_ref:"extraRunner",class:this._getRunnerCss(!0),ontouchstart:this._handlers.ontouchstart,ontouchend:this._handlers.ontouchend,onmousedown:this._handlers.onmousedown,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,style:this._getRunnerStyle(!0),tabindex:0}):null]),this.config.tick?this._drawTicks():null])},e.prototype._getDetector=function(){var t,o,c;if(this._disabled)return(0,f.el)(".dhx_slider__range");var h=this.config.mode==="horizontal"?"left":"top",g=this.config.mode==="horizontal"?"width":"height";if(this.config.range){var x=this._currentPosition>this._extraCurrentPosition?[this._currentPosition,this._extraCurrentPosition]:[this._extraCurrentPosition,this._currentPosition],C=x[0],k=x[1];return(0,f.el)(".dhx_slider__range",{style:(t={},t[h]=k+"%",t[g]=C-k+"%",t)})}return this._isInverse()?(0,f.el)(".dhx_slider__range",{style:(o={},o[h]=this._currentPosition+"%",o[g]=100-this._currentPosition+"%",o)}):(0,f.el)(".dhx_slider__range",{style:(c={},c[h]=0,c[g]=this._currentPosition+"%",c)})},e.prototype._drawTooltip=function(t){if(t===void 0&&(t=!1),this._activeTooltip!=="none"&&this.getRootView()){var o=this._activeTooltip==="extraTooltip"?this._extraCurrentPosition:this._currentPosition,c=this.config.mode==="horizontal"?"left":"top",h="";(t&&this._isExtraActive||!t&&!this._isExtraActive)&&(h+=" dhx_slider__thumb-label--active"),this._tooltip||(this._tooltip=document.createElement("div"));var g=this._activeTooltip==="tooltip"?this.getRootView().refs.runner.el.getBoundingClientRect():this.getRootView().refs.extraRunner.el.getBoundingClientRect();this._tooltip.className="dhx_slider__thumb-label"+h,this._tooltip.style.left=g.x+(c==="left"?6:-30)+window.pageXOffset+"px",this._tooltip.style.top=g.y+(c==="left"?-30:6)+window.pageYOffset+"px",this._tooltip.innerText=this._getValue(o).toString(),document.body.appendChild(this._tooltip)}},e.prototype._getTicks=function(){for(var t=this.config,o=t.max,c=t.min,h=t.step,g=t.tick,x=t.majorTick,C=o-c,k=h*g/C,I=[],O=0,D=0;O<1;){var A=+(Number(c)+O*C).toFixed(5),H=D%x==0;I.push({position:(this._isInverse()?100*(1-O):100*O)+"%",isMultiple:H,label:H&&typeof this.config.tickTemplate=="function"?this.config.tickTemplate(A):null}),O+=k,D++}return I.push({position:(this._isInverse()?0:100)+"%",isMultiple:!0,label:typeof this.config.tickTemplate=="function"?this.config.tickTemplate(o):null}),I},e.prototype._drawTicks=function(){var t=this.config.mode==="horizontal"?"left":"top";return(0,f.el)(".dhx_slider__ticks-holder",this._getTicks().map(function(o){var c;return(0,f.el)("div",{class:"dhx_slider__tick"+(o.isMultiple?" dhx_slider__tick--major":""),style:(c={},c[t]=o.position,c)},o.label!==void 0?[(0,f.el)(".dhx_slider__tick-label",o.label)]:null)}))},e.prototype._isNullable=function(t){return this._isInverse()?t===100:t===0},e.prototype._setTooltip=function(t){t.target.classList.contains("dhx_slider__thumb--extra")?this._activeTooltip="extraTooltip":t.target.classList.contains("dhx_slider__thumb")?this._activeTooltip="tooltip":this._activeTooltip="none"},e}(u.View);_.Slider=i},function(W,_,y){var b,E=this&&this.__extends||(b=function(r,a){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(i[e]=n[e])},b(r,a)},function(r,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function i(){this.constructor=r}b(r,a),r.prototype=a===null?Object.create(a):(i.prototype=a.prototype,new i)}),m=this&&this.__assign||function(){return m=Object.assign||function(r){for(var a,i=1,n=arguments.length;i<n;i++)for(var e in a=arguments[i])Object.prototype.hasOwnProperty.call(a,e)&&(r[e]=a[e]);return r},m.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.Popup=void 0;var v=y(1),f=y(0),d=y(3),p=y(2),u=y(5),s=y(76),l=function(r){function a(i){i===void 0&&(i={});var n=r.call(this,null,(0,v.extend)({},i))||this,e=n._popup=document.createElement("div");return e.className="dhx_widget dhx_popup"+(n.config.css?" "+n.config.css:""),e.style.position="absolute",e.setAttribute("role","dialog"),e.setAttribute("aria-modal","true"),e.setAttribute("aria-live","polite"),n.config.theme&&n._setTheme(n.config.theme),n.mount(e,(0,f.create)({render:function(){return n.toVDOM()}})),n._clickEvent=function(t){return n.events.fire(s.PopupEvents.click,[t])},n.events=i.events||new d.EventSystem(n),n._isActive=!1,n}return E(a,r),a.prototype.show=function(i,n,e){var t=this;n===void 0&&(n={}),this.events.fire(s.PopupEvents.beforeShow,[i])&&(i=(0,p.toNode)(i),this._isActive?this._setPopupSize(i,n):(e&&this.attach(e),n.theme&&this._setTheme(n.theme),this._popup.style.left="0",this._popup.style.top="0",(0,f.awaitRedraw)().then(function(){t._setPopupSize(i,n),t._popup.style.position="fixed",document.body.appendChild(t._popup),t._isActive=!0}).then(function(){t._popup.style.position="absolute",t.events.fire(s.PopupEvents.afterShow,[i]),t._outerClickDestructor=t._detectOuterClick(i)})))},a.prototype.hide=function(){this._hide(!1,null)},a.prototype.isVisible=function(){return this._isActive},a.prototype.attach=function(i,n){return this._html=null,typeof i=="object"?this._ui=i:typeof i=="string"?this._ui=new window.dhx[i](null,n):typeof i=="function"&&(i.prototype instanceof u.View?this._ui=new i(null,n):this._ui={getRootView:function(){return i(n)}}),this.paint(),this._ui},a.prototype.attachHTML=function(i){this._html=i,this.paint()},a.prototype.getWidget=function(){return this._ui},a.prototype.getContainer=function(){return this.getRootView().refs.content.el},a.prototype.toVDOM=function(){var i;return this._html?i=(0,f.el)(".dhx_popup__inner-html-content",{".innerHTML":this._html}):(i=this._ui?this._ui.getRootView():null)&&i.render&&(i=(0,f.inject)(i)),(0,f.el)("div",{class:"dhx_popup-content",tabindex:0,onclick:this._clickEvent,_key:this._uid,_ref:"content"},[i])},a.prototype.destructor=function(){this.hide(),this._outerClickDestructor&&this._outerClickDestructor(),this._popup=null},a.prototype._setTheme=function(i){var n;if(typeof i=="string")this._popup.setAttribute("data-dhx-theme",i);else{var e=(n=i==null?void 0:i.closest("[data-dhx-theme]"))===null||n===void 0?void 0:n.getAttribute("data-dhx-theme");e&&this._popup.setAttribute("data-dhx-theme",e)}},a.prototype._setPopupSize=function(i,n,e){var t=this;e===void 0&&(e=3);var o=this._popup.getBoundingClientRect(),c=o.width,h=o.height;if(this._timeout&&(clearTimeout(this._timeout),this._timeout=null),!e||c!==0&&h!==0){var g=(0,p.fitPosition)(i,m(m({centering:!0,mode:"bottom"},n),{width:c,height:h})),x=g.left,C=g.top;if(this._popup.style.left=x,this._popup.style.top=C,n.indent&&n.indent!==0)switch(n.mode){case"top":this._popup.style.top=parseInt(this._popup.style.top.slice(0,-2),null)-parseInt(n.indent.toString(),null)+"px";break;case"bottom":default:this._popup.style.top=parseInt(this._popup.style.top.slice(0,-2),null)+parseInt(n.indent.toString(),null)+"px";break;case"left":this._popup.style.left=parseInt(this._popup.style.left.slice(0,-2),null)-parseInt(n.indent.toString(),null)+"px";break;case"right":this._popup.style.left=parseInt(this._popup.style.left.slice(0,-2),null)+parseInt(n.indent.toString(),null)+"px"}}else this._timeout=setTimeout(function(){t._isActive&&(t._setPopupSize(i,n,e-1),t._timeout=null)})},a.prototype._detectOuterClick=function(i){var n=this,e=!1,t=new WeakMap,o=function(c){var h=c.target,g=document.querySelectorAll(".dhx_popup");for(e?g.forEach(function(x){return t.has(x)||t.set(x,n._popup)}):(e=!!g.length)&&g.forEach(function(x){return t.set(x,!0)});h;){if(h===i||h===n._popup||t.get(h)===n._popup)return;h=h.parentNode}n._hide(!0,c)&&document.removeEventListener("mousedown",o)};return document.addEventListener("mousedown",o),function(){return document.removeEventListener("mousedown",o)}},a.prototype._hide=function(i,n){if(this._isActive)return!!this.events.fire(s.PopupEvents.beforeHide,[i,n])&&(document.body.removeChild(this._popup),this._isActive=!1,this._outerClickDestructor&&(this._outerClickDestructor(),this._outerClickDestructor=null),this.events.fire(s.PopupEvents.afterHide,[n]),!0)},a}(u.View);_.Popup=l},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.default={hours:"Hours",minutes:"Minutes",save:"Save"}},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.isTimeCheck=void 0,_.isTimeCheck=function(b){return/(^12:[0-5][0-9]?AM$)/i.test(b)}},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.linkButtonClasses=void 0,_.linkButtonClasses=".dhx_button.dhx_button--view_link.dhx_button--icon.dhx_button--size_medium.dhx_button--color_secondary"},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.CheckboxEditor=void 0;var b=y(1),E=y(0),m=y(7),v=function(){function f(d,p,u){this._config=u,this._cell={row:d,col:p},this._initHandlers()}return f.prototype.endEdit=function(){var d=this._checked;this._config.events.fire(m.GridEvents.beforeEditEnd,[d,this._cell.row,this._cell.col])?(this._cell.row=this._config.datacollection.getItem(this._cell.row.id),this._config.events.fire(m.GridEvents.afterEditEnd,[d,this._cell.row,this._cell.col])):this._input.checked=!d},f.prototype.toHTML=function(){this._checked===void 0&&(this._checked=this._cell.row[this._cell.col.id]);var d=(0,b.uid)();return(0,E.el)("div.dhx_checkbox.dhx_cell-editor__checkbox",[(0,E.el)("label",{style:{display:"none"},for:d},this._checked||"false"),(0,E.el)("input.dhx_checkbox__input",{type:"checkbox",_hooks:{didInsert:this._handlers.didInsert},_key:"cell_editor","data-dhx-id":"cell_editor","data-dhx-checked":(!!this._checked).toString(),checked:this._checked,id:d,style:{userSelect:"none"}}),(0,E.el)("span.dhx_checkbox__visual-input")])},f.prototype._initHandlers=function(){var d=this;this._handlers={onClick:function(){var p=!d._input.checked;d._config.events.fire(m.GridEvents.beforeEditStart,[d._cell.row,d._cell.col,"checkbox"])?(d._checked=p,d._config.events.fire(m.GridEvents.afterEditStart,[d._cell.row,d._cell.col,"checkbox"]),d.endEdit()):d._input.checked=!p},didInsert:function(p){d._checkbox=p.el.parentNode.lastChild,d._input=p.el.parentNode.querySelector("input"),p.el.parentNode.addEventListener("click",d._handlers.onClick)}}},f}();_.CheckboxEditor=v},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(u){for(var s,l=1,r=arguments.length;l<r;l++)for(var a in s=arguments[l])Object.prototype.hasOwnProperty.call(s,a)&&(u[a]=s[a]);return u},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.ComboboxEditor=void 0;var E=y(0),m=y(7),v=y(51),f=y(31),d=y(18),p=function(){function u(s,l,r){this._config=r,this._cell={row:s,col:l},this._initHandlers()}return u.prototype.endEdit=function(s){var l=this;if(this._config.$editable){var r;if(!s){var a=this._input.getValue();r=this._cell.col.editorType==="multiselect"?a.split(",").join(", "):a}if(this._config.events.fire(m.GridEvents.beforeEditEnd,[r,this._cell.row,this._cell.col])){var i=(0,d.getEditorOptions)(this._cell.col,this._cell.row);this._input.popup.hide(),document.removeEventListener("mousedown",this._handlers.onOuterClick),this._cell.row=this._config.datacollection.getItem(this._cell.row.id),f.focusManager.setFocusId(this._config.gridId),r==null||r.toString().split(", ").forEach(function(n){var e=i.find(function(t){return typeof t=="string"?t===n:t.id.toString()===n});n&&!e&&(l._cell.col.$customOptions||(l._cell.col.$customOptions=[]),l._cell.col.$customOptions.push(l._input.data.getItem(n)))}),this._config.$editable=null,this._config.events.fire(m.GridEvents.afterEditEnd,[r,this._cell.row,this._cell.col])}else this._input.focus()}},u.prototype.toHTML=function(){var s=this,l=(0,d.getEditorOptions)(this._cell.col,this._cell.row).map(function(i){return typeof i=="string"?{id:"".concat(i),value:i}:i})||[];if(!this._input){this._input=new v.Combobox(null,b({itemHeight:37,css:"dhx_cell-editor__combobox",multiselection:this._cell.col.editorType==="multiselect",htmlEnable:this._cell.col.htmlEnable},this._cell.col.editorConfig)),this._input.data.parse(l);var r=this._cell.row[this._cell.col.id],a=this._cell.col.editorType==="multiselect"?((r==null?void 0:r.toString())||"").split(", "):r;this._input.setValue(a),this._input.events.on("keydown",this._handlers.onkeydown),this._input.data.events.on("beforeAdd",function(i){if(i.id!==i.value)return s._input.addOption({id:i.value,value:i.value},!0),!1})}return document.addEventListener("mousedown",this._handlers.onOuterClick),this._config.$editable.editor=this,(0,E.awaitRedraw)().then(function(){var i=s._input.getRootView().refs.holder.el;s._input.popup.getContainer().style.width=i.offsetWidth+"px",s._input.popup.show(i)}),f.focusManager.setFocusId(this._input._uid),(0,E.inject)(this._input.getRootView())},u.prototype._initHandlers=function(){var s=this;this._handlers={onOuterClick:function(l){if(l.target instanceof Node){var r=s._input&&s._input.getRootNode()&&s._input.getRootNode().contains(l.target),a=s._input.popup&&s._input.popup.getRootNode()&&s._input.popup.getRootNode().contains(l.target);r||a||s.endEdit()}},onkeydown:function(l){l.key!=="Escape"&&l.key!=="Tab"||s.endEdit()}}},u}();_.ComboboxEditor=p},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.KEY_CODES=void 0,_.KEY_CODES={BACKSPACE:8,ENTER:13,ESC:27,DOWN_ARROW:40,UP_ARROW:38,LEFT_ARROW:37,RIGHT_ARROW:39}},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.getEditor=void 0;var b=y(158);_.getEditor=function(E,m){return new b.InputEditor(E,m)}},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.InputEditor=void 0;var b=y(0),E=y(52),m=function(){function v(f,d){var p=this;this._list=d,this._config=d.config,this._item=f,this._list.events.on(E.ListEvents.focusChange,function(u,s){p._mode&&s!==p._item.id&&p.endEdit()}),this._initHandlers()}return v.prototype.endEdit=function(){if(this._input){var f=this._input.value;this._list.events.fire(E.ListEvents.beforeEditEnd,[f,this._item.id])?(this._input.removeEventListener("blur",this._handlers.onBlur),this._input.removeEventListener("change",this._handlers.onChange),this._input.removeEventListener("keydown",this._handlers.onKeyDown),this._handlers={},this._mode=!1,this._list.events.fire(E.ListEvents.afterEditEnd,[f,this._item.id])):this._input.focus()}},v.prototype.toHTML=function(){this._mode=!0;var f=this._config.itemHeight;return(0,b.el)(".dhx_input__wrapper",{role:"presentation"},[(0,b.el)("div.dhx_input__container",{role:"presentation"},[(0,b.el)("input.dhx_input",{class:this._item.css?" "+this._item.css:"",style:{height:f,width:"100%",padding:"8px 12px"},_hooks:{didInsert:this._handlers.didInsert},_key:this._item.id,"data-dhx-id":this._item.id})])])},v.prototype._initHandlers=function(){var f=this;this._handlers={onBlur:function(){f.endEdit()},onChange:function(){f.endEdit()},onKeyDown:function(d){d.key==="Enter"&&f._item.value===f._input.value&&f.endEdit(),d.key==="Escape"&&(f._input.value=f._item.value,f.endEdit())},didInsert:function(d){var p=d.el;f._input=p,p.focus(),p.value=f._item.value,p.setSelectionRange(0,p.value.length),p.addEventListener("change",f._handlers.onChange),p.addEventListener("blur",f._handlers.onBlur),p.addEventListener("keydown",f._handlers.onKeyDown)}}},v}();_.InputEditor=m},function(W,_,y){var b,E=this&&this.__extends||(b=function(u,s){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,r){l.__proto__=r}||function(l,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(l[a]=r[a])},b(u,s)},function(u,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function l(){this.constructor=u}b(u,s),u.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}),m=this&&this.__assign||function(){return m=Object.assign||function(u){for(var s,l=1,r=arguments.length;l<r;l++)for(var a in s=arguments[l])Object.prototype.hasOwnProperty.call(s,a)&&(u[a]=s[a]);return u},m.apply(this,arguments)},v=this&&this.__spreadArray||function(u,s,l){if(l||arguments.length===2)for(var r,a=0,i=s.length;a<i;a++)!r&&a in s||(r||(r=Array.prototype.slice.call(s,0,a)),r[a]=s[a]);return u.concat(r||Array.prototype.slice.call(s))};Object.defineProperty(_,"__esModule",{value:!0}),_.ProList=void 0;var f=y(0),d=y(34),p=function(u){function s(l,r){var a=u.call(this,l,r)||this;return a.scrollView=new d.ScrollView(function(){return a.getRootView()}),a.paint(),a}return E(s,u),s.prototype.destructor=function(){u.prototype.destructor.call(this),this.scrollView=null},s.prototype.scrollTo=function(l){var r,a,i=this.getRootView();if(i&&i.node&&i.node.el&&l!==void 0){var n=!((r=this.scrollView)===null||r===void 0)&&r.config.enable?(a=this.getRootNode())===null||a===void 0?void 0:a.querySelector(".scroll-view"):this.getRootNode();this._scrollTo(l,n)}},s.prototype._renderList=function(){var l=this,r=this._getRange(),a=this.data.getRawData(r[0],r[1]).map(function(e,t){return l._renderItem(e,t)});this.config.virtual&&(a=v(v([(0,f.el)(".div",{style:{height:r[2]+"px"}})],a,!0),[(0,f.el)(".div",{style:{height:r[3]+"px"}})],!1));var i=this.scrollView&&this.scrollView.config.enable,n=(this.config.css?this.config.css:"")+(this.config.multiselection&&this.selection.getItem()?" dhx_no-select--pointer":"")+(i?" dhx_list--scroll-view":"");return(0,f.el)("ul.dhx_widget.dhx_list",m(m({style:{"max-height":this.config.height,position:"relative"},class:n,"data-dhx-widget-id":this._uid},this._handlers),this._getListAriaAttrs(this.config,this.data.getLength())),i?[].concat(this.scrollView.render(a)):a)},s}(y(82).List);_.ProList=p},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.KeyListener=void 0;var b=function(){function E(){var m=this;this._handler=function(v){if(m._isActive){var f=v.key;f==="Backspace"&&m._sequence.length>0&&(m._sequence=m._sequence.slice(0,m._sequence.length-1),m._change()),f.length<2&&(m._sequence+=f,m._change())}},this._sequence="",document.addEventListener("keydown",this._handler)}return E.prototype.startNewListen=function(m){this._isActive=!0,this._sequence="",this._currentAction=m},E.prototype.endListen=function(){this._currentAction=null,this.reset(),this._isActive=!1},E.prototype.reset=function(){this._sequence=""},E.prototype.destructor=function(){document.removeEventListener("keydown",this._handler)},E.prototype._change=function(){this._currentAction(this._sequence),this._addClearTimeout()},E.prototype._addClearTimeout=function(){var m=this;this._clearTimeout&&clearTimeout(this._clearTimeout),this._clearTimeout=setTimeout(function(){m.reset(),m._clearTimeout=null},2e3)},E}();_.KeyListener=b},function(W,_,y){var b,E=this&&this.__extends||(b=function(u,s){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,r){l.__proto__=r}||function(l,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(l[a]=r[a])},b(u,s)},function(u,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function l(){this.constructor=u}b(u,s),u.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.ProCombobox=void 0;var m=y(80),v=y(81),f=y(16),d=y(85),p=function(u){function s(l,r){return u.call(this,l,r)||this}return E(s,u),s.prototype._createLayout=function(){var l=this.list=new v.ProList(null,{$template:m.$template,template:this.config.template,htmlEnable:this.config.htmlEnable,virtual:this.config.virtual,keyNavigation:!0,multiselection:this.config.multiselection,itemHeight:this.config.itemHeight,height:this.config.listHeight,data:this.data}),r=this._layout=new f.ProLayout(this.popup.getContainer(),{css:"dhx_combobox-options dhx_combobox__options",rows:[{id:"select-unselect-all",hidden:!this.config.multiselection||!this.config.selectAllButton},{id:"list",height:"content"},{id:"not-found",hidden:!0}],on:{click:{".dhx_combobox__action-select-all":this._handlers.selectAll,".dhx_combobox-options__action-create-option":this._handlers.addOption}}});r.getCell("list").attach(l),this.config.multiselection&&this.config.selectAllButton&&r.getCell("select-unselect-all").attach(d.selectAllView)},s}(m.Combobox);_.ProCombobox=p},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(p){for(var u,s=1,l=arguments.length;s<l;s++)for(var r in u=arguments[s])Object.prototype.hasOwnProperty.call(u,r)&&(p[r]=u[r]);return p},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.TextAreaEditor=void 0;var E=y(0),m=y(7),v=y(1),f=y(18),d=function(){function p(u,s,l){this._config=l,this._cell={row:u,col:s},this.type=this._cell.col.type,this._width=this._cell.col.$width;var r=0;this._config.firstColId===this._cell.col.id&&this._cell.row.hasOwnProperty("$level")&&(r=(0,f.getTreeCellWidthOffset)(this._cell.row)),this._width-=r-4,this._initHandlers()}return p.prototype.endEdit=function(u){var s;this._config.$editable&&(u||(s=this._editor.value,this.type==="number"&&(s=parseFloat(s),Number.isNaN(s)&&(s=""))),this._config.events.fire(m.GridEvents.beforeEditEnd,[s,this._cell.row,this._cell.col])?(this._cell.row=this._config.datacollection.getItem(this._cell.row.id),this._config.$editable=null,this._config.events.fire(m.GridEvents.afterEditEnd,[s,this._cell.row,this._cell.col])):this._editor.focus())},p.prototype.toHTML=function(u){(0,v.isDefined)(u)&&(this.type="string"),u=u??this._cell.row[this._cell.col.id],this._editor&&(u=this._editor.value),this._config.$editable.editor=this;var s=this._cell.row.height!==void 0||this._cell.col.htmlEnable?"dhx_cell-editor dhx_cell-editor__textarea_constant-height":"dhx_cell-editor dhx_cell-editor__textarea";return(0,E.el)("textarea",{_hooks:{didInsert:this._handlers.didInsert},_ref:"textarea",_key:"cell_editor","data-dhx-id":"cell_editor",value:u,onblur:this._handlers.onBlur,oninput:this._handlers.onInput,class:s,style:{width:this._width}})},p.prototype._initHandlers=function(){var u=this;this._handlers={onBlur:function(){u.endEdit()},onInput:function(s){var l;if(u._cell.row.height===void 0&&!u._cell.col.htmlEnable){var r=u._getCurrentHeight(u._editor.value,{width:u._cell.col.$width-2,maxHeight:u._config.rowHeight});u._cell.row[u._cell.col.id]=u._editor.value;var a=(0,f.getCalculatedRowHeight)((0,f.getMaxRowHeight)(u._cell.row,u._config.columns)),i=(0,f.getCalculatedRowHeight)((0,f.getMaxRowHeight)(((l={})[u._cell.col.id]=u._cell.row[u._cell.col.id],l),u._config.columns));if(u._minHeight=a===i?u._config.rowHeight:a,r>=u._minHeight&&r!==u._prevHeight){if(!u._config.events.fire(m.GridEvents.beforeRowResize,[u._cell.row,s,r]))return;u._config.events.fire(m.GridEvents.afterRowResize,[u._cell.row,s,r])}u._prevHeight=r}},didInsert:function(s){u._editor=s.el,u._editor.focus()}}},p.prototype._getCurrentHeight=function(u,s){s=b({width:100,maxHeight:40,lineHeight:20},s);var l=document.createElement("textarea");l.className="dhx_cell-editor dhx_cell-editor__textarea",l.value=u,l.style.width="".concat(s.width,"px"),l.style.lineHeight="".concat(s.lineHeight,"px"),l.style.maxHeight="".concat(s.maxHeight,"px"),l.style.boxSizing="border-box",document.body.appendChild(l);var r=this._getElementHeight(l),a=l.value.split(`
`).length,i=Math.round(r/s.lineHeight),n=r<s.maxHeight?s.maxHeight:r;return document.body.removeChild(l),a===1&&a===i?s.maxHeight:n},p.prototype._getElementHeight=function(u){return u.scrollHeight},p}();_.TextAreaEditor=d},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.getContent=void 0;var b=y(0),E=y(18),m=y(1),v=y(164),f=y(165),d=y(166);function p(s,l){var r=l[s.id];if(s.editorType==="combobox")parseFloat((0,E.getEditorValue)(r,(0,E.getEditorOptions)(s,l)));else if(s.editorType==="multiselect")return NaN;return parseFloat(r)}function u(s,l,r,a){if(s&&l&&r){var i=a?a(s.id,l.data):l.data.reduce(function(e,t){var o=p(s,t);return isNaN(o)||e.push(o),e},[]),n=i;return l.type==="tree"&&(n=l.data.reduce(function(e,t){if(t.$level===0){var o=p(s,t);if(isNaN(o)){var c=0;l.datacollection.eachChild(t.id,function(h){if(!l.datacollection.haveItems(h.id)){var g=p(s,h);isNaN(g)||(c+=g)}}),e.push(c)}else e.push(o)}return e},[])),r(i,n)}}_.getContent=function(){return{inputFilter:{element:{},toHtml:function(s,l){var r=this,a=(0,m.uid)(),i=s.id.toString(),n=this.element[i];return n?n.value=this.value[i]:((n=new d.InputFilter(s,l,a,this.value[i])).events.on("change",function(e){r.value[i]=e}),this.element[i]=n),n.toHTML()},match:function(s){var l=s.val,r=s.match,a=s.col;if(!(0,m.isDefined)(l))return!1;var i=[];i.push((0,E.toFormat)(l,a.type,a.format)),a.format&&(e=a.format.lastIndexOf("#"))>0&&i.push((0,E.toFormat)(l,a.type,a.format.slice(e)));for(var n="",e=0;e<r.length;e++){var t=r.charCodeAt(e);n+=t>32&&t<48||t===63||t>90&&t<95||t===124?"\\"+r[e]:r[e]}return i.some(function(o){return new RegExp("".concat(n),"i").test(o)})},value:{}},selectFilter:{element:{},toHtml:function(s,l){var r=this,a=s.id.toString(),i=this.element[a];return i?(i.value=this.value[a],i.data=s.$activeFilterData||s.$uniqueData):((i=new f.SelectFilter(s,l,s.$uniqueData,this.value[a])).events.on("change",function(n){r.value[a]=n}),this.element[a]=i),i.toHTML()},match:function(s){var l=s.val,r=s.match,a=s.col,i=(0,E.toFormat)(l,a.type,a.format);return!r||(i||typeof i=="boolean")&&i.toString()==r},value:{}},comboFilter:{element:{},toHtml:function(s,l){var r=this,a=s.id.toString(),i=this.element[a];if(i)i.data=s.$uniqueData;else{var n=s.header.filter(function(e){return e.filterConfig!==void 0})[0];(i=new v.ComboFilter(s,l,s.$uniqueData,this.value[a],n)).events.on("change",function(e){r.value[a]=e}),this.element[a]=i}return(0,b.inject)(i.getFilter().getRootView())},match:function(s){var l=s.val,r=s.match,a=r===void 0?"":r,i=s.multi,n=i!==void 0&&i,e=s.col,t=(0,E.toFormat)(l,e.type,e.format);if(Array.isArray(a)){for(var o=void 0,c=function(g){if(o=n&&typeof t=="string"?t.split(", ").some(function(x){return x===a[g]}):a[g]===t)return"break"},h=0;h<a.length&&c(h)!=="break";h++);return!a||!a.length||o}return a===void 0||t===a},destroy:function(){this.value={};var s=this.element;for(var l in s)s[l].destructor(),delete s[l]},value:{}},sum:{calculate:function(s,l){return s.length?l.reduce(function(r,a){var i=r+parseFloat(a)||0;return parseFloat(i.toFixed(12))},0):null},toHtml:function(s,l){var r=u(s,l,this.calculate);return s.format||s.type==="percent"?(0,E.toFormat)(r,s.type,s.format):(0,m.isDefined)(r)?r:null}},avg:{calculate:function(s,l){return s.length?l.reduce(function(r,a){return r+a},0)/s.length:null},toHtml:function(s,l){var r=u(s,l,this.calculate);return s.format||s.type==="percent"?(0,E.toFormat)(r,s.type,s.format):(0,m.isDefined)(r)?r.toFixed(3):null}},min:{calculate:function(s){return s.length?Math.min.apply(Math,s):null},toHtml:function(s,l){var r=u(s,l,this.calculate);return s.format||s.type==="percent"||s.type==="number"?(0,E.toFormat)(r,s.type,s.format):(0,m.isDefined)(r)?r.toFixed(3):null}},max:{calculate:function(s){return s.length?Math.max.apply(Math,s):null},toHtml:function(s,l){var r=u(s,l,this.calculate);return s.format||s.type==="percent"||s.type==="number"?(0,E.toFormat)(r,s.type,s.format):(0,m.isDefined)(r)?r.toFixed(3):null}},count:{calculate:function(s,l){return l.length},validate:function(s,l){return l.reduce(function(r,a){return(0,m.isDefined)(a[s])&&a[s]!==""&&(isNaN(a)?r.push(1):r.push(a)),r},[])},toHtml:function(s,l){return u(s,l,this.calculate,this.validate)}}}}},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.ComboFilter=void 0;var b=y(51),E=y(3),m=y(8),v=y(1),f=y(7),d=function(){function p(u,s,l,r,a){var i;this.events=new E.EventSystem,this._silentMode=!1,this.column=u,this.config=s,this.data=l,this.value=r,this.filterConfig=(a==null?void 0:a.filterConfig)||{},(this.column.htmlEnable||!((i=this.config)===null||i===void 0)&&i.htmlEnable&&this.column.htmlEnable!==!1)&&(this.filterConfig.readonly=!0,this.filterConfig.template||(this.filterConfig.template=function(n){return n.value})),this.filterConfig.filter||(this.filterConfig.filter=function(n,e){return(0,v.isExistValue)(n.value,e)}),this.initFilter(),this.config&&this.initHandlers()}return p.prototype.initFilter=function(){this._filter=new b.Combobox(null,Object.assign({},this.filterConfig)),this.data&&this._filter.data&&this._setData()},p.prototype.initHandlers=function(){var u,s,l,r=this,a=this.column.id.toString();this.config.events.on(m.DataEvents.load,function(){return r._setData()},this),this._filter.events.on("change",function(i){var n,e;i&&(Array.isArray(i)?i.find(function(t){return r._filter.data.getItem(t)}):r._filter.data.getItem(i))&&(e=r._filter.config.multiselection?r._filter.list.selection.getItem().map(function(t){if(t&&r._filter.data.getItem(t.id))return t.value}):r._filter.list.selection.getItem().value),r.value=e,(n=r.config.events)===null||n===void 0||n.fire(f.GridEvents.filterChange,[r.value,a,"comboFilter",r._silentMode]),r._silentMode&&r.value===void 0&&(r._silentMode=!1)}),this.config.events.on(f.GridEvents.filterChange,function(i){return r.events.fire(f.HeaderFilterEvent.change,[i])},this),this._filter.popup.events.on("afterHide",function(){r.filterConfig.multiselection||r._filter.list.selection.getItem()||r.clear()}),this._filter.popup.events.on("afterShow",function(){!r.filterConfig.multiselection&&(r.value===""||r.filterConfig.readonly&&r.value!==void 0)&&r.clear()}),(u=this.config.events)===null||u===void 0||u.on(f.GridEvents.scroll,function(){var i;r._isFocused&&(!((i=r._filter.getRootView().refs)===null||i===void 0)&&i.input)&&r._filter.focus()},this),(s=this.config.events)===null||s===void 0||s.on(f.GridEvents.headerCellMouseDown,function(i){i.id!==r.column.id&&r.blur()},this),(l=this.config.events)===null||l===void 0||l.on(f.GridEvents.cellMouseDown,function(){return r.blur()},this),this.config.events.on(m.DataEvents.change,function(i,n){r.column.hidden||n!=="add"&&n!=="update"&&n!=="remove"||(n!=="add"&&r._checkValue(),r._setData(!0))},this),this.config.events.on(m.DataEvents.removeAll,function(){r.clear(!0),r._setData()},this),this.config.events.on(f.GridEvents.afterRowShow,function(){return r._setData(!0)},this),this.config.events.on(f.GridEvents.afterRowHide,function(){r.column.hidden||(r._checkValue(),r._setData(!0))},this),this.config.events.on(m.DataEvents.filter,function(i){r.column.hidden||(!i||(0,m.isOnlyPermanentFilters)(i)?r.clear(!0):r._checkValue(),r.filterConfig.multiselection&&r._filter.popup.isVisible()||r._setData(!0))},this),this.config.events.on(f.GridEvents.afterColumnShow,function(){r.filterConfig.multiselection||(r._checkValue(),r._setData())},this),this.config.events.on(f.GridEvents.afterColumnHide,function(){r.filterConfig.multiselection||r._setData()},this)},p.prototype.getFilter=function(){return this._filter},p.prototype.setValue=function(u,s){var l,r,a=this;if(this.filterConfig.multiselection||!Array.isArray(u))if((0,v.isDefined)(u)){if(u!=null&&u.length||u===""){var i=this.filterConfig.multiselection&&Array.isArray(u)?u.map(function(n){var e;return(e=a._filter.data.find(function(t){return t.value===n}))===null||e===void 0?void 0:e.id}):(r=this._filter.data.find(function(n){return n.value===u}))===null||r===void 0?void 0:r.id;this._filter.setValue(i,s)}}else s&&(this._silentMode=!0),this._filter.clear(),this.filterConfig.multiselection||this.value===void 0||(this.value=void 0,(l=this.config.events)===null||l===void 0||l.fire(f.GridEvents.filterChange,[this.value,this.column.id,"comboFilter"]))},p.prototype.clear=function(u){this.value!==void 0&&this.setValue(null,u)},p.prototype.focus=function(){var u;this._isFocused=!0,!((u=this._filter.getRootView().refs)===null||u===void 0)&&u.input&&this._filter.focus()},p.prototype.blur=function(){var u;this._isFocused=!1,!((u=this._filter.getRootView().refs)===null||u===void 0)&&u.input&&this._filter.blur()},p.prototype.destructor=function(){var u=this.config.events;if(u)for(var s in u.events)this.config.events.detach(s,this);this.events.clear(),this._filter&&this._filter.destructor(),this.config=this.filterConfig=this.data=this.column=this.value=this.events=null},p.prototype._setData=function(u){var s=this;u===void 0&&(u=!1);var l=function(){var r=s.column.$activeFilterData||s.column.$uniqueData;if(s.column.header.some(function(n){var e;return(e=n.filterConfig)===null||e===void 0?void 0:e.filter})){var a=s._filter.data.reduce(function(n,e){return n[e.value]=e.id,n},{}),i=r.map(function(n){return a[n]?{id:a[n],value:n}:{value:n}});s._filter.data.parse(i)}else s._filter.data.parse(r.map(function(n){return{value:n}}))};this.value===void 0?l():u&&this.filterConfig.multiselection&&(l(),this.setValue(this.value,!0))},p.prototype._checkValue=function(){if(this.value!==void 0)for(var u=Array.isArray(this.value)?this.value:[this.value],s=function(i){if(l.column.$uniqueData.includes(i))return"continue";if(u.length>1){var n=l._filter.data.find(function(e){return e.value===i});l._filter.list.selection.remove(n.id)}else l.clear();return"break"},l=this,r=0,a=u;r<a.length&&s(a[r])!=="break";r++);},p}();_.ComboFilter=d},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.SelectFilter=void 0;var b=y(0),E=y(3),m=y(7),v=function(){function f(d,p,u,s){this.events=new E.EventSystem,this.column=d,this.config=p,this.data=u,this.value=s||"",this.initHandlers(),this.toHTML()}return f.prototype.toHTML=function(){var d,p=this;return(0,b.el)("label.dhx_grid-filter__label.dxi.dxi-menu-down",{_ref:"".concat(this.column.id,"_filter")},[(0,b.el)("select.dxi.dxi-menu-down",{type:"text",class:"dhx_input dhx_grid-filter dhx_grid-filter--select",onchange:this._handlers.onchange,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,_key:this.column.id},[(0,b.el)("option",{value:"",_key:0},""),(d=this.value?[this.value]:this.data)===null||d===void 0?void 0:d.map(function(u){return(u=u??"")!==""&&(0,b.el)("option",{_key:u,value:u,selected:p.value===u.toString()},u)})])])},f.prototype.getFilter=function(){return this.toHTML()},f.prototype.setValue=function(d,p){var u;this.value=d||"",this.events.fire(m.HeaderFilterEvent.change,[d]),(u=this.config.events)===null||u===void 0||u.fire(m.GridEvents.filterChange,[this.value,this.column.id,"selectFilter",p])},f.prototype.clear=function(d){this.setValue("",d)},f.prototype.focus=function(){var d,p,u,s;this._isFocused=!0;var l=(s=(u=(p=(d=this.config.events)===null||d===void 0?void 0:d.context)===null||p===void 0?void 0:p.getRootView())===null||u===void 0?void 0:u.refs["".concat(this.column.id,"_filter")])===null||s===void 0?void 0:s.el;l&&l.focus()},f.prototype.blur=function(){var d,p,u,s;this._isFocused=!1;var l=(s=(u=(p=(d=this.config.events)===null||d===void 0?void 0:d.context)===null||p===void 0?void 0:p.getRootView())===null||u===void 0?void 0:u.refs["".concat(this.column.id,"_filter")])===null||s===void 0?void 0:s.el;l&&l.blur()},f.prototype.initHandlers=function(){var d,p,u,s=this;this._handlers={onchange:function(l){var r,a,i,n,e=((r=l.target)===null||r===void 0?void 0:r.value)||((i=(a=l.composedPath())===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.value)||((n=l.explicitOriginalTarget)===null||n===void 0?void 0:n.value);s.setValue(e)},onfocus:function(){s._isFocused=!0},onblur:function(){s._isFocused=!1}},(d=this.config.events)===null||d===void 0||d.on(m.GridEvents.scroll,function(){var l,r,a,i,n=(i=(a=(r=(l=s.config.events)===null||l===void 0?void 0:l.context)===null||r===void 0?void 0:r.getRootView())===null||a===void 0?void 0:a.refs["".concat(s.column.id,"_filter")])===null||i===void 0?void 0:i.el;s._isFocused&&n&&(0,b.awaitRedraw)().then(function(){n.focus()})}),(p=this.config.events)===null||p===void 0||p.on(m.GridEvents.headerCellMouseDown,function(l){l.id!==s.column.id&&s.blur()}),(u=this.config.events)===null||u===void 0||u.on(m.GridEvents.cellMouseDown,function(){return s.blur()})},f}();_.SelectFilter=v},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.InputFilter=void 0;var b=y(0),E=y(3),m=y(7),v=function(){function f(d,p,u,s){this.events=new E.EventSystem,this.column=d,this.config=p,this.id=u,this.value=s||"",this.initHandlers(),this.toHTML()}return f.prototype.toHTML=function(){return(0,b.el)("div.dhx_grid-filter__label.dxi.dxi-magnify",{"aria-label":"Type to search",_ref:"".concat(this.column.id,"_filter")},[(0,b.el)("label",{style:{display:"none"},"aria-label":"Type to search",for:this.id},"Type to search"),(0,b.el)("input",{type:"text",class:"dhx_input dhx_grid-filter",oninput:this._handlers.onchange,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,_key:this.column.id,id:this.id,value:this.value})])},f.prototype.getFilter=function(){return this.toHTML()},f.prototype.setValue=function(d,p){var u;this.value=d||"",this.events.fire(m.HeaderFilterEvent.change,[this.value]),(u=this.config.events)===null||u===void 0||u.fire(m.GridEvents.filterChange,[this.value,this.column.id,"inputFilter",p])},f.prototype.clear=function(d){this.setValue("",d)},f.prototype.focus=function(){var d,p,u,s,l;this._isFocused=!0;var r=(s=(u=(p=(d=this.config.events)===null||d===void 0?void 0:d.context)===null||p===void 0?void 0:p.getRootView())===null||u===void 0?void 0:u.refs["".concat(this.column.id,"_filter")])===null||s===void 0?void 0:s.el;r&&((l=r.querySelector("input"))===null||l===void 0||l.focus())},f.prototype.blur=function(){var d,p,u,s,l;this._isFocused=!1;var r=(s=(u=(p=(d=this.config.events)===null||d===void 0?void 0:d.context)===null||p===void 0?void 0:p.getRootView())===null||u===void 0?void 0:u.refs["".concat(this.column.id,"_filter")])===null||s===void 0?void 0:s.el;r&&((l=r.querySelector("input"))===null||l===void 0||l.blur())},f.prototype.initHandlers=function(){var d,p,u,s=this;this._handlers={onchange:function(l){var r,a,i,n,e=((r=l.target)===null||r===void 0?void 0:r.value)||((i=(a=l.composedPath())===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.value)||((n=l.explicitOriginalTarget)===null||n===void 0?void 0:n.value);s._inputDelay&&clearTimeout(s._inputDelay),s._inputDelay=setTimeout(function(){return s.setValue(e)},500)},onfocus:function(){s._isFocused=!0},onblur:function(){s._isFocused=!1}},(d=this.config.events)===null||d===void 0||d.on(m.GridEvents.scroll,function(){var l,r,a,i,n=(i=(a=(r=(l=s.config.events)===null||l===void 0?void 0:l.context)===null||r===void 0?void 0:r.getRootView())===null||a===void 0?void 0:a.refs["".concat(s.column.id,"_filter")])===null||i===void 0?void 0:i.el;s._isFocused&&n&&(0,b.awaitRedraw)().then(function(){var e;(e=n.querySelector("input"))===null||e===void 0||e.focus()})}),(p=this.config.events)===null||p===void 0||p.on(m.GridEvents.headerCellMouseDown,function(l){l.id!==s.column.id&&s.blur()}),(u=this.config.events)===null||u===void 0||u.on(m.GridEvents.cellMouseDown,function(){return s.blur()})},f}();_.InputFilter=v},function(W,_,y){var b=this&&this.__spreadArray||function(f,d,p){if(p||arguments.length===2)for(var u,s=0,l=d.length;s<l;s++)!u&&s in d||(u||(u=Array.prototype.slice.call(d,0,s)),u[s]=d[s]);return f.concat(u||Array.prototype.slice.call(d))};Object.defineProperty(_,"__esModule",{value:!0}),_.startResize=void 0;var E=y(1),m=y(7),v=y(25);_.startResize=function(f,d,p,u){var s,l=f.config.rightSplit;p.targetTouches&&p.preventDefault();var r=p.targetTouches?p.targetTouches[0].clientX:p.clientX,a=f.config.columns.filter(function(h){return!h.hidden}),i=l?a.slice(-l).map(function(h){return h.id}):[],n=!!(!((s=f.scrollView)===null||s===void 0)&&s.config.enable),e=l?(0,v.calcScrollBarWidth)(f.config,n).xState:null,t=0;f.config.$resizing=d;var o=function(h){var g=(0,E.findIndex)(a,function($){return $.id===d}),x=h.targetTouches?h.targetTouches[0].clientX:h.clientX,C=x-f.getRootNode().getBoundingClientRect().left,k=(0,v.calcScrollBarWidth)(f.config,n);if(!(f.config.leftSplit===g+1&&C>=f.config.$width-k.y-2||l&&i.includes(d)&&k.xState!==e)){t=t||a[g].$width;var I,O=a[g].minWidth||40,D=a[g].maxWidth,A=x-r,H=b([],a,!0),S=t+(e&&i.includes(d)?-A:A);D&&S>=D||S<=O?(S<=O&&(I=O),S>=D&&(I=D)):I=S,H[g].$width=I,H[g].$fixed=!0,f.events.fire(m.GridEvents.resize,[a[g],h]),f.paint()}},c=function(){p.targetTouches?(document.removeEventListener("touchmove",o),document.removeEventListener("touchend",c)):(document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",c)),u()};p.targetTouches?(document.addEventListener("touchmove",o),document.addEventListener("touchend",c)):(document.addEventListener("mousemove",o),document.addEventListener("mouseup",c)),f.paint()}},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(p){for(var u,s=1,l=arguments.length;s<l;s++)for(var r in u=arguments[s])Object.prototype.hasOwnProperty.call(u,r)&&(p[r]=u[r]);return p},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.getKeysHandlers=_.selectionMove=void 0;var E=y(7),m=y(2),v=y(26);function f(p,u,s,l,r,a,i){if(r===void 0&&(r=!1),a===void 0&&(a=!1),i===void 0&&(i=!1),!u.config.$editable&&u.config.selection&&!(0,m.locateNodeByClassName)(p,"dhx_grid-header-cell")){p&&p.preventDefault();var n=u.selection.getCell(),e=u.config.columns.filter(function(c){return!c.hidden});if(n)if(s==="vertical")if(r){var t=l===1?u.data.getItem(u.data.getId(u.data.getLength()-1)):u.data.getItem(u.data.getId(0));u.selection.setCell(t.id,n.column.id,a,i),u.scrollTo(t.id.toString(),n.column.id.toString())}else(o=u.data.getIndex(n.row.id.toString()))+l>=0&&o+l<u.data.getLength()&&(t=u.data.getItem(u.data.getId(o+l)),u.selection.setCell(t.id,n.column.id,a,i),u.scrollTo(t.id.toString(),n.column.id.toString()));else if(r)t=l===1?e[e.length-1]:e[0],u.selection.setCell(n.row.id,t.id,a,i),u.scrollTo(n.row.id.toString(),t.id.toString());else{var o;(o=e.indexOf(n.column))+l>=0&&o+l<e.length&&(u.selection.setCell(n.row.id,e[o+l].id,a,i),u.scrollTo(n.row.id.toString(),e[o+l].id.toString()))}}}function d(p,u){var s,l,r=p.selection.getCell(),a=r&&p.getSpan(r.row.id,r.column.id);if(a){if(u==="up"||u==="down"){var i=(s=p.config.data)===null||s===void 0?void 0:s.findIndex(function(t){return t.id===a.row}),n=(l=p.config.data)===null||l===void 0?void 0:l.findIndex(function(t){return t.id===r.row.id});return u==="up"?i-n-1:i+(a.rowspan||1)-n}var e=p.config.columns.filter(function(t){return!t.hidden});return i=e.findIndex(function(t){return t.id===a.column}),n=e.findIndex(function(t){return t.id===r.column.id}),u==="left"?i-n-1:i+(a.colspan||1)-n}return u==="down"||u==="right"?1:-1}_.selectionMove=f,_.getKeysHandlers=function(p){var u,s,l,r=p.config.selection==="cell"||p.config.selection==="complex"||p.config.selection===!0,a={};if(p.getRootView()){var i=(l=(s=(u=p.getRootView())===null||u===void 0?void 0:u.refs)===null||s===void 0?void 0:s.grid_body)===null||l===void 0?void 0:l.el;if(!i)return;a={pageUp:function(n){n.preventDefault(),i.scrollTop-=i.clientHeight},pageDown:function(n){n.preventDefault(),i.scrollTop+=i.clientHeight},home:function(n){n.preventDefault(),i.scrollTop=0},end:function(n){n.preventDefault(),i.scrollTop+=i.scrollHeight}}}return b({enter:function(){if(r){var n=(0,v.normalizeCell)(p.selection.getCell(),p);if(n&&(n.column.editable!==!1&&p.config.editable||n.column.editable))if(p.config.$editable)p.editEnd();else if(n.column.type==="boolean"){if(!p.events.fire(E.GridEvents.beforeEditStart,[n.row,n.column,"checkbox"])||(p.events.fire(E.GridEvents.afterEditStart,[n.row,n.column,"checkbox"]),!p.events.fire(E.GridEvents.beforeEditEnd,[!n.row[n.column.id],n.row,n.column])))return;p.events.fire(E.GridEvents.afterEditEnd,[!n.row[n.column.id],n.row,n.column])}else p.editCell(n.row.id,n.column.id,n.column.editorType)}else p.config.$editable&&p.editEnd()},space:function(n){var e,t=(0,v.normalizeCell)(p.selection.getCell(),p);if(r&&((e=t==null?void 0:t.column.editable)!==null&&e!==void 0?e:p.config.editable)&&!p.config.$editable&&t&&t.column.type==="boolean"){if(n.preventDefault(),!p.events.fire(E.GridEvents.beforeEditStart,[t.row,t.column,"checkbox"])||(p.events.fire(E.GridEvents.afterEditStart,[t.row,t.column,"checkbox"]),!p.events.fire(E.GridEvents.beforeEditEnd,[!t.row[t.column.id],t.row,t.column])))return;p.events.fire(E.GridEvents.afterEditEnd,[!t.row[t.column.id],t.row,t.column])}},escape:function(){p.config.$editable&&p.editEnd(!0)},tab:function(n){if(p.config.selection&&!(0,m.locateNodeByClassName)(n,"dhx_grid-header-cell")){p.config.$editable&&p.editEnd();var e=p.selection.getCell(),t=p.config.columns.filter(function(h){return!h.hidden});if(e){var o=t.indexOf(e.column)+d(p,"right");if(o>=0&&o<t.length)n&&n.preventDefault(),p.selection.setCell(e.row.id,t[o].id),p.scrollTo(e.row.id.toString(),t[o].id.toString());else if(o>=0){var c=p.data.getIndex(e.row.id.toString())+1;c<p.data.getLength()&&(n&&n.preventDefault(),p.selection.setCell(p.data.getId(c),t[0].id),p.scrollTo(p.data.getId(c).toString(),t[0].id.toString()))}}}},"shift+tab":function(n){if(p.config.selection&&!(0,m.locateNodeByClassName)(n,"dhx_grid-header-cell")){p.config.$editable&&p.editEnd();var e=p.selection.getCell(),t=p.config.columns.filter(function(h){return!h.hidden});if(e){var o=t.indexOf(e.column)+d(p,"left");if(o>=0&&o<t.length)n&&n.preventDefault(),p.selection.setCell(e.row.id,t[o].id),p.scrollTo(e.row.id.toString(),t[o].id.toString());else if(o<p.data.getLength()){var c=p.data.getIndex(e.row.id.toString())-1;c>=0&&(n&&n.preventDefault(),p.selection.setCell(p.data.getId(c),t[t.length-1].id),p.scrollTo(p.data.getId(c).toString(),t[t.length-1].id.toString()))}}}},arrowUp:function(n){f(n,p,"vertical",d(p,"up"))},"ctrl+arrowUp":function(n){f(n,p,"vertical",-1,!0)},"shift+arrowUp":function(n){p.config.multiselection&&f(n,p,"vertical",-1,!1,!1,!0)},"ctrl+shift+arrowUp":function(n){p.config.multiselection&&f(n,p,"vertical",-1,!0,!1,!0)},arrowDown:function(n){f(n,p,"vertical",d(p,"down"))},"ctrl+arrowDown":function(n){f(n,p,"vertical",1,!0)},"shift+arrowDown":function(n){p.config.multiselection&&f(n,p,"vertical",1,!1,!1,!0)},"ctrl+shift+arrowDown":function(n){p.config.multiselection&&f(n,p,"vertical",1,!0,!1,!0)},arrowRight:function(n){f(n,p,"horizontal",d(p,"right"))},"ctrl+arrowRight":function(n){f(n,p,"horizontal",1,!0)},"shift+arrowRight":function(n){p.config.multiselection&&f(n,p,"horizontal",1,!1,!1,!0)},"ctrl+shift+arrowRight":function(n){p.config.multiselection&&f(n,p,"horizontal",1,!0,!1,!0)},arrowLeft:function(n){f(n,p,"horizontal",d(p,"left"))},"ctrl+arrowLeft":function(n){f(n,p,"horizontal",-1,!0)},"shift+arrowLeft":function(n){p.config.multiselection&&f(n,p,"horizontal",-1,!1,!1,!0)},"ctrl+shift+arrowLeft":function(n){p.config.multiselection&&f(n,p,"horizontal",-1,!0,!1,!0)}},a)}},function(W,_,y){var b,E=this&&this.__extends||(b=function(e,t){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,c){o.__proto__=c}||function(o,c){for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(o[h]=c[h])},b(e,t)},function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}b(e,t),e.prototype=t===null?Object.create(t):(o.prototype=t.prototype,new o)}),m=this&&this.__assign||function(){return m=Object.assign||function(e){for(var t,o=1,c=arguments.length;o<c;o++)for(var h in t=arguments[o])Object.prototype.hasOwnProperty.call(t,h)&&(e[h]=t[h]);return e},m.apply(this,arguments)},v=this&&this.__spreadArray||function(e,t,o){if(o||arguments.length===2)for(var c,h=0,g=t.length;h<g;h++)!c&&h in t||(c||(c=Array.prototype.slice.call(t,0,h)),c[h]=t[h]);return e.concat(c||Array.prototype.slice.call(t))};Object.defineProperty(_,"__esModule",{value:!0}),_.ProGrid=void 0;var f=y(72),d=y(7),p=y(8),u=y(2),s=y(18),l=y(25),r=y(0),a=y(34),i=y(15),n=function(e){function t(o,c){var h,g,x=this;return(x=e.call(this,o,m({autoHeight:!1,headerAutoHeight:(h=c==null?void 0:c.headerAutoHeight)!==null&&h!==void 0?h:c==null?void 0:c.autoHeight,footerAutoHeight:(g=c==null?void 0:c.footerAutoHeight)!==null&&g!==void 0?g:c==null?void 0:c.autoHeight},c))||this).scrollView=new a.ScrollView(function(){return x.getRootView()},{scrollHandler:function(C){return x.events.fire(d.GridEvents.scroll,[{y:C.target.scrollTop,x:C.target.scrollLeft}])}}),x}return E(t,e),t.prototype._createView=function(){var o=this;return(0,r.create)({render:function(c,h){return o._destructed?(0,r.el)("div"):(0,l.proRender)(c,h,o._htmlEvents,o.selection,o._uid)},hooks:this._initHooks()},this)},t.prototype._setEventHandlers=function(){var o=this;e.prototype._setEventHandlers.call(this),this.events.on(d.GridEvents.headerCellMouseDown,function(c,h){var g,x=(0,u.locateNodeByClassName)(h,"dhx_header-row"),C=x&&x.getAttribute("aria-rowindex");!((g=c.header[Number(C)-1])===null||g===void 0)&&g.content||(h.targetTouches?o._touch.timer=setTimeout(function(){o._dragStartColumn(h,c)},o._touch.duration):o._dragStartColumn(h,c))}),this._events.on(d.GridSystemEvents.headerCellTouchMove,function(c,h){o._touch.start&&h.preventDefault(),o._clearTouchTimer()}),this._events.on(d.GridSystemEvents.headerCellTouchEnd,function(){o._touch.start=!1,o._clearTouchTimer()}),this.events.on(d.GridEvents.afterResizeEnd,function(){o.config.autoHeight&&(o.config.data=o.data.map(function(c){var h=(0,s.getMaxRowHeight)(c,o.config.columns);return c.$height=(0,s.getCalculatedRowHeight)(h,{rowHeight:o.config.rowHeight}),c}))}),this.events.on(d.GridEvents.afterRowResize,function(c,h,g){var x=o.data.getItem(c.id),C=x.id,k=x.height,I=x.$height;k&&k!==I&&o.data.update(C,{height:g}),o.data.update(C,{$height:g},!0),o.config.data=o.data.map(function(O){return O}),o.paint()}),this.events.on(d.GridEvents.scroll,function(){o._lazyLoad()}),this.events.on(p.DataEvents.dataRequest,function(c,h){var g=o.data.dataProxy;g&&g.config&&o._prepareDataFromTo(o.data,c,h)})},t.prototype.getNormalizeContentHeight=function(o,c,h){var g,x,C=0,k=this.content[o.content],I=o.content&&typeof k.calculate=="function"&&k.toHtml(c,h).toString(),O=o.text||I||"";if(o.colspan){var D=(g=h.columns)===null||g===void 0?void 0:g.findIndex(function(S){return S.id===c.id}),A=D+o.colspan,H=(x=h.columns)===null||x===void 0?void 0:x.slice(D,A);H==null||H.forEach(function(S){C+=S.$width})}else C+=c.$width;return(0,s.measureTextHeight)({text:O,width:C-24,htmlEnable:(0,i.isHtmlEnable)(h,c,o),font:"bold 14px Arial"})+16},t.prototype._prepareData=function(o){var c=this;return this._normalizeDataType(),this._adjustColumns(),o.map(function(h){if(c.config.autoHeight&&h.height===void 0){var g=c.config.columns.filter(function(C){return!C.hidden}),x=(0,s.getMaxRowHeight)(h,g);h.$height=(0,s.getCalculatedRowHeight)(x,{rowHeight:c.config.rowHeight})||c.config.rowHeight}else h.$height=h.height||c.config.rowHeight;return h})},t.prototype._prepareDataFromTo=function(o,c,h){var g=this;return o.mapRange(c,h,function(x){var C=(0,s.getMaxRowHeight)(x,g.config.columns);return x.$height=(0,s.getCalculatedRowHeight)(C,{rowHeight:g.config.rowHeight})||g.config.rowHeight,x})},t.prototype._dragStart=function(o){if(this.config.dragMode&&(this.config.dragItem==="row"||this.config.dragItem==="both")&&!this.config.$editable){var c=this.getColumn(o.target.getAttribute("data-dhx-col-id"));if((c==null?void 0:c.draggable)===!1)return;var h=(0,u.locateNode)(o,"data-dhx-id"),g=h&&h.getAttribute("data-dhx-id");o.targetTouches&&(this._touch.start=!0);var x=[g];if(this.config.multiselection&&(x=v(v([],x,!0),this.selection.getCells().map(function(D){return D.row.id}),!0)).length>1){for(var C=this.data.getInitialData(),k={},I=function(D){var A=x[D],H=C==null?void 0:C.findIndex(function(S){return S.id==A});k[H]=A},O=0;O<x.length;O++)I(O);x=v([],Object.values(k),!0)}return p.dragManager.onMouseDown(o,x,[this._getRowGhost(x)])}},t.prototype._lazyLoad=function(){var o,c,h=this,g=this.data.dataProxy;if(g&&g.config){var x=this.data.getRawData(0,-1,null,2);if(!x.length)return;var C,k=(0,l.getRenderConfig)(this,x,{width:this.config.$width,height:this.config.$height}),I=g.config.limit,O=I,D=k.currentRows,A=D[0],H=D[D.length-1],S=this.data.getIndex(H.id),$=function(z){for(var B=1;B<D.length;B++)if(z==="firstFilledRow"&&!D[B].$empty&&D[B-1].$empty||z==="firstEmptyRow"&&D[B].$empty&&!D[B-1].$empty)return h.data.getIndex(D[B].id)};if(A.$empty)if(H.$empty)C=this.data.getIndex(A.id);else{var w=$("firstFilledRow"),T=w-O;T<0&&(T=0);for(var F=T;F<w;F++)if(this.data.getItem(this.data.getId(F)).$empty){C=F,O=w-F;break}}else H.$empty?C=$("firstEmptyRow"):(C=(o=$("firstEmptyRow"))!==null&&o!==void 0?o:this.data.getIndex(A.id),O=((c=$("firstFilledRow"))!==null&&c!==void 0?c:S)-C);!this.data.isDataLoaded(C,S)&&this.data.events.fire(p.DataEvents.beforeLazyLoad,[])&&(g.updateUrl(null,{from:C,limit:O}),g.config.limit=I,this.data.load(g).then(function(){h.config.autoHeight&&h._prepareDataFromTo(h.data,C,S)}))}},t.prototype._getColumnGhost=function(o){var c=this._container||(0,u.toNode)(this._uid),h=c.querySelector(".dhx_header-row"),g=h.querySelector('.dhx_grid-header-cell[data-dhx-id="'.concat(o.id,'"]')),x=Array.from(h.childNodes).indexOf(g)+1,C=c.querySelectorAll('.dhx_grid-header-cell[data-dhx-id="'.concat(o.id,'"]:not(.dhx_span-cell)')),k=c.querySelectorAll(".dhx_grid_data .dhx_grid-cell:nth-child(".concat(x,")")),I=document.createElement("div");return C.forEach(function(O){return I.appendChild(O.cloneNode(!0))}),k.forEach(function(O){return I.appendChild(O.cloneNode(!0))}),I},t.prototype._dragStartColumn=function(o,c){var h=o.target,g=function(x){return x.classList.contains("dhx_grid-custom-content-cell")};g(h.parentElement)||g(h.parentElement.parentElement)||!(c.draggable||this.config.dragItem==="column"&&c.draggable!==!1||this.config.dragItem==="both"&&c.draggable!==!1)||(0,u.locateNodeByClassName)(o,"dhx_resizer_grip_wrap")||(o.targetTouches&&(this._touch.start=!0),p.dragManager.onMouseDown(o,[c.id],[this._getColumnGhost(c)]))},t}(f.Grid);_.ProGrid=n},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.collectionStore=void 0;var b=y(1),E=function(){function v(){this._store={}}return v.prototype.setItem=function(f,d){this._store[f]=d},v.prototype.getItem=function(f){return(0,b.isId)(f)&&this._store[f]?this._store[f]:null},v}(),m=window.dhxHelpers=window.dhxHelpers||{};m.collectionStore=m.collectionStore||new E,_.collectionStore=m.collectionStore},function(W,_,y){(function(b){var E,m=this&&this.__extends||(E=function(u,s){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,r){l.__proto__=r}||function(l,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(l[a]=r[a])},E(u,s)},function(u,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function l(){this.constructor=u}E(u,s),u.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.LazyDataProxy=void 0;var v=y(32),f=y(1),d=y(47),p=function(u){function s(l,r){var a=u.call(this,l)||this;return a.config=(0,f.extend)({from:0,limit:50,delay:50,prepare:0},r),a.updateUrl(l,{from:a.config.from,limit:a.config.limit}),a}return m(s,u),s.prototype.load=function(){var l=this;return new b(function(r,a){l._timeout?(clearTimeout(l._timeout),l._timeout=setTimeout(function(){d.ajax.get(l.url,{responseType:"text"}).then(r).catch(a),l._cooling=!0},l.config.delay),l._cooling&&(r(null),l._cooling=!1)):(d.ajax.get(l.url,{responseType:"text"}).then(r).catch(a),l._cooling=!0,l._timeout=setTimeout(function(){}))})},s}(v.DataProxy);_.LazyDataProxy=p}).call(this,y(17))},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.Selection=void 0;var b=y(3),E=y(35),m=y(22),v=y(1),f=function(){function d(p,u,s){var l=this;this.events=s||new b.EventSystem(this),this._data=u,this.config=p,this._data.events.on(m.DataEvents.removeAll,function(){l._selected=null}),this._data.events.on(m.DataEvents.change,function(){if((0,v.isId)(l._selected)){var r=l._data.getNearId(l._selected);r!==l._selected&&(l._selected=null,r&&l.add(r))}})}return d.prototype.getId=function(){return this._selected},d.prototype.getItem=function(){return(0,v.isId)(this._selected)?this._data.getItem(this._selected):null},d.prototype.remove=function(p){return p=p??this._selected,!(0,v.isDefined)(p)||!!this.events.fire(E.SelectionEvents.beforeUnSelect,[p])&&(this._data.update(p,{$selected:!1},!0),this._selected=null,this.events.fire(E.SelectionEvents.afterUnSelect,[p]),!0)},d.prototype.add=function(p){this._selected!==p&&!this.config.disabled&&this._data.exists(p)&&(this.remove(),this._addSingle(p))},d.prototype.enable=function(){this.config.disabled=!1},d.prototype.disable=function(){this.remove(),this.config.disabled=!0},d.prototype._addSingle=function(p){this.events.fire(E.SelectionEvents.beforeSelect,[p])&&(this._selected=p,this._data.update(p,{$selected:!0},!0),this.events.fire(E.SelectionEvents.afterSelect,[p]))},d}();_.Selection=f},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.createFactory=void 0;var b=y(174),E=y(175),m=y(176),v=y(177),f=y(178),d=y(179),p=y(180),u=y(181),s=y(182),l=y(183),r=y(36);_.createFactory=function(a){for(var i=a.defaultType,n=a.allowedTypes,e=a.widgetName,t=a.widget,o=new Set,c=0,h=n;c<h.length;c++){var g=h[c];o.add(g)}var x=t.config,C=t.events,k=t.data;return function(I,O){if(I.hidden||!(I.type&&I.type!=="button"&&I.type!=="navItem"&&I.type!=="menuItem"||I.value||I.icon||I.html))return null;I.type=I.type||i,o&&!o.has(I.type)&&(I.type=i),I.type==="imageButton"&&e!=="ribbon"&&(I.active=!1),O&&I.type!=="spacer"&&I.type!=="separator"&&I.type!=="customHTML"&&(I.type="menuItem"),k.haveItems(I.id)&&function(A,H,S){switch(A){case"sidebar":case"context-menu":H.$openIcon="right";break;case"toolbar":H.parent===S.getRoot()?H.$openIcon="right":H.$openIcon="bottom";break;case"menu":H.parent!==this.data.getRoot()&&(H.$openIcon="right");break;case"ribbon":var $=S.getItem(H.parent);$&&H.type!=="block"&&($.type==="block"?H.$openIcon="bottom":H.$openIcon="right")}}(e,I,k),e==="toolbar"&&I.items&&I.items.forEach(function(A){A.type||(A.type="menuItem")});var D=I.type!=="customHTML"&&function(A,H,S,$){switch(A.type){case"navItem":case"selectButton":return(0,E.navItem)(A,S,$.collapsed);case"button":return(0,b.button)(A,S);case"title":return(0,s.title)(A,S);case"separator":return(0,p.separator)(A,S);case"spacer":return(0,u.spacer)(A,S);case"input":return(0,f.input)(A,H,S);case"imageButton":return(0,v.imageButton)(A,S);case"menuItem":return(0,d.menuItem)(A,S,$.asMenuItem);case"customHTMLButton":return(0,m.customHTMLButton)(A,S,$.asMenuItem);case"datePicker":return(0,l.datePicker)(A,H,S);default:throw new Error("unknown item type "+A.type)}}(I,C,e,{asMenuItem:O,collapsed:e!=="sidebar"||x.collapsed});return(0,r.navbarComponentMixin)(e,I,O,D)}}},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(v){for(var f,d=1,p=arguments.length;d<p;d++)for(var u in f=arguments[d])Object.prototype.hasOwnProperty.call(f,u)&&(v[u]=f[u]);return v},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.button=void 0;var E=y(0),m=y(36);_.button=function(v,f){var d=v.icon&&!v.value,p=d?" dhx_navbar-count--absolute":" dhx_navbar-count--button-inline";return(0,E.el)("button.dhx_button",b({class:(0,m.getNavbarButtonCSS)(v,f),"data-dhx-id":v.id,disabled:v.disabled,type:"button"},function(u){var s=u.active||u.$activeParent,l={"aria-disabled":u.disabled?"true":"false","aria-label":u.value||u.tooltip||u.id||""+" ".concat(u.count||"")};return u.items&&(l.id=u.id,l["aria-haspopup"]="menu",s&&(l["aria-expanded"]="true")),l}(v)),[v.icon?(0,m.getIcon)(v.icon,"button"):null,v.html?(0,E.el)("div.dhx_button__text",{".innerHTML":v.html}):v.value&&(0,E.el)("span.dhx_button__text",v.value),v.count>0&&(0,m.getCount)(v,p,d),v.value&&v.$openIcon?(0,E.el)("span.dhx_button__icon.dhx_button__icon--menu.dxi.dxi-menu-right",{"aria-hidden":"true"}):null,v.loading&&(0,E.el)("span.dhx_button__loading",{"aria-hidden":"true"},[(0,E.el)("span.dhx_button__loading-icon.dxi.dxi-loading")])])}},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(v){for(var f,d=1,p=arguments.length;d<p;d++)for(var u in f=arguments[d])Object.prototype.hasOwnProperty.call(f,u)&&(v[u]=f[u]);return v},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.navItem=void 0;var E=y(0),m=y(36);_.navItem=function(v,f,d){var p=" dhx_"+f+"-button";return(0,E.el)("button",b({class:"dhx_button"+p+(v.active||v.$activeParent?p+"--active":"")+(v.disabled?p+"--disabled":"")+(v.$openIcon?p+"--select":"")+(v.circle?p+"--circle":"")+(v.size?" "+p+"--"+v.size:"")+(!v.value&&v.icon?p+"--icon":"")+(v.css?" "+v.css:""),"data-dhx-id":v.id,disabled:v.disabled,type:"button"},function(u){var s={"aria-disabled":u.disabled?"true":"false","aria-label":u.value||" "},l=u.active||u.$activeParent;return u.type==="selectButton"||u.items?(s.id=u.id,s["aria-haspopup"]="menu",l&&(s["aria-expanded"]="true")):((u.twoState||l)&&(s["aria-pressed"]=l?"true":"false"),!u.value&&u.icon&&u.tooltip&&(s["aria-label"]="".concat(u.tooltip," ").concat(u.count||""))),s}(v)),[v.icon&&(0,E.el)("span",{class:v.icon+p+"__icon","aria-hidden":"true"}),v.html&&(0,E.el)("div",{class:p.trim()+"__html",".innerHTML":v.html}),!v.html&&v.value&&(0,E.el)("span",{class:p.trim()+"__text"},v.value),v.count>0&&(0,m.getCount)(v,p+"__count",d),v.$openIcon&&(0,E.el)("span.dxi.dxi-menu-right",{class:p+"__caret","aria-hidden":"true"})])}},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(m){for(var v,f=1,d=arguments.length;f<d;f++)for(var p in v=arguments[f])Object.prototype.hasOwnProperty.call(v,p)&&(m[p]=v[p]);return m},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.customHTMLButton=void 0;var E=y(0);_.customHTMLButton=function(m,v,f){var d=f?" dhx_button dhx_menu-button":" dhx_button dhx_nav-menu-button";return(0,E.el)("button",b({class:"dhx_custom-button"+d+(m.$activeParent?d+"--active":""),"data-dhx-id":m.id,type:"button",".innerHTML":m.html},function(p){var u={"aria-disabled":p.disabled?"true":"false"};return(p.twoState||p.active||p.$activeParent)&&(u["aria-pressed"]=p.active||p.$activeParent?"true":"false"),u}(m)),m.html?"":m.value)}},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(v){for(var f,d=1,p=arguments.length;d<p;d++)for(var u in f=arguments[d])Object.prototype.hasOwnProperty.call(f,u)&&(v[u]=f[u]);return v},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.imageButton=void 0;var E=y(0),m=y(36);_.imageButton=function(v,f){var d="dhx_"+f+"-button-image",p=f==="ribbon";return(0,E.el)("button.dhx_button",b({class:d+(v.size?" "+d+"--"+v.size:"")+(!v.value&&v.src?" "+d+"--icon":"")+(p&&v.$openIcon?" "+d+"--select":"")+(v.active?" "+d+"--active":""),"data-dhx-id":v.id,type:"button"},function(u){var s={"aria-disabled":u.disabled?"true":"false"};return(u.twoState||u.active)&&(s["aria-pressed"]=u.active?"true":"false"),!u.value&&u.src&&u.tooltip&&(s["aria-label"]="".concat(u.tooltip," ").concat(u.count||"")),s}(v)),[p&&v.value&&v.$openIcon&&(0,E.el)("span.dxi.dxi-menu-right",{class:d+"__caret","aria-hidden":"true"}),v.html?(0,E.el)("div",{class:d+"__text",".innerHTML":v.html}):v.value&&(0,E.el)("span",{class:d+"__text"},v.value),v.src&&(0,E.el)("span",{class:d+"__image",style:{backgroundImage:"url(".concat(v.src,")")},role:"presentation"}),v.count>0&&(0,m.getCount)(v,d+"__count",!0)])}},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.input=void 0;var b=y(0),E=y(38);function m(d,p){d.fire(E.NavigationBarEvents.inputBlur,[p])}function v(d,p){d.fire(E.NavigationBarEvents.inputFocus,[p])}function f(d,p,u){d.fire(E.NavigationBarEvents.inputChange,[p,u.target.value])}_.input=function(d,p,u){return(0,b.el)(".dhx_form-group.dhx_form-group--no-message-holder"+(d.hiddenLabel?".dhx_form-group--label_sr":".dhx_form-group--inline")+".dhx_".concat(u,"__input"),{style:{width:d.width?d.width:"200px"},role:"presentation"},[d.label&&(0,b.el)("label.dhx_label",{for:d.id,style:{maxWidth:d.hiddenLabel?null:"100%"}},d.label),(0,b.el)(".dhx_input__wrapper",{role:"presentation"},[(0,b.el)("input.dhx_input",{id:d.id,placeholder:d.placeholder,class:d.icon?"dhx_input--icon-padding":"",autocomplete:d.autocomplete?"on":"off",value:d.value,disabled:d.disabled,onblur:[m,p,d.id],onfocus:[v,p,d.id],onchange:[f,p,d.id],"data-dhx-id":d.id,_hooks:{didInsert:function(s){p&&p.fire(E.NavigationBarEvents.inputCreated,[d.id,s.el])}},_key:d.id,"aria-label":d.label||d.helpMessage||"type ".concat(d.placeholder?"text like "+d.placeholder:"text")}),d.icon?(0,b.el)(".dhx_input__icon",{class:d.icon,"aria-hidden":"true"}):null])])}},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(f){for(var d,p=1,u=arguments.length;p<u;p++)for(var s in d=arguments[p])Object.prototype.hasOwnProperty.call(d,s)&&(f[s]=d[s]);return f},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.menuItem=void 0;var E=y(0),m=y(36),v=y(1);_.menuItem=function(f,d,p){var u=p?" dhx_menu-button":" dhx_nav-menu-button",s=(0,v.isDefined)(f.count);return(0,E.el)("button",b({class:"dhx_button"+u+(f.disabled?u+"--disabled":"")+(f.active||f.$activeParent?u+"--active":""),disabled:f.disabled,"data-dhx-id":f.id,type:"button"},function(l){var r={role:"menuitem","aria-disabled":l.disabled?"true":"false"};return l.items&&(r["aria-haspopup"]="true"),r}(f)),p?[f.icon||f.value||f.html?(0,E.el)("span.dhx_menu-button__block.dhx_menu-button__block--left",[f.icon&&(0,E.el)("span.dhx_menu-button__icon",{class:f.icon}),f.html?(0,E.el)("div.dhx_menu-button__text",{".innerHTML":f.html}):f.value&&(0,E.el)("span.dhx_menu-button__text",f.value)]):null,s||f.hotkey||f.items?(0,E.el)("span.dhx_menu-button__block.dhx_menu-button__block--right",[s&&(0,m.getCount)(f," dhx_menu-button__count",!1),f.hotkey&&(0,E.el)("span.dhx_menu-button__hotkey",f.hotkey),f.items&&(0,E.el)("span.dhx_menu-button__caret.dxi.dxi-menu-right")]):null]:[f.icon&&(0,E.el)("span.dhx_menu-button__icon",{class:f.icon}),f.html?(0,E.el)("div.dhx_menu-button__text",{".innerHTML":f.html}):f.value&&(0,E.el)("span.dhx_nav-menu-button__text",f.value),s&&(0,m.getCount)(f," dhx_menu-button__count",!1)])}},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.separator=void 0,_.separator=function(b,E){return null}},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.spacer=void 0,_.spacer=function(b,E){return null}},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.title=void 0;var b=y(0);_.title=function(E,m){return(0,b.el)("span",{class:"dhx_navbar-title dhx_navbar-title--"+m,"data-dhx-id":E.id,".innerHTML":E.html,"aria-label":E.value||""},E.html?null:E.value)}},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(r){for(var a,i=1,n=arguments.length;i<n;i++)for(var e in a=arguments[i])Object.prototype.hasOwnProperty.call(a,e)&&(r[e]=a[e]);return r},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.datePicker=void 0;var E=y(0),m=y(48),v=y(11),f=y(38),d=y(24),p=y(2);function u(r,a,i){var n=i.target;n&&(n.value=a.$calendar.getValue()),r.fire(f.NavigationBarEvents.inputBlur,[a==null?void 0:a.id])}function s(r,a,i){(0,E.awaitRedraw)().then(function(){return a.$popup.show(i.target,{theme:i.target})}),r.fire(f.NavigationBarEvents.inputFocus,[a==null?void 0:a.id])}function l(r,a,i){var n=i.target.value,e=r.$calendar.config.dateFormat;return n.length?(0,d.stringToDate)(n,e,!0)&&r.$calendar.setValue((0,d.stringToDate)(n,e)):r.$calendar.clear(),a.fire(f.NavigationBarEvents.input,[(0,p.locate)(i),n]),!1}_.datePicker=function(r,a,i){r.$popup||(r.$popup=new v.Popup),r.$calendar||(r.$calendar=new m.Calendar(null,b(b({},r),{css:"dhx_widget--bordered"})),r.$popup.attach(r.$calendar),r.$calendar.events.on("change",function(e,t,o){var c;o&&r.$popup.isVisible()&&r.$popup.hide();var h=((c=r.valueFormat)===null||c===void 0?void 0:c.toLowerCase())==="date";a.fire(f.NavigationBarEvents.inputChange,[r.id,r.$calendar.getValue(h)])}));var n=r.$calendar.getValue();return r.mode&&r.mode!=="calendar"&&r.$calendar.showDate(void 0,r.mode),(0,E.el)(".dhx_form-group.dhx_form-group--no-message-holder"+(r.hiddenLabel?".dhx_form-group--label_sr":".dhx_form-group--inline")+".dhx_".concat(i,"__input"),{style:{width:r.width?r.width:"200px"},role:"presentation"},[r.label&&(0,E.el)("label.dhx_label",{for:r.id,style:{maxWidth:r.hiddenLabel?null:"100%"}},r.label),(0,E.el)(".dhx_input__wrapper",{role:"presentation"},[(0,E.el)("input.dhx_input",{id:r.id,placeholder:r.placeholder,class:r.icon?"dhx_input--icon-padding":"",value:n,disabled:r.disabled,onblur:[u,a,r],onfocus:[s,a,r],oninput:[l,r,a],"data-dhx-id":r.id,readOnly:r.editable!==!0,_hooks:{didInsert:function(e){a&&a.fire(f.NavigationBarEvents.inputCreated,[r.id,e.el])}},_key:r.id,"aria-label":r.label||r.helpMessage||"type ".concat(r.placeholder?"text like "+r.placeholder:"text")}),r.icon?(0,E.el)(".dhx_input__icon",{class:r.icon,"aria-hidden":"true"}):null])])}},function(W,_,y){var b,E=this&&this.__extends||(b=function(p,u){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&(s[r]=l[r])},b(p,u)},function(p,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function s(){this.constructor=p}b(p,u),p.prototype=u===null?Object.create(u):(s.prototype=u.prototype,new s)});Object.defineProperty(_,"__esModule",{value:!0}),_.Menu=void 0;var m=y(1),v=y(0),f=y(30),d=function(p){function u(s,l){var r=p.call(this,s,(0,m.extend)({$name:"menu"},l))||this;return r.mount(s,(0,v.create)({render:function(){return r._draw()}})),r}return E(u,p),u.prototype._getFactory=function(){return(0,f.createFactory)({widget:this,defaultType:"menuItem",allowedTypes:["menuItem","spacer","separator","customHTML","customHTMLButton"],widgetName:"menu-nav"})},u.prototype._draw=function(){return(0,v.el)("ul.dhx_widget",{"data-dhx-widget-id":this._uid,onmousemove:this._handlers.onmousemove,onmouseleave:this._handlers.onmouseleave,onclick:this._handlers.onclick,onmousedown:this._handlers.onmousedown,onkeydown:this._handlers.onkeydown,class:"dhx_menu-nav "+(this.config.css?this.config.css:"")},this._drawMenuItems(this.data.getRoot(),!1))},u}(f.Navbar);_.Menu=d},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(v){for(var f,d=1,p=arguments.length;d<p;d++)for(var u in f=arguments[d])Object.prototype.hasOwnProperty.call(f,u)&&(v[u]=f[u]);return v},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.Exporter=void 0;var E=y(2),m=function(){function v(f,d,p){this._name=f,this._version=d,this._view=p}return v.prototype.pdf=function(f){this._rawExport(f,"pdf",this._view)},v.prototype.png=function(f){this._rawExport(f,"png",this._view)},v.prototype._rawExport=function(f,d,p){var u=this;if(f===void 0&&(f={}),f.url=f.url||"https://export.dhtmlx.com/"+this._name+"/"+d+"/"+this._version,d==="pdf"){var s=f.pdf||{};f.pdf=b(b({},s),{printBackground:!1})}var l="",r=p.config.exportStyles;(typeof f.exportStyles=="boolean"||Array.isArray(f.exportStyles))&&(r=f.exportStyles),r===!0?l="".concat((0,E.getPageLinksCss)(),"<style>").concat((0,E.getPageInlineCss)(),"</style>"):r.length&&(l="".concat((0,E.getPageLinksCss)(r)));var a=`
				`.concat(l,`
				`).concat(p.getRootView().node.el.parentNode.innerHTML,`
			`).replace(/(src|href)=("(.+?\.(jpeg|jpg|png|apng|gif|svg|bmp|ico))")/gm,function(n){if(n.includes("://"))return n;var e=n.replace(/(src|href)="/,"").replace('"',"");return/(src|href)="/.exec(n)[0]+u._normalizeLink(e)+'"'}),i=document.createElement("form");i.setAttribute("method","POST"),i.setAttribute("action",f.url),i.innerHTML='<input type="hidden" name="raw"><input type="hidden" name="config">',i.childNodes[0].value=a,i.childNodes[1].value=JSON.stringify(f),document.body.appendChild(i),i.submit(),setTimeout(function(){i.parentNode.removeChild(i)},100)},v.prototype._normalizeLink=function(f){var d=window.location.pathname.split("/");return d[0]===""&&(d.shift(),d.pop()),window.location.origin+"/"+d.join("/")+(f[0]!=="/"?"/"+f:f)},v}();_.Exporter=m},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(f){for(var d,p=1,u=arguments.length;p<u;p++)for(var s in d=arguments[p])Object.prototype.hasOwnProperty.call(d,s)&&(f[s]=d[s]);return f},b.apply(this,arguments)},E=this&&this.__spreadArray||function(f,d,p){if(p||arguments.length===2)for(var u,s=0,l=d.length;s<l;s++)!u&&s in d||(u||(u=Array.prototype.slice.call(d,0,s)),u[s]=d[s]);return f.concat(u||Array.prototype.slice.call(d))};Object.defineProperty(_,"__esModule",{value:!0}),_.Selection=void 0;var m=y(27),v=function(){function f(d,p){var u=this;this._selected=[],this._selectedLines=[],this.events=p,this._data=d,this._data.events.on(m.DataEvents.removeAll,function(){return u.clear()}),this._data.events.on(m.DataEvents.afterRemove,function(s){var l=s.id;return u.remove({id:l})})}return f.prototype.add=function(d){var p,u=d.id,s=d.join,l=s!==void 0&&s,r=d.batch,a=r===void 0?[]:r,i=this._data.getItem(u);if((i==null?void 0:i.type)==="$sgroup"&&(u=i.$group),!i||this.includes({id:u})||!l&&!this.remove()||!this.events.fire(m.SelectionEvents.beforeSelect,[{id:u,join:l,batch:a}]))return!1;var n=i.$item.getBaseType();if(!this.includes({id:u})){var e=n!=="line"||n==="line"&&l&&this._selected.length;this._data.update(u,{$selected:e},!0),n==="line"&&this._selectedLines.push(u),this._selected.length&&this._selectedLines.length&&!(!((p=this._data.getItem(this._selectedLines[0]))===null||p===void 0)&&p.$selected)&&this._data.update(this._selectedLines[0],{$selected:!0},!0),this._selected.push(u)}return this.events.fire(m.SelectionEvents.afterSelect,[{id:u,join:l,batch:a}]),!0},f.prototype.remove=function(d){var p=this;if(!d){var u=E([],this._selected,!0);return u.map(function(s){return p.unselect({id:s,batch:u})}).every(function(s){return s})}return!!this.includes(b({},d))&&this.unselect(d)},f.prototype.includes=function(d){var p=d.id;return this._selected.includes(p)},f.prototype.getItem=function(d){var p=this._selected[this._selected.length-1];return d&&this.includes({id:d.id})&&(p=d.id),this._data.getItem(p)},f.prototype.getIds=function(){return this._selected},f.prototype.clear=function(){this._data&&this._data.forEach(function(d){d.$selected&&delete d.$selected}),this._selected=[],this._selectedLines=[]},f.prototype.unselect=function(d){var p=d.id,u=d.batch,s=u===void 0?[]:u;return!!this.events.fire(m.SelectionEvents.beforeUnSelect,[{id:p,batch:s}])&&(this._selected=this._selected.filter(function(l){return l!==p}),this._data.update(p,{$selected:void 0},!0),this._selectedLines.some(function(l){return l==p})&&(this._selectedLines=this._selectedLines.filter(function(l){return l!==p})),this._selected.length===1&&this._selectedLines.length===1&&this._data.update(this._selectedLines[0],{$selected:void 0},!0),this.events.fire(m.SelectionEvents.afterUnSelect,[{id:p,batch:s}]),!0)},f}();_.Selection=v},function(W,_,y){var b,E=this&&this.__extends||(b=function(f,d){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,u){p.__proto__=u}||function(p,u){for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(p[s]=u[s])},b(f,d)},function(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function p(){this.constructor=f}b(f,d),f.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)});Object.defineProperty(_,"__esModule",{value:!0}),_.ImgCard=void 0;var m=y(0),v=function(f){function d(){return f!==null&&f.apply(this,arguments)||this}return E(d,f),d.prototype.setDefaults=function(p,u){var s=p.width,l=p.height,r=p.text,a=p.title,i=p.headerColor,n=p.fixed,e=u.width?parseFloat(u.width):210,t=u.height?parseFloat(u.height):90;return p.width=s||e,p.height=l||t,p.title=typeof a=="string"?a:u.title||"",p.text=typeof r=="string"?r:u.text||"",p.headerColor=i||u.headerColor||"",p.fixed=n||!1,p.editable=typeof p.editable!="boolean"||p.editable,p},d.prototype.getCss=function(){return"dhx_diagram_shape_card-img "+f.prototype.getCss.call(this)},d.prototype.getContent=function(){var p=this.config,u=p.img,s=p.headerColor,l=p.title,r=p.text,a=p.$editable,i=p.width,n=u?"".concat(u):null;return[(0,m.el)("img.dhx_diagram_item__image",{style:{backgroundColor:u?null:s},src:n}),(0,m.el)("div.dhx_diagram_item__title",a&&this.editableProperty.key==="title"?[this.getEditorNode()]:l),(0,m.el)("div.dhx_diagram_item__text",{style:{maxWidth:i-80,marginLeft:80,marginTop:l?null:"12px"}},a&&this.editableProperty.key==="text"?[this.getEditorNode()]:r)]},d}(y(89).Card);_.ImgCard=v},function(W,_,y){var b,E=this&&this.__extends||(b=function(s,l){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i])},b(s,l)},function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function r(){this.constructor=s}b(s,l),s.prototype=l===null?Object.create(l):(r.prototype=l.prototype,new r)}),m=this&&this.__assign||function(){return m=Object.assign||function(s){for(var l,r=1,a=arguments.length;r<a;r++)for(var i in l=arguments[r])Object.prototype.hasOwnProperty.call(l,i)&&(s[i]=l[i]);return s},m.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.TextShape=void 0;var v=y(0),f=y(2),d=y(28),p=y(19),u=function(s){function l(r,a){var i=s.call(this,r,a)||this;return i.data=a.data,i}return E(l,s),l.prototype.render=function(){var r=this.getCoords(this.config),a=this.config,i=a.id,n=a.angle,e=a.text,t=a.fontSize,o=a.lineHeight,c=a.fontWeight,h=a.fontStyle,g=a.width,x=a.height,C={fontSize:"".concat(t,"px"),fontFamily:"Roboto, Arial, Tahoma, Verdana, sans-serif",lineHeight:"".concat(o,"px"),fontWeight:c,fontStyle:h};if(this._prevValue&&this.config.text!==this._prevValue){var k=(0,f.getStrSize)(e,C);this.data.update(this.id,{height:k.height+2,width:k.width+4})}this._prevValue=this.config.text;var I=this.config.$group||this.config.$selected?this.config.$selected?2:1:0;return(0,v.el)("div.dhx_diagram_item.dhx_diagram_shape.dhx_diagram_shape_text",{_key:i,class:this.getCss(),"data-dhx-id":i,style:{zIndex:I,width:g,height:x,position:"absolute",top:r.y,left:r.x,transform:"rotate(".concat(n||0,"deg)")}},[].concat((0,p.getTextTemplate)(this.config,this.getContent())))},l.prototype.setDefaults=function(r,a){var i=r.width,n=r.height,e=r.fontColor,t=r.fontSize,o=r.fontStyle,c=r.textAlign,h=r.lineHeight,g=r.textVerticalAlign,x=r.text,C=r.fontWeight,k=r.x,I=r.y,O=r.fixed,D=r.editable,A=a.lineHeight?parseFloat(a.lineHeight):14,H=a.fontSize?parseFloat(a.fontSize):14,S={fontSize:"".concat(t||H,"px"),fontFamily:"Roboto, Arial, Tahoma, Verdana, sans-serif",lineHeight:"".concat(h||A,"px"),fontWeight:C,fontStyle:o},$=(0,f.getStrSize)(x,S),w=a.width?parseFloat(a.width):$.width+4,T=a.height?parseFloat(a.height):$.height+2;return r.width=i||w,r.height=n||T,r.lineHeight=h||A,r.fontSize=t||H,r.text=x||a.text||"",r.fontColor=e||a.fontColor||"#4C4C4C",r.textAlign=c||a.textAlign||"center",r.fontStyle=o||a.fontStyle||"normal",r.textVerticalAlign=g||a.textVerticalAlign||"center",r.x=k||0,r.y=I||0,r.fixed=O||!1,r.editable=typeof D!="boolean"||D,r},l.prototype.getContent=function(){var r=this.config,a=r.$editable,i=r.text;return(0,v.el)("span.dhx_diagram_item__text",{style:m({},(0,p.getShapeCss)(this.config))},a?[this.getEditorNode()]:i)},l}(d.BaseShape);_.TextShape=u},function(W,_,y){var b,E=this&&this.__extends||(b=function(l,r){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(a[n]=i[n])},b(l,r)},function(l,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function a(){this.constructor=l}b(l,r),l.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}),m=this&&this.__assign||function(){return m=Object.assign||function(l){for(var r,a=1,i=arguments.length;a<i;a++)for(var n in r=arguments[a])Object.prototype.hasOwnProperty.call(r,n)&&(l[n]=r[n]);return l},m.apply(this,arguments)},v=this&&this.__spreadArray||function(l,r,a){if(a||arguments.length===2)for(var i,n=0,e=r.length;n<e;n++)!i&&n in r||(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return l.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(_,"__esModule",{value:!0}),_.TopicShape=void 0;var f=y(0),d=y(2),p=y(28),u=y(19),s=function(l){function r(a,i){var n=l.call(this,a,i)||this;return n.data=i.data,n}return E(r,l),r.prototype.render=function(){var a=this,i=this.getCoords(this.config),n=this.config,e=n.id,t=n.angle,o=n.width,c=n.height,h=n.fontSize,g=n.lineHeight,x=n.fontWeight,C=n.fontStyle,k=n.text,I=n.strokeWidth,O=n.$group,D=n.$selected,A=O||D?D?2:1:0,H={fontSize:"".concat(h,"px"),fontFamily:"Roboto, Arial, Tahoma, Verdana, sans-serif",lineHeight:"".concat(g,"px"),fontWeight:x,fontStyle:C,strokeWidth:I};if(this._oldText&&this.config.text!==this._oldText){var S=(0,d.getStrSize)(k,H),$=S.width+16,w=S.height+8;this.data.update(this.id,{height:w>30?w:30,width:$>60?$:60})}this._oldText=this.config.text;var T=[];return Array.isArray(this.config.dir)?this.config.dir.forEach(function(F,z){T.push((0,u.getCircleTpl)(a.config,z))}):T.push((0,u.getCircleTpl)(this.config)),(0,f.el)("div.dhx_diagram_item.dhx_diagram_shape.dhx_diagram_shape_topic",{_key:e,"data-dhx-id":e,class:this.getCss(),style:{position:"absolute",width:o,height:c,left:i.x,top:i.y,transform:"rotate(".concat(t||0,"deg)"),zIndex:A}},[].concat.apply([],v([(0,u.getTextTemplate)(this.config,this.getContent())],T,!1)))},r.prototype.getContent=function(){var a=this.config,i=a.height,n=a.width,e=a.strokeWidth,t=a.strokeType,o=a.fill,c=a.stroke,h=a.text,g=a.$editable,x="none";return t!=="line"&&t||(x="solid"),t==="dash"&&(x="dashed"),[(0,f.el)("div.dhx_diagram_item__text",{style:m({height:i,width:n,border:"".concat(e,"px ").concat(x," ").concat(c||"#03A9F4"),background:o,borderRadius:"".concat(i/2)},(0,u.getShapeCss)(this.config))},g?[this.getEditorNode()]:h)]},r.prototype.setDefaults=function(a,i){var n=a.width,e=a.height,t=a.fontColor,o=a.fontSize,c=a.fontStyle,h=a.textAlign,g=a.lineHeight,x=a.textVerticalAlign,C=a.text,k=a.fontWeight,I=a.x,O=a.y,D=a.fill,A=a.strokeWidth,H=a.stroke,S=a.strokeType,$=a.fixed,w=a.editable,T=i.lineHeight?parseFloat(i.lineHeight):14,F=i.fontSize?parseFloat(i.fontSize):14,z=i.strokeWidth?parseFloat(i.strokeWidth):1;a.lineHeight=g||T,a.fontSize=o||F,a.text=C||i.text||"",a.fill=D||i.fill||"#fff",a.fontColor=t||i.fontColor||"#4C4C4C",a.textAlign=h||i.textAlign||"center",a.fontStyle=c||i.fontStyle||"normal",a.textVerticalAlign=x||i.textVerticalAlign||"center",a.strokeWidth=A||z,a.stroke=H||i.stroke,a.strokeType=S||i.strokeType||"line";var B={fontSize:"".concat(o||F,"px"),fontFamily:"Roboto, Arial, Tahoma, Verdana, sans-serif",lineHeight:"".concat(g||T,"px"),fontWeight:k,fontStyle:c,strokeWidth:a.strokeWidth},L=(0,d.getStrSize)(C,B),M=i.width?parseFloat(i.width):L.width+24,P=i.height?parseFloat(i.height):L.height+12;return a.height=P>30||e>30?e||P:30,a.width=M>60||n>60?n||M:60,a.x=I||0,a.y=O||0,a.fixed=$||!1,a.editable=typeof w!="boolean"||w,a},r}(p.BaseShape);_.TopicShape=s},function(W,_,y){var b,E=this&&this.__extends||(b=function(s,l){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i])},b(s,l)},function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function r(){this.constructor=s}b(s,l),s.prototype=l===null?Object.create(l):(r.prototype=l.prototype,new r)});Object.defineProperty(_,"__esModule",{value:!0}),_.Toolbar=void 0;var m=y(0),v=y(2),f=y(27),d=y(5),p=y(21),u=function(s){function l(r,a){var i=s.call(this,null,{height:50,iconWidth:30,gap:16,icons:a})||this;return i.events=r,i._handlers={onclick:(0,v.eventHandler)(function(n){return(0,v.locate)(n)},{dhx_diagram_toolbar__icon:function(n,e){i.events.fire(f.DiagramEvents.shapeIconClick,[e,n])}}),tooltip:(0,v.eventHandler)(function(n){return(0,v.locate)(n)},{dhx_diagram_toolbar__icon:function(n,e){var t=(0,v.locateNode)(n);if(t){var o=a.find(function(c){return c.id===e});o!=null&&o.tooltip&&(0,p.tooltip)(o.tooltip,{node:t,position:p.Position.top})}}})},i}return E(l,s),l.prototype.render=function(r,a,i){if(r){var n=this.config,e=this._getIcons(r,n.icons),t=n.iconWidth*e.length+n.gap,o=this._getCoords(r,{width:t/a.scale,height:n.height/a.scale,x:i==null?void 0:i.x,y:i==null?void 0:i.y});return(0,m.el)("div",{class:"dhx_diagram_toolbar",style:{display:this._hidden||!e.length?"none":"block",maxHeight:this.config.height,width:t,top:(o.y-a.top)*a.scale,left:(o.x-a.left)*a.scale},onclick:this._handlers.onclick,onmouseover:this._handlers.tooltip},[(0,m.el)("div.dhx_diagram_toolbar__wrapper",e)])}},l.prototype.hide=function(){this._hidden=!0,this.paint()},l.prototype.show=function(){this._hidden=!1,this.paint()},l.prototype._getIcons=function(r,a){for(var i=[],n=0;n<a.length;n++){var e=a[n];if(!e.check||e.check(r)){var t=e.css?e.css(r):"",o={_key:e.id,class:"dhx_diagram_toolbar__icon "+t,"data-dhx-id":e.id},c=typeof e.content=="function"?e.content(r):e.content;typeof c=="string"?(o[".innerHTML"]=c,i.push((0,m.el)("div",o))):i.push((0,m.el)("div",o,[c]))}}return i},l.prototype._getCoords=function(r,a){var i,n,e=a.width,t=a.height,o=a.x,c=a.y;if(Array.isArray(r)){var h=r.map(function(g){return g.$item.getBox()});n={},h.forEach(function(g){for(var x in g)(isNaN(n[x])||(x==="top"||x==="left")&&g[x]<n[x]||(x==="bottom"||x==="right")&&g[x]>n[x])&&(n[x]=g[x])})}else{if(((i=r.$item)===null||i===void 0?void 0:i.getBaseType())==="line"&&!r.$subSelected)return{x:o+25,y:c-t/2};n=r.$item.getBox()}return{x:n.right/2+n.left/2-e/2,y:n.top-t-8}},l}(d.View);_.Toolbar=u},function(W,_,y){var b=this&&this.__spreadArray||function(h,g,x){if(x||arguments.length===2)for(var C,k=0,I=g.length;k<I;k++)!C&&k in g||(C||(C=Array.prototype.slice.call(g,0,k)),C[k]=g[k]);return h.concat(C||Array.prototype.slice.call(g))};Object.defineProperty(_,"__esModule",{value:!0});var E=y(192),m=y(193),v=y(194),f=function(){function h(){}return h.prototype.layout=function(g,x){if(g.routes=new m.default,!x.full){var C=d(g,x);return x.preserveLocation||u(C.n,C.size),l(C.mx,C.n,C.n,C.size),C.n,g.setGlobalBox(),g}var k=(0,v.split)(g);if(k.length==1&&k[0].root!==null)return new E.default().layout(k[0].g,x);(g=k[0].g).routes=new m.default;var I,O,D,A,H,S=d(g,x);return x.preserveLocation||u(S.n,S.size,function($,w){if(!w)return $[0].g.getNodes()[0].id;var T=w;if($[0].g.getNodes().find(function(z){return z.id===w}))return T;for(var F=1;F<$.length;F++)if($[F].g.getNodes().find(function(z){return z.id===w})){T=$[F].root;break}return T}(k,x.root)),l(S.mx,S.n,S.n,S.size),S.n,x.full&&(function($,w,T,F){T.length,T.forEach(function(M){return M.iss=""});var z=[].concat(T).filter(function(M){return M.links.length>=3}).sort(function(M,P){return M.links.length>P.links.length?-1:M.links.length==P.links.length?0:1});if(z.map(function(M){var P=[];return M.links.forEach(function(V){var R=Math.atan2(V.x-M.x,V.y-M.y)+Math.PI,q=Math.ceil(R/(2*r))*2*r,G=Math.floor(R/(2*r))*2*r;P.push([V,q,Math.abs(R-q)]),P.push([V,G,Math.abs(R-G)])}),P.sort(function(V,R){return V[2]>R[2]?1:-1}),[M,P]}).forEach(function(M){var P=M[0],V=M[1],R=P.x,q=P.y;P.x=Math.round(P.x/F)*F,P.y=Math.round(P.y/F)*F;for(var G=0;G<V.length;G++){var U=V[G],Z=U[0];if(!$.getRoute(P.id,Z.id)){var Q=i(P,Z,U[1],F,R,q),tt=Q[0],et=Q[1],ot=Q[2],rt=Q[3];$.hasRoute(P.id,ot,rt)||$.isAligned(Z.id)||(Z.x+=tt,Z.y+=et,$.addRoute(P.id,Z.id,ot,rt))}}}),l(w,T,T.filter(function(M){return!$.isAligned(M.id)}),F),z.forEach(function(M){$.isAligned(M.id)||(M.x=Math.round(M.x/F)*F,M.y=Math.round(M.y/F)*F),M.links.forEach(function(P){P.links.length==2&&a(M,P,$,F)})}),z.length===0){var B=T[0],L=T[0].links[0];L.x=Math.round(L.x/F)*F,L.y=Math.round(L.y/F)*F,a(B,L,$,F)}}(g.routes,S.mx,S.n,S.size),I=g,O=S.mx,D=k.slice(1).sort(c),A=S.size,H=I.getNodes().length,D.forEach(function($){var w=$.g,T=$.root;new E.default().layout(w,{root:w.getNodes()[0].id});var F=function(B,L,M,P,V,R,q){return L.map(function(G){if(!G[2]&&!G[3]&&M.routes.hasRoute(V,G[0],G[1]))return null;var U=P.copy(),Z=M.copy(),Q=U.getRoot(),tt=Z.hash[V];U.rotate({x:-G[0],y:G[1]});var et=U.getBox(),ot=et[0][1]-et[0][0],rt=et[1][1]-et[1][0];(function(ut,at,ct,ft,vt,_t,gt,j){var nt,xt,bt=at.x+(j[2]||j[0])*gt,Dt=at.y+(j[3]||j[1])*gt;if(o(ut,bt-gt/2,bt+gt/2,Dt-gt/2,Dt+gt/2))t(ut,bt-gt/2*j[0],Dt-gt/2*j[1],ct,ft,j,gt);else{var Ot,wt,kt,Ct,Lt=(j[0]?ct:ft)/gt-1;if(!(Lt<=0)){var Vt=.45*gt;j[0]?(wt=(Ot=bt+gt/2*j[0])+ct*j[0],Ct=(kt=Dt-ft/2-Vt-_t)+ft+2*Vt):(wt=(Ot=bt-ct/2-Vt-vt)+ct+2*Vt,Ct=(kt=Dt+gt/2*j[1])+ft*j[1]),kt>Ct&&(kt=(nt=[Ct,kt])[0],Ct=nt[1]),Ot>wt&&(Ot=(xt=[wt,Ot])[0],wt=xt[1]),o(ut,Ot,wt,kt,Ct)&&t(ut,bt,Dt,ct,ft,j,gt)}}})(Z,tt,ot,rt,Q.x-et[0][0]-ot/2,Q.y-et[1][0]-rt/2,R,G),function(ut,at,ct,ft,vt,_t){var gt=ct.x+vt*(_t[0]||_t[2])-ft.x,j=ct.y+vt*(_t[1]||_t[3])-ft.y;at.translate({x:gt,y:j}),ut.importNodes(at.getNodes())}(Z,U,tt,Q,R,G);var st=function(ut,at){for(var ct,ft,vt=at.length,_t=0,gt=0;gt<vt;gt++){ct=0,ft=0;for(var j=at[gt],nt=ut[j.isn],xt=0;xt<vt;xt++)if(j.isn!=xt){var bt=at[xt],Dt=nt[bt.isn],Ot=.5/(Dt*Dt),wt=j.x-bt.x,kt=j.y-bt.y,Ct=Math.sqrt(Math.pow(wt,2)+Math.pow(kt,2));Ct&&(ct+=Ot*(wt-Dt*wt/Ct),ct+=Ot*(kt-Dt*kt/Ct))}_t+=Math.sqrt(Math.pow(ct,2)+Math.pow(ft,2))}return _t}(B,Z.getNodes().slice(0,q));return{g:Z,s:st,dir:G}}).reduce(function(G,U){return!G||U&&U.s<G.s?U:G})}(O,e,I,w,T,A,H);if(F){I=F.g;var z=w.getRoot().id;return F.dir[2]||F.dir[3]||I.routes.addRoute(T,w.getRoot().id,F.dir[0],F.dir[1]),I.hash[T].links.push(I.hash[z]),void I.hash[z].links.push(I.hash[T])}console.log("Can't position sub tree")}),g=I),g.setGlobalBox(),g},h}();function d(h,g){var x=h.getNodes(),C=0;x.forEach(function(I,O){I.isn=O,C+=I.w+I.h}),C=Math.round(C/(2*x.length)),g.itemPadding?C+=g.itemPadding:C*=2;var k=function(I){for(var O=[],D=I.getNodes(),A=0;A<D.length;A++){var H=O[A]=[];H[D[A].isn]=0,p(D[A],H,A,1)}return O}(h);return{n:x,mx:k,size:C}}function p(h,g,x,C){for(var k=[h],I=[];k.length;){for(var O=0;O<k.length;O++)for(var D=k[O],A=0;A<D.links.length;A++){var H=D.links[A],S=H.isn;S==x||g[S]||(g[S]=C,I.push(H))}C++,k=I,I=[]}}function u(h,g,x){var C=h.findIndex(function(D){return D.id===x});C>0&&h.unshift.apply(h,h.splice(C,1));var k=2*Math.PI/h.length,I=0,O=5*g;h.forEach(function(D,A){D.x=Math.round(Math.cos(I)*O),D.y=Math.round(Math.sin(I)*O),I+=k}),C>0&&h.splice.apply(h,b([C,0],h.splice(0,1),!1))}function s(h,g,x,C){for(var k,I,O=0,D=0,A=0,H=0,S=g.length,$=x.length,w=0;w<$;w++){k=0,I=0;for(var T=x[w],F=h[T.isn],z=0;z<S;z++)if(T.isn!=z){var B=.5/((tt=F[(Q=g[z]).isn])*tt),L=T.x-Q.x,M=T.y-Q.y;(et=Math.sqrt(Math.pow(L,2)+Math.pow(M,2)))&&(k+=B*(L-C*tt*L/et),I+=B*(M-C*tt*M/et))}var P=Math.sqrt(Math.pow(k,2)+Math.pow(I,2));P>D&&(O=T.isn,D=P,A=k,H=I)}var V,R=0,q=0,G=0,U=g[O],Z=h[O];for(z=0;z<S;z++)if(O!=z){B=.5/((tt=Z[(Q=g[z]).isn])*tt);var Q,tt,et,ot=(L=U.x-Q.x)*L,rt=(M=U.y-Q.y)*M;(et=Math.sqrt(Math.pow(ot+rt,3)))&&(R+=B*(1-C*tt*rt/et),q+=B*C*tt*M*L/et,G+=B*(1-C*tt*ot/et))}return[O,D,V=(-A/R+q*H/(G*R))/(1+q*q/(G*R)),(-H-q*V)/G]}function l(h,g,x,C){for(var k=0;k++<100;){var I=s(h,g,x,C),O=I[0],D=I[1],A=I[2],H=I[3];if(D<10)break;g[O].x+=A,g[O].y+=H}}_.default=f;var r=Math.PI/4;function a(h,g,x,C){for(;;){var k=g.links[0];if(k==h&&(k=g.links[1]),h=g,(g=k).links.length>2)break;for(var I=Math.atan2(g.x-h.x,g.y-h.y)+Math.PI,O=2*Math.ceil(I/(2*r))*r,D=2*Math.floor(I/(2*r))*r,A=Math.abs(I-O)<Math.abs(I-D)?[O,D]:[D,O],H=0;H<A.length;H++){var S=i(h,g,A[H],C,h.x,h.y),$=S[0],w=S[1],T=S[2],F=S[3];if(!x.hasRoute(h.id,T,F)){if(x.isAligned(g.id))return;g.x+=$,g.y+=w,x.addRoute(h.id,g.id,T,F);break}}}}function i(h,g,x,C,k,I){return x<=r||x>7*r?[h.x-g.x,n(h.y,g.y,I,C),0,-1]:x<=3*r&&x>r?[n(h.x,g.x,k,C),h.y-g.y,-1,0]:x<=5*r&&x>3*r?[h.x-g.x,n(h.y,g.y,I,C),0,1]:[n(h.x,g.x,k,C),h.y-g.y,1,0]}function n(h,g,x,C){var k=Math.sign(x-g);return h-g-(Math.round((x-g)/C)||k)*C}var e=[[0,1,0,0],[1,0,0,0],[-1,0,0,0],[0,-1,0,0]].concat([[0,1,-1,1],[-1,0,-1,1],[0,1,1,1],[1,0,1,1],[1,0,1,-1],[0,-1,1,-1],[-1,0,-1,-1],[0,-1,-1,-1]]);function t(h,g,x,C,k,I,O){h.getNodes().forEach(function(D){I[1]?Math.sign(D.y-x)==I[1]&&(D.y+=(k+O/2)*I[1]):I[0]&&Math.sign(D.x-g)==I[0]&&(D.x+=(C+O/2)*I[0])})}function o(h,g,x,C,k){for(var I=h.getNodes(),O=0;O<I.length;O++){var D=I[O];if(D.x>=g&&D.x<=x&&D.y>=C&&D.y<=k)return!0}return!1}function c(h,g){var x=h.g.getNodes().length,C=g.g.getNodes().length;return x>C?-1:x===C?0:1}},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0});var b=y(92),E=y(56),m=function(){function v(){this._step=0}return v.prototype.layout=function(f,d){f.root(f.toTree(f.hash[d.root]));var p=f.getNodes();d.levelPadding=d.levelPadding||this._getStep(p),d.itemPadding=d.itemPadding||this._getStep(p),d.dir=d.dir||b.Direction.Bottom,d.rotate=d.dir===b.Direction.Right||d.dir===b.Direction.Left;var u=b.DirVectors[d.dir];this._layout(f,d),f.setBox(),d.dir!==b.Direction.Bottom&&f.rotate(u);var s=f.getBox();return f.translate({x:-1*s[0][0],y:-1*s[1][0]}),f.setBox(),f},v.prototype._layout=function(f,d){var p=this,u=f.getRoot();if(u.x=u.y=0,f.getLevels().length==1)return f._symmetry=!0,"0";var s=u.kids.map(function(o){return new E.default(f,o,d)}),l={};s.forEach(function(o){var c=p._layout(o,d);l[c]?l[c].push(o):l[c]=[o]});for(var r=Object.keys(l).sort(function(o,c){var h=l[o][0],g=l[c][0],x=h._width,C=g._width;if(x>C)return-1;if(x<C)return 1;var k=h.getLevels().length,I=g.getLevels().length;return k>I?-1:k<I||o<c?1:-1}),a=0,i=0,n=0;n<r.length;n++)l[r[n]].length%2==1&&(a++,i=n);var e=!1,t=!1;return a==1?(l[r[i]][0]._symmetry&&(t=!0),e=!0,i!==0&&(r.unshift(r[i]),r.splice(i+1,1))):a===0&&(t=!0),f._symmetry=t,this._layout_place(f,l,r,e,d),f.getIString()},v.prototype._layout_place=function(f,d,p,u,s){for(var l={x:0,y:s.levelPadding},r=!0,a=0;a<p.length;a++)d[p[a]].forEach(function(i){if(u){u=!1,i.translate(l);for(var n=0,e=0,t=i.getLevelBounds(),o=0;o<t.length;o++){var c=t[o],h=c[0],g=c[1];f._bounds[o+1]=[h,g],h<n&&(n=h),g>e&&(e=g)}f._tbounds=[n,e]}else{var x=r?1:0,C=r?0:1;r&&i.mirror();var k=void 0,I=void 0;I=k=999999*(r?-1:1);for(var O=s.itemPadding,D=0;D<i._bounds.length;D++){var A=f.getBounds(D+1,O,s.wide)[x]-i.getBounds(D,O,s.wide)[C];(r&&A>I||!r&&A<I)&&(I=A)}i.translate({x:I,y:l.y});for(var H=0;H<f._bounds.length;H++){var S=void 0;S=H==0||H>i._bounds.length?f._bounds[H][x]:f._bounds[H][x]=i._bounds[H-1][x],(r&&S>k||!r&&S<k)&&(k=S)}f._tbounds[x]=k,r=!r}})},v.prototype._getStep=function(f){if(this._step===0){var d=f.length,p=0;f.forEach(function(u){return p+=u.w+u.h}),this._step=p/d}return this._step},v}();_.default=m},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0});var b=[1,2,4,8,0,16,32,64,128],E=function(){function m(){this._map={}}return m.prototype.getRoute=function(v,f){var d=this._map[v];return d&&d.map[f]||null},m.prototype.addRoute=function(v,f,d,p){this.addPath(v,f,d,p),this.addPath(f,v,-d,-p)},m.prototype.hasRoute=function(v,f,d){var p=this._map[v];return!!p&&(p.dir&this._code(f,d))>0},m.prototype.isAligned=function(v){return!!this._map[v]},m.prototype.isAxisAligned=function(v,f,d){var p=this._map[v];if(!p)return null;for(var u in p.map){var s=p.map[u];if(f&&s.dy||d&&s.dx)return!1}return!0},m.prototype.addPath=function(v,f,d,p,u){var s=this._map[v];s||(s=this._map[v]={map:{},dir:0}),s.map[f]={dx:d,dy:p,points:u},s.dir=s.dir|this._code(d,p)},m.prototype._code=function(v,f){return b[Math.sign(v)+1+3*(Math.sign(f)+1)]},m}();_.default=E},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.split=void 0;var b=y(56);function E(m,v){var f=new b.default;return f.importNodes(m),{g:f,root:v}}_.split=function(m){var v=m.getNodes();if(v.length<3)return[{g:m}];for(var f=v[0],d=[],p=v.length+1;p!=v.length;)p=v.length,v=v.filter(function(r){if(r.links.length==1){var a=m.hash[r.links[0].id];return a&&(a.links=a.links.filter(function(i){return i.id!=r.id})),d.push(r),!1}return!0});if(v.length<2)return d.filter(function(r){return r.links.length>0}).forEach(function(r){r.links[0].links.push(r)}),m.root(m.toTree(f)),[{g:m}];var u={};d.forEach(function(r){return u[r.id]=r});var s=d.filter(function(r){return!u[r.links[0].id]}).map(function(r){return[r]});d.forEach(function(r){var a=u[r.links[0].id];a&&a.links.push(r)});var l=s.map(function(r){for(var a,i=0;a=r[i++];){var n=a.links.length;if(n>1)for(var e=1;e<n;e++){var t=a.links[e];r.push(t)}}var o=r[0].links.splice(0,1)[0].id;return E(r,o)});return[E(v,null)].concat(l)}},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.compose=void 0,_.compose=function(b,E){if(b.length<2)return b[0]||null;var m=b[0].getBox(),v=E.padding,f=b.reduce(function(d,p){var u=p.getBox();return p.translate({x:m[0][1]-u[0][0]+v,y:m[1][0]-u[1][0]}),d.importNodes(p.getNodes()),v+=E.padding+u[0][1]-u[0][0],d});return b.length&&f.setGlobalBox(),f}},function(W,_,y){function b(E,m){m[E.id]=1,E.links.forEach(function(v){m[v.id]||b(v,m)})}Object.defineProperty(_,"__esModule",{value:!0}),_.decompose=void 0,_.decompose=function(E){for(var m=[],v=function(){var d={},p=E.getNodes();if(!p.length)return{value:m};b(p[0],d);var u=E.split(function(s){return!d[s.id]});if(m.push(E),!u)return{value:m};E=u};;){var f=v();if(typeof f=="object")return f.value}}},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(a){for(var i,n=1,e=arguments.length;n<e;n++)for(var t in i=arguments[n])Object.prototype.hasOwnProperty.call(i,t)&&(a[t]=i[t]);return a},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.placeMindmap=void 0;var E=y(1),m=y(39),v=y(93);function f(a){var i=[];return a.forEach(function(n){n.forEach(function(e){!i.includes(e)&&e&&i.push(e)})}),i}function d(a,i){var n=[];return function e(t){return t.forEach(function(o){var c=a.getItem(o[1]);if(c.$connection)e(c.$connection);else{var h=c.parent&&c.parent.toString()||a.getItem(a.getId(0)).id,g=[];for(g.push(c.id.toString());h;)g.push(h.toString()),h=a.getItem(h).parent;g.reverse(),n.push(g)}}),n}(i),n}function p(a,i,n,e,t,o){var c=f(a),h=0,g=i.margin,x=g.itemX,C=g.itemY,k=a.map(function(O){var D=[],A=[],H=e;O.forEach(function(w){if(t)(T=b({},n.getItem(w))).parent&&(H-=+x+ +T.width),D.push(H),A.push(h);else{var T=b({},n.getItem(w));D.push(H),A.push(h),H+=+x+ +T.width}});var S=O.map(function(w,T){var F=b({},n.getItem(w));return F._x=D[T],F._y=A[T],F}),$=function(w,T){for(var F,z=0,B=0;B<w.length;B++){var L=(F=T.getItem(w[1]))===null||F===void 0?void 0:F.height;L&&L>z&&(z=L)}return z}(O,n);return h+=C+$,S}),I=c.map(function(O){var D=[];k.forEach(function(S){var $=S.find(function(w){return w.id===O},!0);$&&D.push({x:$._x,y:$._y})});var A=D[0].x,H=D.reduce(function(S,$){return S+$.y},0)/D.length;return{id:O,x:A,y:H}});o.push(I[0]),c.forEach(function(O,D){if(O){var A=n.getItem(O);A.x=I[D].x,A.y=I[D].y,delete A._x,delete A._y}})}function u(a,i,n){f(a).forEach(function(e){e&&n.getIndex(e)!==0&&(n.getItem(e).y+=i)})}var s=function(a,i,n){return n.indexOf(a)===i};function l(a,i){var n=i.map(function(e){var t=!1;return e.map(function(o){if(!t)return a.getItem(o).open===!1&&(t=!0),o}).filter(function(o){return o})});return n.map(function(e){return JSON.stringify(e)}).filter(s).map(function(e){return JSON.parse(e)})}function r(a,i,n,e,t,o){if(o){var c=l(a,d(a,n));return e=function(g,x,C){var k=[];return g.forEach(function(I){k.push(function(O,D,A){var H=[];return O.length>1&&O.forEach(function(S,$){var w=D.getItem(S);$!==0&&!w.hidden&&D.getItem(w.parent).open&&H.push(w.width+A.margin.itemX)}),H.length||H.push(0),H.reduce(function(S,$){return S+$})}(I,x,C))}),Math.max.apply(Math,k)}(c,a,i),p(c,i,a,e,!0,t),{allLeftBranches:c,leftBranchWidth:e}}var h=l(a,d(a,n));return p(h,i,a,e,!1,t),{allRightBranches:h}}_.placeMindmap=function(a,i){var n=a.getRoots();if(n.length===1){var e=a.getItem(n[0]);if(e!=null&&e.$connection){var t,o,c=function(I,O,D){var A,H,S=D.typeConfig,$=I.$connection,w=[],T=[],F=((A=S==null?void 0:S.side)===null||A===void 0?void 0:A.hasOwnProperty("left"))&&S.side.left.length,z=((H=S==null?void 0:S.side)===null||H===void 0?void 0:H.hasOwnProperty("right"))&&S.side.right.length;if(!S||(S==null?void 0:S.direction)!=="left"&&(S==null?void 0:S.direction)!=="right")if(S&&(F||z))$.forEach(function(L,M){F&&S.side.left.includes(L[1])?w.push(L):z&&S.side.right.includes(L[1])?T.push(L):M%2?w.push(L):T.push(L)});else{var B=Math.floor($.length/2);$.forEach(function(L,M){var P=O.getItem(L[1]);P.dir==="verticalLeft"?w.push(L):P.dir==="verticalRight"||M<B?T.push(L):w.push(L)})}else $.forEach(function(L){S.direction==="left"?w.push(L):T.push(L)});return{leftTree:w,rightTree:T}}(e,a,i),h=c.leftTree,g=c.rightTree,x=[],C=0;[h,g].forEach(function(I,O){if(I.length)if(O===0){var D=r(a,i,I,C,x,!0);o=D.allLeftBranches,C=D.leftBranchWidth}else D=r(a,i,I,C,x),t=D.allRightBranches}),h.length&&g.length&&function(I,O,D,A,H){I[1]&&I[0].y>I[1].y?(u(O,I[0].y-I[1].y,A),H.y=I[0].y):I[1]&&I[0].y<I[1].y&&(u(D,I[1].y-I[0].y,A),H.y=I[1].y)}(x,t,o,a,e);var k=[];[h,g].forEach(function(I,O){if(I.length){var D=O===0?"verticalLeft":"verticalRight",A=D==="verticalLeft"?o:t;!k.includes(D)&&k.push(D),e.dir=k,I.forEach(function(H){a.getItem(H[1]).dir=D}),function(H,S,$,w,T){H.forEach(function(F){var z=$.getItem(F),B=z.$connection;z.id!==T.id&&(z.dir=S),B&&(z.$count=B.length,B.forEach(function(L){if(H.includes(L[1])){var M=$.getItem(L[1]),P=$.getItem(L[0]);P.connectType="curved",(0,m.directLinkPath)(P,z,M,w)}}))})}(f(A),D,a,i,e)}}),Array.isArray(e.dir)&&((0,E.isEmptyObj)(e.openDir)&&(e.openDir={}),e.dir.includes("verticalLeft")&&!Object.keys(e.openDir).includes("left")&&(e.openDir.left=e.open===void 0||e.open),e.dir.includes("verticalRight")&&!Object.keys(e.openDir).includes("right")&&(e.openDir.right=e.open===void 0||e.open),e.open===!1&&(e.openDir={right:!1,left:!1})),e.$connection.forEach(function(I){for(var O=a.getItem(I[1]).dir.toLowerCase(),D=0,A=Object.entries(e.openDir);D<A.length;D++){var H=A[D],S=H[0],$=H[1];O.includes(S)&&!$&&a.update(I[1],{hidden:!0},!0)}})}else e.x=0,e.y=0;(0,v.setHeaderColor)(a)}}},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.placeOrgonogram=void 0;var b=y(39),E=y(93);function m(f,d,p,u,s){var l,r=d.$connection,a=d.$assistants,i=(l=d.$partners)===null||l===void 0?void 0:l.common;(d.dir==="vertical"&&(i!=null&&i.length)||d.$level===0&&(d.openDir||Array.isArray(d.dir))||d.dir==="verticalLeft"||d.dir==="verticalRight")&&(delete d.dir,delete d.openDir);var n=d.dir==="vertical",e=n?p.margin.itemX/2:0,t=0,o=0,c=0;if(r&&d.open!==!1&&!d.assistant&&!d.partner){for(var h=0,g=0;g<r.length;g++)if(!(H=f.getItem(r[g][1])).hidden&&!H.assistant&&!H.partner){var x=m(f,H,p,u+e,e);n?t=Math.max(t,x):t+=x,h++}h&&!n&&(t+=(h-1)*p.margin.itemX),d.$count=h}if(i!=null&&i.length){for(var C=0,k=0,I=0,O=0;O<i.length;O++){var D=(H=f.getItem(i[O])).height+p.margin.itemY,A=H.width+p.margin.itemX;H.$even=!!(O%2),H.hidden||(H.$even?k+=D:C+=D,I=Math.max(I,A),++d.$count)}c=Math.max(C,k),t=Math.max(t,k?2*I+d.width:2*Math.max(I-p.margin.itemX/2,d.width+p.margin.itemX/2)),d.$partners.leftHeight=C,d.$partners.rightHeight=k}if(a!=null&&a.length){for(I=0,C=0,k=0,O=0;O<a.length;O++){var H;D=(H=f.getItem(a[O])).height+p.margin.itemY,A=H.width+p.margin.itemX/2,H.$even=!!(O%2),H.hidden||(H.$even?k+=D:C+=D,I=Math.max(I,A),++d.$count)}n?(t=Math.max(t,I),o=C+k):(t=Math.max(t,2*I),o=Math.max(k,C))}if(t=Math.max(d.width,t),n)d.x=u;else{var S=p.gridStep||1;A=(t-d.width)/2+u,d.x=Math.ceil(A/S)*S}return d.y=0,d.$width=t,d.$baseHeight=c||d.height+p.margin.itemY,d.$height=o+d.$baseHeight,t+s}function v(f,d,p,u,s,l){var r,a=d.$connection,i=d.$assistants,n=(r=d.$partners)===null||r===void 0?void 0:r.common,e=d.dir==="vertical",t=0;if(d.x+=p,d.y+=u,s.gridStep&&(d.y=Math.ceil(d.y/s.gridStep)*s.gridStep),i==null?void 0:i.length)for(var o=s.margin.itemX/2,c=d.x+d.width/2,h=d.y+d.$baseHeight,g=d.y+d.$baseHeight,x=0;x<i.length;x++){var C=(D=f.getItem(i[x])).height+s.margin.itemY;D.hidden||(e?(D.x=d.x+o,D.y=g,g+=C):D.$even?(D.y=g,D.x=c+o,g+=C):(D.y=h,D.x=c-(o+D.width),h+=C))}if(n!=null&&n.length){var k=d.y+(d.$baseHeight/2-(d.height+s.margin.itemY)/2),I=k-d.y,O=k-I+(d.$baseHeight-d.$partners.leftHeight)/2;if(g=k-I+(d.$baseHeight-d.$partners.rightHeight)/2,n.length>1)for(x=0;x<n.length;x++)C=(D=f.getItem(n[x])).height+s.margin.itemY,D.hidden||(D.$even?(D.x=d.x+d.width+s.margin.itemX,D.y=g,g+=C):(D.x=d.x-D.width-s.margin.itemX,D.y=O,O+=C));else d.x=d.x+d.width/2+s.margin.itemX/2,(D=f.getItem(n[0])).x=d.x-D.width-s.margin.itemX,D.y=O;d.y=k}if(u+=d.$height,d.open!==!1&&a){for(var D=void 0,A=0;A<a.length;A++)if(!(D=f.getItem(a[A][1])).hidden){if(!D.assistant&&!D.partner){var H=v(f,D,p,u,s);e?(u+=H,t+=H):(t=Math.max(t,H),p+=D.$width+s.margin.itemX)}(0,b.directLinkPath)(f.getItem(a[A][0]),d,D,s)}}return d.$height+t}_.placeOrgonogram=function(f,d){var p=f.getRoots();if(p.length===1){var u=f.getItem(p[0]);m(f,u,d,0,0),v(f,u,0,0,d),(0,E.setHeaderColor)(f)}}},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(u){for(var s,l=1,r=arguments.length;l<r;l++)for(var a in s=arguments[l])Object.prototype.hasOwnProperty.call(s,a)&&(u[a]=s[a]);return u},b.apply(this,arguments)},E=this&&this.__spreadArray||function(u,s,l){if(l||arguments.length===2)for(var r,a=0,i=s.length;a<i;a++)!r&&a in s||(r||(r=Array.prototype.slice.call(s,0,a)),r[a]=s[a]);return u.concat(r||Array.prototype.slice.call(s))};Object.defineProperty(_,"__esModule",{value:!0}),_.Editor=_.EditorEvents=void 0;var m,v=y(0),f=y(2),d=y(14);(function(u){u.beforeEditorOpen="beforeEditorOpen",u.afterEditorOpen="afterEditorOpen",u.beforeEditorClose="beforeEditorClose",u.afterEditorClose="afterEditorClose",u.beforeEditorEditing="beforeEditorEditing",u.afterEditorEditing="afterEditorEditing"})(m||(_.EditorEvents=m={}));var p=function(){function u(s){var l=this;this._currentValue=" ",this.data=s.data,this.events=s.events,this._keyManager=new d.KeyManager,this._dblDuration=300,this._documentClick=function(r){(0,f.locate)(r,"dhx_editor_id")||l.closeEditor()},this._handlers={edit:function(r){l.edit(r.target.innerText)},didInsert:function(r){var a=r==null?void 0:r.el;if(a!=null&&a.childNodes[0]){var i=document.createRange(),n=window.getSelection();i.setStart(a.childNodes[0],a.innerText.length),i.collapse(!0),n&&(n.removeAllRanges(),n.addRange(i)),a.focus()}}}}return u.prototype.openEditor=function(s,l,r){var a,i;l===void 0&&(l="text");var n=this.data.getItem(s);if(!n||this._editable||!this.events.fire(m.beforeEditorOpen,[s,l,r]))return!1;this._addHotkeys(),this._initOuterClick(),this.data.update(s,{$editable:!0},!0),this._editableItem=n,this._editable=!0,this._key=l,this._subId=r;var e=this._editableItem.$item.getBaseType();if(e==="group"||e==="swimlane")if(r){var t=this._editableItem,o=t.subHeaderRows,c=t.subHeaderCols,h=[];o!=null&&o.enable&&(!((a=o==null?void 0:o.headers)===null||a===void 0)&&a.length)&&(h=o.headers);var g=[];c!=null&&c.enable&&(!((i=c==null?void 0:c.headers)===null||i===void 0)&&i.length)&&(g=c.headers);var x=E(E([],h,!0),g,!0).find(function(C){return(C==null?void 0:C.id)===r});this._currentValue=x==null?void 0:x[l]}else this._currentValue=this._editableItem.header[l];else this._currentValue=this._editableItem[l];return this.events.fire(m.afterEditorOpen,[s,this._key,this._subId]),!0},u.prototype.closeEditor=function(){var s=this._editableItem.id;return!!this.events.fire(m.beforeEditorClose,[s,this._key,this._subId])&&(this._removeHotkeys(),this._removeClickListener(),this.data.update(s,{$editable:!1},!0),this._editable=!1,this.events.fire(m.afterEditorClose,[s,this._key,this._subId]),this._editableItem=null,this._subId=null,this._currentValue=" ",!0)},u.prototype.isEditable=function(){return this._editable},u.prototype.destructor=function(){this._keyManager&&this._keyManager.destructor(),this.data=this.events=this._editable=this._editableItem=this._currentValue=this._keyManager=null},u.prototype.render=function(){var s=this._editableItem.id;return(0,v.el)("div.dhx_diagram_inline_editor",{dhx_editor_id:s+"_editor",contentEditable:!0,oninput:this._handlers.edit,_hooks:{didInsert:this._handlers.didInsert}},this._currentValue||" ")},u.prototype.edit=function(s){var l,r,a,i,n=this;if(this._editableItem&&this.events.fire(m.beforeEditorEditing,[s,this._currentValue,this._editableItem.id,this._key,this._subId])){var e=this._editableItem,t=e.id,o=e.header,c=e.$item,h=e.subHeaderCols,g=e.subHeaderRows;this._currentValue=s;var x=c.getBaseType();if(x==="group"||x==="swimlane")if(this._subId){var C,k=(a=g==null?void 0:g.headers)===null||a===void 0?void 0:a.findIndex(function(O){return(O==null?void 0:O.id)===n._subId}),I=(i=h==null?void 0:h.headers)===null||i===void 0?void 0:i.findIndex(function(O){return(O==null?void 0:O.id)===n._subId});I>-1&&((C=E([],h.headers,!0))[I][this._key]=this._currentValue,this.data.update(t,{subHeaderCols:b(b({},h),{headers:C})})),k>-1&&((C=E([],g.headers,!0))[k][this._key]=this._currentValue,this.data.update(t,{subHeaderRows:b(b({},g),{headers:C})}))}else this.data.update(t,{header:b(b({},o),(l={},l[this._key]=this._currentValue,l))});else this.data.update(t,((r={})[this._key]=this._currentValue,r));this.events.fire(m.afterEditorEditing,[this._currentValue,t,this._key,this._subId])}},u.prototype._addHotkeys=function(){var s=this;this._keyManager.addHotKey("escape",function(){s.closeEditor()})},u.prototype._removeHotkeys=function(){this._keyManager.removeHotKey()},u.prototype._initOuterClick=function(){var s=this;setTimeout(function(){document.addEventListener("pointerdown",s._documentClick)},this._dblDuration)},u.prototype._removeClickListener=function(){document.removeEventListener("pointerdown",this._documentClick)},u}();_.Editor=p},function(W,_,y){var b=this&&this.__spreadArray||function(d,p,u){if(u||arguments.length===2)for(var s,l=0,r=p.length;l<r;l++)!s&&l in p||(s||(s=Array.prototype.slice.call(p,0,l)),s[l]=p[l]);return d.concat(s||Array.prototype.slice.call(p))};Object.defineProperty(_,"__esModule",{value:!0}),_.CellManager=_.CellManagerEvents=void 0;var E,m=y(1),v=y(0);(function(d){d.beforeCellsAdd="beforeCellsAdd",d.afterCellsAdd="afterCellsAdd",d.beforeCellsMove="beforeCellsMove",d.afterCellsMove="afterCellsMove",d.beforeCellsRemove="beforeCellsRemove",d.afterCellsRemove="afterCellsRemove",d.beforeCellsValidation="beforeCellsValidation",d.afterCellsValidation="afterCellsValidation"})(E||(_.CellManagerEvents=E={}));var f=function(){function d(p,u){this.events=u,this.data=p,this.swimlane=null}return d.prototype.setSwimlane=function(p){var u,s=this.data.getItem(p);return((u=s==null?void 0:s.$item)===null||u===void 0?void 0:u.getBaseType())==="swimlane"&&(this.swimlane=s,!0)},d.prototype.resetSwimlane=function(){var p=this;(0,v.awaitRedraw)().then(function(){p.swimlane=null})},d.prototype.add=function(p,u,s){var l=this;(0,v.awaitRedraw)().then(function(){var r,a,i=l.getDirectionType(u),n=l.getUniqueLayout(),e=i==="col"?((r=n[0])===null||r===void 0?void 0:r.length)-1:(n==null?void 0:n.length)-1;if(p>=0&&p<=e&&l.events.fire(E.beforeCellsAdd,[l.swimlane.id])&&(s||l.validation(p,u,"add"))){var t,o,c=l.swimlane.layout,h=p,g=i==="col"?c[0][h]:c[h][0],x=l.data.getItem(g),C=i==="col"?x==null?void 0:x.$colCount:x==null?void 0:x.$rowCount,k=l.swimlane[i==="col"?"subHeaderCols":"subHeaderRows"],I=(k==null?void 0:k.enable)&&((a=k==null?void 0:k.headers)===null||a===void 0?void 0:a.length);I&&(t=l.swimlane[i==="col"?"subHeaderCols":"subHeaderRows"].headers,o=l.getSubHeaderIndex(l.getCellId(p,i),i));var O=1/0,D=h;u!=="right"&&u!=="down"||(D+=C,I&&o++),D<0&&(D=0);for(var A={},H={},S={},$=0;$<c.length;$++)for(var w=c[$],T=0;T<w.length;T++){var F;if(i==="col"&&((F=l.data.getItem(w[T]))&&O>F.width&&(O=F.width),T===h&&(H[F.id]?c[$].splice(D,0,H[F.id]):(A[z=(0,m.uid)()]={id:z,type:"$sgroup"},c[$].splice(D,0,z),H[F.id]=z))),i==="row"&&((F=l.data.getItem(w[T]))&&O>F.height&&(O=F.height),$===h)){var z=(0,m.uid)();T===0&&c.splice(D,0,[]),H[F.id]?c[D][T]=H[F.id]:(A[z]={id:z,type:"$sgroup"},c[D][T]=z,H[F.id]=z)}}for($=0;$<c.length;$++)for(w=c[$],T=0;T<w.length;T++){if(i==="col"){var B=w[T];T>D&&!S[B]&&(l.data.eachChild(B,function(M){M.x+=O}),S[B]=!0)}i==="row"&&(B=w[T],$>D&&!S[B]&&(l.data.eachChild(B,function(M){M.y+=O}),S[B]=!0))}I&&t.splice(o,0,{text:"Untitled",id:(0,m.uid)()});var L={layout:c};i==="col"?L.width=l.swimlane.width+O:L.height=l.swimlane.height+O,l.data.add(Object.values(A)),l.data.update(l.swimlane.id,L),l.events.fire(E.afterCellsAdd,[l.swimlane.id])}})},d.prototype.move=function(p,u,s){var l=this;(0,v.awaitRedraw)().then(function(){var r,a,i,n=l.getDirectionType(u),e=l.getUniqueLayout(),t=n==="col"?((a=e[0])===null||a===void 0?void 0:a.length)-1:(e==null?void 0:e.length)-1;if(p>=0&&p<=t&&l.events.fire(E.beforeCellsMove,[l.swimlane.id])&&(s||l.validation(p,u,"move"))){var o,c,h=l.swimlane.layout,g=l.swimlane[n==="col"?"subHeaderCols":"subHeaderRows"],x=(g==null?void 0:g.enable)&&((i=g==null?void 0:g.headers)===null||i===void 0?void 0:i.length);x&&(o=l.swimlane[n==="col"?"subHeaderCols":"subHeaderRows"].headers,c=l.getSubHeaderIndex(l.getCellId(p,n),n));for(var C=p,k=n==="col"?h[0][C]:h[C][0],I=l.data.getItem(k),O=u==="right"||u==="down"?c+1:c-1,D=l.swimlane[n==="col"?"subHeaderCols":"subHeaderRows"].headers[O].id,A=l.data.getItem(l.getSubHeaderCellId(D)),H=n==="col"?I==null?void 0:I.$colCount:I==null?void 0:I.$rowCount,S=n==="col"?A==null?void 0:A.$colCount:A==null?void 0:A.$rowCount,$=u==="left"||u==="up"?C-S:C+H,w={},T=[],F=0;F<h.length;F++)for(var z=h[F],B=function(M){var P,V;if(n==="col"&&M===C){var R=h[F][C],q=h[F][$],G=l.data.getItem(R),U=l.data.getItem(q);w[R]||(l.data.eachChild(R,function(tt){u==="left"?tt.x-=U.width:tt.x+=U.width}),w[R]=!0),w[q]||(l.data.eachChild(q,function(tt){u==="left"?tt.x+=G.width:tt.x-=G.width}),w[q]=!0),F===0&&x&&(P=[o[O],o[c]],o[c]=P[0],o[O]=P[1]),T[F]=h[F].splice(M,H)}if(n==="row"&&F===C){R=h[C][M],q=h[$][M];var Z=l.data.getItem(R),Q=l.data.getItem(q);w[R]||(l.data.eachChild(R,function(tt){u==="up"?tt.y-=Q.height:tt.y+=Q.height}),w[R]=!0),w[q]||(l.data.eachChild(q,function(tt){u==="up"?tt.y+=Z.height:tt.y-=Z.height}),w[q]=!0),M===z.length-1&&(x&&(V=[o[O],o[c]],o[c]=V[0],o[O]=V[1]),T.push(h.splice(F,H)))}},L=0;L<z.length;L++)B(L);for(u!=="right"&&u!=="down"||($=C+S),F=0;F<h.length;F++)for(z=h[F],L=0;L<z.length;L++)(u==="left"&&L===$||u==="right"&&L===C)&&(r=h[F]).splice.apply(r,b([$,0],T[F],!1)),(u==="up"&&F===$||u==="down"&&F===C)&&L===0&&h.splice.apply(h,b([$,0],T[0],!1));l.data.update(l.swimlane.id,l.swimlane),l.events.fire(E.afterCellsMove,[l.swimlane.id])}})},d.prototype.remove=function(p,u,s){var l=this;(0,v.awaitRedraw)().then(function(){var r,a,i=u==="col"?"left":"up",n=l.getUniqueLayout(),e=u==="col"?((r=n[0])===null||r===void 0?void 0:r.length)-1:(n==null?void 0:n.length)-1;if(p>=0&&p<=e&&l.events.fire(E.beforeCellsRemove,[l.swimlane.id])&&(s||l.validation(p,i,"remove"))){var t,o,c=l.swimlane.layout,h=l.swimlane[u==="col"?"subHeaderCols":"subHeaderRows"],g=(h==null?void 0:h.enable)&&((a=h==null?void 0:h.headers)===null||a===void 0?void 0:a.length);g&&(t=l.swimlane[u==="col"?"subHeaderCols":"subHeaderRows"].headers,o=l.getSubHeaderIndex(l.getCellId(p,u),u));for(var x=p,C=u==="col"?c[0][x]:c[x][0],k=l.data.getItem(C),I={},O={},D=[],A=0;A<c.length;A++)for(var H=c[A],S=0;S<H.length;S++){var $=c[A][S];u==="col"&&S===x||u==="row"&&A===x?(I[$]=!0,g&&(u==="col"&&A===0||u==="row"&&S===0)&&t.splice(o,1)):I[$]||(D[A]?D[A].push($):D[A]=[$]),I[$]||O[$]||(u==="col"&&x<S?(l.data.eachChild($,function(T){T.x-=k.width}),O[$]=!0):u==="row"&&x<A&&(l.data.eachChild($,function(T){T.y-=k.height}),O[$]=!0))}var w={layout:D.filter(function(T){return T})};u==="col"?w.width=l.swimlane.width-k.width:w.height=l.swimlane.height-k.height,l.data.remove(Object.keys(I)),l.data.update(l.swimlane.id,w),l.events.fire(E.afterCellsRemove,[l.swimlane.id])}})},d.prototype.validation=function(p,u,s){var l,r=this.getDirectionType(u),a=this.getUniqueLayout(),i=r==="col"?((l=a[0])===null||l===void 0?void 0:l.length)-1:(a==null?void 0:a.length)-1;if(p>=0&&p<=i&&this.events.fire(E.beforeCellsValidation,[this.swimlane.id,s])){if(i===0&&s!=="add")return this.events.fire(E.afterCellsValidation,[this.swimlane.id,!1,s]),!1;var n,e=this.swimlane.layout,t=p,o=!0;if(t>=0)for(var c=0;c<e.length;c++)for(var h=e[c],g=0;g<h.length;g++){var x=r==="col"?h[t]:e[t][g];if(r==="col"&&g===t){var C=this.data.getItem(x).$colCount;if(c===0)n=C;else if(n!==C){if(s==="remove"||s==="move")return this.events.fire(E.afterCellsValidation,[this.swimlane.id,!1,s]),!1;o=!1}}if(r==="row"&&c===t){var k=this.data.getItem(x).$rowCount;if(g===0)n=k;else if(n!==k){if(s==="remove"||s==="move")return this.events.fire(E.afterCellsValidation,[this.swimlane.id,!1,s]),!1;o=!1}}}if(u&&!o||s==="move"){var I=r==="col"?e[0][t]:e[t][0],O=this.data.getItem(I),D=r==="col"?O==null?void 0:O.$colCount:O==null?void 0:O.$rowCount;if(u==="right"||u==="down"?t+=D:t-=1,t>=0&&!(r==="row"&&t>e.length-1))for(c=0;c<e.length;c++)for(h=e[c],g=0;g<h.length;g++){var A=r==="col"?h[t]:e[t][g];if(r==="col"&&g===t){if(C=this.data.getItem(A).$colCount,c===0)n=C;else if(n!==C)return this.events.fire(E.afterCellsValidation,[this.swimlane.id,!1,s]),!1}if(r==="row"&&c===t){if(k=this.data.getItem(A).$rowCount,g===0)n=k;else if(n!==k)return this.events.fire(E.afterCellsValidation,[this.swimlane.id,!1,s]),!1}}}return this.events.fire(E.afterCellsValidation,[this.swimlane.id,!0,s]),!0}},d.prototype.getSubHeaderCellIndex=function(p){if(this.swimlane&&arguments.length){var u=this.getSubHeaderType(p),s=this.getSubHeaderCellId(p);return this.getCellIndex(s,u)}},d.prototype.getSubHeaderCellId=function(p){var u;if(this.swimlane&&arguments.length){var s=this.getSubHeaderType(p),l=(u=this.swimlane[s==="col"?"subHeaderCols":"subHeaderRows"])===null||u===void 0?void 0:u.headers;if(l!=null&&l.length){for(var r=l.findIndex(function(o){return o.id===p}),a=[],i=0;i<this.swimlane.layout.length;i++)for(var n=this.swimlane.layout[i],e=0;e<n.length;e++){var t=n[e];(s==="col"&&i===0||s==="row"&&e===0)&&!a.includes(t)&&a.push(t)}return a[r]}}},d.prototype.getSubHeaderType=function(p){var u;if(this.swimlane&&arguments.length){var s,l=this.swimlane,r=l.subHeaderCols,a=l.subHeaderRows,i=(a==null?void 0:a.enable)&&((u=a==null?void 0:a.headers)===null||u===void 0?void 0:u.length),n=(r==null?void 0:r.enable)&&(r==null?void 0:r.headers.length),e=-1,t=-1;return i&&(e=a.headers.findIndex(function(o){var c=o.id;return p===c}),e!==-1&&(s="row")),n&&(t=r.headers.findIndex(function(o){var c=o.id;return p===c}),t!==-1&&(s="col")),s}},d.prototype.getCellIndex=function(p,u){var s,l;if(this.swimlane&&(!((l=(s=this.swimlane)===null||s===void 0?void 0:s.groupChildren)===null||l===void 0)&&l.includes(p))&&!(arguments.length<2)){for(var r=this.swimlane.layout,a=0;a<r.length;a++)for(var i=r[a],n=0;n<i.length;n++)if(i[n]==p)return u==="col"?n:a}},d.prototype.getCellId=function(p,u){if(this.swimlane&&!(arguments.length<2))return this.swimlane.layout[u==="row"?p:0][u==="col"?p:0]},d.prototype.getSubHeaderIndex=function(p,u){var s,l;if(this.swimlane&&(!((l=(s=this.swimlane)===null||s===void 0?void 0:s.groupChildren)===null||l===void 0)&&l.includes(p))&&!(arguments.length<2))for(var r=this.swimlane.layout,a={},i=-1,n=0;n<r.length;n++)for(var e=r[n],t=0;t<e.length;t++){var o=e[t];if(!a[o]&&((u==="col"&&n===0||u==="row"&&t===0)&&i++,a[o]=!0,p==o))return i}},d.prototype.getDirectionType=function(p){return p==="left"||p==="right"||p==="col"?"col":"row"},d.prototype.getUniqueLayout=function(){if(this.swimlane){for(var p=[],u=0;u<this.swimlane.layout.length;u++){var s=this.swimlane.layout[u];p[u]||(p[u]=[]);for(var l=0;l<s.length;l++){var r=s[l];p[u].includes(r)||p[u].push(r)}}return p}},d}();_.CellManager=f},function(W,_,y){var b,E=this&&this.__extends||(b=function(u,s){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,r){l.__proto__=r}||function(l,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(l[a]=r[a])},b(u,s)},function(u,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function l(){this.constructor=u}b(u,s),u.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}),m=this&&this.__assign||function(){return m=Object.assign||function(u){for(var s,l=1,r=arguments.length;l<r;l++)for(var a in s=arguments[l])Object.prototype.hasOwnProperty.call(s,a)&&(u[a]=s[a]);return u},m.apply(this,arguments)},v=this&&this.__spreadArray||function(u,s,l){if(l||arguments.length===2)for(var r,a=0,i=s.length;a<i;a++)!r&&a in s||(r||(r=Array.prototype.slice.call(s,0,a)),r[a]=s[a]);return u.concat(r||Array.prototype.slice.call(s))};Object.defineProperty(_,"__esModule",{value:!0}),_.Line=void 0;var f=y(0),d=y(1),p=function(u){function s(l,r){var a=u.call(this,l,r)||this;return a.id=a.config.id=l.id||(0,d.uid)(),l.width&&(l.width=parseFloat(l.width)),l.height&&(l.height=parseFloat(l.height)),l.x&&(l.x=parseFloat(l.x)),l.y&&(l.y=parseFloat(l.y)),l.strokeWidth&&(l.strokeWidth=parseFloat(l.strokeWidth)),a}return E(s,u),s.prototype.getBaseType=function(){return"line"},s.prototype.setDefaults=function(l,r){return l.connectType=l.connectType==="curved"?"elbow":l.connectType||"elbow",l.stroke=l.stroke||(r==null?void 0:r.stroke)||"#CCC",l.strokeType=l.strokeType||(r==null?void 0:r.strokeType)||l.type,l.strokeWidth=l.strokeWidth||(r==null?void 0:r.strokeWidth)||2,l.cornersRadius=l.cornersRadius||(r==null?void 0:r.cornersRadius)||0,l.backArrow=l.backArrow||(r==null?void 0:r.backArrow)||"none",l.forwardArrow=l.forwardArrow||(r==null?void 0:r.forwardArrow)||"none",l},s.prototype.getBox=function(){var l=this.config.points.reduce(function(t,o){return t.x=Math.max(t.x,o.x),t.y=Math.max(t.y,o.y),t},{x:0,y:0}),r=l.x-this.config.x,a=l.y-this.config.y,i=this.config.x,n=i+r,e=this.config.y;return{left:i,right:n,top:e,bottom:e+a}},s.prototype.render=function(){var l=this.config,r=l.id,a=l.stroke,i=l.strokeWidth,n=this._getPoints(),e=this._getArrowLine()||[];return(0,f.sv)("g",{"data-dhx-id":r,_key:r,class:"dhx_diagram_item dhx_diagram_line "+(this.config.$selected?"dhx_diagram_line--selected":"")+(this.config.css||"")},v([(0,f.sv)("path",{d:n,fill:"none","stroke-dasharray":this._getType(),"stroke-linejoin":"round","stroke-width":i,stroke:a})],e,!0))},s.prototype._getType=function(){if(this.config.strokeType&&(this.config.type=this.config.strokeType),this.config.type)switch(this.config.type){case"line":default:return"";case"dash":return"5, 5"}},s.prototype._getPoints=function(){return this._getStringPoints()},s.prototype._getStringPoints=function(){return this.config.width=Math.abs(this.config.points[this.config.points.length-1].x-this.config.points[0].x),this.config.height=Math.abs(this.config.points[this.config.points.length-1].y-this.config.points[0].y),this.config.x=this.config.points[0].x,this.config.y=this.config.points[0].y,this.config.connectType!=="straight"&&this.config.connectType!=="curved"||(this.config.points=[this.config.points[0],this.config.points[this.config.points.length-1]],this.config.connectType!=="curved")?"M ".concat(this.config.x,",").concat(this.config.y," ")+this.config.points.map(function(l){return l.x1&&l.y1?"Q".concat(l.x1,",").concat(l.y1," ").concat(l.x,",").concat(l.y):"L "+l.x+","+l.y}).join(" "):this._getCurvedPoints(this.config)},s.prototype._getCurvedPoints=function(l){var r=l.points[0].x,a=l.points[1].x,i=l.points[0].y,n=l.points[1].y,e=.5*(a-r),t=r+e,o=a-e;return"M".concat(r,",").concat(i," C").concat(t,",").concat(i," ").concat(o,",").concat(n," ").concat(a,",").concat(n)},s.prototype._getArrowLine=function(){var l=this.config.points,r=this.config.backArrow==="filled",a=this.config.forwardArrow==="filled";if(r||a)return[r?this._getArrow(l[1],l[0]):null,a?this._getArrow(l[l.length-2],l[l.length-1]):null]},s.prototype._getArrow=function(l,r){var a=l.x-r.x,i=l.y-r.y,n=a===0&&i===0,e=1/Math.sqrt(Math.pow(a,2)+Math.pow(i,2)),t=a*e,o=i*e,c={x:r.x,y:r.y},h=r.x-5,g=r.y-5,x=r.x+5,C=r.y-5,k=Math.atan((r.x-l.x)/(r.y-l.y))*(-180/3.14);l.y>r.y&&(k+=180);var I={};return n||(I.transform="translate(".concat(t," ").concat(o,") rotate(").concat(k,",").concat(c.x,",").concat(c.y,")")),(0,f.sv)("path",m({d:"M".concat(h,",").concat(g," L").concat(c.x,",").concat(c.y," L").concat(x,",").concat(C," Z"),class:"dhx_diagram_arrow "+this.getCss(),"shape-rendering":"auto",stroke:this.config.stroke,fill:this.config.stroke},I))},s}(y(54).BaseItem);_.Line=p},function(W,_,y){var b,E=this&&this.__extends||(b=function(r,a){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(i[e]=n[e])},b(r,a)},function(r,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function i(){this.constructor=r}b(r,a),r.prototype=a===null?Object.create(a):(i.prototype=a.prototype,new i)}),m=this&&this.__assign||function(){return m=Object.assign||function(r){for(var a,i=1,n=arguments.length;i<n;i++)for(var e in a=arguments[i])Object.prototype.hasOwnProperty.call(a,e)&&(r[e]=a[e]);return r},m.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.LineTitle=void 0;var v=y(0),f=y(2),d=y(1),p=y(28),u=y(19),s=y(40),l=function(r){function a(i,n){var e=r.call(this,i,n)||this;return e.id=e.config.id=i.id||(0,d.uid)(),e.config=e.setDefaults(i),e}return E(a,r),a.prototype.render=function(){var i=this.parent.$level+(this.parent.$group||this.parent.$selected?this.parent.$selected?3:2:1);this.config.$selected&&++i;var n=this.getSize(this.config.text),e=n.width,t=n.height;this.config.width=e>20?e+4:20,this.config.height=t>16?t+2:16;var o=this.getTitlePosition(this.parent,this.config),c=o.x,h=o.y;this.config.$x=c,this.config.$y=h;var g=this.config.$selected?"dhx_diagram_line_title--selected":"";return(0,v.el)("div",{_key:this.config.id,class:"dhx_diagram_line_title "+g,"data-dhx-id":this.config.id,"data-dhx-parent-id":this.parent.id,style:m({zIndex:i,position:"absolute",top:h,left:c,transform:"rotate(".concat(this.config.$angle,"deg)")},(0,u.getShapeCss)(this.config))},[this.getContent()])},a.prototype.getBaseType=function(){return"lineTitle"},a.prototype.setDefaults=function(i,n){return i.$angle=i.$angle||0,i.distance=(n==null?void 0:n.distance)||i.distance||50,i.editable=typeof i.editable!="boolean"||i.editable,i.fixed=!!i.fixed,i.autoPosition=!!i.autoPosition,i.fill=(n==null?void 0:n.fill)||i.fill||"#FFFFFF",i.lineHeight=(n==null?void 0:n.lineHeight)||i.lineHeight||14,i.fontSize=(n==null?void 0:n.fontSize)||i.fontSize||14,i.fontColor=(n==null?void 0:n.fontColor)||i.fontColor||"#4C4C4C",i.fontStyle=(n==null?void 0:n.fontStyle)||i.fontStyle||"normal",i.fontWeight=(n==null?void 0:n.fontWeight)||i.fontWeight||"normal",i.textAlign=(n==null?void 0:n.textAlign)||i.textAlign||"center",i.width=(i.width||0)<40?40:i.width,i.height=(i.height||0)<18?18:i.height,i},a.prototype.getContent=function(){var i=this.config,n=i.$editable,e=i.text,t=i.fill;return(0,v.el)("span.dhx_diagram_line_title__text",{style:{backgroundColor:t}},n?[this.getEditorNode()]:e)},a.prototype.getSize=function(i){var n=this.config,e=n.fontSize,t=n.lineHeight,o=n.fontWeight,c=n.fontStyle,h={fontFamily:"Roboto, Arial, Tahoma, Verdana, sans-serif",fontSize:"".concat(e,"px"),lineHeight:"".concat(t,"px"),fontWeight:o,fontStyle:c};return(0,f.getStrSize)(i,h)},a.prototype.getCenterCoords=function(i,n){var e=i.width,t=i.height;return{x:n.x-e/2,y:n.y-t/2}},a.prototype.getStraightCoords=function(i,n,e){e===void 0&&(e=.5);var t=i.x,o=i.y;return{x:t*(1-e)+n.x*e,y:o*(1-e)+n.y*e}},a.prototype.getTitlePosition=function(i,n){var e,t,o,c=(0,s.getDistanceFactor)(n.distance);if(i.connectType==="straight"||((e=i.points)===null||e===void 0?void 0:e.length)===2){var h=(t=i.points)===null||t===void 0?void 0:t[0],g=(o=i.points)===null||o===void 0?void 0:o[i.points.length-1];return this.config.$angle=n.autoPosition?(0,s.getLineAngle)(h,g):0,this.getCenterCoords(n,this.getStraightCoords(h,g,c))}for(var x=i.points,C=[],k=0,I=0;I<x.length-1;I++){var O=x[I],D=x[I+1],A=(0,s.getLineLength)(O,D);k+=A,C.push(A)}var H=k/100*parseFloat(n.distance),S={x:0,y:0},$={x:0,y:0},w=0;for(I=0;I<x.length-1;I++)if((w+=C[I])>=H){S=x[I],$=x[I+1],c=1-(0,s.getDistanceFactor)((w-H)/C[I]*100);break}return this.config.$angle=n.autoPosition?(0,s.getLineAngle)(S,$):0,this.getCenterCoords(n,this.getStraightCoords(S,$,c))},a.prototype.getBox=function(){var i=this.config,n=i.$x,e=n===void 0?0:n,t=i.$y,o=t===void 0?0:t;return{left:e,right:e+i.width,top:o,bottom:o+i.height}},a}(p.BaseShape);_.LineTitle=l},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(p){for(var u,s=1,l=arguments.length;s<l;s++)for(var r in u=arguments[s])Object.prototype.hasOwnProperty.call(u,r)&&(p[r]=u[r]);return p},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0});var E=function(){function p(){}return p.prototype.layout=function(u,s){u.setRoot();var l=u.getRoot();return u.root(u.toTree(u.hash[l.id])),v(u,l,m(l,l,{minSpaceBetweenGen:s.levelPadding||20,minSpaceBetweenSibling:s.itemPadding||5})),u.translate({x:1e3,y:1e3}),u},p}();function m(p,u,s,l,r,a){var i;l===void 0&&(l={startAngle:0,endAngle:360}),r===void 0&&(r=0),a===void 0&&(a={});var n,e=(l.endAngle-l.startAngle)/u.kids.length;if(u.kids.length){var t=r+1;a[t]=(i=a[t])!==null&&i!==void 0?i:{radius:0,chord:0};var o=0;u.kids.forEach(function(C,k,I){var O,D,A,H,S,$,w,T,F=l.startAngle+e*(k+.5),z=(((O=a[r])===null||O===void 0?void 0:O.radius)||0)+($=u,w=((S=C).w+$.w)/2,T=(S.h+$.h)/2,Math.ceil(Math.sqrt(w*w+T*T)))+s.minSpaceBetweenGen;if(o=Math.max(a[t].radius,z),u.kids.length>1){var B=k!==I.length-1?k+1:0,L=f(C,G=d({startAngle:F,endAngle:F+e}))+f(I[B],G)+s.minSpaceBetweenSibling;a[t].chord=Math.max(a[t].chord,L)}else{var M=(D=p.kids)===null||D===void 0?void 0:D.findIndex(function(Z){return Z.id===u.id}),P=M===((A=p.kids)===null||A===void 0?void 0:A.length)-1?0:M+1,V=M===0?((H=p.kids)===null||H===void 0?void 0:H.length)-1:M-1;if(M>-1){var R=p.kids[P].kids[0],q=p.kids[V].kids[p.kids[V].kids.length-1];if(R||q){var G,U=(l.endAngle-l.startAngle)/p.kids[R?P:V].kids.length;L=f(C,G=d({startAngle:F,endAngle:F+.5*(e+U)}))+f(R||q,G)+s.minSpaceBetweenSibling+20,a[t].chord=Math.max(a[t].chord,L)}}}});var c=Math.max(o,(n=e,a[t].chord/(2*Math.sin(n/2*Math.PI/180))));if(c>a[t].radius&&a[t+1]){var h=c-a[t].radius;for(var g in a)Number(g)>t&&(a[g].radius+=h)}a[t].radius=c;var x=b({},l);return u.kids.forEach(function(C){x.endAngle=x.startAngle+e,C.kids.length&&(a=m(u,C,s,x,t,a)),x.startAngle+=e}),a}}function v(p,u,s,l,r){l===void 0&&(l={startAngle:0,endAngle:360}),r===void 0&&(r=0);var a,i,n,e,t,o=p.getRoot(),c=o.id===u.id,h=u.kids;if(c)u.x=0,u.y=0;else{var g=(l.startAngle+l.endAngle)/2,x=(a=g,i=s[r].radius,n=o.x,e=o.y,t=a*Math.PI/180,{x:n+i*Math.cos(t),y:e-i*Math.sin(t)});u.x=x.x,u.y=x.y}if(h.length){var C=(l.endAngle-l.startAngle)/h.length;h.forEach(function(k,I){var O={startAngle:l.startAngle+C*I,endAngle:l.startAngle+C*(I+1)};v(p,k,s,O,r+1)})}}function f(p,u){var s=Math.cos(Math.atan(p.h/p.w)),l=Math.cos(u*Math.PI/180);return Math.abs(l)>s?p.w/(2*Math.abs(l)):p.h/(2*Math.abs(Math.sin(u*Math.PI/180)))}function d(p){return 90-p.endAngle/2+p.startAngle/2-(p.startAngle>180?p.startAngle-180:p.startAngle)}_.default=E},function(W,_,y){var b,E=this&&this.__extends||(b=function(l,r){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(a[n]=i[n])},b(l,r)},function(l,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function a(){this.constructor=l}b(l,r),l.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0}),_.DiagramEditor=_.DiagramShapes=_.DataEvents=_.DataCollection=_.setTheme=_.awaitRedraw=void 0;var m=y(0);Object.defineProperty(_,"awaitRedraw",{enumerable:!0,get:function(){return m.awaitRedraw}}),Object.defineProperty(_,"setTheme",{enumerable:!0,get:function(){return m.setTheme}});var v=y(8);Object.defineProperty(_,"DataCollection",{enumerable:!0,get:function(){return v.DataCollection}}),Object.defineProperty(_,"DataEvents",{enumerable:!0,get:function(){return v.DataEvents}});var f=y(53);Object.defineProperty(_,"DiagramShapes",{enumerable:!0,get:function(){return f.shapes}});var d=y(5),p=y(1),u=y(205),s=function(l){function r(a,i){i===void 0&&(i={});var n,e=l.call(this,a,i)||this;return n=["org","mindmap"].includes(i.type)?new u.OrgChartEditor(a,i):new u.DefaultEditor(a,i),(0,p.extend)(e,n),e}return E(r,l),r.prototype.paint=function(){},r.prototype.destructor=function(){throw new Error("Method not implemented.")},r.prototype.import=function(a){},r.prototype.parse=function(a){},r.prototype.serialize=function(){return[]},r.prototype.zoomIn=function(a){},r.prototype.zoomOut=function(a){},r}(d.View);_.DiagramEditor=s},function(W,_,y){var b=this&&this.__createBinding||(Object.create?function(m,v,f,d){d===void 0&&(d=f);var p=Object.getOwnPropertyDescriptor(v,f);p&&!("get"in p?!v.__esModule:p.writable||p.configurable)||(p={enumerable:!0,get:function(){return v[f]}}),Object.defineProperty(m,d,p)}:function(m,v,f,d){d===void 0&&(d=f),m[d]=v[f]}),E=this&&this.__exportStar||function(m,v){for(var f in m)f==="default"||Object.prototype.hasOwnProperty.call(v,f)||b(v,m,f)};Object.defineProperty(_,"__esModule",{value:!0}),E(y(206),_),E(y(276),_),E(y(99),_),E(y(37),_)},function(W,_,y){var b,E=this&&this.__extends||(b=function(i,n){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},b(i,n)},function(i,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=i}b(i,n),i.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}),m=this&&this.__assign||function(){return m=Object.assign||function(i){for(var n,e=1,t=arguments.length;e<t;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o]);return i},m.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.OrgChartEditor=void 0;var v=y(29),f=y(1),d=y(64),p=y(59),u=y(98),s=y(37),l=y(100),r=y(112),a=function(i){function n(e,t){return i.call(this,e,(0,f.extend)({itemsDraggable:!0,shapeType:t.type==="org"?"card":"topic",view:{toolbar:!0,editbar:!0}},t))||this}return E(n,i),n.prototype._initDiagram=function(){this.diagram=new v.Diagram(null,{type:this.config.type,defaultShapeType:this.config.shapeType,margin:{y:70,x:40},defaults:this._getDefaults(),toolbar:this._getToolbarConfig(this.config),lineConfig:m({},this.config.lineConfig),gridStep:this.config.gridStep,scale:this.config.scale,select:!0,scroll:!0,$isEditor:!0}),this.diagram.data.parse([{id:(0,f.uid)(),x:0,y:0,text:"main"}])},n.prototype._initUI=function(e){var t=this;this.view=new l.View(e,this);var o=this.view.getViews(),c=o.toolbar,h=o.editbar;this.toolbar=c,this.editbar=h,this.menu=new d.ContextMenu(null),this._resizer=new p.Controls(this.events,this.diagram,{magnetic:!1,connectionPoints:!1,resizePoints:this.config.resizePoints}),this.diagram.config.$svg=function(g){var x,C=(x=t.diagram.selection.getItem())===null||x===void 0?void 0:x.id,k=t.diagram.data.getItem(C);return t._selectionBox&&t._selectionBox.isValid()?t._selectionBox.render():t.diagram.selection.getIds().length<=1?t._resizer.render(k,g):null},this.diagram.config.$grid=function(){return!!t.config.grid}},n.prototype._setHandlers=function(){var e=this;i.prototype._setHandlers.call(this),this.diagram.events.on(v.DataEvents.load,function(){e.history.reset()}),this.diagram.events.on(v.DiagramEvents.shapeIconClick,function(t,o){var c=e.diagram.selection.getItem(),h=e.diagram.selection.getIds().map(function(x){return e.diagram.data.getItem(x)});if(e.events.fire(s.DiagramEditorEvents.beforeShapeIconClick,[t,e.diagram.data.getItem(c.id)])){var g=h.map(function(x){return{id:(0,f.uid)(),parent:x.id,dx:x.dx,dy:x.dy,headerColor:(0,r.getHeaderColor)(x)}});switch(t){case"add":g.forEach(function(x){e.diagram.data.add(x),e.diagram.selection.add({id:x.id}),e.diagram.showItem(x.id)});break;case"addLeft":g.forEach(function(x){e.diagram.data.add(m({dir:"verticalLeft"},x)),e.diagram.selection.add({id:x.id}),e.diagram.showItem(x.id,"left")});break;case"addRight":g.forEach(function(x){e.diagram.data.add(m({dir:"verticalRight"},x)),e.diagram.selection.add({id:x.id}),e.diagram.showItem(x.id,"right")});break;case"remove":h.forEach(function(x){e._removeItem(x.id)});break;case"menu":e.menu.data.parse(e._getContextMenuData(c)),e.menu.showAt(o)}e.events.fire(s.DiagramEditorEvents.afterShapeIconClick,[t,e.diagram.data.getItem(c.id)])}}),this.events.on(s.DiagramEditorEvents.afterShapeMove,function(t){var o=t.id,c=t.batch,h=t.event;if(e.config.itemsDraggable){var g=e.diagram.data.getItem(o);if(g.giveItem!==!1){var x=!1;e.diagram.data.mapVisible(function(C){if(C){var k=C==null?void 0:C.$item.isLocate({width:g.width,height:g.height,x:g.x+(g.dx||0),y:g.y+(g.dy||0)});g.id!=C.id&&g.parent!=C.id&&C.$item.getBaseType()==="shape"&&(k&&!x?(x=!0,C.$target=!0,e.events.fire(s.DiagramEditorEvents.itemTarget,[{id:g.id,batch:c,targetId:C.id,event:h}])):C.$target=!1)}})}}}),this.events.on(s.DiagramEditorEvents.shapeMoveEnd,function(t){var o=t.id,c=t.batch,h=t.event;if(e.config.itemsDraggable){var g=e.diagram.data.getItem(o);if(g.giveItem!==!1){var x=!1;e.diagram.data.mapVisible(function(C){if(C){C.$target=!1;var k=C.$item.isLocate({width:g.width,height:g.height,x:g.x+(g.dx||0),y:g.y+(g.dy||0)});if(g.id!=C.id&&g.parent&&g.parent!=C.id&&C.$item.getBaseType()==="shape"&&!C.assistant&&!C.partner&&!x&&k){if(x=!0,C.catchItem===!1||!e.events.fire(s.DiagramEditorEvents.beforeItemCatch,[{id:g.id,batch:c,targetId:C.id,event:h}]))return;var I=new Set(c);I.forEach(function(O){var D=e.diagram.data.getItem(O);e.diagram.data.update(O,{dx:C.dx,dy:C.dy},!0),I.has(D.parent.toString())||(e.diagram.data.update(O,{parent:C.id},!0),e.diagram.data.remove(D.$parent),e.diagram.data.add({type:"line",from:C.id,to:O}))}),e.diagram.expandItem(C.id),e.events.fire(s.DiagramEditorEvents.afterItemCatch,[{id:g.id,batch:c,targetId:C.id,event:h}])}}})}}}),this.menu.events.on("click",function(t){var o=e.diagram.selection.getItem();if(e.events.fire(s.DiagramEditorEvents.beforeShapeIconClick,[t,e.diagram.data.getItem(o.id)])){var c={id:(0,f.uid)(),parent:o.id,dx:o.dx,dy:o.dy,headerColor:(0,r.getHeaderColor)(o)};switch(t){case"vertical":case"horizontal":e.diagram.data.update(o.id,{dir:t});break;case"addAssistant":e.diagram.data.add(m(m({},c),{assistant:!0,headerColor:(0,r.getHeaderColor)(o,"assistant")})),e.diagram.selection.add({id:c.id}),e.diagram.showItem(c.id);break;case"addPartner":e.diagram.data.add(m(m({},c),{partner:!0,headerColor:(0,r.getHeaderColor)(o,"partner")})),e.diagram.selection.add({id:c.id}),e.diagram.showItem(c.id);break;case"remove":e._removeItem(o.id)}e.events.fire(s.DiagramEditorEvents.afterShapeIconClick,[t,e.diagram.data.getItem(o.id)])}})},n.prototype._getContextMenuData=function(e){var t,o,c=[{id:"addPartner",value:v.locale.menuAddPartner,icon:"dxi dxi-plus"},{id:"addAssistant",value:v.locale.menuAddAssistant,icon:"dxi dxi-plus"}];return e.$connection&&e.$connection.length&&(e.dir==="vertical"||!((o=(t=e==null?void 0:e.$partners)===null||t===void 0?void 0:t.common)===null||o===void 0)&&o.length?e.dir==="vertical"&&c.push({id:"horizontal",value:v.locale.menuAlignChildrenHorizontally,icon:"dxi dxi-chart-horizontal"}):c.push({id:"vertical",value:v.locale.menuAlignChildrenVertically,icon:"dxi dxi-chart-vertical"})),e.$parent&&c.push({type:"separator"},{id:"remove",value:v.locale.menuDelete,icon:"dxi dxi-delete-outline",hotkey:"Del"}),c},n.prototype._getDefaults=function(){var e={text:{text:"Text"}};return["card","img-card","topic"].forEach(function(t){e[t]={text:"Text",title:"Title",height:t!=="topic"?90:30,width:t==="img-card"?210:140}}),e=m(m({},e),this.config.defaults)},n}(u.BaseDiagramEditor);_.OrgChartEditor=a},function(W,_,y){var b=this&&this.__spreadArray||function(d,p,u){if(u||arguments.length===2)for(var s,l=0,r=p.length;l<r;l++)!s&&l in p||(s||(s=Array.prototype.slice.call(p,0,l)),s[l]=p[l]);return d.concat(s||Array.prototype.slice.call(p))};Object.defineProperty(_,"__esModule",{value:!0}),_.getConnectPoints=_.Connect=void 0;var E=y(1),m=y(0),v=function(){function d(p,u){var s=this;this.createConnector=function(l){var r,a,i=(0,E.uid)();s._connector={id:i,from:l.id,fromSide:l.side};var n="line",e=s._nearShape.$item.getPoint(l.dx,l.dy);s._diagram.data.add({id:i,type:n,points:[{x:e.x,y:e.y},{x:e.x,y:e.y}],stroke:((a=(r=s._diagram.config.defaults)===null||r===void 0?void 0:r[n])===null||a===void 0?void 0:a.stroke)||"#2196F3",$move:!0}),s._diagram.selection.add({id:i})},this._setNearPoint=function(l){s._nearPoint&&l.side===s._nearPoint.side||(s._nearPoint=l,s._diagram.paint())},this._removeNearPoint=function(){s._nearPoint&&(s._nearPoint=null,s._diagram.paint())},this._controls=p,this._diagram=u,this._isOrgType=["org","mindmap"].includes(this._diagram.config.type)}return d.prototype.getItemId=function(){return this._nearShape?this._nearShape.id:""},d.prototype.getPoints=function(p,u){var s=this;if(this._nearShape&&this._nearShape.$item.canResize()){var l=this._isOrgType?10:8,r=this._diagram.config.scale;if(p&&p.$item.getBaseType()==="line"&&p.$move){var a=this._diagram.data.map(function(c){var h=c.$item.getBaseType(),g=!0;if(s._diagram.data.eachParent(c.id,function(O){(O==null?void 0:O.open)===!1&&(g=!1)}),h!=="shape"||!c.$item.canResize()||!g)return null;var x=c.$item.getBox(),C=h==="group"||h==="swimlane",k=c[C?"$width":"width"]*r,I=c[C?"$height":"height"]*r;return(0,m.el)(".dhx_connect",{style:{width:k,height:I,position:"absolute",top:(x.top-u.top)*r,left:(x.left-u.left)*r,pointerEvents:"none",touchAction:"none",transform:"rotate(".concat(c.angle||0,"deg)")}},s._getConnectionPoints(f(c,l),r))});return(0,m.el)("div",a)}var i=this._nearShape.$item.getBaseType(),n=this._nearShape.$item.getBox(),e=i==="group"||i==="swimlane",t=this._nearShape[e?"$width":"width"]*r,o=this._nearShape[e?"$height":"height"]*r;return(0,m.el)(".dhx_connect",{style:{width:t,height:o,position:"absolute",top:(n.top-u.top)*r,left:(n.left-u.left)*r,pointerEvents:"none",touchAction:"none",transform:"rotate(".concat(this._nearShape.angle||0,"deg)")}},this._getConnectionPoints(f(this._nearShape,l),r))}},d.prototype._getConnectionPoints=function(p,u){var s=this;return p.map(function(l){return(0,m.el)(".dhx_connect_point",{style:{top:l.y*u-15,left:l.x*u-15},_key:(0,E.uid)(),class:"".concat((s._nearPoint&&s._nearPoint.side)==l.side&&l.id==s._nearPoint.id?"dhx_connect_nearest":""),_data:{resizer:s._controls,p:l},onpointerover:[s._setNearPoint,l],onpointerleave:[s._removeNearPoint],onpointerdown:[s.createConnector,l]},[(0,m.el)(".dhx_connect_grip",{_data:{resizer:s._controls,p:l}})])})},d.prototype.setNearShape=function(p){p!==this._nearShape&&(this._nearShape=p,this._diagram.paint())},d.prototype.toggleNearShape=function(p){this._nearShape=this._nearShape&&this._nearShape.id==p.id?null:p,this._diagram.paint()},d.prototype.removeNearShape=function(){this._nearShape=null,this._nearPoint=null},d.prototype.moveConnector=function(p,u,s,l){var r,a,i=this._controls.getPoint(p.clientX,p.clientY);if(this._connector){var n=this._diagram.data.getItem(this._connector.id);return n.points[n.points.length-1]={x:i.x,y:i.y},void this._diagram.paint()}var e=0,t=b([],u.points,!0),o=u.from&&u.to&&u.from===u.to;if(t[l.i])if(l.$slide)if(o)l.$slide==="horizontal"?(t[l.i].x+=s.x,o&&(t[l.i-1].x+=s.x)):(t[l.i].y+=s.y,o&&(t[l.i-1].y+=s.y)),t[l.i].custom=!0,t[l.i-1].custom=!0;else{var c=u.points[u.points.length-1],h=u.points[u.points.length-2];e=l.$slide==="horizontal"?Math.abs(c.x-h.x-s.x):Math.abs(c.y-h.y-s.y)}else t[l.i].x+=s.x,t[l.i].y+=s.y,t[l.i].custom=!0,l.side&&(a=l.side);this._nearPoint&&a?this._diagram.data.update(u.id,((r={points:t,$move:!0})[a]=this._nearPoint.id,r[a+"Side"]=this._nearPoint.side,r.customGap=e,r)):this._diagram.data.update(u.id,{points:t,$move:!0,customGap:e}),this._diagram.paint()},d.prototype.onUp=function(p){var u,s=this._diagram.selection.getItem();if(s&&s.$item.getBaseType()==="line"){delete s.$move;var l=this._controls.getPoint(p.clientX,p.clientY);if(this._findNearShape(l),this._nearShape&&this._connector){var r=this._connector.from,a=this._nearShape.id;s&&r&&a&&this._nearPoint?this._diagram.data.update(s.id,((u={from:this._connector.from,to:this._nearShape.id,fromSide:this._connector.fromSide,toSide:this._nearPoint.side,points:null,strokeType:this._diagram.config.lineConfig.lineType})[this._diagram.config.lineConfig.lineDirection]=this._diagram.config.lineConfig.arrowsHidden?"":"filled",u)):s!=null&&s.id&&this._diagram.data.remove(s.id)}!this._nearShape&&this._connector&&(s!=null&&s.id)&&this._diagram.data.remove(s.id),this._connector=null,this._nearShape=null,this._nearPoint=null}},d.prototype._getDistanceBetweenPoints=function(p){var u,s=p.side,l=p.shape,r=p.point;switch(s){case"top":u={x:l.x+l.width/2,y:l.y};break;case"right":u={x:l.x+l.width,y:l.y+l.height/2};break;case"bottom":u={x:l.x+l.width/2,y:l.y+l.height};break;case"left":u={x:l.x,y:l.y+l.height/2};break;case"center":u={x:l.x+l.width/2,y:l.y+l.height/2}}return Math.sqrt(Math.pow(r.x-u.x,2)+Math.pow(r.y-u.y,2))},d.prototype._findNearShape=function(p){var u=this;if(this._nearPoint){this._nearShape=null;var s=20;this._diagram.data.forEach(function(l){if(!l.hidden&&l.$item.getBaseType()==="shape"){var r=u._getDistanceBetweenPoints({side:u._nearPoint.side,shape:l,point:p});(0,E.isDefined)(r)&&r<=s&&(u._nearShape=l,s=r)}})}},d}();function f(d,p){if(!d)return[];var u=d.$item.getBaseType(),s=d.$item.getBox(),l=u==="group"||u==="swimlane",r=d[l?"$width":"width"],a=d[l?"$height":"height"],i=s.left-p/2,n=s.top-p/2;return[{dx:i+r/2,dy:n+a/2,x:0+r/2,y:0+a/2,id:d.id,side:"center"},{x:0+r/2,y:0,dx:i+r/2,dy:n,id:d.id,side:"top"},{x:0+r,y:0+a/2,dx:i+r,dy:n+a/2,id:d.id,side:"right"},{x:0+r/2,y:0+a,dx:i+r/2,dy:n+a,id:d.id,side:"bottom"},{x:0,y:0+a/2,dx:i,dy:n+a/2,id:d.id,side:"left"}]}_.Connect=v,_.getConnectPoints=f},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(u){for(var s,l=1,r=arguments.length;l<r;l++)for(var a in s=arguments[l])Object.prototype.hasOwnProperty.call(s,a)&&(u[a]=s[a]);return u},b.apply(this,arguments)},E=this&&this.__spreadArray||function(u,s,l){if(l||arguments.length===2)for(var r,a=0,i=s.length;a<i;a++)!r&&a in s||(r||(r=Array.prototype.slice.call(s,0,a)),r[a]=s[a]);return u.concat(r||Array.prototype.slice.call(s))};Object.defineProperty(_,"__esModule",{value:!0}),_.getRectPoints=_.getConnectorPoints=_.Resize=void 0;var m=y(0),v=y(59),f=function(){function u(s,l){this._controls=s,this._diagram=l,this._isOrgType=["org","mindmap"].includes(this._diagram.config.type)}return u.prototype.getPoints=function(s,l){var r=this;if(s){var a="dhx_diagram_resizer_grip",i=s.$item.getBaseType(),n=s.$item.getBox(),e=this._isOrgType?10:8,t=this._diagram.config.scale,o=0;i==="line"&&(o=2,a+=" dhx_diagram_resizer_grip--line");var c=p(s,t).map(function(I){return I.$slide&&(a+=" dhx_slide dhx_slide--".concat(I.$slide)),(0,m.el)("div",{style:{cursor:I.cursor,position:"absolute",top:I.y-o-e/2,left:I.x-o-e/2,pointerEvents:"auto",touchAction:"auto",outline:"none"},tabindex:-1,class:a,_data:{resizer:r._controls,p:I}})}),h=i==="group"||i==="swimlane",g=s[h?"$width":"width"]*t,x=s[h?"$height":"height"]*t,C=(!s.angle||s.angle===0||s.angle===360)&&(i==="shape"||h)||i==="line",k=s==null?void 0:s.$group;return(0,m.el)(".dhx_diagram_resizer",{style:{width:g,height:x,top:(n.top-l.top)*t,left:(n.left-l.left)*t,transform:"rotate(".concat(s.angle||0,"deg)")}},[i==="shape"&&!this._isOrgType&&!k&&(0,m.el)("div.dhx_editor_icon.dhx_editor_icon-rotate",{style:{width:20,height:20,position:"absolute",top:x/2-10,left:g+10,zIndex:1e4,pointerEvents:"auto",touchAction:"auto"},_data:{resizer:this._controls,p:{rotate:!0}}},[(0,m.el)("i.dhx_editor_icon--no-touch.dxi.dxi-rotate-right")])].concat(C?c:null))}},u}();function d(u,s){var l=b({},u.points[0]);l.x*=s,l.y*=s;var r=[],a=u.points.map(function(i,n,e){if((i=b({},i)).x*=s,i.y*=s,i.cursor="pointer",i.i=n,n===0&&(i.side="from"),n===u.points.length-1&&(i.side="to"),u.connectType!=="flex"&&e[n+1]){var t=b({},e[n+1]);t.x*=s,t.y*=s;var o=e[n+2]&&{x:e[n+2].x,y:e[n+2].y},c=e[n-1]&&{x:e[n-1].x,y:e[n-1].y},h=c&&t&&o&&(c.x===i.x||c.y===i.y)&&(t.x===i.x||t.y===i.y)&&t.x!==c.x&&t.y!==c.y&&(o.x===t.x||o.y===t.y)&&o.x!==i.x&&o.y!==i.y;if((0,v.getLength)(i,t)>20){var g=(i.x+t.x)/2,x=(i.y+t.y)/2;h&&r.push({x:g-l.x+1,y:x-l.y+1,dx:g/s,dy:x/s,$slide:i.x===t.x?"horizontal":"vertical",i:n+1})}}return i.dx=i.x,i.dy=i.y,i.x=i.x-l.x+2,i.y=i.y-l.y+2,i});return E(E([],a,!0),r,!0)}function p(u,s){var l=u.$item.getBaseType();if(l==="line")return d(u,s);var r=l==="group"||l==="swimlane",a=u[r?"$width":"width"]*s,i=u[r?"$height":"height"]*s;return[{cursor:"nw-resize",x:0,y:0,dx:1,dy:1},{cursor:"n-resize",x:0+a/2,y:0,dx:0,dy:1},{cursor:"ne-resize",x:0+a,y:0,dx:-1,dy:1},{cursor:"e-resize",x:0+a,y:0+i/2,dx:-1,dy:0},{cursor:"se-resize",x:0+a,y:0+i,dx:-1,dy:-1},{cursor:"s-resize",x:0+a/2,y:0+i,dx:0,dy:-1},{cursor:"sw-resize",x:0,y:0+i,dx:1,dy:-1},{cursor:"w-resize",x:0,y:0+i/2,dx:1,dy:0}]}_.Resize=f,_.getConnectorPoints=d,_.getRectPoints=p},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.SelectionBox=void 0;var b=y(0),E=function(){function m(v,f){this.start=v,this._diagram=f,this._isOrgType=["org","mindmap"].includes(this._diagram.config.type)}return m.prototype.render=function(){var v=Math.abs(this.start.$rx-this.end.$rx),f=Math.abs(this.start.$ry-this.end.$ry),d=this.start.$rx<this.end.$rx?this.start.$rx:this.end.$rx,p=this.start.$ry<this.end.$ry?this.start.$ry:this.end.$ry;return(0,b.el)(".dhx_selection_box",{"data-dhx-id":"dhx_selection_box",style:{left:d,top:p,width:this.start.$rx<this.end.$rx?v:this.start.$rx-d,height:this.start.$ry<this.end.$ry?f:this.start.$ry-p}})},m.prototype.isValid=function(){return this.start&&this.end&&Math.abs(this.start.$rx-this.end.$rx)>10&&Math.abs(this.start.$ry-this.end.$ry)>10},m.prototype.addSelected=function(v){var f=this;v===void 0&&(v={start:this.start,end:this.end});var d=v.start.x<v.end.x?v.start.x:v.end.x,p=v.end.x>v.start.x?v.end.x:v.start.x,u=v.start.y<v.end.y?v.start.y:v.end.y,s=v.end.y>v.start.y?v.end.y:v.start.y,l=[],r=[];this._diagram.data.mapVisible(function(a){if(!f._isOrgType||a.$item.getBaseType()!=="line"){var i=a.$item.getBox();i.left>=d&&i.right<=p&&i.top>=u&&i.bottom<=s&&(l.push(a),r.push(a.id))}}),l.forEach(function(a,i){f._diagram.selection.add({id:a.id,join:!!i,batch:r})})},m}();_.SelectionBox=E},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(f){for(var d,p=1,u=arguments.length;p<u;p++)for(var s in d=arguments[p])Object.prototype.hasOwnProperty.call(d,s)&&(f[s]=d[s]);return f},b.apply(this,arguments)},E=this&&this.__spreadArray||function(f,d,p){if(p||arguments.length===2)for(var u,s=0,l=d.length;s<l;s++)!u&&s in d||(u||(u=Array.prototype.slice.call(d,0,s)),u[s]=d[s]);return f.concat(u||Array.prototype.slice.call(d))};Object.defineProperty(_,"__esModule",{value:!0}),_.CopyManager=void 0;var m=y(1),v=function(){function f(d){this._copiedStyles={},this._copiedItems=[],this._props=["type","extraLinesStroke","fill","fontColor","fontSize","fontStyle","fontWeight","lineHeight","stroke","strokeDash","strokeType","strokeWidth","textAlign","textVerticalAlign","headerColor","fill","overFill","partiallyFill","borderStyle","iconColor"],this._editor=d,this._data=d.diagram.data}return f.prototype.copy=function(d){var p=this;this._editor.config.type!=="mindmap"&&this._editor.config.type!=="org"&&(d!=null&&d.length||(d=this._editor.diagram.selection.getIds()),this._copiedItems=[],d.forEach(function(u){var s=p._data.getItem(u),l=s.$item.getBaseType();if(s.$group||p._copiedItems.push(s),l==="group"||l==="swimlane"){var r={};p._data.eachChild(u,function(a){var i=a.id;r[i]=!0}),p._data.forEach(function(a){var i;((i=a==null?void 0:a.$item)===null||i===void 0?void 0:i.getBaseType())==="line"&&r[a==null?void 0:a.from]&&r[a==null?void 0:a.to]&&p._copiedItems.push(a)})}}))},f.prototype.paste=function(){var d=this;if(this._copiedItems.length&&this._editor.config.type!=="mindmap"&&this._editor.config.type!=="org"){this._editor.diagram.selection.remove();var p=[],u={},s={},l=function(r,a){a===void 0&&(a=0),r.$group?a+=r.$gx:a=r.x+r.width+40+a;var i,n=[];if(i=r.$item.getBaseType()==="swimlane"?d._data.add(b(b({},r),{groupChildren:n,id:(0,m.uid)(),x:a,layout:[]})):d._data.add(b(b({},r),{groupChildren:n,id:(0,m.uid)(),x:a})),d._data.eachChild(r.id,function(g){var x;g.$item.getBaseType()==="group"?(x=l(g,a),s[g.id]=x):x=d._data.add(b(b({},g),{$group:null,id:(0,m.uid)(),x:a+g.$gx})),n.push(x),u[g.id]=x},!1),r.$item.getBaseType()==="swimlane"){for(var e=JSON.parse(JSON.stringify(E([],r.layout,!0))),t=0;t<e.length;t++)for(var o=e[t],c=0;c<o.length;c++){var h=o[c];e[t][c]=s[h]}d._data.update(i,{groupChildren:n,layout:e})}else d._data.update(i,{groupChildren:n});return u[r.id]=i,i};this._copiedItems.forEach(function(r,a){var i;switch(r.$item.getBaseType()){case"shape":i=d._data.add(b(b({},r),{id:(0,m.uid)(),x:r.x+200})),u[r.id]=i;break;case"group":case"swimlane":i=l(r)}p.push(i)}),this._copiedItems.forEach(function(r){var a;if(u.hasOwnProperty(r.from)&&u.hasOwnProperty(r.to)){var i=b(b({},r),{id:(0,m.uid)(),title:b({},r.title),from:u[r.from],to:u[r.to]});a=d._data.add(i),d._data.eachChild(r.id,function(n){p.push(d._data.add(b(b({},n),{parent:a,id:(0,m.uid)()})))}),p.push(a)}}),p.forEach(function(r,a){d._editor.diagram.selection.add({id:r,join:!!a,batch:p})})}},f.prototype.copyStyles=function(d){(0,m.isDefined)(d)||(d=this._editor.diagram.selection.getIds()[0]);var p=this._editor.diagram.data.getItem(d);if(p){for(var u in this._copiedStyles={},p)this._props.includes(u)&&(this._copiedStyles[u]=p[u]);if(p.header)for(var u in this._copiedStyles.header={},p.header)this._props.includes(u)&&(this._copiedStyles.header[u]=p.header[u]);if(p.style)for(var u in this._copiedStyles.style={},p.style)this._props.includes(u)&&(this._copiedStyles.style[u]=p.style[u])}},f.prototype.pasteStyles=function(d){var p=this;d!=null&&d.length||(d=this._editor.diagram.selection.getIds());var u=this._copiedStyles.type;d.forEach(function(s){var l=p._data.getItem(s),r=l.type;if(r===u&&u==="line"||r!=="line"&&u!=="line"){var a=b({},p._copiedStyles);delete a.type,l.type==="$group"||l.type==="$swimlane"?(l.header||delete a.header,l.style||delete a.style,(0,m.extend)(l,a,!0),p._data.update(l.id,b({},l))):p._data.update(l.id,b({},a))}})},f}();_.CopyManager=v},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.getDefaultShapeToolbar=_.getMindmapShapeToolbar=_.getOrgShapeToolbar=void 0,_.getOrgShapeToolbar=function(b){return[{id:"add",content:"<i class='dxi dxi-plus-box'>",check:function(E){return!Array.isArray(E)&&!E.assistant&&!E.partner},tooltip:b.addShape},{id:"menu",content:"<i class='dxi dxi-dots-vertical'>",check:function(E){return!Array.isArray(E)&&!E.assistant&&!E.partner},tooltip:b.menu},{id:"remove",content:"<i class='dxi dxi-delete-outline'>",check:function(E){return E.assistant||E.partner||Array.isArray(E)},css:function(){return"dhx_diagram_toolbar__icon--remove"},tooltip:b.remove}]},_.getMindmapShapeToolbar=function(b){return[{id:"add",content:"<i class='dxi dxi-plus-box'>",check:function(E){return!Array.isArray(E)&&E.$level!==0},tooltip:b.addShape},{id:"addLeft",content:"<i class='dxi dxi-plus-box'>",check:function(E){return!Array.isArray(E)&&E.$level===0},tooltip:b.addLeftShape},{id:"addRight",content:"<i class='dxi dxi-plus-box'>",check:function(E){return!Array.isArray(E)&&E.$level===0},tooltip:b.addRightShape},{id:"remove",content:"<i class='dxi dxi-delete-outline'>",check:function(E){return!Array.isArray(E)&&!!E.$parent||Array.isArray(E)},css:function(){return"dhx_diagram_toolbar__icon--remove"},tooltip:b.remove}]},_.getDefaultShapeToolbar=function(b,E){return[{id:"lineTitleAutoPositionEnable",content:"<i class='dxi dxi-format-text-rotation-angle-up'>",check:function(m){var v;return((v=m.$item)===null||v===void 0?void 0:v.getBaseType())==="lineTitle"&&m.autoPosition},tooltip:b.lineTitleAutoPositionEnable},{id:"lineTitleAutoPositionDisable",content:"<i class='dxi dxi-format-text-rotation-none'>",check:function(m){var v;return((v=m.$item)===null||v===void 0?void 0:v.getBaseType())==="lineTitle"&&!m.autoPosition},tooltip:b.lineTitleAutoPositionDisable},{id:"addLineTitle",content:"<i class='dxi dxi-format-annotation-plus'>",check:function(m){var v;return((v=m.$item)===null||v===void 0?void 0:v.getBaseType())==="line"&&!m.$selectedPoint},tooltip:b.addLineTitle},{id:"addColumnLast",content:"<i class='dxi dxi-table-column-plus-after'>",check:function(m){var v;return((v=m.$item)===null||v===void 0?void 0:v.getBaseType())==="swimlane"},tooltip:b.addColumnLast},{id:"addRowLast",content:"<i class='dxi dxi-table-row-plus-after'>",check:function(m){var v;return((v=m.$item)===null||v===void 0?void 0:v.getBaseType())==="swimlane"},tooltip:b.addRowLast},{id:"copy",content:"<i class='dxi dxi-copy'>",check:function(m){var v,f;return((v=m.$item)===null||v===void 0?void 0:v.getBaseType())!=="line"&&((f=m.$item)===null||f===void 0?void 0:f.getBaseType())!=="lineTitle"&&!m.$group},tooltip:b.copy},{id:"connect",content:"<i class='dxi dxi-line-connect'>",check:function(m){var v;return E.connectionPoints&&((v=m.$item)===null||v===void 0?void 0:v.getBaseType())==="shape"},css:function(m){return m.$connectMode?" dhx_diagram_toolbar__icon--active":""},tooltip:b.connect},{id:"remove",content:"<i class='dxi dxi-delete-outline'>",css:function(){return"dhx_diagram_toolbar__icon--remove"},check:function(m){return!m.$selectedPoint},tooltip:b.remove},{id:"removePoint",content:"<i class='dxi dxi-delete-outline'>",check:function(m){var v;return((v=m.$item)===null||v===void 0?void 0:v.getBaseType())==="line"&&m.$selectedPoint},tooltip:b.removePoint},{id:"alignHorizontalLeft",content:"<i class='dxi dxi-align-horizontal-left'>",check:function(m){return Array.isArray(m)&&m.length>1},tooltip:b.alignHorizontalLeft},{id:"alignHorizontalCenter",content:"<i class='dxi dxi-align-horizontal-center'>",check:function(m){return Array.isArray(m)&&m.length>1},tooltip:b.alignHorizontalCenter},{id:"alignHorizontalRight",content:"<i class='dxi dxi-align-horizontal-right'>",check:function(m){return Array.isArray(m)&&m.length>1},tooltip:b.alignHorizontalRight},{id:"alignHorizontalDistribute",content:"<i class='dxi dxi-align-horizontal-distribute'>",check:function(m){return Array.isArray(m)&&m.length>1},tooltip:b.alignHorizontalDistribution},{id:"alignVerticalDistribute",content:"<i class='dxi dxi-align-vertical-distribute'>",check:function(m){return Array.isArray(m)&&m.length>1},tooltip:b.alignVerticalDistribution},{id:"alignVerticalTop",content:"<i class='dxi dxi-align-vertical-top'>",check:function(m){return Array.isArray(m)&&m.length>1},tooltip:b.alignVerticalTop},{id:"alignVerticalMiddle",content:"<i class='dxi dxi-align-vertical-center'>",check:function(m){return Array.isArray(m)&&m.length>1},tooltip:b.alignVerticalMiddle},{id:"alignVerticalBottom",content:"<i class='dxi dxi-align-vertical-bottom'>",check:function(m){return Array.isArray(m)&&m.length>1},tooltip:b.alignVerticalBottom}]}},function(W,_,y){var b,E=this&&this.__extends||(b=function(r,a){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(i[e]=n[e])},b(r,a)},function(r,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function i(){this.constructor=r}b(r,a),r.prototype=a===null?Object.create(a):(i.prototype=a.prototype,new i)}),m=this&&this.__assign||function(){return m=Object.assign||function(r){for(var a,i=1,n=arguments.length;i<n;i++)for(var e in a=arguments[i])Object.prototype.hasOwnProperty.call(a,e)&&(r[e]=a[e]);return r},m.apply(this,arguments)},v=this&&this.__rest||function(r,a){var i={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&a.indexOf(n)<0&&(i[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function"){var e=0;for(n=Object.getOwnPropertySymbols(r);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(r,n[e])&&(i[n[e]]=r[n[e]])}return i};Object.defineProperty(_,"__esModule",{value:!0}),_.Toolbar=void 0;var f=y(102),d=y(30),p=y(1),u=y(45),s=y(101),l=function(r){function a(i,n){var e=r.call(this,null,{css:i.css,navigationType:i.navigationType||"click"})||this;return e._editor=n,e._meta=(0,s.meta)(u.i18n.diagram,e._editor.config.type),e.parse(i.items),[d.NavigationBarEvents.click,d.NavigationBarEvents.inputChange].forEach(function(t){e.events.on(t,function(o,c){var h=e.data.getItem(o);typeof h.handler=="function"&&h.handler(e._editor,c),typeof h.checkIcon=="function"&&e.checkIcons()})}),e.events.on(d.NavigationBarEvents.openMenu,function(){e.checkIcons()}),e}return E(a,r),a.prototype.parse=function(i){this.data.parse(this.getPreparedItems(i))},a.prototype.getPreparedItems=function(i){var n=this;return i.map(function(e){if(typeof e=="string"&&n._meta[e])return(g=(0,p.getCloneObject)(n._meta[e])).items&&(g.items=n.getPreparedItems(g.items)),typeof g.checkIcon=="function"&&(g.icon=g.checkIcon(n._editor)||""),g;if(typeof e=="object"){if(n._meta[e.type]){var t=e,o=t.items,c=t.type,h=v(t,["items","type"]);return(g=(0,p.getCloneObject)(n._meta[c])).items&&(g.items=n.getPreparedItems(o||g.items)),typeof g.checkIcon=="function"&&(g.icon=g.checkIcon(n._editor)||""),m(m({},g),h)}var g;return e.items?((g=(0,p.getCloneObject)(e)).items&&(g.items=n.getPreparedItems(g.items)),typeof g.checkIcon=="function"&&(g.icon=g.checkIcon(n._editor)||""),g):e}return{}})},a.prototype.checkIcons=function(){var i=this;this.data.forEach(function(n){typeof n.checkIcon=="function"&&i.data.update(n.id,{icon:n.checkIcon(i._editor)})})},a}(f.ProToolbar);_.Toolbar=l},function(W,_,y){var b,E=this&&this.__extends||(b=function(l,r){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(a[n]=i[n])},b(l,r)},function(l,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function a(){this.constructor=l}b(l,r),l.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}),m=this&&this.__assign||function(){return m=Object.assign||function(l){for(var r,a=1,i=arguments.length;a<i;a++)for(var n in r=arguments[a])Object.prototype.hasOwnProperty.call(r,n)&&(l[n]=r[n]);return l},m.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.ProToolbar=void 0;var v=y(103),f=y(34),d=y(0),p=y(2),u=y(21),s=function(l){function r(a,i){var n=l.call(this,a,i)||this;return n.scrollView=new f.ScrollView(function(){return n.getRootView()}),n}return E(r,l),r.prototype._draw=function(a){var i=this,n=this.data.getLength()?this.data.reduce(function(t,o){switch(o.type){case"title":return t||20;case"button":return o.size==="small"&&(!t||t<=28)?28:t||32;default:return 32}},0)+24:null,e=[(0,d.el)("ul.dhx_navbar.dhx_navbar--horizontal",m(m({"data-dhx-widget-id":this._uid,tabindex:0},function(t){return{role:"toolbar","aria-label":t||""}}(a)),{onclick:this._handlers.onclick,onmousedown:this._handlers.onmousedown,oninput:this._handlers.input,onmouseover:this._handlers.tooltip,onkeydown:this._handlers.onkeydown,onmousemove:this._handlers.onmousemove,onmouseleave:this._handlers.onmouseleave,_hooks:{didInsert:function(t){t.el.addEventListener("keyup",function(o){if(o.which===9){var c=(0,p.locateNode)(document.activeElement);if(c){var h=c.getAttribute("data-dhx-id"),g=i.data.getItem(h);g!=null&&g.tooltip&&(0,u.tooltip)(g.tooltip,{node:c,position:u.Position.bottom,force:!0})}}},!0)}}}),this.data.map(function(t){return i._factory(t)},this.data.getRoot(),!1))];return(0,d.el)("nav.dhx_widget.dhx_toolbar",{style:{height:n},class:this.config.css?this.config.css:""},this.scrollView&&this.scrollView.config.enable?[].concat(this.scrollView.render(e)):e)},r}(v.Toolbar);_.ProToolbar=s},function(W,_,y){var b,E=this&&this.__extends||(b=function(i,n){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},b(i,n)},function(i,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=i}b(i,n),i.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}),m=this&&this.__assign||function(){return m=Object.assign||function(i){for(var n,e=1,t=arguments.length;e<t;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o]);return i},m.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.Shapebar=void 0;var v=y(1),f=y(0),d=y(2),p=y(5),u=y(29),s=y(95),l=y(96),r=y(94),a=function(i){function n(e,t){var o=i.call(this,null,e)||this;o._dropdowns=[],o._pull={},o._handleMove=function(h){(!(Math.abs(h.pageX-o._pressedShapeInfo.$x+h.pageY-o._pressedShapeInfo.$y)<10)||o._shadow)&&o._pressedShapeInfo&&(o._shadow||(o._shadow=(0,f.create)({render:function(){return o._getShadow()}},o),o._shadow.mount(o._editor.view.getRootView().node.el)),o._pressedShapeInfo.$x=h.clientX,o._pressedShapeInfo.$y=h.clientY,o._shadow.redraw())},o._handleUp=function(h){document.removeEventListener("pointermove",o._handleMove),document.removeEventListener("pointerup",o._handleUp),o.events.fire("shapesUp",[m({},o._pressedShapeInfo)]),o._pressedShapeInfo=null,o._shadow&&(o._shadow.unmount(),o._shadow=null)},o._toggle=function(h){o._dropdowns[h]=!o._dropdowns[h]},o.events=t.events,o._shapes=t.diagram.flowShapes||{},o._defaults=t.diagram.config.defaults||{},o._data=t.diagram.data||[],o._editor=t,o._htmlEvents={onpointerdown:(0,d.eventHandler)(function(h){return(0,d.locate)(h)},{dhx_editor_shapebar__preview:function(h,g){h.which===1&&(o._pressedShapeInfo=m(m({},o._pull[g]),{$x:h.x,$y:h.y}),document.addEventListener("pointermove",o._handleMove),document.addEventListener("pointerup",o._handleUp))}})};var c=(0,f.create)({render:function(h){return o._render(h)}},o);return o.mount(null,c),o}return E(n,i),n.prototype._getTextIcon=function(){return(0,f.el)("i.dhx_editor_icon-text.dxi.dxi-format-textbox")},n.prototype._wrapDropdown=function(e,t,o){o===void 0&&(o=!0);var c=e,h=this._dropdowns[e]=this._dropdowns[e]?this._dropdowns[e]:o;return(0,f.el)(".dhx_editor_shapebar__section",[(0,f.el)("input",{class:"dhx_editor_shapebar__checkbox",id:c,name:c,type:"checkbox",checked:h,onchange:[this._toggle,e]}),(0,f.el)("label",{class:"dhx_editor_shapebar__label",for:c},e),t])},n.prototype._getShadow=function(){if(!this._pressedShapeInfo)return this._shadow;var e,t=this._pressedShapeInfo,o=u.shapes[t.type];switch(t.type){case"$swimlane":e=this.getSwimlaneNode(m(m({},t),{width:2*t.width,height:2*t.height}),{data:this._data});break;case"$group":e=this.getGroupNode(t,{data:this._data});break;case"text":e=this._getTextIcon();break;default:e=o?new o(t,{defaults:this._defaults[t.type]||{},shapes:this._shapes}).render():new u.CustomShape(t,{defaults:this._defaults[t.type]||{},shapes:this._shapes}).render()}return(0,f.el)(".dhx_editor_shapebar__shadow",{_key:t.$key,style:{top:t.$y,left:t.$x}},[].concat(e))},n.prototype._getWrapped=function(e,t,o){var c,h,g,x,C,k,I,O,D,A,H=u.shapes[e],S=((c=this._defaults[e])===null||c===void 0?void 0:c.preview)||{};this._defaults[e]&&typeof S=="string"?A=S:(S.img&&(A=S.img),S.gap&&(D=S.gap),S.scale&&(O=S.scale),S.width&&(k=S.width),S.height&&(I=S.height));var $,w,T=O||((h=this.config.preview)===null||h===void 0?void 0:h.scale),F=D||((g=this.config.preview)===null||g===void 0?void 0:g.gap);if(A)return(0,f.el)(".dhx_editor_shapebar__preview",{_key:t.$key,"data-dhx-id":t.$key,style:{width:k||"calc(100%/3)",height:I||"100%",margin:F}},[(0,f.el)("img",{style:{maxWidth:"100%",maxHeight:"100%"},src:A||"",alt:e}),(0,f.el)("div.dhx_editor_shapebar__preview-img-overlay")]);var z,B=t.width,L=t.height;switch(Object.keys(u.flowShapes).includes(e)?($=((x=this._defaults[e])===null||x===void 0?void 0:x.width)*T||140*T,w=((C=this._defaults[e])===null||C===void 0?void 0:C.height)*T||90*T):($=B*T,w=L*T),e){case"$group":z=this.getGroupNode(m(m({},t),{type:e,width:B,height:L}),{data:this._data});break;case"$swimlane":z=this.getSwimlaneNode(m(m({},t),{type:e,width:B,height:L}),{data:this._data});break;default:z=H?new H(t,{defaults:this._defaults[e]||{},shapes:this._shapes}).render():new u.CustomShape(t,{defaults:this._defaults[e]||{},shapes:this._shapes}).render()}return(0,f.el)(".dhx_editor_shapebar__preview",{_key:t.$key,"data-dhx-id":t.$key,style:{width:$,height:w,margin:F}},[o||(0,f.el)("div",{style:{transform:"scale(".concat(T,")"),transformOrigin:(0,d.isIE)()?"0":"50%"}},[z])])},n.prototype.getGroupNode=function(e,t){return new s.Group(e,t).render()},n.prototype.getSwimlaneNode=function(e,t){var o={},c=e.layout;if(e.layout.length){var h=new Set(c.flat(1/0));e.groupChildren=Array.from(h);for(var g=0;g<c.length;g++)for(var x=c[g],C=0;C<x.length;C++){var k=c[g][C];o[k]||(o[k]={type:"$sgroup",id:k,groupChildren:[]},o[k].$item=new l.GroupSwimlane(o[k],t))}}return new r.Swimlane(e,t).render(Object.values(o))},n.prototype._shapeInit=function(e){var t,o=["circle","junction","or"].includes(e.type),c=this._defaults[e.type],h=e.text||(c==null?void 0:c.text)||e.type[0].toUpperCase()+e.type.slice(1);switch(e.width=e.width||(c==null?void 0:c.width)||(o?90:140),e.height=e.height||(c==null?void 0:c.height)||90,e.fontColor=e.fontColor||(c==null?void 0:c.fontColor)||"var(--dhx-shapebar-item-font-color)",e.type){case"text":e.text=h,t=this._getTextIcon();break;case"card":case"img-card":e.text=e.text||(c==null?void 0:c.text)||u.locale.text,e.title=e.title||(c==null?void 0:c.text)||u.locale.title;break;case"topic":return e.text=e.text||(c==null?void 0:c.text)||u.locale.text,e.height=e.height||(c==null?void 0:c.height)||30,this._getWrapped(e.type,e);default:e.fill=e.fill||(c==null?void 0:c.fill)||"var(--dhx-shapebar-item-background)",e.stroke=e.stroke||(c==null?void 0:c.stroke)||"var(--dhx-shapebar-item-border-color)",e.text=h}return this._getWrapped(e.type,e,t)},n.prototype._barCreator=function(){var e=this,t=[],o=0,c={increaseValue:function(){return++o},getValue:function(){return o}};if(this.config.sections){var h=function(O){var D=[];g.config.sections[O].forEach(function(A){var H=["org","group","swimlane","flowShapes"].find(function(S){return A[S]===!0});H&&!A.type?D.push(e._getShapeSection(H,c)):(e._addToPull(c,A),D.push(e._shapeInit(e._pull[o])))}),t.push(g._wrapDropdown(O,(0,f.el)(".dhx_editor_shapebar__area",D)))},g=this;for(var x in this.config.sections)h(x)}else{var C=Object.keys(this._defaults).map(function(O){return e._addToPull(c,O),e._shapeInit(e._pull[o])}),k=this._getShapeSection("group",c),I=this._getShapeSection("swimlane",c);t.push(this._wrapDropdown(u.locale.shapebar.shapeSections,(0,f.el)(".dhx_editor_shapebar__area",C)),this._wrapDropdown(u.locale.shapebar.groupSections,(0,f.el)(".dhx_editor_shapebar__area",k)),this._wrapDropdown(u.locale.shapebar.swimlaneSections,(0,f.el)(".dhx_editor_shapebar__area",I)))}return t},n.prototype._getShapeSection=function(e,t){var o=this,c="var(--dhx-shapebar-item-background)",h="var(--dhx-shapebar-item-font-color)",g="var(--dhx-shapebar-item-border-color)";switch(e){case"group":return[{type:"$group",header:{text:u.locale.shapebar.group,closable:!0,fill:c,fontColor:h},style:{stroke:g},height:300,width:480}].map(function(x){return o._addToPull(t,x),o._shapeInit(o._pull[t.getValue()])});case"swimlane":return[{type:"$swimlane",height:340,width:480,header:{text:u.locale.shapebar.swimlaneRows,closable:!0,fill:c,fontColor:h},style:{stroke:g},layout:[[(0,v.uid)()],[(0,v.uid)()],[(0,v.uid)()]],subHeaderRows:{enable:!0,fill:c,fontColor:h},subHeaderCols:{enable:!0,fill:c,fontColor:h}},{type:"$swimlane",height:340,width:480,header:{text:u.locale.shapebar.swimlaneCols,closable:!0,fill:c,fontColor:h},style:{stroke:g},layout:[[(0,v.uid)(),(0,v.uid)(),(0,v.uid)()]],subHeaderRows:{enable:!0,fill:c,fontColor:h},subHeaderCols:{enable:!0,fill:c,fontColor:h}},{type:"$swimlane",height:340,width:480,header:{text:u.locale.shapebar.swimlaneMix,closable:!0,fill:c,fontColor:h},style:{stroke:g},layout:[[(0,v.uid)(),(0,v.uid)(),(0,v.uid)()],[(0,v.uid)(),(0,v.uid)(),(0,v.uid)()],[(0,v.uid)(),(0,v.uid)(),(0,v.uid)()]],subHeaderRows:{enable:!0,fill:c,fontColor:h},subHeaderCols:{enable:!0,fill:c,fontColor:h}}].map(function(x){return o._addToPull(t,x),o._shapeInit(o._pull[t.getValue()])});case"org":return["card","img-card"].map(function(x){return o._addToPull(t,x),o._shapeInit(o._pull[t.getValue()])});default:return Object.keys(u.flowShapes).map(function(x){return o._addToPull(t,x),o._shapeInit(o._pull[t.getValue()])})}},n.prototype._addToPull=function(e,t){e.increaseValue();var o=e.getValue();this._pull[o]={$key:o,type:t},(0,v.isObject)(t)&&(this._pull[o]=m(m({},this._pull[o]),t))},n.prototype._render=function(e){return(0,f.el)(".dhx_editor_shapebar__wrapper",{onpointerdown:this._htmlEvents.onpointerdown},[].concat(this._barCreator()))},n}(p.View);_.Shapebar=a},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.base=void 0,_.base={shapebar:{width:300,scale:.5,gap:"6px 8px"},editbar:{width:300}}},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(r){for(var a,i=1,n=arguments.length;i<n;i++)for(var e in a=arguments[i])Object.prototype.hasOwnProperty.call(a,e)&&(r[e]=a[e]);return r},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.Editbar=void 0;var E=y(217),m=y(45),v=y(1),f=y(8),d=y(27),p=y(43),u=y(247),s=y(275),l=function(){function r(a,i,n){var e=this;if(this._activeControls={},this._cell=a,this._editor=n,this._diagram=this._editor.diagram,this._properties=b(b({},(0,s.default)(m.i18n.diagram)[this._editor.config.type]),i.properties),this._controls=(0,u.default)(m.i18n.diagram),i.controls)for(var t=0,o=Object.entries(i.controls);t<o.length;t++){var c=o[t],h=c[0],g=c[1];this._controls[h]=b(b({},this._controls[g.type||h]),g)}this._diagram.data.getLength()||this.setControls({type:"$default"}),this._diagram.events.on(d.SelectionEvents.afterSelect,function(x){var C=x.id,k=x.batch;k.length>1?C===k[k.length-1]&&e.setControls({type:"$default"}):e._diagram.selection.getIds().length>1?e.setControls({type:"$default"}):e.setControls({id:C})}),this._diagram.events.on(d.SelectionEvents.afterUnSelect,function(x){var C=x.id,k=x.batch;k.length>1?C===k[k.length-1]&&e.setControls({type:"$default"}):e.setControls({type:"$default"})}),this._diagram.events.on(d.DataEvents.change,function(x,C){var k=e._diagram.selection.getItem();({add:!0,update:!0})[C]&&(k==null?void 0:k.id)===x&&Object.keys(e._activeControls).forEach(function(I){e.useSetValue({id:I,item:k})})}),[d.DataEvents.load,d.DataEvents.removeAll].forEach(function(x){e._diagram.events.on(x,function(){return e.setControls({type:"$default"})})})}return r.prototype.isFocused=function(){var a,i;return(i=(a=this._cell.getCellView())===null||a===void 0?void 0:a.el)===null||i===void 0?void 0:i.contains(document.activeElement)},r.prototype.setControls=function(a){var i=a.type,n=a.id;this._activeControls={};var e=this._diagram.data.getItem(n);n&&(i=e.type),this.setForm(this.getFormLayout(this.getTypeProperties(i,e)),e),this._cell.attach(this._form)},r.prototype.getFormLayout=function(a,i){var n=this;return a.map(function(e){return n.getControlLayout(n.getControlProperties(b(b({},e),{$parent:i})))})},r.prototype.getControlLayout=function(a){var i=this._controls[a.type];i||a.rows||a.cols||(0,f.dhxError)("".concat(a.type," control does not exist. See doc: https://docs.dhtmlx.com/diagram/"));for(var n=0,e=Object.entries(a);n<e.length;n++){var t=e[n],o=t[0],c=t[1];o!=="rows"&&o!=="cols"||(a[o]=this.getFormLayout(c,a.id||a.$parent))}return typeof(i==null?void 0:i.$layout)=="function"&&i.$layout(a)||a},r.prototype.getControlProperties=function(a){var i,n,e=this._controls[a.type];if(e){var t=a.name||a.id||(0,v.uid)(),o=(n=(i=this._activeControls[a.$parent])===null||i===void 0?void 0:i.$properties)===null||n===void 0?void 0:n[a.key],c=this._activeControls[t]=b(b(b({id:t},e),a),o);for(var h in c)h.startsWith("$")||(a[h]=c[h])}return a},r.prototype.getTypeProperties=function(a,i){var n=i==null?void 0:i.$item.getBaseType(),e=this._properties[a]||this._properties["$".concat(n)];return typeof e=="function"?e({item:i,editor:this._editor}):e},r.prototype.setForm=function(a,i){var n=this;a===void 0&&(a=[]),this._form&&this._form.destructor(),this._form=new E.ProForm(null,{padding:"16px 16px 0 16px",rows:a}),Object.entries(this._activeControls).forEach(function(e){var t,o=e[0],c=e[1];typeof c.$setValue=="function"&&n.useSetValue({id:o,item:i});var h=c.$on&&Object.entries(c.$on);h&&h.forEach(function(g){var x=g[0],C=g[1],k=n._form.getItem(o);k==null||k.events.on(x,function(I){if(typeof C=="function")return C({control:k,editor:n._editor,id:i==null?void 0:i.id},I)})}),(t=n._form.getItem(o))===null||t===void 0||t.events.on(E.ItemEvent.input,function(g){n.useHandler({id:o,value:g,item:i})})}),this._form.events.on(E.FormEvents.change,function(e,t){n.useHandler({id:e,value:t,item:i})})},r.prototype.useHandler=function(a){var i=a.id,n=a.value,e=a.item,t=this._activeControls[i];if(t&&typeof t.$handler=="function"){if(n===(0,p.getValueFromObjectByKeys)(e,t.key))return;t.$handler({id:e==null?void 0:e.id,key:t.key,editor:this._editor,control:this._form.getItem(i),value:n}),this._editor.paint()}},r.prototype.useSetValue=function(a){var i=a.id,n=a.item,e=this._activeControls[i];if(e&&typeof e.$setValue=="function"){var t=(0,p.getValueFromObjectByKeys)(n,e.key),o=this._form.getItem(e.id);if(o.getValue()===t)return;e.$setValue({control:o,value:t,editor:this._editor})}},r}();_.Editbar=l},function(W,_,y){var b=this&&this.__createBinding||(Object.create?function(m,v,f,d){d===void 0&&(d=f);var p=Object.getOwnPropertyDescriptor(v,f);p&&!("get"in p?!v.__esModule:p.writable||p.configurable)||(p={enumerable:!0,get:function(){return v[f]}}),Object.defineProperty(m,d,p)}:function(m,v,f,d){d===void 0&&(d=f),m[d]=v[f]}),E=this&&this.__exportStar||function(m,v){for(var f in m)f==="default"||Object.prototype.hasOwnProperty.call(v,f)||b(v,m,f)};Object.defineProperty(_,"__esModule",{value:!0}),E(y(104),_),E(y(245),_),E(y(4),_)},function(W,_,y){var b,E=this&&this.__extends||(b=function(e,t){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,c){o.__proto__=c}||function(o,c){for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(o[h]=c[h])},b(e,t)},function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}b(e,t),e.prototype=t===null?Object.create(t):(o.prototype=t.prototype,new o)}),m=this&&this.__spreadArray||function(e,t,o){if(o||arguments.length===2)for(var c,h=0,g=t.length;h<g;h++)!c&&h in t||(c||(c=Array.prototype.slice.call(t,0,h)),c[h]=t[h]);return e.concat(c||Array.prototype.slice.call(t))};Object.defineProperty(_,"__esModule",{value:!0}),_.DatePicker=void 0;var v=y(48),f=y(24),d=y(3),p=y(0),u=y(1),s=y(9),l=y(11),r=y(4),a=y(6),i=y(14),n=function(e){function t(o,c){var h=e.call(this,null,c)||this;return h.events=new d.EventSystem,h._popupIsFocus=!1,h._propsItem=["required","validation","valueFormat","icon","placeholder","editable","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage"],h._propsCalendar=["mode","mark","disabledDates","weekStart","weekNumbers","timePicker","dateFormat","timeFormat","thisMonthOnly"],h._props=m(m(m([],a.baseProps,!0),h._propsItem,!0),h._propsCalendar,!0),h._keyManager=new i.KeyManager(function(){var g,x,C,k=document.activeElement;return((C=(x=(g=h.getRootView())===null||g===void 0?void 0:g.refs)===null||x===void 0?void 0:x.input)===null||C===void 0?void 0:C.el)===k||h._popup.isVisible()}),h._initView(c),h._initHandlers(),h._initHotkeys(),h.mount(o,(0,p.create)({render:function(){return h._draw()}})),h}return E(t,e),t.prototype.destructor=function(){this._popup&&this._popup.destructor(),this._keyManager&&this._keyManager.destructor(),this.calendar&&this.calendar.destructor(),this.events&&this.events.clear(),this.events=this._uid=this._propsCalendar=this._propsItem=this._props=this._keyManager=null,e.prototype._destructor.call(this)},t.prototype.setProperties=function(o){if(o&&!(0,u.isEmptyObj)(o)&&this.events.fire(r.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var c in o)this._props.includes(c)&&(this.config[c]=o[c],this._propsCalendar.includes(c)&&(this.calendar.config[c]=o[c]));this.events.fire(r.ItemEvent.afterChangeProperties,[this.getProperties()]),this.calendar.paint(),this.paint()}},t.prototype.getProperties=function(){for(var o={},c=0,h=this._props;c<h.length;c++){var g=h[c];o[g]=this.config[g]}return o},t.prototype.show=function(){var o=this.config,c=o.value;o.hidden&&this.events.fire(r.ItemEvent.beforeShow,[c])&&(this.config.hidden=!1,this.events.fire(r.ItemEvent.afterShow,[c]))},t.prototype.hide=function(o){var c=this.config,h=c.value;c.hidden&&!o||!this.events.fire(r.ItemEvent.beforeHide,[h,o])||(this.config.hidden=!0,this.events.fire(r.ItemEvent.afterHide,[h,o]))},t.prototype.isVisible=function(){return!this.config.hidden},t.prototype.disable=function(){this.config.disabled=!0,this.paint()},t.prototype.enable=function(){var o;this.config.disabled=!1,!((o=this.parent)===null||o===void 0)&&o.isDisabled()&&this.parent.enable(),this.paint()},t.prototype.isDisabled=function(){return!!this.config.disabled},t.prototype.validate=function(o){var c;o===void 0&&(o=!1);for(var h=[],g=1;g<arguments.length;g++)h[g-1]=arguments[g];var x=h.length?h[0]:this.getValue(),C=((c=this.config.valueFormat)===null||c===void 0?void 0:c.toLowerCase())==="date"?x instanceof Date:(0,f.stringToDate)(x,this.calendar.config.dateFormat,!0);if(!o&&!this.events.fire(r.ItemEvent.beforeValidate,[x]))return!1;var k=!0;return(this.config.required||h.length)&&(k=!!C),typeof this.config.validation=="function"&&(k=this.config.validation(x)),o||(this.setValidationStatus(k?"success":"error"),this.events.fire(r.ItemEvent.afterValidate,[x,k]),this.paint()),k},t.prototype.clearValidate=function(){this.setValidationStatus(),this.paint()},t.prototype.setValue=function(o){o!==void 0&&o!==this.config.value&&this.calendar.setValue(o)},t.prototype.getValue=function(o){var c;return this.calendar.getValue(((c=this.config.valueFormat)===null||c===void 0?void 0:c.toLowerCase())==="date"||o)||""},t.prototype.focus=function(){var o=this;(0,p.awaitRedraw)().then(function(){o.getRootView().refs.input.el.focus()})},t.prototype.blur=function(){var o=this;(0,p.awaitRedraw)().then(function(){o._popup.hide(),o.getRootView().refs.input.el.blur()})},t.prototype.clear=function(){this.config.value!==""&&this.calendar.clear()},t.prototype.getWidget=function(){return this.calendar},t.prototype._initView=function(o){if((0,u.isEmptyObj)(o))throw new Error("Check the configuration is correct");for(var c in this.calendar&&this.calendar.destructor(),this._popup&&this._popup.destructor(),this.config={type:o.type,id:o.id,name:o.name,disabled:!1,editable:!1,hidden:!1,value:"",mode:"calendar",weekStart:"sunday",weekNumbers:!1,timePicker:!1,dateFormat:"%d/%m/%y",timeFormat:24,thisMonthOnly:!1,valueFormat:"string",required:!1,icon:"",placeholder:"",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"},o)c!=="id"&&c!=="type"&&c!=="name"&&(this.config[c]=o[c]);this._popup=new l.Popup,this.calendar=new v.Calendar(null,(0,a.widgetConfig)(o)),this._popup.attach(this.calendar)},t.prototype._initHandlers=function(){var o=this;this.calendar.events.on(v.CalendarEvents.beforeChange,function(c){var h;return c!==""&&((h=o.config.valueFormat)===null||h===void 0?void 0:h.toLowerCase())!=="date"&&(c=(0,f.getFormattedDate)(o.calendar.config.dateFormat,c)),o.events.fire(r.ItemEvent.beforeChange,[c])}),this.calendar.events.on(v.CalendarEvents.change,function(c,h,g,x){var C;o.config.value=o.calendar.getValue(((C=o.config.valueFormat)===null||C===void 0?void 0:C.toLowerCase())==="date"),o.events.fire(r.ItemEvent.change,[o.config.value]),(0,a.isVerify)(o.config)&&(x==="clear"?o.setValidationStatus(o.validate(!0)?"success":"error"):o.validate()),o._popup.hide(),o.paint()}),this.events.on(r.ItemEvent.blur,function(){o._popupIsFocus=!1,o.paint()}),this._popup.events.on(l.PopupEvents.afterHide,function(){document.activeElement!==o.getRootView().refs.input.el&&o.events.fire(r.ItemEvent.blur,[o.getValue()]),o.paint()})},t.prototype._getHandlers=function(){var o=this;return{onblur:function(){o._popup.isVisible()||o.events.fire(r.ItemEvent.blur,[o.getValue()]),o.paint()},onfocus:function(){if(!o._popup.isVisible()){var c=o.getRootView().refs.input.el;o._popup.show(c,{theme:c}),o.events.fire(r.ItemEvent.focus,[o.getValue()]),o.paint()}},oninput:function(c){var h=c.target.value;o.events.fire(r.ItemEvent.input,[h])},onchange:function(c){var h=c.target.value;o.config.editable&&(0,f.stringToDate)(h,o.calendar.config.dateFormat,!0)?o.setValue(h):h===""&&o.clear()},onkeydown:function(c){var h,g,x,C=document.activeElement;(((x=(g=(h=o.getRootView())===null||h===void 0?void 0:h.refs)===null||g===void 0?void 0:g.input)===null||x===void 0?void 0:x.el)===C||o._popup.isVisible())&&o.events.fire(r.ItemEvent.keydown,[c])},onmousedown:function(){o._popup.getContainer()!==document.activeElement&&(o._popupIsFocus=!1)}}},t.prototype._initHotkeys=function(){var o=this,c={"shift+tab":function(){o._applyTab()},tab:function(){o._applyTab()},escape:function(){o._popup.isVisible()&&o.getRootView().refs.input.el.focus(),o._popup.hide()},enter:function(g){if(g.preventDefault(),!o._popup.isVisible()){var x=o.getRootView().refs.input.el;o._popup.show(x,{theme:x})}},arrowRight:function(g){var x=o._popup.getContainer();o._popup.isVisible()&&!o._popupIsFocus&&(g.preventDefault(),x.focus(),o._popupIsFocus=!0)}};for(var h in c)this._keyManager.addHotKey(h,c[h])},t.prototype._draw=function(){var o,c,h,g=this.config,x=g.icon,C=g.required,k=g.disabled,I=g.placeholder,O=g.name,D=g.id,A=g.editable,H=g.label,S=g.helpMessage,$=this.calendar.getValue(),w=this._popup.isVisible()||((h=(c=(o=this.getRootView())===null||o===void 0?void 0:o.refs)===null||c===void 0?void 0:c.input)===null||h===void 0?void 0:h.el)===document.activeElement;return(0,p.el)("div.dhx_form-group",{class:(0,a.getFormItemCss)(this.config,(0,a.isVerify)(this.config),w)},[this._drawLabel(),(0,p.el)(".dhx_input__wrapper",[(0,p.el)("div.dhx_input__container",{},[(0,p.el)(".dhx_input__icon",{class:x||"dxi dxi-calendar-today"}),(0,p.el)("input.dhx_input.dhx_input--icon-padding",{tabindex:0,"data-dhx-id":O||D,_key:this._uid,_ref:"input",value:$,type:"text",required:C,disabled:k,class:w&&"dhx_input--focus",placeholder:I||"",name:O||"",id:D||this._uid,onfocus:this._handlers.onfocus,oninput:this._handlers.oninput,onchange:this._handlers.onchange,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,onmousedown:this._handlers.onmousedown,autocomplete:"off",readOnly:!A,"aria-label":H||"".concat(A?"type or":""," select date"),"aria-describedby":S?"dhx_label__help_".concat(D||this._uid):null})]),(0,a.getValidationMessage)(this.config)&&(0,p.el)("span.dhx_input__caption",{},(0,a.getValidationMessage)(this.config))])])},t.prototype._applyTab=function(){var o,c,h;document.activeElement===((h=(c=(o=this._popup.getRootView())===null||o===void 0?void 0:o.refs)===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.el)||this._popupIsFocus||this._popup.hide()},t}(s.Label);_.DatePicker=n},function(W,_,y){var b,E=this&&this.__extends||(b=function(a,i){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])},b(a,i)},function(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=a}b(a,i),a.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}),m=this&&this.__assign||function(){return m=Object.assign||function(a){for(var i,n=1,e=arguments.length;n<e;n++)for(var t in i=arguments[n])Object.prototype.hasOwnProperty.call(i,t)&&(a[t]=i[t]);return a},m.apply(this,arguments)},v=this&&this.__spreadArray||function(a,i,n){if(n||arguments.length===2)for(var e,t=0,o=i.length;t<o;t++)!e&&t in i||(e||(e=Array.prototype.slice.call(i,0,t)),e[t]=i[t]);return a.concat(e||Array.prototype.slice.call(i))};Object.defineProperty(_,"__esModule",{value:!0}),_.Button=void 0;var f=y(0),d=y(5),p=y(4),u=y(3),s=y(1),l=y(6),r=function(a){function i(n,e){var t=a.call(this,n,m({disabled:!1,hidden:!1,submit:!1,full:!1,circle:!1,loading:!1,view:"flat",size:"medium",color:"primary",height:"content",url:"",text:"",icon:""},e))||this;return t._propsItem=["submit","url","text","icon","view","size","color","full","circle","loading"],t._props=v(v([],l.baseProps,!0),t._propsItem,!0),t.config.text=t.config.text||t.config.value||"",t.events=new u.EventSystem,t._handlers={onclick:function(o){return t.events.fire(p.ItemEvent.click,[o])},onblur:function(){return t.events.fire(p.ItemEvent.blur,[t.config.text])},onfocus:function(){return t.events.fire(p.ItemEvent.focus,[t.config.text])},onkeydown:function(o){return t.events.fire(p.ItemEvent.keydown,[o])}},t.mount(n,(0,f.create)({render:function(){return t._draw()}})),t}return E(i,a),i.prototype.destructor=function(){this.events&&this.events.clear(),this.config=this._propsItem=this._props=this.events=this._handlers=this._uid=null,this.unmount()},i.prototype.setProperties=function(n){if(n&&!(0,s.isEmptyObj)(n)&&this.events.fire(p.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var e in n)this._props.includes(e)&&(this.config[e]=n[e]);this.config.text=this.config.text||this.config.value,this.events.fire(p.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},i.prototype.getProperties=function(){for(var n={},e=0,t=this._props;e<t.length;e++){var o=t[e];n[o]=this.config[o]}return n},i.prototype.show=function(){var n=this.config,e=n.text,t=e===void 0?"":e;n.hidden&&this.events.fire(p.ItemEvent.beforeShow,[t])&&(this.config.hidden=!1,this.events.fire(p.ItemEvent.afterShow,[t]))},i.prototype.hide=function(n){n===void 0&&(n=!1);var e=this.config,t=e.text,o=t===void 0?"":t;e.hidden&&!n||!this.events.fire(p.ItemEvent.beforeHide,[o,n])||(this.config.hidden=!0,this.events.fire(p.ItemEvent.afterHide,[o,n]))},i.prototype.isVisible=function(){return!this.config.hidden},i.prototype.disable=function(){this.config.disabled=!0,this.paint()},i.prototype.enable=function(){var n;this.config.disabled=!1,!((n=this.parent)===null||n===void 0)&&n.isDisabled()&&this.parent.enable(),this.paint()},i.prototype.isDisabled=function(){return!!this.config.disabled},i.prototype.focus=function(){var n=this;(0,f.awaitRedraw)().then(function(){n.getRootView().refs.button.el.focus()})},i.prototype.blur=function(){var n=this;(0,f.awaitRedraw)().then(function(){n.getRootView().refs.button.el.blur()})},i.prototype._draw=function(){var n=this.config,e=n.color,t=n.size,o=n.view,c=n.loading,h=n.circle,g=n.icon,x=n.text,C=n.disabled,k=n.submit,I=n.id,O=n.name,D=n.full,A={danger:" dhx_button--color_danger",secondary:" dhx_button--color_secondary",primary:" dhx_button--color_primary",success:" dhx_button--color_success"}[e]||" dhx_button--color_primary",H={small:" dhx_button--size_small",medium:" dhx_button--size_medium"}[t]||" dhx_button--size_medium",S={flat:" dhx_button--view_flat",link:" dhx_button--view_link"}[o]||" dhx_button--view_flat",$=D?" dhx_button--width_full":"",w=h?" dhx_button--circle":"",T=c?" dhx_button--loading":"",F=g&&!x?" dhx_button--icon":"";return(0,f.el)("button",{disabled:C,id:I,"data-dhx-id":O||I,onclick:this._handlers.onclick,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,type:k?"submit":"button",class:"dhx_button "+A+H+S+w+$+T+F,_ref:"button"},[g&&(0,f.el)("span.dhx_button__icon",{class:g}),x&&(0,f.el)("span.dhx_button__text",x),c&&(0,f.el)("span.dhx_button__loading",[(0,f.el)("span.dhx_button__loading-icon.dxi.dxi-loading")])])},i}(d.View);_.Button=r},function(W,_,y){var b,E=this&&this.__extends||(b=function(e,t){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,c){o.__proto__=c}||function(o,c){for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(o[h]=c[h])},b(e,t)},function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}b(e,t),e.prototype=t===null?Object.create(t):(o.prototype=t.prototype,new o)}),m=this&&this.__assign||function(){return m=Object.assign||function(e){for(var t,o=1,c=arguments.length;o<c;o++)for(var h in t=arguments[o])Object.prototype.hasOwnProperty.call(t,h)&&(e[h]=t[h]);return e},m.apply(this,arguments)},v=this&&this.__spreadArray||function(e,t,o){if(o||arguments.length===2)for(var c,h=0,g=t.length;h<g;h++)!c&&h in t||(c||(c=Array.prototype.slice.call(t,0,h)),c[h]=t[h]);return e.concat(c||Array.prototype.slice.call(t))};Object.defineProperty(_,"__esModule",{value:!0}),_.CheckboxGroup=void 0;var f=y(0),d=y(16),p=y(3),u=y(105),s=y(9),l=y(4),r=y(1),a=y(6),i=y(11),n=function(e){function t(o,c){var h=e.call(this,null,c)||this;return h.events=new p.EventSystem,h._buttons=[],h._propsItem=["required","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage","options"],h._props=v(v([],a.baseProps,!0),h._propsItem,!0),h._initView(c),h._initHandlers(),h.mount(o,(0,f.create)({render:function(){return h._draw()}})),h}return E(t,e),t.prototype.destructor=function(){this.events&&this.events.clear(),this.layout&&this.layout.destructor(),this.events=this._uid=this._propsItem=this._props=this._buttons=null,e.prototype._destructor.call(this),this.unmount()},t.prototype.setProperties=function(o,c){if(o!==void 0&&this.events.fire(l.ItemEvent.beforeChangeProperties,[this.getProperties()])){if(typeof o=="object"&&!(0,r.isEmptyObj)(o)){for(var h in o)this._props.includes(h)&&(this.config[h]=o[h]);o.hasOwnProperty("options")&&(this._initView(this.config),this._initHandlers())}if(typeof o=="string"&&c&&!(0,r.isEmptyObj)(c)){var g=this._buttons.find(function(x){return x.config.id===o});g&&g.setProperties(c,!0)}this.events.fire(l.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},t.prototype.getProperties=function(o){if(o===void 0){var c={};for(var h in this.config)this._props.includes(h)&&(c[h]=this.config[h]);return c}return this._buttons.find(function(g){return g.config.id===o}).getProperties()},t.prototype.getValue=function(o){if(o===void 0){var c={};return this._buttons.forEach(function(g){c[g.config.id]=g.getValue()}),c}var h=this._buttons.find(function(g){return g.config.id===o});if(o&&h)return h.getValue()},t.prototype.setValue=function(o){if(o!==void 0&&!(0,r.isEmptyObj)(o)){for(var c=this.getValue(),h=m({},c),g=function($,w){var T=x._buttons.find(function(z){return z.config.id===$});if(T){var F=T.config.value;h[$]=typeof F=="string"?w&&F||"":!!w}},x=this,C=0,k=Object.entries(o);C<k.length;C++){var I=k[C];g(I[0],I[1])}if(!(0,r.compare)(c,h)&&this.events.fire(l.ItemEvent.beforeChange,[h])){for(var O=function($,w){var T=D._buttons.find(function(F){return F.config.id===$});T&&T.setValue(!!w,!0)},D=this,A=0,H=Object.entries(o);A<H.length;A++){var S=H[A];O(S[0],S[1])}this.events.fire(l.ItemEvent.change,[this.getValue()]),(0,a.isVerify)(this.config)&&this.validate()}}},t.prototype.isChecked=function(o){if(o===void 0){var c={};return this._buttons.forEach(function(g){c[g.config.id]=g.isChecked()}),c}var h=this._buttons.find(function(g){return g.config.id===o});if(o&&h)return h.isChecked()},t.prototype.focus=function(o){var c=this;(0,f.awaitRedraw)().then(function(){if(c._buttons.length){if(!o)return c._buttons[0].focus();var h=c._buttons.find(function(g){return g.config.id===o});h&&h.focus()}})},t.prototype.blur=function(){var o=this;(0,f.awaitRedraw)().then(function(){o._buttons.length&&o._buttons.forEach(function(c){c.blur()})})},t.prototype.show=function(o){var c,h=o&&this._buttons.find(function(g){return g.config.id===o});(0,r.isDefined)(o)&&!h||(!h&&(this.config.hidden||this._buttons.some(function(g){return g.config.hidden}))||!((c=h==null?void 0:h.config)===null||c===void 0)&&c.hidden)&&this.events.fire(l.ItemEvent.beforeShow,[this.getValue(),o])&&(h?h==null||h.show():this._buttons.forEach(function(g){return g.show()}),this.config.hidden=!1,this.events.fire(l.ItemEvent.afterShow,[this.getValue(),o]))},t.prototype.hide=function(o,c){var h,g=o&&this._buttons.find(function(x){return x.config.id===o});(0,r.isDefined)(o)&&!g||(!g&&this.config.hidden||!((h=g==null?void 0:g.config)===null||h===void 0)&&h.hidden)&&!c||!this.events.fire(l.ItemEvent.beforeHide,[this.getValue(),o,c])||(g?(g==null||g.hide(),this.config.hidden=this._buttons.every(function(x){return x.config.hidden})):(this._buttons.forEach(function(x){return x.hide()}),this.config.hidden=!0),this.events.fire(l.ItemEvent.afterHide,[this.getValue(),o,c]))},t.prototype.isVisible=function(o){var c,h=this._buttons.find(function(g){return g.config.id===o});return!(this.config.hidden||(0,r.isDefined)(o)&&(!((c=h==null?void 0:h.config)===null||c===void 0)&&c.hidden))},t.prototype.enable=function(o){var c,h,g=o&&this._buttons.find(function(x){return x.config.id===o});(0,r.isDefined)(o)&&!g||(!g&&(this.config.disabled||this._buttons.some(function(x){return x.config.disabled}))||!((c=g==null?void 0:g.config)===null||c===void 0)&&c.disabled)&&(g?g==null||g.enable():this._buttons.forEach(function(x){return x.enable()}),this.config.disabled=!1,!((h=this.parent)===null||h===void 0)&&h.isDisabled()&&this.parent.enable(),this.paint())},t.prototype.disable=function(o,c){var h,g=o&&this._buttons.find(function(x){return x.config.id===o});(0,r.isDefined)(o)&&!g||(!g&&this.config.disabled||!((h=g==null?void 0:g.config)===null||h===void 0)&&h.disabled)&&!c||(g?(g==null||g.disable(),this.config.disabled=this._buttons.every(function(x){return x.config.disabled})):(this._buttons.forEach(function(x){return x.disable()}),this.config.disabled=!0),this.paint())},t.prototype.isDisabled=function(o){var c,h=this._buttons.find(function(g){return g.config.id===o});return!!(this.config.disabled||(0,r.isDefined)(o)&&(!((c=h==null?void 0:h.config)===null||c===void 0)&&c.disabled))},t.prototype.clear=function(){if(this._buttons.some(function(c){return c.isChecked()})){var o={};if(this._buttons.forEach(function(c){o[c.config.id]=typeof c.config.value=="string"&&""}),!this.events.fire(l.ItemEvent.beforeChange,[o]))return;this._buttons.forEach(function(c){c.clear(!0)}),this.events.fire(l.ItemEvent.change,[o]),(0,a.isVerify)(this.config)&&this.setValidationStatus(this.validate(!0)?"success":"error")}},t.prototype.validate=function(o){o===void 0&&(o=!1);var c=this.getValue();if(!o&&!this.events.fire(l.ItemEvent.beforeValidate,[c]))return!1;var h=!0;return this.config.required&&(h=this._buttons.some(function(g){return g.config.$required&&!!g.config.checked})),o||(this._buttons.forEach(function(g){g.setValidationStatus(h?"success":"error")}),this.setValidationStatus(h?"success":"error"),this.events.fire(l.ItemEvent.afterValidate,[c,h]),this.paint()),h},t.prototype.clearValidate=function(){this.setValidationStatus(),this._buttons.forEach(function(o){o.clearValidate()}),this.paint()},t.prototype._initView=function(o){var c=this;if((0,r.isEmptyObj)(o)||!o.options||(0,r.isEmptyObj)(o.options))throw new Error("Check the configuration is correct");for(var h in this.layout&&this.layout.destructor(),this._buttons.length&&(this._buttons.forEach(function(x){x.destructor()}),this._buttons=[]),this.config={type:o.type,id:o.id,name:o.name,disabled:!1,hidden:!1,options:{},required:!1,label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"},o)h!=="id"&&h!=="type"&&h!=="name"&&(this.config[h]=o[h]);this.config.helpMessage&&(this._helper=new i.Popup({css:"dhx_tooltip dhx_tooltip--forced dhx_tooltip--light"}),this._helper.attachHTML(this.config.helpMessage));var g=this.config.options.rows||this.config.options.cols;g==null||g.forEach(function(x){x.id=x.id||(0,r.uid)(),x.$group=!0}),this.layout=new d.Layout(null,this.config.options),g==null||g.forEach(function(x){var C=new u.Checkbox(null,m(m({},x),{disabled:o.disabled||x.disabled,name:o.name,$required:o.required}));c._buttons.push(C),c.layout.getCell(x.id).attach(C),C.events.on(l.ItemEvent.beforeChange,function(k){var I,O=m(m({},c.getValue()),((I={})[C.config.id]=k,I));return c.events.fire(l.ItemEvent.beforeChange,[O])}),C.events.on(l.ItemEvent.change,function(){c.events.fire(l.ItemEvent.change,[c.getValue()]),(0,a.isVerify)(c.config)&&c.validate()}),C.events.on(l.ItemEvent.focus,function(k,I){c.events.fire(l.ItemEvent.focus,[c.getValue(),I])}),C.events.on(l.ItemEvent.blur,function(k,I){c.events.fire(l.ItemEvent.blur,[c.getValue(),I])}),C.events.on(l.ItemEvent.keydown,function(k,I){c.events.fire(l.ItemEvent.keydown,[k,I])}),C.events.on(l.ItemEvent.afterHide,function(){(0,f.awaitRedraw)().then(function(){var k;(k=c.layout.getCell(C.config.id))===null||k===void 0||k.hide()})}),C.events.on(l.ItemEvent.afterShow,function(){var k;(k=c.layout.getCell(C.config.id))===null||k===void 0||k.show()})}),this.config.value&&this.setValue(this.config.value),this.clearValidate(),!this.config.disabled&&this._buttons.length&&this._buttons.every(function(x){return x.config.disabled})&&(this.config.disabled=!0)},t.prototype._initHandlers=function(){var o=this;this.events.on(l.ItemEvent.change,function(){o.config.value=o.getValue(),o.paint()})},t.prototype._draw=function(){var o=this.config.hidden?" dhx_form-group--hidden":"",c=this.config,h=c.label,g=c.labelWidth,x=c.helpMessage,C=c.required,k=c.name,I=c.id;return(0,f.el)("fieldset.dhx_form-group-fieldset",{},[(0,f.el)("div.dhx_form-group.dhx_form-group--checkbox-group",{class:(0,a.getFormItemCss)(this.config,(0,a.isVerify)(this.config))+o,"data-dhx-id":k||I,role:"radiogroup",_key:I||this._uid},[h||g||x||C?this._drawLabel():null,(0,f.el)("div.dhx_checkbox-group--container",{},[this.layout&&(0,f.inject)(this.layout.getRootView()),C&&(0,a.getValidationMessage)(this.config)&&(0,f.el)("span.dhx_input__caption",(0,a.getValidationMessage)(this.config))])])])},t}(s.Label);_.CheckboxGroup=n},function(W,_,y){var b,E=this&&this.__extends||(b=function(e,t){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,c){o.__proto__=c}||function(o,c){for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(o[h]=c[h])},b(e,t)},function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}b(e,t),e.prototype=t===null?Object.create(t):(o.prototype=t.prototype,new o)}),m=this&&this.__assign||function(){return m=Object.assign||function(e){for(var t,o=1,c=arguments.length;o<c;o++)for(var h in t=arguments[o])Object.prototype.hasOwnProperty.call(t,h)&&(e[h]=t[h]);return e},m.apply(this,arguments)},v=this&&this.__spreadArray||function(e,t,o){if(o||arguments.length===2)for(var c,h=0,g=t.length;h<g;h++)!c&&h in t||(c||(c=Array.prototype.slice.call(t,0,h)),c[h]=t[h]);return e.concat(c||Array.prototype.slice.call(t))};Object.defineProperty(_,"__esModule",{value:!0}),_.RadioGroup=void 0;var f=y(0),d=y(1),p=y(16),u=y(11),s=y(3),l=y(222),r=y(6),a=y(9),i=y(4),n=function(e){function t(o,c){var h=e.call(this,null,c)||this;return h.events=new s.EventSystem,h._buttons=[],h._propsItem=["required","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage","options"],h._props=v(v([],r.baseProps,!0),h._propsItem,!0),h._initView(c),h._initHandlers(),h.config.value&&h._setValue(h.config.value),h.clearValidate(),h.config.helpMessage&&(h._helper=new u.Popup({css:"dhx_tooltip dhx_tooltip--forced dhx_tooltip--light"}),h._helper.attachHTML(h.config.helpMessage)),h.mount(o,(0,f.create)({render:function(){return h._draw()}})),h}return E(t,e),t.prototype.destructor=function(){this.events&&this.events.clear(),this.layout&&this.layout.destructor(),this.events=this._uid=this._propsItem=this._props=this._buttons=null,e.prototype._destructor.call(this),this.unmount()},t.prototype.setProperties=function(o,c){if(o!==void 0&&this.events.fire(i.ItemEvent.beforeChangeProperties,[this.getProperties()])){if(typeof o=="object"&&!(0,d.isEmptyObj)(o)){for(var h in o)this._props.includes(h)&&(this.config[h]=o[h]);o.hasOwnProperty("options")&&(this._initView(this.config),this._initHandlers())}if(typeof o=="string"&&c&&!(0,d.isEmptyObj)(c)){var g=this._buttons.find(function(x){return x.config.id===o});g&&g.setProperties(c)}this.events.fire(i.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},t.prototype.getProperties=function(o){if(o===void 0){var c={};for(var h in this.config)this._props.includes(h)&&(c[h]=this.config[h]);return c}return this._buttons.find(function(g){return g.config.id===o}).getProperties()},t.prototype.getValue=function(){var o=this;return this._buttons.forEach(function(c){c.getValue()&&(o.config.value=c.getValue()||"")}),this.config.value||""},t.prototype.setValue=function(o){o!==this.config.value&&(this._setValue(o),this.events.fire(i.ItemEvent.change,[o]),(0,r.isVerify)(this.config)&&this.validate())},t.prototype.focus=function(o){var c=this;(0,f.awaitRedraw)().then(function(){if(c._buttons.length){if(!o)return c._buttons[0].focus();var h=c._buttons.find(function(g){return g.config.id===o});if(h)return h.focus()}})},t.prototype.blur=function(){var o=this;(0,f.awaitRedraw)().then(function(){o._buttons.length&&o._buttons.forEach(function(c){return c.blur()})})},t.prototype.show=function(o){var c,h=o&&this._buttons.find(function(g){return g.config.id===o});(0,d.isDefined)(o)&&!h||(!h&&(this.config.hidden||this._buttons.some(function(g){return g.config.hidden}))||!((c=h==null?void 0:h.config)===null||c===void 0)&&c.hidden)&&this.events.fire(i.ItemEvent.beforeShow,[this.getValue(),o])&&(h?h==null||h.show():this._buttons.forEach(function(g){return g.show()}),this.config.hidden=!1,this.events.fire(i.ItemEvent.afterShow,[this.getValue(),o]))},t.prototype.hide=function(o,c){var h,g=o&&this._buttons.find(function(x){return x.config.id===o});(0,d.isDefined)(o)&&!g||(!g&&this.config.hidden||!((h=g==null?void 0:g.config)===null||h===void 0)&&h.hidden)&&!c||!this.events.fire(i.ItemEvent.beforeHide,[this.getValue(),o,c])||(g?(g==null||g.hide(),this.config.hidden=this._buttons.every(function(x){return x.config.hidden})):(this._buttons.forEach(function(x){return x.hide()}),this.config.hidden=!0),this.events.fire(i.ItemEvent.afterHide,[this.getValue(),o,c]))},t.prototype.isVisible=function(o){var c,h=this._buttons.find(function(g){return g.config.id===o});return!(this.config.hidden||(0,d.isDefined)(o)&&(!((c=h==null?void 0:h.config)===null||c===void 0)&&c.hidden))},t.prototype.enable=function(o){var c,h,g=o&&this._buttons.find(function(x){return x.config.id===o});(0,d.isDefined)(o)&&!g||(!g&&(this.config.disabled||this._buttons.some(function(x){return x.config.disabled}))||!((c=g==null?void 0:g.config)===null||c===void 0)&&c.disabled)&&(g?g==null||g.enable():this._buttons.forEach(function(x){return x.enable()}),this.config.disabled=!1,!((h=this.parent)===null||h===void 0)&&h.isDisabled()&&this.parent.enable(),this.paint())},t.prototype.disable=function(o,c){var h,g=o&&this._buttons.find(function(x){return x.config.id===o});(0,d.isDefined)(o)&&!g||(!g&&this.config.disabled||!((h=g==null?void 0:g.config)===null||h===void 0)&&h.disabled)&&!c||(g?(g==null||g.disable(),this.config.disabled=this._buttons.every(function(x){return x.config.disabled})):(this._buttons.forEach(function(x){return x.disable()}),this.config.disabled=!0),this.paint())},t.prototype.isDisabled=function(o){var c,h=this._buttons.find(function(g){return g.config.id===o});return!!(this.config.disabled||(0,d.isDefined)(o)&&(!((c=h==null?void 0:h.config)===null||c===void 0)&&c.disabled))},t.prototype.clear=function(){this.config.value!==""&&(this._buttons.forEach(function(o){o.clear()}),this.config.value="",this.events.fire(i.ItemEvent.change,[this.config.value]),(0,r.isVerify)(this.config)&&this.setValidationStatus(this.validate(!0)?"success":"error"))},t.prototype.validate=function(o){var c=this;o===void 0&&(o=!1);var h=this.getValue();if(!o&&!this.events.fire(i.ItemEvent.beforeValidate,[h]))return!1;var g=!0;return this.config.required&&(g=this._buttons.some(function(x){return c.config.required&&!!x.config.checked})),o||(this._buttons.forEach(function(x){x.setValidationStatus(g?"success":"error")}),this.setValidationStatus(g?"success":"error"),this.events.fire(i.ItemEvent.afterValidate,[h,g]),this.paint()),g},t.prototype.clearValidate=function(){this.setValidationStatus(),this._buttons.map(function(o){o.clearValidate()}),this.paint()},t.prototype._initView=function(o){var c=this;if((0,d.isEmptyObj)(o)||!o.options||(0,d.isEmptyObj)(o.options))throw new Error("Check the configuration is correct");for(var h in this.layout&&this.layout.destructor(),this._buttons.length&&(this._buttons.forEach(function(x){x.destructor()}),this._buttons=[]),this.config={type:o.type,id:o.id,name:o.name,value:"",disabled:!1,hidden:!1,options:{},required:!1,label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"},o)h!=="id"&&h!=="type"&&h!=="name"&&(this.config[h]=o[h]);var g=this.config.options.rows||this.config.options.cols;g==null||g.forEach(function(x){x.id=x.id||(0,d.uid)()}),this.layout=new p.Layout(null,this.config.options),g==null||g.forEach(function(x){var C=new l.RadioButton(null,m(m({},x),{disabled:o.disabled||x.disabled,$name:o.name,$required:o.required}));c._buttons.push(C),c.layout.getCell(x.id).attach(C),C.events.on(l.RadioButtonEvents.beforeChange,function(){return c.events.fire(i.ItemEvent.beforeChange,[C.config.value||""])}),C.events.on(l.RadioButtonEvents.change,function(){c._buttons.map(function(k){k.config.id!==C.config.id&&k.setValue(!1)}),c.events.fire(i.ItemEvent.change,[c.getValue()]),(0,r.isVerify)(c.config)&&c.validate()}),C.events.on(l.RadioButtonEvents.focus,function(k,I){c.events.fire(i.ItemEvent.focus,[k,I])}),C.events.on(l.RadioButtonEvents.blur,function(k,I){c.events.fire(i.ItemEvent.blur,[k,I])}),C.events.on(l.RadioButtonEvents.keydown,function(k,I){c.events.fire(i.ItemEvent.keydown,[k,I])}),C.events.on(i.ItemEvent.afterHide,function(){(0,f.awaitRedraw)().then(function(){c.layout.getCell(C.config.id).hide()})}),C.events.on(i.ItemEvent.afterShow,function(){c.layout.getCell(C.config.id).show()})}),!this.config.disabled&&this._buttons.length&&this._buttons.every(function(x){return x.config.disabled})&&(this.config.disabled=!0)},t.prototype._initHandlers=function(){var o=this;this.events.on(i.ItemEvent.beforeChange,function(){return o.paint()}),this.events.on(i.ItemEvent.change,function(){o.config.value=o.getValue(),o.paint()})},t.prototype._draw=function(){var o=this.config,c=o.label,h=o.labelWidth,g=o.helpMessage,x=o.required,C=o.hidden,k=o.name,I=o.id,O=C?" dhx_form-group--hidden":"";return(0,f.el)("fieldset.dhx_form-group-fieldset",{},[(0,f.el)("div.dhx_form-group.dhx_form-group--radio-group",{class:(0,r.getFormItemCss)(this.config,(0,r.isVerify)(this.config))+O,"data-dhx-id":k||I,_key:I||this._uid},[c||h||g||x?this._drawLabel():null,(0,f.el)("div.dhx_radio-group--container",{},[this.layout&&(0,f.inject)(this.layout.getRootView()),x&&(0,r.getValidationMessage)(this.config)&&(0,f.el)("span.dhx_input__caption",(0,r.getValidationMessage)(this.config))])])])},t.prototype._setValue=function(o){o!==void 0&&this._buttons.findIndex(function(c){return c.config.value===o})!==-1&&this._buttons.forEach(function(c){c.setValue(o===c.config.value)})},t}(a.Label);_.RadioGroup=n},function(W,_,y){var b,E=this&&this.__extends||(b=function(a,i){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])},b(a,i)},function(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=a}b(a,i),a.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}),m=this&&this.__assign||function(){return m=Object.assign||function(a){for(var i,n=1,e=arguments.length;n<e;n++)for(var t in i=arguments[n])Object.prototype.hasOwnProperty.call(i,t)&&(a[t]=i[t]);return a},m.apply(this,arguments)},v=this&&this.__spreadArray||function(a,i,n){if(n||arguments.length===2)for(var e,t=0,o=i.length;t<o;t++)!e&&t in i||(e||(e=Array.prototype.slice.call(i,0,t)),e[t]=i[t]);return a.concat(e||Array.prototype.slice.call(i))};Object.defineProperty(_,"__esModule",{value:!0}),_.RadioButton=_.RadioButtonEvents=void 0;var f,d=y(1),p=y(0),u=y(3),s=y(6),l=y(9);(function(a){a.beforeChange="beforeChange",a.change="change",a.focus="focus",a.blur="blur",a.keydown="keydown",a.beforeHide="beforeHide",a.afterHide="afterHide",a.beforeShow="beforeShow",a.afterShow="afterShow"})(f||(_.RadioButtonEvents=f={}));var r=function(a){function i(n,e){e===void 0&&(e={});var t=a.call(this,n,m({text:"",width:"content",height:"content",checked:!1},e))||this;return t._propsItem=["text"],t._props=v(v([],s.baseProps,!0),t._propsItem,!0),t._handlers={onchange:function(o){var c=o.target.checked;t.events.fire(f.beforeChange,[c])&&(t.config.checked=c,t.events.fire(f.change,[c]))},onfocus:function(){return t.events.fire(f.focus,[t.getValue()||"",t.config.id])},onblur:function(){var o;return(o=t.events)===null||o===void 0?void 0:o.fire(f.blur,[t.getValue()||"",t.config.id])},onkeydown:function(o){t.events.fire(f.keydown,[o,t.config.id])}},t.events=new u.EventSystem,t.mount(n,(0,p.create)({render:function(){return t._draw()}})),t}return E(i,a),i.prototype.destructor=function(){this.events&&this.events.clear(),this.config=this.events=this._handlers=this._uid=this._props=this._propsItem=null,this.unmount()},i.prototype.setProperties=function(n){if(n&&!(0,d.isEmptyObj)(n)){for(var e in n)this._props.includes(e)&&(this.config[e]=n[e]);this.paint()}},i.prototype.getProperties=function(){for(var n={},e=0,t=this._props;e<t.length;e++){var o=t[e];n[o]=this.config[o]}return n},i.prototype.getValue=function(){if(this.config.checked)return this.config.value},i.prototype.setValue=function(n){this.config.checked=n,this.paint()},i.prototype.show=function(){this.config.hidden&&this.events.fire(f.beforeShow,[])&&(this.config.hidden=!1,this.events.fire(f.afterShow,[]))},i.prototype.hide=function(){!this.config.hidden&&this.events.fire(f.beforeHide,[])&&(this.config.hidden=!0,this.events.fire(f.afterHide,[]))},i.prototype.isVisible=function(){return!this.config.hidden},i.prototype.focus=function(){var n=this;(0,p.awaitRedraw)().then(function(){n.getRootView().refs.input.el.focus()})},i.prototype.blur=function(){var n=this;(0,p.awaitRedraw)().then(function(){n.getRootView().refs.input.el.blur()})},i.prototype.disable=function(){this.config.disabled=!0,this.paint()},i.prototype.enable=function(){var n;this.config.disabled=!1,!((n=this.parent)===null||n===void 0)&&n.isDisabled()&&this.parent.enable(),this.paint()},i.prototype.isDisabled=function(){return!!this.config.disabled},i.prototype.clear=function(){this.config.checked=!1,this.setValidationStatus(this.validate()?"success":"error"),this.paint()},i.prototype.validate=function(){var n=!!this.config.checked;return this.setValidationStatus(n?"success":"error"),this.paint(),n},i.prototype.clearValidate=function(){this.setValidationStatus(),this.paint()},i.prototype._draw=function(){var n=this.config,e=n.id,t=n.value,o=n.checked,c=n.disabled,h=n.$name,g=n.$required,x=n.text;return(0,p.el)("label.dhx_radiobutton.dhx_form-group",{class:(0,s.getFormItemCss)(this.config,!!g)},[(0,p.el)("input.dhx_radiobutton__input",{type:"radio",id:e,_key:e||this._uid,value:t||"",name:h||"",disabled:c,checked:o,onchange:this._handlers.onchange,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,required:g,_ref:"input"}),(0,p.el)("span.dhx_radiobutton__visual-input"),(0,p.el)("span.dhx_text",[x])])},i}(l.Label);_.RadioButton=r},function(W,_,y){var b,E=this&&this.__extends||(b=function(a,i){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])},b(a,i)},function(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=a}b(a,i),a.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}),m=this&&this.__assign||function(){return m=Object.assign||function(a){for(var i,n=1,e=arguments.length;n<e;n++)for(var t in i=arguments[n])Object.prototype.hasOwnProperty.call(i,t)&&(a[t]=i[t]);return a},m.apply(this,arguments)},v=this&&this.__spreadArray||function(a,i,n){if(n||arguments.length===2)for(var e,t=0,o=i.length;t<o;t++)!e&&t in i||(e||(e=Array.prototype.slice.call(i,0,t)),e[t]=i[t]);return a.concat(e||Array.prototype.slice.call(i))};Object.defineProperty(_,"__esModule",{value:!0}),_.Select=void 0;var f=y(0),d=y(1),p=y(9),u=y(6),s=y(3),l=y(4),r=function(a){function i(n,e){var t=a.call(this,null,e)||this;return t.events=new s.EventSystem,t._propsItem=["required","validation","icon","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage"],t._props=v(v([],u.baseProps,!0),t._propsItem,!0),t._initView(e),t}return E(i,a),i.prototype.destructor=function(){this.events&&this.events.clear(),this.events=this._uid=this._propsItem=this._props=null,a.prototype._destructor.call(this),this.unmount()},i.prototype.setProperties=function(n){if(n&&!(0,d.isEmptyObj)(n)&&this.events.fire(l.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var e in n)this._props.includes(e)&&(this.config[e]=n[e]);this.events.fire(l.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},i.prototype.getProperties=function(){for(var n={},e=0,t=this._props;e<t.length;e++){var o=t[e];n[o]=this.config[o]}return n},i.prototype.show=function(){this.config.hidden&&this.events.fire(l.ItemEvent.beforeShow,[this.getValue()])&&(this.config.hidden=!1,this.events.fire(l.ItemEvent.afterShow,[this.getValue()]))},i.prototype.hide=function(n){this.config.hidden&&!n||!this.events.fire(l.ItemEvent.beforeHide,[this.getValue(),!!n])||(this.config.hidden=!0,this.events.fire(l.ItemEvent.afterHide,[this.getValue(),!!n]))},i.prototype.isVisible=function(){return!this.config.hidden},i.prototype.disable=function(n){var e=(0,d.isDefined)(n)&&this.config.options.find(function(t){return t.value===n});(0,d.isDefined)(n)&&!e||!e&&this.config.disabled||e!=null&&e.disabled||(e?(e.disabled=!0,this.config.disabled=this.config.options.every(function(t){return t.disabled})):(this.config.options=this.config.options.map(function(t){return m(m({},t),{disabled:!0})}),this.config.disabled=!0),this.paint())},i.prototype.enable=function(n){var e,t=(0,d.isDefined)(n)&&this.config.options.find(function(o){return o.value===n});(0,d.isDefined)(n)&&!t||(!t&&(this.config.disabled||this.config.options.some(function(o){return o.disabled}))||t!=null&&t.disabled)&&(t?t.disabled=!1:this.config.options=this.config.options.map(function(o){return m(m({},o),{disabled:!1})}),this.config.disabled=!1,!((e=this.parent)===null||e===void 0)&&e.isDisabled()&&this.parent.enable(),this.paint())},i.prototype.isDisabled=function(n){var e=this.config.options.find(function(t){return t.value===n});return!!(this.config.disabled||(0,d.isDefined)(n)&&(e!=null&&e.disabled))},i.prototype.validate=function(n){n===void 0&&(n=!1);var e=this.getValue();if(!n&&!this.events.fire(l.ItemEvent.beforeValidate,[e]))return!1;var t=!0;return this.config.required&&(t=(0,d.isDefined)(e)),typeof this.config.validation=="function"&&(t=this.config.validation(e)),n||(this.setValidationStatus(t?"success":"error"),this.events.fire(l.ItemEvent.afterValidate,[e,t]),this.paint()),t},i.prototype.clearValidate=function(){this.setValidationStatus(),this.paint()},i.prototype.clear=function(){var n,e,t=(e=(n=this.config)===null||n===void 0?void 0:n.options[0])===null||e===void 0?void 0:e.value;this.config.value!==t&&this.events.fire(l.ItemEvent.beforeChange,[t])&&(this.config.value=t,this.events.fire(l.ItemEvent.change,[t]),(0,u.isVerify)(this.config)&&this.setValidationStatus(this.validate(!0)?"success":"error"),this.paint())},i.prototype.setValue=function(n){n!==void 0&&n!==this.config.value&&this.config.options.findIndex(function(e){return e.value===n})!==-1&&this.events.fire(l.ItemEvent.beforeChange,[n])&&(this.config.value=n,this.events.fire(l.ItemEvent.change,[n]),(0,u.isVerify)(this.config)&&this.validate(),this.paint())},i.prototype.focus=function(){var n=this;(0,f.awaitRedraw)().then(function(){n.getRootView().refs.select.el.focus()})},i.prototype.blur=function(){var n=this;(0,f.awaitRedraw)().then(function(){n.getRootView().refs.select.el.blur()})},i.prototype.getValue=function(){return this.config.value},i.prototype.setOptions=function(n){if(!n||!n.length)throw new Error("Function argument cannot be empty, for more info check documentation https://docs.dhtmlx.com/suite/form__select.html#addingselect");this.events.fire(l.ItemEvent.beforeChangeOptions,[v([],n,!0)])&&(this._checkOptions(n),this.config.options=v([],n,!0),this.events.fire(l.ItemEvent.changeOptions,[v([],n,!0)]),this.setValue(this.config.options[0].value),this.paint())},i.prototype.getOptions=function(){return this.config.options},i.prototype._initView=function(n){if((0,d.isEmptyObj)(n))throw new Error("Check the configuration is correct");for(var e in this._checkOptions(n.options),this.config={type:n.type,id:n.id,name:n.name,disabled:!1,hidden:!1,required:!1,icon:"",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content",options:n.options,value:n.options[0].value},n)e!=="id"&&e!=="type"&&e!=="name"&&(this.config[e]=n[e]);!this.config.disabled&&this.config.options.length&&this.config.options.every(function(t){return t.disabled})&&(this.config.disabled=!0),this.paint()},i.prototype._getHandlers=function(){var n=this;return{onchange:function(e){var t=n.config.options.map(function(o){return o.value}).find(function(o){return o==e.target.value});n.events.fire(l.ItemEvent.beforeChange,[t])&&(n.config.value=t,n.events.fire(l.ItemEvent.change,[t]),(0,u.isVerify)(n.config)&&n.validate(),n.paint())},onblur:function(){n._uid&&(n.events.fire(l.ItemEvent.blur,[n.getValue()]),n.paint())},onfocus:function(){n.events.fire(l.ItemEvent.focus,[n.getValue()]),n.paint()}}},i.prototype._draw=function(){var n,e,t,o=this.config,c=o.id,h=o.options,g=o.icon,x=o.value,C=o.label,k=o.labelWidth,I=o.helpMessage,O=o.required,D=o.name,A=((t=(e=(n=this.getRootView())===null||n===void 0?void 0:n.refs)===null||e===void 0?void 0:e.select)===null||t===void 0?void 0:t.el)===document.activeElement;return(0,f.el)(".dhx_form-group",{class:(0,u.getFormItemCss)(this.config,(0,u.isVerify)(this.config),A)},[(C||k||I)&&this._drawLabel(),(0,f.el)(".dhx_input__wrapper",{},[(0,f.el)("div.dhx_input__container",{},[(0,f.el)(".dhx_input__icon",{class:g||"dxi dxi-menu-down"}),(0,f.el)("select.dhx_select.dhx_input",{id:c,_key:c||this._uid,"data-dhx-id":D||c,tabindex:0,class:A&&"dhx_input--focus",onchange:this._handlers.onchange,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,_ref:"select",required:O},h.length&&h.map(function(H){return(0,f.el)("option",{value:H.value,disabled:H.disabled,selected:x===H.value},H.content)}))]),(0,u.getValidationMessage)(this.config)&&(0,f.el)("span.dhx_input__caption",(0,u.getValidationMessage)(this.config))])])},i.prototype._checkOptions=function(n){if(n.length===0)throw new Error("Property options* cannot be empty, for more info check documentation https://docs.dhtmlx.com/suite/form__select.html#addingselect");n.forEach(function(e){if(!e.hasOwnProperty("value")||!e.hasOwnProperty("content"))throw new Error("The object must contain two required properties value and content, for more info check documentation https://docs.dhtmlx.com/suite/form__select.html#addingselect")})},i}(p.Label);_.Select=r},function(W,_,y){var b,E=this&&this.__extends||(b=function(r,a){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(i[e]=n[e])},b(r,a)},function(r,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function i(){this.constructor=r}b(r,a),r.prototype=a===null?Object.create(a):(i.prototype=a.prototype,new i)}),m=this&&this.__assign||function(){return m=Object.assign||function(r){for(var a,i=1,n=arguments.length;i<n;i++)for(var e in a=arguments[i])Object.prototype.hasOwnProperty.call(a,e)&&(r[e]=a[e]);return r},m.apply(this,arguments)},v=this&&this.__spreadArray||function(r,a,i){if(i||arguments.length===2)for(var n,e=0,t=a.length;e<t;e++)!n&&e in a||(n||(n=Array.prototype.slice.call(a,0,e)),n[e]=a[e]);return r.concat(n||Array.prototype.slice.call(a))};Object.defineProperty(_,"__esModule",{value:!0}),_.Textarea=void 0;var f=y(0),d=y(6),p=y(41),u=y(4),s=y(1),l=function(r){function a(){var i=r!==null&&r.apply(this,arguments)||this;return i._propsItem=["required","validation","placeholder","readOnly","maxlength","minlength","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage"],i._props=v(v([],d.baseProps,!0),i._propsItem,!0),i}return E(a,r),a.prototype.getValue=function(){var i;return String((i=this.config.value)!==null&&i!==void 0?i:"")},a.prototype.isFocused=function(){var i,n,e;return((e=(n=(i=this.getRootView())===null||i===void 0?void 0:i.refs)===null||n===void 0?void 0:n.textarea)===null||e===void 0?void 0:e.el)===document.activeElement},a.prototype.focus=function(){var i=this;(0,f.awaitRedraw)().then(function(){i.getRootView().refs.textarea.el.focus()})},a.prototype.blur=function(){var i=this;(0,f.awaitRedraw)().then(function(){i.getRootView().refs.textarea.el.blur()})},a.prototype.setProperties=function(i){if(i&&!(0,s.isEmptyObj)(i)&&this.events.fire(u.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var n in i)this._props.includes(n)&&(this.config[n]=i[n]);this.events.fire(u.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},a.prototype.getProperties=function(){for(var i={},n=0,e=this._props;n<e.length;n++){var t=e[n];i[t]=this.config[t]}return i},a.prototype._initView=function(i){if((0,s.isEmptyObj)(i))throw new Error("Check the configuration is correct");for(var n in this.config={type:i.type,id:i.id,name:i.name,disabled:!1,hidden:!1,required:!1,validation:void 0,placeholder:"",readOnly:!1,label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"},i)n!=="id"&&n!=="type"&&n!=="name"&&(this.config[n]=i[n]);this.paint()},a.prototype._draw=function(){var i,n,e,t=this,o=this.config,c=o.id,h=o.value,g=o.disabled,x=o.name,C=o.placeholder,k=o.required,I=o.resizable,O=o.readOnly,D=o.maxlength,A=o.minlength,H=o.label,S=o.helpMessage,$=o.height,w=((e=(n=(i=this.getRootView())===null||i===void 0?void 0:i.refs)===null||n===void 0?void 0:n.textarea)===null||e===void 0?void 0:e.el)===document.activeElement;return(0,f.el)("div.dhx_form-group.dhx_form-group--textarea",{class:(0,d.getFormItemCss)(this.config,(0,d.isVerify)(this.config),w)},[this._drawLabel(),(0,f.el)(".dhx_input__wrapper",[(0,f.el)("textarea.dhx_input.dhx_input--textarea",{type:"text",id:c,"data-dhx-id":x||c,placeholder:C||"",value:(0,s.isDefined)(h)?h:"",name:x||"",disabled:g,required:k,readOnly:O,maxlength:D,minlength:A,onblur:this._handlers.onblur,oninput:this._handlers.oninput,onchange:this._handlers.onchange,onfocus:this._handlers.onfocus,onkeydown:this._handlers.onkeydown,_hooks:m(m({},this._getHooks()),{didInsert:function(T){if($==="content"){var F=T.el;F.style.height=F.scrollHeight+"px"}T.el.addEventListener("compositionend",t._handlers.oninput)}}),style:{resize:I?"both":"none"},_ref:"textarea","aria-label":H||"".concat(O?h:""," type text"),"aria-describedby":S?"dhx_label__help_".concat(c||this._uid):null}),(0,d.getValidationMessage)(this.config)&&(0,f.el)("span.dhx_input__caption",{},(0,d.getValidationMessage)(this.config))])])},a}(p.Input);_.Textarea=l},function(W,_,y){var b,E=this&&this.__extends||(b=function(l,r){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(a[n]=i[n])},b(l,r)},function(l,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function a(){this.constructor=l}b(l,r),l.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}),m=this&&this.__spreadArray||function(l,r,a){if(a||arguments.length===2)for(var i,n=0,e=r.length;n<e;n++)!i&&n in r||(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return l.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(_,"__esModule",{value:!0}),_.Text=void 0;var v=y(0),f=y(1),d=y(6),p=y(41),u=y(4),s=function(l){function r(){var a=l!==null&&l.apply(this,arguments)||this;return a._propsItem=["inputType","label","labelWidth","labelPosition","hiddenLabel","helpMessage"],a._props=m(m([],d.baseProps,!0),a._propsItem,!0),a}return E(r,l),r.prototype.setProperties=function(a){if(a&&!(0,f.isEmptyObj)(a)&&this.events.fire(u.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var i in a)this._props.includes(i)&&(this.config[i]=a[i]);this.events.fire(u.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},r.prototype.getProperties=function(){for(var a={},i=0,n=this._props;i<n.length;i++){var e=n[i];a[e]=this.config[e]}return a},r.prototype._initView=function(a){if((0,f.isEmptyObj)(a))throw new Error("Check the configuration is correct");for(var i in this.config={type:a.type,id:a.id,name:a.name,disabled:!1,hidden:!1,value:"",inputType:"text",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",width:"content",height:"content"},a)i!=="id"&&i!=="type"&&i!=="name"&&(this.config[i]=a[i]);this.paint()},r.prototype._draw=function(){var a=this.config,i=a.id,n=a.value,e=a.name,t=a.inputType,o=a.label,c=(n??"").toString().length;return(0,v.el)("div.dhx_form-group.dhx_form-group--textinput",{class:(0,d.getFormItemCss)(this.config)},[this._drawLabel(),(0,v.el)(".dhx_input__wrapper",[(0,v.el)("input.dhx_input.dhx_input--textinput",{type:["text","number","password"].includes(t)?t:"text",readOnly:!0,id:i,"data-dhx-id":e||i,value:n??"",name:e,_ref:"input",tabindex:-1,role:"presentation","aria-label":o||n,size:c>20?c:20,onkeydown:this._handlers.onkeydown})])])},r}(p.Input);_.Text=s},function(W,_,y){var b,E=this&&this.__extends||(b=function(a,i){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])},b(a,i)},function(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=a}b(a,i),a.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}),m=this&&this.__spreadArray||function(a,i,n){if(n||arguments.length===2)for(var e,t=0,o=i.length;t<o;t++)!e&&t in i||(e||(e=Array.prototype.slice.call(i,0,t)),e[t]=i[t]);return a.concat(e||Array.prototype.slice.call(i))};Object.defineProperty(_,"__esModule",{value:!0}),_.Combo=void 0;var v=y(0),f=y(1),d=y(6),p=y(51),u=y(3),s=y(9),l=y(4),r=function(a){function i(n,e){var t=a.call(this,null,e)||this;return t.events=new u.EventSystem,t._propsItem=["required","validation","placeholder","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage","readonly","readOnly"],t._propsCombo=["template","filter","multiselection","selectAllButton","itemsCount","itemHeight","virtual","listHeight"],t._props=m(m(m([],d.baseProps,!0),t._propsItem,!0),t._propsCombo,!0),t._isClear=!1,t._initView(e),t._initHandlers(),t}return E(i,a),i.prototype.destructor=function(){this.events&&this.events.clear(),this.combobox&&this.combobox.destructor(),this.events=this._uid=this._propsCombo=this._propsItem=this._props=null,a.prototype._destructor.call(this),this.unmount()},i.prototype.setProperties=function(n){var e=this;(0,v.awaitRedraw)().then(function(){if(n&&!(0,f.isEmptyObj)(n)&&e.events.fire(l.ItemEvent.beforeChangeProperties,[e.getProperties()])){for(var t in n)e._props.includes(t)&&(e.config[t]=n[t]);var o=[];e.getWidget().data.forEach(function(c){return o.push(c)}),e.config.data=o,e._initView(e.config),e._initHandlers(),e.events.fire(l.ItemEvent.afterChangeProperties,[e.getProperties()])}})},i.prototype.getProperties=function(){for(var n={},e=0,t=this._props;e<t.length;e++){var o=t[e];n[o]=this.config[o]}return n},i.prototype.show=function(){var n=this.config,e=n.value;n.hidden&&this.events.fire(l.ItemEvent.beforeShow,[e])&&(this.config.hidden=!1,this.events.fire(l.ItemEvent.afterShow,[e]))},i.prototype.hide=function(n){var e=this.config,t=e.value;e.hidden&&!n||!this.events.fire(l.ItemEvent.beforeHide,[t,n])||(this.config.hidden=!0,this.events.fire(l.ItemEvent.afterHide,[t,n]))},i.prototype.isVisible=function(){return!this.config.hidden},i.prototype.disable=function(){this.config.disabled=!0,this.combobox.disable(),this.paint()},i.prototype.enable=function(){var n;this.config.disabled=!1,this.combobox.enable(),!((n=this.parent)===null||n===void 0)&&n.isDisabled()&&this.parent.enable(),this.paint()},i.prototype.isDisabled=function(){return!!this.config.disabled},i.prototype.clear=function(){this.config.value&&(this.config.value="",this._isClear=!0,this.combobox.clear())},i.prototype.getValue=function(){return this.config.multiselection?this.combobox.getValue(!0)||[]:this.combobox.getValue()||""},i.prototype.setValue=function(n){n!==void 0&&n.toString()!==this.config.value.toString()&&(this._isClear=!1,this.combobox.setValue(n))},i.prototype.validate=function(n){var e=this;n===void 0&&(n=!1);for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var c,h=t.length?t[0]:this.getValue();if(!n&&!this.events.fire(l.ItemEvent.beforeValidate,[h]))return!1;c=Array.isArray(h)?h.map(function(x){return e._getItemText(x)}):this._getItemText(h)||"";var g=!0;return(this.config.required||t.length)&&(g=this._existData(h)),typeof this.config.validation=="function"&&(g=this.config.validation(h,c)),n||(this.setValidationStatus(g?"success":"error"),this.config.required&&this._validationStatus(),this.events.fire(l.ItemEvent.afterValidate,[h,g]),this.paint()),g},i.prototype.clearValidate=function(){this.setValidationStatus(),this._validationStatus(),this.paint()},i.prototype.getWidget=function(){return this.combobox},i.prototype.focus=function(){var n=this;(0,v.awaitRedraw)().then(function(){n.combobox.focus()})},i.prototype.blur=function(){var n=this;(0,v.awaitRedraw)().then(function(){n.combobox.blur()})},i.prototype._initView=function(n){if((0,f.isEmptyObj)(n))throw new Error("Check the configuration is correct");this.combobox&&this.combobox.destructor(),this.config={type:n.type,id:n.id,name:n.name,disabled:!1,hidden:!1,value:"",readOnly:!1,multiselection:!1,selectAllButton:!1,itemHeight:32,virtual:!1,listHeight:224,required:!1,placeholder:"",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"};var e={};for(var t in n)t!=="id"&&t!=="type"&&t!=="name"&&(this.config[t]=n[t],t!=="validation"&&(e[t]=n[t]));this.combobox=new p.Combobox(null,e),this.paint()},i.prototype._initHandlers=function(){var n=this;this.combobox.events.on(p.ComboboxEvents.beforeChange,function(e){return n.events.fire(l.ItemEvent.beforeChange,[e])}),this.combobox.events.on(p.ComboboxEvents.change,function(){var e=n.config.value=n.getValue();n.events.fire(l.ItemEvent.change,[e]),(0,d.isVerify)(n.config)&&(n._isClear?(n.setValidationStatus(n.validate(!0)?"success":"error"),n._isClear=!1):n.validate()),n.paint()}),this.combobox.events.on(p.ComboboxEvents.focus,function(){n.events.fire(l.ItemEvent.focus,[n.getValue()]),n.paint()}),this.combobox.events.on(p.ComboboxEvents.blur,function(){n.events.fire(l.ItemEvent.blur,[n.getValue()]),n.paint()}),this.combobox.events.on(p.ComboboxEvents.keydown,function(e,t){e.code==="Enter"&&e.preventDefault(),n.events.fire(l.ItemEvent.keydown,[e,t])})},i.prototype._validationStatus=function(){var n,e,t;if(!(this.combobox.popup.isVisible()||((t=(e=(n=this.combobox.getRootView())===null||n===void 0?void 0:n.refs)===null||e===void 0?void 0:e.input)===null||t===void 0?void 0:t.el)===document.activeElement))switch(this.config.$validationStatus){case l.ValidationStatus.success:return this.combobox.config.css=(this.config.css||"")+" dhx_form-group--state_success";case l.ValidationStatus.error:return this.combobox.config.css=(this.config.css||"")+" dhx_form-group--state_error";case l.ValidationStatus.pre:default:return this.combobox.config.css=this.config.css||""}return this.combobox.config.css=this.config.css||""},i.prototype._getRootView=function(){return this.combobox.getRootView()},i.prototype._draw=function(){var n=this.config,e=n.labelWidth,t=n.labelPosition,o=n.name,c=n.id;return(0,v.el)(".dhx_form-group.dhx_form-group--combobox",{"data-dhx-id":o||c},[(0,v.el)("div.dhx_form-combobox__container",[(0,v.inject)(this._getRootView())]),(0,v.el)("div.dhx_form-combobox__wrapper",{style:{"margin-left":"".concat(e&&t==="left"?"calc(".concat(e," + 16px)"):"")},class:this._validationStatus()},[(0,v.el)("span.dhx_input__caption",(0,d.getValidationMessage)(this.config))])])},i.prototype._existData=function(n){var e=this;return!!(0,f.isDefined)(n)&&(n instanceof Array?!!n.length&&n.every(function(t){return e.combobox.data.exists(t)}):this.combobox.data.exists(n))},i.prototype._getItemText=function(n){var e;return(e=this.combobox.data.getItem(n))===null||e===void 0?void 0:e.value},i}(s.Label);_.Combo=r},function(W,_,y){var b,E=this&&this.__extends||(b=function(i,n){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},b(i,n)},function(i,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=i}b(i,n),i.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}),m=this&&this.__assign||function(){return m=Object.assign||function(i){for(var n,e=1,t=arguments.length;e<t;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o]);return i},m.apply(this,arguments)},v=this&&this.__spreadArray||function(i,n,e){if(e||arguments.length===2)for(var t,o=0,c=n.length;o<c;o++)!t&&o in n||(t||(t=Array.prototype.slice.call(n,0,o)),t[o]=n[o]);return i.concat(t||Array.prototype.slice.call(n))};Object.defineProperty(_,"__esModule",{value:!0}),_.SliderForm=void 0;var f=y(0),d=y(1),p=y(75),u=y(3),s=y(9),l=y(4),r=y(6),a=function(i){function n(e,t){var o=i.call(this,e,t)||this;return o.events=new u.EventSystem,o._propsItem=["label","labelWidth","labelPosition","hiddenLabel","helpMessage"],o._propsSlider=["min","max","step","mode","range","inverse","tooltip","tick","tickTemplate","majorTick"],o._props=v(v(v([],r.baseProps,!0),o._propsItem,!0),o._propsSlider,!0),o._initView(t),o._initHandlers(),o.mount(e,(0,f.create)({render:function(){return o._drawSlider()}})),o}return E(n,i),n.prototype.destructor=function(){this.events&&this.events.clear(),this.slider&&this.slider.destructor(),this.events=this._uid=this._propsSlider=this._propsItem=this._props=null,i.prototype._destructor.call(this),this.unmount()},n.prototype.setProperties=function(e){if(e&&!(0,d.isEmptyObj)(e)&&this.events.fire(l.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t]);this._initView(this.config),this._initHandlers(),this.events.fire(l.ItemEvent.afterChangeProperties,[this.getProperties()]),this.slider.paint(),this.paint()}},n.prototype.getProperties=function(){for(var e={},t=0,o=this._props;t<o.length;t++){var c=o[t];e[c]=this.config[c]}return e},n.prototype.show=function(){var e=this.config,t=e.value;e.hidden&&this.events.fire(l.ItemEvent.beforeShow,[t])&&(this.config.hidden=!1,this.events.fire(l.ItemEvent.afterShow,[t]))},n.prototype.hide=function(e){var t=this.config,o=t.value;t.hidden&&!e||!this.events.fire(l.ItemEvent.beforeHide,[o,e])||(this.config.hidden=!0,this.events.fire(l.ItemEvent.afterHide,[o,e]))},n.prototype.isVisible=function(){return!this.config.hidden},n.prototype.disable=function(){this.config.disabled=!0,this.slider.disable(),this.paint()},n.prototype.enable=function(){var e;this.config.disabled=!1,this.slider.enable(),!((e=this.parent)===null||e===void 0)&&e.isDisabled()&&this.parent.enable(),this.paint()},n.prototype.isDisabled=function(){return!!this.config.disabled},n.prototype.clear=function(){var e=this.config,t=e.value,o=e.min;t[0]!==o&&this.slider.setValue(o)},n.prototype.getValue=function(){return this.slider.getValue()},n.prototype.setValue=function(e){e!==void 0&&e.toString()!==this.config.value.toString()&&this.slider.setValue(e)},n.prototype.getWidget=function(){return this.slider},n.prototype.focus=function(e){var t=this;(0,f.awaitRedraw)().then(function(){t.slider.focus(e)})},n.prototype.blur=function(){var e=this;(0,f.awaitRedraw)().then(function(){e.slider.blur()})},n.prototype._initView=function(e){if((0,d.isEmptyObj)(e))throw new Error("Check the configuration is correct");this.slider&&this.slider.destructor();var t={type:e.type,id:e.id,name:e.name,mode:"horizontal",min:0,max:100,step:1,range:!1,inverse:!1,tooltip:!0,disabled:!1,hidden:!1,label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",width:"content",height:"content"};for(var o in e)o!=="id"&&o!=="type"&&o!=="name"&&(t[o]=e[o]);this.config=m({type:this.config.type},t),this.slider=new p.Slider(null,t),this.config.disabled&&this.slider.disable(),this.config.value=this.slider.getValue()},n.prototype._initHandlers=function(){var e=this;this.slider.events.on(p.SliderEvents.beforeChange,function(t,o,c){var h=[t];if(e.config.range){var g=e.getValue(),x=g[0],C=g[1];h=c?[x,t]:[t,C]}return e.events.fire(l.ItemEvent.beforeChange,[h])}),this.slider.events.on(p.SliderEvents.change,function(){if(e._uid){var t=e.config.value=e.slider.getValue();e.events.fire(l.ItemEvent.change,[t]),e.paint()}}),this.slider.events.on(p.SliderEvents.focus,function(){e.events.fire(l.ItemEvent.focus,[e.getValue()])}),this.slider.events.on(p.SliderEvents.blur,function(){e.events.fire(l.ItemEvent.blur,[e.getValue()])}),this.slider.events.on(p.SliderEvents.keydown,function(t){e.events.fire(l.ItemEvent.keydown,[t])})},n.prototype._drawSlider=function(){var e=this.config,t=e.name,o=e.id;return(0,f.el)("div.dhx_form-group",{"data-dhx-id":t||o},[(0,f.inject)(this.slider.getRootView())])},n}(s.Label);_.SliderForm=a},function(W,_,y){var b=this&&this.__createBinding||(Object.create?function(m,v,f,d){d===void 0&&(d=f);var p=Object.getOwnPropertyDescriptor(v,f);p&&!("get"in p?!v.__esModule:p.writable||p.configurable)||(p={enumerable:!0,get:function(){return v[f]}}),Object.defineProperty(m,d,p)}:function(m,v,f,d){d===void 0&&(d=f),m[d]=v[f]}),E=this&&this.__exportStar||function(m,v){for(var f in m)f==="default"||Object.prototype.hasOwnProperty.call(v,f)||b(v,m,f)};Object.defineProperty(_,"__esModule",{value:!0}),E(y(107),_),E(y(229),_),E(y(42),_)},function(W,_,y){var b,E=this&&this.__extends||(b=function(I,O){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,A){D.__proto__=A}||function(D,A){for(var H in A)Object.prototype.hasOwnProperty.call(A,H)&&(D[H]=A[H])},b(I,O)},function(I,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function D(){this.constructor=I}b(I,O),I.prototype=O===null?Object.create(O):(D.prototype=O.prototype,new D)}),m=this&&this.__assign||function(){return m=Object.assign||function(I){for(var O,D=1,A=arguments.length;D<A;D++)for(var H in O=arguments[D])Object.prototype.hasOwnProperty.call(O,H)&&(I[H]=O[H]);return I},m.apply(this,arguments)},v=this&&this.__spreadArray||function(I,O,D){if(D||arguments.length===2)for(var A,H=0,S=O.length;H<S;H++)!A&&H in O||(A||(A=Array.prototype.slice.call(O,0,H)),A[H]=O[H]);return I.concat(A||Array.prototype.slice.call(O))};Object.defineProperty(_,"__esModule",{value:!0}),_.Vault=void 0;var f=y(1),d=y(0),p=y(3),u=y(2),s=y(34),l=y(5),r=y(8),a=y(16),i=y(21),n=y(102),e=y(30),t=y(60),o=y(42),c=y(107),h=y(230),g=y(231),x=y(232),C=y(233),k=function(I){function O(D,A){A===void 0&&(A={});var H=I.call(this,null,(0,f.extend)({mode:o.VaultMode.list,toolbar:!0,updateFromResponse:!0,scaleFactor:4,customScroll:!0,uploader:{},progressBar:{}},A))||this;return H.config.toolbar||(H.config.uploader.autosend=!0),A.data?(H.data=A.data,H.events=A.data.events,H.events.context=H):(H.events=new p.EventSystem(H),H.data=new r.DataCollection({},H.events)),H.data.config.init=function(S){return S.status=S.status||o.FileStatus.uploaded,S.file?(S.size=S.file.size,S.name=S.file.name):(S.size=S.size||0,S.name=S.name||""),H.config.mode===o.VaultMode.grid&&S.file&&(0,g.isImage)(S)&&H._readStack.add(S,H.uploader.config.autosend),S},H._readStack=new C.ReadStackPreview(H.data),H.uploader=new c.Uploader(H.config.uploader,H.data,H.events),H._scrollView=new s.ScrollView(function(){return H._vaultView.getRootView()}),H._progressBar=new x.ProgressBar(H.events,H.config.progressBar),H.events.on(o.UploaderEvents.uploadProgress,function(S,$,w){return H._progressBar.setState(S,{current:$,total:w})}),H._initHandlers(),H._initUI(D),H._initEvents(),H}return E(O,I),O.prototype.destructor=function(){this.toolbar.destructor(),this._readStack.stop(),this.uploader.unlinkDropArea(),this.uploader.abort()},O.prototype.getRootView=function(){return this._layout.getRootView()},O.prototype._initUI=function(D){var A=this,H=this.config.toolbar?h.layoutConfig:h.layoutConfigWithoutTopbar;H.on=this._getDragEvents();var S=this._layout=new a.Layout(D,H),$=this.toolbar=new n.Toolbar(null,{css:"vault-toolbar"});this.toolbar.data.parse([{id:"add",tooltip:t.default.add,type:"button",icon:"dxi-plus"},{id:"upload",tooltip:t.default.upload,type:"button",icon:"dxi icon-upload"},{id:"spacer",type:"spacer"},{id:"remove-all",tooltip:t.default.clearAll,type:"button",icon:"dxi-delete-forever"}]),this._hideUploadAndDeleteButtons(),this._vaultView=(0,l.toViewLike)((0,d.create)({render:function(){return A._draw()}})),this.config.toolbar&&S.getCell("topbar").attach($),S.getCell("vault").attach(this._vaultView)},O.prototype._initHandlers=function(){var D=this;this._handlers={onclick:{".action-add":function(){return D.uploader.selectFile()},".action-remove-file":function(A){var H=(0,u.locate)(A);H&&(D.data.update(H,{$toRemove:!0}),setTimeout(function(){D.data.update(H,{$toRemove:!1},!0),D.data.remove(H)},200))}},onmouseover:{".action-download":function(A){(0,i.tooltip)(t.default.download,{node:A.target,position:i.Position.bottom})},".action-remove-file":function(A){(0,i.tooltip)(t.default.clear,{node:A.target,position:i.Position.bottom})},".title-content, .dhx-file-name":function(A){var H=(0,u.locate)(A),S=D.data.getItem(H);(0,i.tooltip)(S.name,{node:A.target,position:i.Position.bottom,css:"tooltip-light"})}}}},O.prototype._getDragEvents=function(){var D=this,A={left:null,top:null,width:null,height:null};return{dragleave:function(H){D._canDrop&&(H.pageX>A.left+A.width-1||H.pageX<A.left||H.pageY>A.top+A.height-1||H.pageY<A.top)&&(D._canDrop=!1,D.config.toolbar&&D._layout.getCell("topbar").show(),D._layout.config.css="vault-layout",D._layout.paint())},dragenter:function(H){if(H.preventDefault(),!D.uploader.isActive&&!D._canDrop){for(var S=0,$=H.dataTransfer.types;S<$.length;S++){var w=$[S];if(w!=="Files"&&w!=="application/x-moz-file")return void(D._canDrop=!1)}D._canDrop=!0;var T=D.getRootView().node.el.getBoundingClientRect();A.left=T.left+window.pageXOffset,A.top=T.top+window.pageYOffset,A.width=T.width,A.height=T.height,D._canDrop=!0,D.config.toolbar&&D._layout.getCell("topbar").hide(),D._layout.config.css="vault-layout dhx-dragin",D._layout.paint()}},dragover:function(H){H.preventDefault()},drop:function(H){if(H.preventDefault(),D._canDrop){var S=H.dataTransfer;D.uploader.parseFiles(S),D._canDrop=!1,D.config.toolbar&&D._layout.getCell("topbar").show(),D._layout.config.css="vault-layout",D._layout.paint()}}}},O.prototype._hideUploadAndDeleteButtons=function(){this.toolbar.hide(["upload","remove-all"])},O.prototype._showUploadAndDeleteButtons=function(){this.uploader.config.autosend?this.toolbar.show("remove-all"):this.toolbar.show(["upload","remove-all"])},O.prototype._initEvents=function(){var D=this;this.data.events.on(r.DataEvents.change,function(){D.data.getLength()?D._showUploadAndDeleteButtons():D._hideUploadAndDeleteButtons(),D._vaultView.paint()}),this.events.on(o.UploaderEvents.uploadBegin,function(){D.config.toolbar&&D._layout.getCell("topbar").attach(D._progressBar)}),this.events.on(o.UploaderEvents.uploadComplete,function(){D.config.mode===o.VaultMode.grid&&D.uploader.config.autosend&&D._readStack.read(),D.config.toolbar&&D._layout.getCell("topbar").attach(D.toolbar)}),this.toolbar.events.on(e.NavigationBarEvents.click,function(A){switch(A){case"add":D.uploader.selectFile();break;case"remove-all":D.data.removeAll();break;case"upload":D.uploader.send()}}),this.events.on(o.ProgressBarEvents.cancel,function(){D.uploader.abort(),D._vaultView.paint()})},O.prototype._draw=function(){var D=!this.data.getLength(),A=this.config.mode===o.VaultMode.grid?this._drawGrid():this._drawList();return(0,d.el)("div",m(m({class:"vault dhx_widget"+(this._canDrop?" drop-here":"")},this._handlers),{"data-dhx-widget-id":this._uid}),[this._canDrop||D?this._drawDropableArea():this.config.customScroll?this._scrollView.render(A):A])},O.prototype._getFileActions=function(D){var A=[],H=[],S=[(0,d.el)(".dhx-default-actions",A),(0,d.el)(".dhx-hover-actions",H)];if(D.status===o.FileStatus.inprogress)return S;if(D.status!==o.FileStatus.failed&&D.link){var $=(this.config.downloadURL||"")+D.link,w=$.split("/").pop().split("?")[0],T=(0,d.el)("a",{download:w,class:"download-link",href:$},[(0,d.el)(".icon-btn.dxi.dxi-download.action-download")]);H.push(T)}var F=(0,d.el)(".icon-btn.dxi.dxi-delete-forever.action-remove-file");if(H.push(F),D.status===o.FileStatus.failed){var z=(0,d.el)(".dxi.dxi-alert-circle.warning-status");A.push(z)}if(D.status===o.FileStatus.uploaded){var B=(0,d.el)(".dxi.dxi-checkbox-marked-circle.uploaded-status");A.push(B)}return S},O.prototype._drawList=function(){var D=this;return(0,d.el)(".dhx-files-block.dhx-webkit-scroll",this.data.map(function(A){var H=A.status===o.FileStatus.failed&&A.request,S=A.status===o.FileStatus.inprogress,$=A.status===o.FileStatus.queue,w=A.status!==o.FileStatus.uploaded;return(0,d.el)("div",{class:"dhx-file-item"+(A.$toRemove?" to-remove":"")+($?" in-queue":""),"data-dhx-id":A.id,_key:A.id},[(0,d.el)(".dhx-file-icon",[(0,d.el)("div",{class:"dhx-file-type "+(0,g.getFileClassName)(A)+(w?" not-loaded":"")})]),(0,d.el)(".dhx-file-title",[(0,d.el)(".dhx-title-content",A.name),(0,d.el)(".dhx-file-info",[H&&(0,d.el)(".warn-message",A.request.statusText||t.default.error),S?(0,d.el)(".progress-value",(100*A.progress).toFixed(1)+"%"):(0,d.el)(".dhx-size"+(H?".dhx-size-error":""),(0,g.getBasis)(A.size))])]),S&&(0,d.el)(".dhx-download-progress",{style:{width:(100*A.progress).toFixed(1)+"%"}}),!S&&(0,d.el)(".dhx-file-action",D._getFileActions(A))])}))},O.prototype._drawDropableArea=function(){return(0,d.el)(".dhx-dropable-area.drop-files-here",[(0,d.el)(".dhx-big-icon-block",[(0,d.el)(".dxi.icon-upload")]),!this._canDrop&&(0,d.el)(".drop-area-bold-text",t.default.dragAndDrop),!this._canDrop&&(0,d.el)(".drop-area-bold-text",t.default.filesOrFoldersHere),!this._canDrop&&(0,d.el)(".drop-area-light-text",t.default.or),!this._canDrop&&(0,d.el)("button.dhx_btn.dhx_btn--flat.dhx_btn--small.action-add",t.default.browse)])},O.prototype._drawGrid=function(){var D=this;return(0,d.el)("div",{class:"dhx-files-grid dhx-webkit-scroll"},[(0,d.el)(".dhx-grid-content",this.data.map(function(A){var H=A.status===o.FileStatus.inprogress,S=A.status===o.FileStatus.queue,$=A.status===o.FileStatus.failed;return(0,d.el)("div",{class:"dhx-file-grid-item"+(H?" in-progress":"")+(A.$toRemove?" to-remove":"")+(S?" in-queue":"")+($?" failed":""),"data-dhx-id":A.id,_key:A.id},[(0,d.el)(".dhx-preview-wrapper",v(v([A.preview?(0,d.el)(".dhx-server-file-preview",[(0,d.el)("img",{src:A.preview})]):A.image?(0,d.el)("canvas",{width:98*D.config.scaleFactor,height:98*D.config.scaleFactor,_hooks:{didInsert:function(w){var T=(0,g.calculateCover)(A.image),F=T.dx,z=T.dy,B=T.sx,L=T.sy,M=T.sHeight,P=T.sWidth;w.el.getContext("2d").drawImage(A.image,B,L,P,M,F,z,98*D.config.scaleFactor,98*D.config.scaleFactor)}}}):(0,d.el)("div",{class:"dhx-file-preview dhx-file-type "+(0,g.getFileClassName)(A)}),H&&D._drawCircle(A.progress)],D._getFileActions(A),!0),[(0,d.el)(".dhx-file-info",[$&&(0,d.el)(".warn-message",A.request.statusText||t.default.error),!H&&(0,d.el)(".dhx-size"+($?".dhx-size-error":""),(0,g.getBasis)(A.size))])],!1)),(0,d.el)(".dhx-file-name",(0,g.truncateWord)(A.name))])}))])},O.prototype._drawCircle=function(D){return(0,d.el)(".progress-layout",[(0,d.el)(".progress-amount",(100*D).toFixed(1)+"%"),(0,d.sv)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"progress-circle",viewBox:"0 0 60 60"},[(0,d.sv)("circle",{cx:30,cy:30,r:28,"stroke-width":4,class:"progress-bar-background"}),(0,d.sv)("circle.active-circle",{cx:30,cy:30,r:28,"stroke-width":4,"stroke-dasharray":"175.9 175.9","stroke-dashoffset":175.9*(1-D),class:"progress-bar-active"})])])},O}(l.View);_.Vault=k},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.layoutConfigWithoutTopbar=_.layoutConfig=void 0,_.layoutConfig={css:"vault-layout",rows:[{id:"topbar",css:"vault-topbar"},{id:"vault",css:"vault-file-grid"}]},_.layoutConfigWithoutTopbar={css:"vault-layout",rows:[{id:"vault",css:"vault-file-grid"}]}},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.isImage=_.getFileClassName=_.getFileType=_.FileType=_.calculateCover=_.truncateWord=_.getBasis=void 0;var b=y(60),E=["byte","kilobyte","megabyte","gigabyte"];_.getBasis=function(d,p){return d===void 0&&(d=0),p===void 0&&(p=0),d<1024?d+" "+b.default[E[p]]:this.getBasis(Math.round(d/1024),p+1)};var m;function v(d){return{extension:d.name.split(".").pop()||"none",mime:d.file?d.file.type:""}}function f(d,p){switch(d){case"jpg":case"jpeg":case"gif":case"png":case"bmp":case"tiff":case"pcx":case"svg":case"ico":return m.image;case"avi":case"mpg":case"mpeg":case"rm":case"move":case"mov":case"mkv":case"flv":case"f4v":case"mp4":case"3gp":case"wmv":case"webm":case"vob":return m.video;case"rar":case"zip":case"tar":case"tgz":case"arj":case"gzip":case"bzip2":case"7z":case"ace":case"apk":case"deb":case"zipx":case"cab":case"tar-gz":case"rpm":case"xar":return m.archive;case"xlr":case"xls":case"xlsm":case"xlsx":case"ods":case"csv":case"tsv":return m.table;case"doc":case"docx":case"docm":case"dot":case"dotx":case"odt":case"wpd":case"wps":case"pages":return m.document;case"wav":case"aiff":case"au":case"mp3":case"aac":case"wma":case"ogg":case"flac":case"ape":case"wv":case"m4a":case"mid":case"midi":return m.audio;case"pot":case"potm":case"potx":case"pps":case"ppsm":case"ppsx":case"ppt":case"pptx":case"pptm":case"odp":return m.presentation;case"html":case"htm":case"eml":return m.web;case"exe":return m.application;case"dmg":return m.apple;case"pdf":case"ps":case"eps":return m.pdf;case"psd":return m.psd;case"txt":case"djvu":case"nfo":case"xml":return m.text;default:switch(p.split("/")[0]){case"image":return m.image;case"audio":return m.audio;case"video":return m.video;default:return m.other}}}_.truncateWord=function(d,p){var u,s;if(p===void 0&&(p=13),d.length<=p)return d;var l=d.lastIndexOf(".");if(l===-1)s=d.substr(d.length-4),u=d.substr(0,p-7);else{var r=l-3;s=d.substr(r),u=d.substr(0,p-(d.length-r))}return u+"..."+s},_.calculateCover=function(d){var p,u,s,l,r=d.width,a=d.height,i=r/a;return i>1?(p=a,s=(r-(u=a))/2,l=0):i<1?(u=r,s=0,l=(a-(p=r))/2):(p=r,u=r,s=0,l=0),{sx:s,sy:l,sWidth:u,sHeight:p,dx:0,dy:0}},function(d){d.image="image",d.video="video",d.archive="archive",d.table="table",d.document="document",d.presentation="presentation",d.application="application",d.web="web",d.apple="apple",d.pdf="pdf",d.psd="psd",d.audio="audio",d.other="other",d.text="text"}(m||(_.FileType=m={})),_.getFileType=f,_.getFileClassName=function(d){var p=v(d),u=p.mime,s=p.extension;return f(s,u)+" extension-"+s},_.isImage=function(d){var p=v(d),u=p.mime;return f(p.extension,u)===m.image}},function(W,_,y){var b,E=this&&this.__extends||(b=function(u,s){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,r){l.__proto__=r}||function(l,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(l[a]=r[a])},b(u,s)},function(u,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function l(){this.constructor=u}b(u,s),u.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.ProgressBar=void 0;var m=y(0),v=y(5),f=y(60),d=y(42),p=function(u){function s(l,r){var a=u.call(this,null,r)||this;return a.events=l,a._progress=0,a.mount(null,(0,m.create)({render:function(){return a._draw()}})),a._abortUpload=function(){a.events.fire(d.ProgressBarEvents.cancel)},a}return E(s,u),s.prototype.setState=function(l,r){this._progress=l,this.config.template?this._progressText=this.config.template(l,r):this._progressText=this._progress.toFixed(1)+"%",this.paint()},s.prototype._draw=function(){return(0,m.el)(".progress-bar",{_key:this._uid},[(0,m.el)(".progress-indicator",{style:{width:this._progress+"%"}}),(0,m.el)(".progress-text",{".innerHTML":this._progressText}),(0,m.el)("button",{class:"dhx_btn dhx_btn--flat dhx_btn_small action-abort-all",onclick:this._abortUpload},f.default.cancel)])},s}(v.View);_.ProgressBar=p},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.ReadStackPreview=void 0;var b=function(){function E(m){this._readerStack=[],this._isActive=!1,this._data=m}return E.prototype.add=function(m,v){v===void 0&&(v=!1),this._readerStack.push(m),v||this.read()},E.prototype.read=function(){var m=this;if(this._readerStack.length&&!this._isActive){var v=this._readerStack.shift();this._isActive=!0;var f=new FileReader;f.readAsDataURL(v.file),f.onload=function(d){var p=new Image;p.src=d.target.result,p.onload=function(){m._data.exists(v.id)&&m._data.update(v.id,{image:p}),m._isActive=!1,m.read()}},f.onerror=function(){m._isActive=!1,m.read()}}},E.prototype.stop=function(){this._readerStack=[]},E}();_.ReadStackPreview=b},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.default={simpleVaultText:"Drag & drop files or folders here or",simpleVaultLabel:"browse files"}},function(W,_,y){var b,E=this&&this.__extends||(b=function(n,e){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(t[c]=o[c])},b(n,e)},function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=n}b(n,e),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}),m=this&&this.__spreadArray||function(n,e,t){if(t||arguments.length===2)for(var o,c=0,h=e.length;c<h;c++)!o&&c in e||(o||(o=Array.prototype.slice.call(e,0,c)),o[c]=e[c]);return n.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(_,"__esModule",{value:!0}),_.TimePicker=void 0;var v=y(73),f=y(0),d=y(1),p=y(9),u=y(11),s=y(3),l=y(4),r=y(6),a=y(14),i=function(n){function e(t,o){var c=n.call(this,null,o)||this;return c.events=new s.EventSystem,c._popupIsFocus=!1,c._propsItem=["required","validation","icon","placeholder","editable","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage"],c._propsTimepicker=["timeFormat","controls","valueFormat"],c._props=m(m(m([],r.baseProps,!0),c._propsItem,!0),c._propsTimepicker,!0),c._keyManager=new a.KeyManager(function(){var h,g,x,C=document.activeElement;return((x=(g=(h=c.getRootView())===null||h===void 0?void 0:h.refs)===null||g===void 0?void 0:g.input)===null||x===void 0?void 0:x.el)===C||c._popup.isVisible()}),c._initView(o),c._initHandlers(),c._initHotkeys(),c.mount(t,(0,f.create)({render:function(){return c._draw()}})),c}return E(e,n),e.prototype.destructor=function(){this.events&&this.events.clear(),this.timepicker&&this.timepicker.destructor(),this._keyManager&&this._keyManager.destructor(),this._popup&&this._popup.destructor(),this.events=this._uid=this._propsItem=this._propsTimepicker=this._props=this._keyManager=null,n.prototype._destructor.call(this),this.unmount()},e.prototype.setProperties=function(t){var o=this;(0,f.awaitRedraw)().then(function(){if(t&&!(0,d.isEmptyObj)(t)&&o.events.fire(l.ItemEvent.beforeChangeProperties,[o.getProperties()])){for(var c in t)o._props.includes(c)&&(o.config[c]=t[c]);o._initView(o.config),o._initHandlers(),o.events.fire(l.ItemEvent.afterChangeProperties,[o.getProperties()]),o.paint()}})},e.prototype.getProperties=function(){for(var t={},o=0,c=this._props;o<c.length;o++){var h=c[o];t[h]=this.config[h]}return t},e.prototype.show=function(){this.config.hidden&&this.events.fire(l.ItemEvent.beforeShow,[this.getValue(this.config.valueFormat==="timeObject")])&&(this.config.hidden=!1,this.events.fire(l.ItemEvent.afterShow,[this.getValue(this.config.valueFormat==="timeObject")]))},e.prototype.hide=function(t){this.config.hidden&&!t||!this.events.fire(l.ItemEvent.beforeHide,[this.getValue(this.config.valueFormat==="timeObject"),t])||(this.config.hidden=!0,this.events.fire(l.ItemEvent.afterHide,[this.getValue(this.config.valueFormat==="timeObject"),t]))},e.prototype.isVisible=function(){return!this.config.hidden},e.prototype.disable=function(){this.config.disabled=!0,this.paint()},e.prototype.enable=function(){var t;this.config.disabled=!1,!((t=this.parent)===null||t===void 0)&&t.isDisabled()&&this.parent.enable(),this.paint()},e.prototype.isDisabled=function(){return!!this.config.disabled},e.prototype.validate=function(t){t===void 0&&(t=!1);for(var o=[],c=1;c<arguments.length;c++)o[c-1]=arguments[c];var h=o.length?o[0]:this.getValue(this._isTimeObject());if(!t&&!this.events.fire(l.ItemEvent.beforeValidate,[h]))return!1;var g=!0;return(this.config.required||o.length)&&(g=typeof h=="string"?(0,r.isTimeFormat)(h,this.config.timeFormat):(0,r.isTimeFormat)("".concat(h.hour,":").concat(h.minute).concat((0,d.isDefined)(h.AM)?h.AM?"AM":"PM":""),this.config.timeFormat)),typeof this.config.validation=="function"&&(g=this.config.validation(h)),t||(this.config.$validationStatus=g?l.ValidationStatus.success:l.ValidationStatus.error,this.events.fire(l.ItemEvent.afterValidate,[h,g]),this.paint()),g},e.prototype.clearValidate=function(){this.config.$validationStatus=l.ValidationStatus.pre,this.paint()},e.prototype.setValue=function(t){if(t!==void 0&&t!==this.config.value){if(this.timepicker.setValue(t),this.config.controls){var o=this.getValue(this._isTimeObject());if(!this.events.fire(l.ItemEvent.beforeChange,[o]))return;this.config.value=this.timepicker.getValue(),this.events.fire(l.ItemEvent.change,[o])}(0,r.isVerify)(this.config)&&this.validate(),this.paint()}},e.prototype.getValue=function(t){return t?this.timepicker.getValue(t):this.config.value||""},e.prototype.focus=function(){var t=this;(0,f.awaitRedraw)().then(function(){t.getRootView().refs.input.el.focus()})},e.prototype.blur=function(){var t=this;(0,f.awaitRedraw)().then(function(){t._popup.hide(),t.getRootView().refs.input.el.blur()})},e.prototype.clear=function(){this.config.value!==""&&this._clear()},e.prototype.getWidget=function(){return this.timepicker},e.prototype._initView=function(t){if((0,d.isEmptyObj)(t))throw new Error("Check the configuration is correct");for(var o in this.timepicker&&this.timepicker.destructor(),this._popup&&this._popup.destructor(),this.config={type:t.type,id:t.id,name:t.name,value:"",disabled:!1,editable:!1,hidden:!1,timeFormat:24,controls:!1,valueFormat:"string",required:!1,icon:"",placeholder:"",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"},t)o!=="id"&&o!=="type"&&o!=="name"&&(this.config[o]=t[o]);this._popup=new u.Popup,this.timepicker=new v.Timepicker(null,(0,r.widgetConfig)(t)),this._popup.attach(this.timepicker),this.config.value&&(this.config.value=this.timepicker.getValue())},e.prototype._initHandlers=function(){var t=this;this.config.controls?(this.timepicker.events.on(v.TimepickerEvents.afterClose,function(){t._popup.hide()}),this.timepicker.events.on(v.TimepickerEvents.afterApply,function(){t._afterApply(!0)}),this._popup.events.on(u.PopupEvents.afterHide,function(){t.config.value&&t.config.value!==t.timepicker.getValue()?t.timepicker.setValue(t.config.value):t.config.value!==""&&t.config.value!==void 0||t._clear(!0)})):(this.timepicker.events.on(v.TimepickerEvents.beforeChange,function(o){return t.events.fire(l.ItemEvent.beforeChange,[o])}),this.timepicker.events.on(v.TimepickerEvents.change,function(o){var c=t.config.timeFormat===12?"12:00AM":"00:00",h=t.timepicker.getValue();t.config.value===""&&c===h||t.config.value===h||(t.config.value=t.timepicker.getValue(),t.events.fire(l.ItemEvent.change,[o]),(0,r.isVerify)(t.config)&&t.validate(),t.paint())})),this._popup.events.on(u.PopupEvents.afterHide,function(){document.activeElement!==t.getRootView().refs.input.el&&t.events.fire(l.ItemEvent.blur,[t.getValue()]),t.paint()}),this.events.on(l.ItemEvent.input,function(o){var c=t.config.timeFormat===12?7:5;o.length>=c&&(0,r.isTimeFormat)(o,t.config.timeFormat)?t.timepicker.setValue(o):o!==""||t.config.controls||t._clear()}),this.events.on(l.ItemEvent.afterChangeProperties,function(){t.config.value=t.timepicker.getValue(),t.paint()}),this.events.on(l.ItemEvent.blur,function(){t._popupIsFocus=!1,t.paint()})},e.prototype._getHandlers=function(){var t=this;return{onfocus:function(){if(!t._popup.isVisible()){var o=t.getRootView().refs.input.el;t._popup.show(o,{theme:o}),t.events.fire(l.ItemEvent.focus,[t.getValue()]),t.paint()}},onblur:function(){t._popup.isVisible()||t.events.fire(l.ItemEvent.blur,[t.getValue()]),t.paint()},oninput:function(o){var c=o.target.value;t.events.fire(l.ItemEvent.input,[c])},onkeydown:function(o){var c,h,g,x=document.activeElement;(((g=(h=(c=t.getRootView())===null||c===void 0?void 0:c.refs)===null||h===void 0?void 0:h.input)===null||g===void 0?void 0:g.el)===x||t._popup.isVisible())&&t.events.fire(l.ItemEvent.keydown,[o])},onmousedown:function(){t._popup.getContainer()!==document.activeElement&&(t._popupIsFocus=!1)}}},e.prototype._initHotkeys=function(){var t=this,o={"shift+tab":function(){t._applyTab()},tab:function(){t._applyTab()},escape:function(){t._popup.isVisible()&&t.getRootView().refs.input.el.focus(),t._popup.hide()},enter:function(h){h.preventDefault();var g=t.getRootView().refs.input.el;t._popup.isVisible()||t._popup.show(g,{theme:g}),t._popupIsFocus&&t.config.controls?t._afterApply(!0):(t._popup.hide(),t.paint())},arrowRight:function(h){var g=t._popup.getContainer();t._popupIsFocus=g.contains(document.activeElement),t._popup.isVisible()&&!t._popupIsFocus&&(h.preventDefault(),g.focus(),t._popupIsFocus=!0)}};for(var c in o)this._keyManager.addHotKey(c,o[c])},e.prototype._draw=function(){var t,o,c,h=this.config,g=h.value,x=h.required,C=h.disabled,k=h.placeholder,I=h.name,O=h.id,D=h.editable,A=h.label,H=h.helpMessage,S=this._popup.isVisible()||((c=(o=(t=this.getRootView())===null||t===void 0?void 0:t.refs)===null||o===void 0?void 0:o.input)===null||c===void 0?void 0:c.el)===document.activeElement;return(0,f.el)("div.dhx_form-group",{class:(0,r.getFormItemCss)(this.config,(0,r.isVerify)(this.config),S)},[this._drawLabel(),(0,f.el)(".dhx_input__wrapper",[(0,f.el)("div.dhx_input__container",{},[(0,f.el)(".dhx_input__icon.dxi.dxi-clock-outline"),(0,f.el)("input.dhx_input.dhx_input--icon-padding",{tabindex:0,"data-dhx-id":I||O,_key:this._uid,_ref:"input",value:g,type:"text",required:x,disabled:C,class:S&&"dhx_input--focus",placeholder:k||"",name:I||"",id:O||this._uid,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,oninput:this._handlers.oninput,onkeydown:this._handlers.onkeydown,onmousedown:this._handlers.onmousedown,autocomplete:"off",readOnly:!D,"aria-label":A||"".concat(D?"type or":""," select date"),"aria-describedby":H?"dhx_label__help_".concat(O||this._uid):null})]),(0,r.getValidationMessage)(this.config)&&(0,f.el)("span.dhx_input__caption",{},(0,r.getValidationMessage)(this.config))])])},e.prototype._clear=function(t){(t||this.events.fire(l.ItemEvent.beforeChange,[""]))&&(this.config.value="",this.timepicker.clear(),t||(this.events.fire(l.ItemEvent.change,[""]),(0,r.isVerify)(this.config)&&this.setValidationStatus(this.validate(!0)?"success":"error")),this.paint())},e.prototype._afterApply=function(t){if(t===void 0&&(t=!1),this.getRootView().refs.input.el.value!==""||t){var o=this.timepicker.getValue(this._isTimeObject());if(!this.events.fire(l.ItemEvent.beforeChange,[o]))return;this.config.value=this.timepicker.getValue(),this.events.fire(l.ItemEvent.change,[o]),(0,r.isVerify)(this.config)&&this.validate()}else this.clear();this._popup.hide(),this.paint()},e.prototype._applyTab=function(){var t,o,c;document.activeElement===((c=(o=(t=this._popup.getRootView())===null||t===void 0?void 0:t.refs)===null||o===void 0?void 0:o.content)===null||c===void 0?void 0:c.el)||this._popupIsFocus||this._popup.hide()},e.prototype._isTimeObject=function(){var t;return((t=this.config.valueFormat)===null||t===void 0?void 0:t.toLowerCase())==="timeobject"},e}(p.Label);_.TimePicker=i},function(W,_,y){var b,E=this&&this.__extends||(b=function(n,e){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(t[c]=o[c])},b(n,e)},function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=n}b(n,e),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}),m=this&&this.__spreadArray||function(n,e,t){if(t||arguments.length===2)for(var o,c=0,h=e.length;c<h;c++)!o&&c in e||(o||(o=Array.prototype.slice.call(e,0,c)),o[c]=e[c]);return n.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(_,"__esModule",{value:!0}),_.ColorPicker=void 0;var v=y(237),f=y(3),d=y(0),p=y(1),u=y(9),s=y(11),l=y(4),r=y(6),a=y(14),i=function(n){function e(t,o){var c=n.call(this,null,o)||this;return c.events=new f.EventSystem,c._popupIsFocus=!1,c._propsItem=["required","validation","icon","placeholder","editable","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage"],c._propsColorpicker=["mode","grayShades","customColors","palette"],c._props=m(m(m([],r.baseProps,!0),c._propsItem,!0),c._propsColorpicker,!0),c._keyManager=new a.KeyManager(function(){var h,g,x,C=document.activeElement;return((x=(g=(h=c.getRootView())===null||h===void 0?void 0:h.refs)===null||g===void 0?void 0:g.input)===null||x===void 0?void 0:x.el)===C||c._popup.isVisible()}),c._initView(o),c._initHandlers(),c._initHotkeys(),c.mount(t,(0,d.create)({render:function(){return c._draw()}})),c}return E(e,n),e.prototype.destructor=function(){this.events&&this.events.clear(),this._popup&&this._popup.destructor(),this._keyManager&&this._keyManager.destructor(),this.colorpicker&&this.colorpicker.destructor(),this.events=this._uid=this._propsColorpicker=this._propsItem=this._props=this._keyManager=null,n.prototype._destructor.call(this),this.unmount()},e.prototype.setProperties=function(t){if(t&&!(0,p.isEmptyObj)(t)&&this.events.fire(l.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var o in t)this._props.includes(o)&&(this.config[o]=t[o],this._propsColorpicker.includes(o)&&(this.colorpicker.config[o]=t[o]));this.events.fire(l.ItemEvent.afterChangeProperties,[this.getProperties()]),this.colorpicker.paint(),this.paint()}},e.prototype.getProperties=function(){for(var t={},o=0,c=this._props;o<c.length;o++){var h=c[o];t[h]=this.config[h]}return t},e.prototype.show=function(){var t=this.config,o=t.value;t.hidden&&this.events.fire(l.ItemEvent.beforeShow,[o])&&(this.config.hidden=!1,this.events.fire(l.ItemEvent.afterShow,[o]))},e.prototype.hide=function(t){var o=this.config,c=o.value;o.hidden&&!t||!this.events.fire(l.ItemEvent.beforeHide,[c,t])||(this.config.hidden=!0,this.events.fire(l.ItemEvent.afterHide,[c,t]))},e.prototype.isVisible=function(){return!this.config.hidden},e.prototype.disable=function(){this.config.disabled=!0,this.paint()},e.prototype.enable=function(){var t;this.config.disabled=!1,!((t=this.parent)===null||t===void 0)&&t.isDisabled()&&this.parent.enable(),this.paint()},e.prototype.isDisabled=function(){return!!this.config.disabled},e.prototype.validate=function(t){t===void 0&&(t=!1);for(var o=[],c=1;c<arguments.length;c++)o[c-1]=arguments[c];var h=o.length?o[0]:this.getValue();if(!t&&!this.events.fire(l.ItemEvent.beforeValidate,[h]))return!1;var g=!0;return(this.config.required||o.length)&&(g=(0,v.isHex)(h)),typeof this.config.validation=="function"&&(g=this.config.validation(h)),t||(this.setValidationStatus(g?"success":"error"),this.events.fire(l.ItemEvent.afterValidate,[h,g]),this.paint()),g},e.prototype.clearValidate=function(){this.setValidationStatus(),this.paint()},e.prototype.setValue=function(t){t!==void 0&&t!==this.config.value&&this.colorpicker.setValue(t)},e.prototype.getValue=function(){return this.colorpicker.getValue()},e.prototype.clear=function(){this.config.value!==""&&this.colorpicker.clear()},e.prototype.getWidget=function(){return this.colorpicker},e.prototype.focus=function(){var t=this;(0,d.awaitRedraw)().then(function(){t.getRootView().refs.input.el.focus()})},e.prototype.blur=function(){var t=this;(0,d.awaitRedraw)().then(function(){t._popup.hide(),t.getRootView().refs.input.el.blur()})},e.prototype._initView=function(t){if((0,p.isEmptyObj)(t))throw new Error("Check the configuration is correct");for(var o in this.colorpicker&&this.colorpicker.destructor(),this._popup&&this._popup.destructor(),this.config={type:t.type,id:t.id,name:t.name,disabled:!1,editable:!1,hidden:!1,value:"",grayShades:!0,pickerOnly:!1,paletteOnly:!1,customColors:[],palette:v.palette,mode:"palette",required:!1,icon:"",placeholder:"",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"},t)o!=="id"&&o!=="type"&&o!=="name"&&(this.config[o]=t[o]);this._popup=new s.Popup,this.colorpicker=new v.Colorpicker(null,(0,r.widgetConfig)(t)),this.colorpicker.setValue(this.config.value),this._popup.attach(this.colorpicker)},e.prototype._initHandlers=function(){var t=this;this.colorpicker.events.on(v.ColorpickerEvents.beforeChange,function(o){return t.events.fire(l.ItemEvent.beforeChange,[o])}),this.colorpicker.events.on(v.ColorpickerEvents.change,function(o,c){t.config.value=t.colorpicker.getValue(),t.events.fire(l.ItemEvent.change,[t.config.value]),(0,r.isVerify)(t.config)&&(c==="clear"?t.setValidationStatus(t.validate(!0)?"success":"error"):t.validate()),t._popup.hide(),t.paint()}),this._popup.events.on(s.PopupEvents.afterHide,function(){document.activeElement!==t.getRootView().refs.input.el&&t.events.fire(l.ItemEvent.blur,[t.getValue()]),t.paint()}),this.events.on(l.ItemEvent.blur,function(){t._popupIsFocus=!1,t.paint()})},e.prototype._getHandlers=function(){var t=this;return{onblur:function(){t._popup.isVisible()||t.events.fire(l.ItemEvent.blur,[t.getValue()]),t.paint()},onfocus:function(){if(!t._popup.isVisible()){var o=t.getRootView().refs.input.el;t._popup.show(o,{theme:o}),t.events.fire(l.ItemEvent.focus,[t.getValue()]),t.paint()}},oninput:function(o){var c=o.target.value;t.events.fire(l.ItemEvent.input,[c])},onchange:function(o){var c=o.target.value;t.config.editable&&(0,v.isHex)(c)?t.setValue(c):c===""&&t.clear()},onkeydown:function(o){var c,h,g,x=document.activeElement;(((g=(h=(c=t.getRootView())===null||c===void 0?void 0:c.refs)===null||h===void 0?void 0:h.input)===null||g===void 0?void 0:g.el)===x||t._popup.isVisible())&&t.events.fire(l.ItemEvent.keydown,[o])},onmousedown:function(){t._popup.getContainer()!==document.activeElement&&(t._popupIsFocus=!1)}}},e.prototype._initHotkeys=function(){var t=this,o={"shift+tab":function(){t._applyTab()},tab:function(){t._applyTab()},escape:function(){t._popup.isVisible()&&t.getRootView().refs.input.el.focus(),t._popup.hide()},enter:function(h){if(h.preventDefault(),!t._popup.isVisible()){var g=t.getRootView().refs.input.el;t._popup.show(g,{theme:g})}},arrowRight:function(h){var g=t._popup.getContainer();t._popup.isVisible()&&!t._popupIsFocus&&(h.preventDefault(),g.focus(),t._popupIsFocus=!0)}};for(var c in o)this._keyManager.addHotKey(c,o[c])},e.prototype._draw=function(){var t,o,c,h=this.config,g=h.required,x=h.value,C=h.icon,k=h.disabled,I=h.placeholder,O=h.name,D=h.id,A=h.editable,H=h.label,S=h.helpMessage,$=this._popup.isVisible()||((c=(o=(t=this.getRootView())===null||t===void 0?void 0:t.refs)===null||o===void 0?void 0:o.input)===null||c===void 0?void 0:c.el)===document.activeElement;return(0,d.el)("div.dhx_form-group",{class:(0,r.getFormItemCss)(this.config,(0,r.isVerify)(this.config),$)},[this._drawLabel(),(0,d.el)(".dhx_input__wrapper",[(0,d.el)("div.dhx_input__container",{},[(0,d.el)(".dhx_input__icon",{class:C||"dxi dxi-eyedropper-variant"+(x?" dhx_input__icon--color-selected":""),style:{"background-color":x||"transparent"}}),(0,d.el)("input.dhx_input.dhx_input--icon-padding",{tabindex:0,"data-dhx-id":O||D,_key:this._uid,_ref:"input",value:x,type:"text",required:g,disabled:k,class:$&&"dhx_input--focus",placeholder:I||"",name:O||"",id:D||this._uid,onfocus:this._handlers.onfocus,oninput:this._handlers.oninput,onchange:this._handlers.onchange,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,onmousedown:this._handlers.onmousedown,autocomplete:"off",readOnly:!A,"aria-label":H||"".concat(A?"type or":""," select color"),"aria-describedby":S?"dhx_label__help_".concat(D||this._uid):null})]),(0,r.getValidationMessage)(this.config)&&(0,d.el)("span.dhx_input__caption",{},(0,r.getValidationMessage)(this.config))])])},e.prototype._applyTab=function(){var t,o,c;document.activeElement===((c=(o=(t=this._popup.getRootView())===null||t===void 0?void 0:t.refs)===null||o===void 0?void 0:o.content)===null||c===void 0?void 0:c.el)||this._popupIsFocus||this._popup.hide()},e}(u.Label);_.ColorPicker=i},function(W,_,y){var b=this&&this.__createBinding||(Object.create?function(v,f,d,p){p===void 0&&(p=d);var u=Object.getOwnPropertyDescriptor(f,d);u&&!("get"in u?!f.__esModule:u.writable||u.configurable)||(u={enumerable:!0,get:function(){return f[d]}}),Object.defineProperty(v,p,u)}:function(v,f,d,p){p===void 0&&(p=d),v[p]=f[d]}),E=this&&this.__exportStar||function(v,f){for(var d in v)d==="default"||Object.prototype.hasOwnProperty.call(f,d)||b(f,v,d)};Object.defineProperty(_,"__esModule",{value:!0}),_.locale=void 0,E(y(238),_),E(y(109),_),E(y(108),_),E(y(61),_);var m=y(62);Object.defineProperty(_,"locale",{enumerable:!0,get:function(){return m.default}})},function(W,_,y){var b,E=this&&this.__extends||(b=function(x,C){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,I){k.__proto__=I}||function(k,I){for(var O in I)Object.prototype.hasOwnProperty.call(I,O)&&(k[O]=I[O])},b(x,C)},function(x,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function k(){this.constructor=x}b(x,C),x.prototype=C===null?Object.create(C):(k.prototype=C.prototype,new k)}),m=this&&this.__spreadArray||function(x,C,k){if(k||arguments.length===2)for(var I,O=0,D=C.length;O<D;O++)!I&&O in C||(I||(I=Array.prototype.slice.call(C,0,O)),I[O]=C[O]);return x.concat(I||Array.prototype.slice.call(C))};Object.defineProperty(_,"__esModule",{value:!0}),_.Colorpicker=void 0;var v=y(0),f=y(3),d=y(2),p=y(5),u=y(1),s=y(61),l=y(108),r=y(62),a=y(109),i=y(67),n=y(21),e=y(239),t=y(240),o=y(14),c=y(31),h=y(1),g=function(x){function C(k,I){var O=x.call(this,k,I)||this;O._setPaletteGrip=function(A){var H=O.getRootView().refs.picker_palette.el.getBoundingClientRect(),S=A.targetTouches?A.targetTouches[0].clientX:A.clientX,$=(A.targetTouches?A.targetTouches[0].clientY:A.clientY)-H.top,w=S-H.left,T=(0,t.calculatePaletteGrip)(H,$,w),F=T.s,z=T.v;O._pickerState.hsv.s=F,O._pickerState.hsv.v=z,O.paint()},O._setRangeGrip=function(A){var H=O.getRootView().refs[O._activeRange].el.getBoundingClientRect(),S=(A.targetTouches?A.targetTouches[0].clientX:A.clientX)-H.left,$=(0,t.calculateRangeGrip)(H,S),w=$.h,T=$.alpha,F=$.rangeLeft;switch(O._activeRange){case"hue_range":O._pickerState.hsv.h=w,O._pickerState.hueRangeLeft=F;break;case"alpha_range":O._pickerState.alpha=T,O._pickerState.alphaRangeLeft=F}O.paint()},O._onColorClick=function(A,H){var S=H.data.color.toUpperCase();O.events.fire(a.ColorpickerEvents.beforeChange,[S])&&(O._selected=S,O._focusColor(S),O.events.fire(a.ColorpickerEvents.change,[O._selected]),O.events.fire(a.ColorpickerEvents.colorChange,[O._selected]))},O._container=k,O.config=(0,u.extend)({css:"",grayShades:!0,pickerOnly:!1,paletteOnly:!1,customColors:[],palette:l.palette,width:"238px",mode:"palette",transparency:!0},O.config),O.config.palette||(O.config.palette=l.palette),O.config.customColors&&(O.config.customColors=O.config.customColors.map(function(A){return A.toUpperCase()})),O._pickerState={hsv:{h:0,s:1,v:1},customHex:"",alpha:1},O.events=new f.EventSystem(O),O._setHandlers(),O._keyManager=new o.KeyManager(function(A,H){return H===O._uid}),O._initHotKey();var D=(0,v.create)({render:function(){return O._getContent()}});return O.mount(O._container,D),O}return E(C,x),C.prototype.destructor=function(){this._keyManager&&this._keyManager.destructor(),this.events&&this.events.clear(),this.config=this.events=this._selected=this._handlers=this._pickerState=this._inputTimeout=this._keyManager=null,this.unmount()},C.prototype.clear=function(){this.events.fire(a.ColorpickerEvents.beforeChange,[""])&&(this._selected="",this.events.fire(a.ColorpickerEvents.change,[this._selected,"clear"]),this.paint())},C.prototype.setValue=function(k){k=this.config.transparency||k.length!==9?k:k.slice(0,-2),this.events.fire(a.ColorpickerEvents.beforeChange,[k])&&(this._focusColor(k)||c.focusManager.getFocusId()===this._uid)&&(this.events.fire(a.ColorpickerEvents.change,[this._selected]),this.events.fire(a.ColorpickerEvents.colorChange,[this._selected]))},C.prototype.setFocus=function(k){this._focusColor(k)&&this.paint()},C.prototype.getValue=function(){return this._selected||""},C.prototype.getCustomColors=function(){return this.config.customColors},C.prototype.setCustomColors=function(k){this.config.customColors=k.map(function(I){return I.toUpperCase()}),this.paint()},C.prototype.setCurrentMode=function(k){k!=="palette"&&k!=="picker"||(this.config.mode=k,this.events.fire(a.ColorpickerEvents.modeChange,[k]),this.events.fire(a.ColorpickerEvents.viewChange,[k]),this.paint())},C.prototype.getCurrentMode=function(){return this.config.mode},C.prototype.getView=function(){return this.getCurrentMode()},C.prototype.setView=function(k){this.setCurrentMode(k)},C.prototype.focusValue=function(k){this.setFocus(k)},C.prototype._setHandlers=function(){var k=this;this._handlers={click:{".dhx_palette__cell":this._onColorClick},mousedown:function(I){k._pickerMove(I)},touchstart:function(I){k._pickerMove(I)},buttonsClick:function(I){if(k.setCurrentMode("palette"),I!=="cancel"){var O=k._pickerState.alpha,D=O!==1?(0,s.alphaToHex)(O):"",A=k._pickerState.background+D;I!=="apply"||k.config.customColors.includes(A)||(k.setValue(A),k.events.fire(a.ColorpickerEvents.apply,[]),k.events.fire(a.ColorpickerEvents.selectClick,[]))}else k.events.fire(a.ColorpickerEvents.cancelClick,[])},customColorClick:function(){k.setView("picker")},oninput:function(I){var O=(0,d.locate)(I);switch(k._inputTimeout&&clearTimeout(k._inputTimeout),O){case"hex_input":k._inputTimeout=setTimeout(function(){var A=I.target.value;A.indexOf("#")===-1&&(A="#".concat(A)),k._pickerState.customHex=A,(0,s.isHex)(A)&&(k._pickerState.hsv=(0,s.HexToHSV)(A),k._pickerState.alpha=(0,s.getAlpha)(A),k.paint())},100);break;case"alpha_input":k._pickerState.customHex="";var D=parseInt(I.target.value);D>100&&(D=Math.trunc(D/10)),D>=0&&(k._pickerState.alpha=D/100,k.paint())}},contextmenu:{".dhx_palette__cell":function(I,O){I.preventDefault();var D=k.config.customColors.indexOf(O.data.color);D!==-1&&k._removeCustomColor(D),k.paint()}},mouseover:{".dhx_palette__cell":function(I){I.target&&(0,i.tooltip)(r.default.rightClickToDelete,{node:I.target,position:n.Position.bottom})},".dhx_colorpicker-custom-colors__picker":function(I){I.target&&(0,i.tooltip)(r.default.addNewColor,{node:I.target,position:n.Position.bottom})}}},this.events.on(a.ColorpickerEvents.change,function(){k.paint()}),this.events.on(a.ColorpickerEvents.colorChange,function(){k.paint()})},C.prototype._pickerMove=function(k){var I=this,O=(0,d.locate)(k);this._pickerState.customHex="",O==="picker_palette"?this._setPaletteGrip(k):(this._activeRange=O,this._setRangeGrip(k));var D=O==="picker_palette"?this._setPaletteGrip:this._setRangeGrip,A=k.targetTouches?"touchmove":"mousemove",H=k.targetTouches?"touchend":"mouseup";document.addEventListener(A,D),document.addEventListener(H,function(){document.removeEventListener(A,D),I._activeRange=null}),this.paint()},C.prototype._focusColor=function(k){if(k===void 0||k.length<4)return!1;var I=k.toUpperCase();if(!(0,s.isHex)(I))return!1;var O=this.config.palette.reduce(function(H,S){return H||(S.forEach(function($){$.toUpperCase()!==I||(H=!0)}),H)},!1),D=l.grayShades.includes(I);if(!O&&!D){var A=this.getCustomColors();A.includes(I.toUpperCase())||A.push(I.toUpperCase())}return this._selected=I||null,this._pickerState.hsv=(0,s.HexToHSV)(I),this._pickerState.alpha=(0,s.getAlpha)(I),!0},C.prototype._removeCustomColor=function(k){this.config.customColors.splice(k,1)},C.prototype._getCells=function(k,I){var O=this;return I===void 0&&(I=""),k.reduce(function(D,A){var H=(O._selected||"").toUpperCase()===A.toUpperCase()?"dhx_palette__cell--selected":"";return D.push((0,v.el)(".dhx_palette__cell",{class:"".concat(H," ").concat(I),_data:{color:A},style:"background:".concat(A),tabindex:0})),D},[])},C.prototype._getGrayShades=function(){return(0,v.el)(".dhx_palette__row",this._getCells(l.grayShades))},C.prototype._getPalette=function(){var k=this;return this.config.palette.reduce(function(I,O){return I.push((0,v.el)(".dhx_palette__col",k._getCells(O))),I},[])},C.prototype._getContent=function(){var k;return k=this.config.pickerOnly?[(0,e.getPicker)(this,this._pickerState,this._handlers)]:this.config.mode==="palette"?m(m([this.config.grayShades&&this._getGrayShades()],this._getPalette(),!0),[!this.config.paletteOnly&&(0,v.el)(".dhx_colorpicker-custom-colors",{onmouseover:this._handlers.mouseover},[(0,v.el)(".dhx_colorpicker-custom-colors__header",[r.default.customColors]),(0,v.el)(".dhx_palette--custom.dhx_palette__row",m(m([],this._getCells(this.config.customColors,"dhx_custom-color__cell"),!0),[(0,v.el)(".dhx_colorpicker-custom-colors__picker",{class:"dxi dxi-plus",onclick:this._handlers.customColorClick,onmouseover:this._handlers.mouseover,tabindex:0})],!1))])],!1):[(0,e.getPicker)(this,this._pickerState,this._handlers)],(0,v.el)(".dhx_widget.dhx_colorpicker",{class:this.config.css,style:{width:this.config.width},"data-dhx-widget-id":this._uid},[(0,v.el)(".dhx_palette",{onclick:this._handlers.click,oncontextmenu:this._handlers.contextmenu},k)])},C.prototype._initHotKey=function(){var k=this,I={enter:function(D){if((0,d.locateNodeByClassName)(D,"dhx_palette__cell")){var A=(0,h.rgbToHex)(D.target.style.background);if(!k.events.fire(a.ColorpickerEvents.beforeChange,[A]))return;k._selected=A,k.events.fire(a.ColorpickerEvents.change,[k._selected]),k.events.fire(a.ColorpickerEvents.colorChange,[k._selected])}(0,d.locateNodeByClassName)(D,"dhx_colorpicker-custom-colors__picker")&&k.setCurrentMode("picker")}};for(var O in I)this._keyManager.addHotKey(O,I[O])},C}(p.View);_.Colorpicker=g},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.calculatePaletteGrip=_.getPicker=void 0;var b=y(61),E=y(0),m=y(62);_.getPicker=function(v,f,d){var p=(0,b.HSVtoRGB)(f.hsv);f.background=(0,b.RGBToHex)(p);var u=f.background,s=f.hsv,l=f.customHex,r=f.alpha,a=(0,b.RGBToHex)((0,b.HSVtoRGB)({h:s.h,s:1,v:1})),i=v.getRootView(),n=i.refs?i.refs.picker_palette.el.getBoundingClientRect():{height:200,width:218,x:0,y:0},e=n.height-2,t=n.width-2,o=e-s.v*e-4,c=s.s*t-4,h=n.width-6,g=h-(360-s.h)/360*h,x=r*h,C=r!==1?(0,b.alphaToHex)(r):"",k=(0,b.isHex)(l)?l.replace("#",""):u.replace("#","")+C,I=Math.round(100*r),O=v.config.transparency;return(0,E.el)(".dhx_colorpicker-picker",{},[(0,E.el)(".dhx_colorpicker-picker__palette",{style:{height:132,background:a},onmousedown:d.mousedown,ontouchstart:d.touchstart,"data-dhx-id":"picker_palette",_ref:"picker_palette"},[(0,E.el)(".dhx_palette_grip",{style:{top:o,left:c},tabindex:0})]),(0,E.el)(".dhx_colorpicker-range.dhx_colorpicker-range--hue",{onmousedown:d.mousedown,ontouchstart:d.touchstart,"data-dhx-id":"hue_range",_key:"hue_range",_ref:"hue_range"},[(0,E.el)(".dhx_colorpicker-range__grip.dhx_colorpicker-range__grip--hue",{style:{left:g},tabindex:0})]),O?(0,E.el)(".dhx_colorpicker-range.dhx_colorpicker-range--alpha",{onmousedown:d.mousedown,ontouchstart:d.touchstart,"data-dhx-id":"alpha_range",_key:"alpha_range",_ref:"alpha_range"},[(0,E.el)(".dhx_colorpicker-range__substrate"),(0,E.el)(".dhx_colorpicker-range__background",{style:{backgroundImage:"linear-gradient(to right, transparent, ".concat(u,")")}}),(0,E.el)(".dhx_colorpicker-range__grip.dhx_colorpicker-range__grip--alpha",{style:{left:r!==1?x:null},tabindex:0})]):null,(0,E.el)(".dhx_colorpicker-value",[(0,E.el)(".dhx_colorpicker-value__color",{style:{background:u+(0,b.alphaToHex)(r)}}),(0,E.el)(".dhx_colorpicker-value__input-wrapper.dhx_colorpicker-value__input-wrapper--hex",[(0,E.el)("input",{class:"dhx_colorpicker-value__input dhx_colorpicker-value__input--hex",style:{width:O?112:100},value:k,oninput:d.oninput,maxlength:O?"9":"7",_key:"hex_input","data-dhx-id":"hex_input","aria-label":"type color in HEX format"})]),O?(0,E.el)(".dhx_colorpicker-value__input-wrapper.dhx_colorpicker-value__input-wrapper--alpha",[(0,E.el)("input",{class:"dhx_colorpicker-value__input dhx_colorpicker-value__input--alpha",value:I,oninput:d.oninput,maxlength:"3",_key:"alpha_input","data-dhx-id":"alpha_input","aria-label":"type opacity in percent"})]):null]),(0,E.el)(".dhx_colorpicker-picker__buttons",[!v.config.pickerOnly&&(0,E.el)("button",{class:"dhx_button dhx_button--size_medium dhx_button--view_link dhx_button--color_primary",onclick:[d.buttonsClick,"cancel"]},m.default.cancel),(0,E.el)("button",{class:"dhx_button dhx_button--size_medium dhx_button--view_flat dhx_button--color_primary",onclick:[d.buttonsClick,"apply"]},m.default.select)])])},_.calculatePaletteGrip=function(v,f,d){var p=v.refs.picker_palette.el.getBoundingClientRect(),u=p.height,s=p.width;f=f<0?0:f>u?u:f,d=d<0?0:d>s?s:d;var l=Math.round(d/(s/100)),r=100-Math.round(f/(u/100));this._pickerState.hsv.s=l/100,this._pickerState.hsv.v=r/100}},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.calculateRangeGrip=_.calculatePaletteGrip=void 0,_.calculatePaletteGrip=function(b,E,m){var v=b.height,f=b.width;return E=E<0?0:E>v?v:E,m=m<0?0:m>f?f:m,{s:Math.round(m/(f/100))/100,v:(100-Math.round(E/(v/100)))/100}},_.calculateRangeGrip=function(b,E){var m=b.width;return E=E<0?0:E>m?m:E,{h:Math.round(E/m*360),alpha:Number((E/m).toFixed(2)),rangeLeft:E}}},function(W,_,y){var b,E=this&&this.__extends||(b=function(r,a){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(i[e]=n[e])},b(r,a)},function(r,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function i(){this.constructor=r}b(r,a),r.prototype=a===null?Object.create(a):(i.prototype=a.prototype,new i)}),m=this&&this.__assign||function(){return m=Object.assign||function(r){for(var a,i=1,n=arguments.length;i<n;i++)for(var e in a=arguments[i])Object.prototype.hasOwnProperty.call(a,e)&&(r[e]=a[e]);return r},m.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.Spacer=void 0;var v=y(0),f=y(5),d=y(4),p=y(3),u=y(1),s=y(6),l=function(r){function a(i,n){var e=r.call(this,i,m({disabled:!1,hidden:!1,width:"content",height:"content"},n))||this;return e.events=new p.EventSystem,e.mount(i,(0,v.create)({render:function(){return e._draw()}})),e}return E(a,r),a.prototype.destructor=function(){this.events&&this.events.clear(),this.config=this.events=null,this.unmount()},a.prototype.setProperties=function(i){if(i&&!(0,u.isEmptyObj)(i)&&this.events.fire(d.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var n in i)s.baseProps.includes(n)&&(this.config[n]=i[n]);this.events.fire(d.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},a.prototype.getProperties=function(){for(var i={},n=0,e=s.baseProps;n<e.length;n++){var t=e[n];i[t]=this.config[t]}return i},a.prototype.show=function(){this.config.hidden&&this.events.fire(d.ItemEvent.beforeShow,[])&&(this.config.hidden=!1,this.events.fire(d.ItemEvent.afterShow,[]))},a.prototype.hide=function(i){this.config.hidden&&!i||!this.events.fire(d.ItemEvent.beforeHide,[!!i])||(this.config.hidden=!0,this.events.fire(d.ItemEvent.afterHide,[!!i]))},a.prototype.isVisible=function(){return!this.config.hidden},a.prototype._draw=function(){return(0,v.el)("div")},a}(f.View);_.Spacer=l},function(W,_,y){var b,E=this&&this.__extends||(b=function(i,n){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},b(i,n)},function(i,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=i}b(i,n),i.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}),m=this&&this.__assign||function(){return m=Object.assign||function(i){for(var n,e=1,t=arguments.length;e<t;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o]);return i},m.apply(this,arguments)},v=this&&this.__spreadArray||function(i,n,e){if(e||arguments.length===2)for(var t,o=0,c=n.length;o<c;o++)!t&&o in n||(t||(t=Array.prototype.slice.call(n,0,o)),t[o]=n[o]);return i.concat(t||Array.prototype.slice.call(n))};Object.defineProperty(_,"__esModule",{value:!0}),_.Avatar=void 0;var f=y(0),d=y(1),p=y(3),u=y(9),s=y(4),l=y(6),r=y(106),a=function(i){function n(e,t){var o=i.call(this,e,t)||this;return o.events=new p.EventSystem,o._propsItem=["validation","required","readOnly","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage","size","circle","alt","icon","placeholder","preview","accept","autosend","params","headerParams","fieldName","target","updateFromResponse","removeIcon"],o._props=v(v([],l.baseProps,!0),o._propsItem,!0),o._isUpload=!1,o._initView(t),o._initHandlers(),o}return E(n,i),n.prototype.send=function(e){var t=this,o=this.config,c=o.target,h=o.value,g=o.updateFromResponse,x=o.headerParams;if(!this._isUpload&&c&&(h!=null&&h.file)&&h.status!==r.FileStatus.uploaded&&this.events.fire(s.ItemEvent.beforeUploadFile,[h])){var C=this._createFormData(h,e),k=new XMLHttpRequest;if(this._isUpload=!0,this.config.value=m(m({},h),{status:r.FileStatus.inprogress,request:k}),this.events.fire(s.ItemEvent.uploadBegin,[this.config.value]),this.events.fire(s.ItemEvent.uploadProgress,[0,this.config.value]),k.open("POST",c),x)for(var I in x)k.setRequestHeader(I,x[I]);k.upload.onprogress=function(O){var D=O.loaded/O.total;t.config.value=m(m({},t.config.value),{progress:D}),t.events.fire(s.ItemEvent.uploadProgress,[100*D,t.config.value])},k.onloadend=function(){var O=k.status===200?r.FileStatus.uploaded:r.FileStatus.failed,D=k.status===200&&k.response?JSON.parse(k.response):null;t.config.value=m(m({},t.config.value),{status:O}),O===r.FileStatus.uploaded?(D&&g&&(t.config.value=m(m({},t.config.value),D)),t.events.fire(s.ItemEvent.uploadFile,[t.config.value,D])):t.events.fire(s.ItemEvent.uploadFail,[t.config.value]),t._isUpload=!1,t.events.fire(s.ItemEvent.uploadComplete,[t.config.value])},k.send(C)}},n.prototype.selectFile=function(){var e,t,o;(o=(t=(e=this.getRootView())===null||e===void 0?void 0:e.refs)===null||t===void 0?void 0:t.input)===null||o===void 0||o.el.click()},n.prototype.setValue=function(e){this._setValue(e),(0,l.isVerify)(this.config)&&this.validate()},n.prototype._setValue=function(e){this.events.fire(s.ItemEvent.beforeChange,[e])&&(this.config.value=!(0,d.isEmptyObj)(e)&&m({id:(0,d.uid)(),status:r.FileStatus.queue,progress:0,path:""},e)||{},this.events.fire(s.ItemEvent.change,[this.getValue()]))},n.prototype.getValue=function(){return this.config.value||{}},n.prototype.clear=function(){this._setValue({}),(0,l.isVerify)(this.config)&&this.setValidationStatus(this.validate(!0)?"success":"error")},n.prototype.disable=function(){this.config.disabled=!0,this.paint()},n.prototype.enable=function(){var e;this.config.disabled=!1,!((e=this.parent)===null||e===void 0)&&e.isDisabled()&&this.parent.enable(),this.paint()},n.prototype.isDisabled=function(){return!!this.config.disabled},n.prototype.show=function(){this.config.hidden&&this.events.fire(s.ItemEvent.beforeShow,[this.getValue()])&&(this.config.hidden=!1,this.events.fire(s.ItemEvent.afterShow,[this.getValue()]))},n.prototype.hide=function(e){e===void 0&&(e=!1),this.config.hidden&&!e||!this.events.fire(s.ItemEvent.beforeHide,[this.getValue(),e])||(this.config.hidden=!0,this.events.fire(s.ItemEvent.afterHide,[this.getValue(),e]))},n.prototype.isVisible=function(){return!this.config.hidden},n.prototype.validate=function(e,t){if(e===void 0&&(e=!1),t===void 0&&(t=this.getValue()),!e&&!this.events.fire(s.ItemEvent.beforeValidate,[t]))return!1;var o=!0;return this.config.required&&(o=!!t.src),typeof this.config.validation=="function"&&(o=this.config.validation(t)),e||(this.setValidationStatus(o?"success":"error"),this.events.fire(s.ItemEvent.afterValidate,[t,o]),this.paint()),o},n.prototype.clearValidate=function(){this.setValidationStatus(),this.paint()},n.prototype.setProperties=function(e){if(e&&!(0,d.isEmptyObj)(e)&&this.events.fire(s.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t]);this.events.fire(s.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},n.prototype.getProperties=function(){for(var e={},t=0,o=this._props;t<o.length;t++){var c=o[t];e[c]=this.config[c]}return e},n.prototype.focus=function(){var e=this;(0,f.awaitRedraw)().then(function(){var t,o,c;(c=(o=(t=e.getRootView())===null||t===void 0?void 0:t.refs)===null||o===void 0?void 0:o.input)===null||c===void 0||c.el.focus(),e.paint()})},n.prototype.blur=function(){var e=this;(0,f.awaitRedraw)().then(function(){var t,o,c;(c=(o=(t=e.getRootView())===null||t===void 0?void 0:t.refs)===null||o===void 0?void 0:o.input)===null||c===void 0||c.el.blur(),e.paint()})},n.prototype.destructor=function(){this.events&&this.events.clear(),i.prototype._destructor.call(this),this.unmount()},n.prototype._initView=function(e){this.config=m({size:"medium",labelPosition:"top",width:"content",height:"content",accept:"image/*",fieldName:"file",target:"",alt:"",css:"",label:"",errorMessage:"",successMessage:"",helpMessage:"",icon:"",labelWidth:"",placeholder:"",preMessage:"",removeIcon:!0,circle:!1,readOnly:!1,hiddenLabel:!1,autosend:!1,updateFromResponse:!0},e),this.paint()},n.prototype._initHandlers=function(){var e=this;this._handlers=m({change:function(t){var o,c,h=(c=(o=t.target)===null||o===void 0?void 0:o.files)===null||c===void 0?void 0:c[0];if(!e.config.readOnly&&h){var g=URL.createObjectURL(h);e.setValue({file:h,src:g}),e.config.autosend&&e.validate(!0)&&e.send()}},drop:function(t){var o,c;t.preventDefault();var h=(c=(o=t.dataTransfer)===null||o===void 0?void 0:o.files)===null||c===void 0?void 0:c[0];if(!e.config.readOnly&&h){var g=URL.createObjectURL(h);e._dragover=!1,e.setValue({file:h,src:g}),e.config.autosend&&e.validate(!0)&&e.send()}},dragover:function(t){if(t.preventDefault(),!e.config.readOnly){for(var o=0,c=t.dataTransfer.types;o<c.length;o++){var h=c[o];if(h!=="Files"&&h!=="application/x-moz-file")return}e._dragoverTimeout?clearTimeout(e._dragoverTimeout):e.paint(),e._dragover=!0,e._dragoverTimeout=setTimeout(function(){e._dragover=!1,e._dragoverTimeout=null,e.paint()},150)}},onfocus:function(){return e.events.fire(s.ItemEvent.focus,[e.getValue()])},onblur:function(){return e.events.fire(s.ItemEvent.blur,[e.getValue()])},onkeydown:function(t){return e.events.fire(s.ItemEvent.keydown,[t])}},this._handlers),this.events.on(s.ItemEvent.change,function(){return e.paint()})},n.prototype._draw=function(){var e=this.config,t=e.hidden,o=e.alt,c=e.circle,h=e.size,g=e.label,x=e.value,C=e.readOnly,k=t?" dhx_form-group--hidden":"",I="",O={};return this._dragover&&(I+="dhx_avatar--on-drag "),c&&(I+="dhx_avatar--circle "),h&&typeof h!="string"?O.width=O.height=h:h&&["small","medium","large"].includes(h)?I+="dhx_avatar-size--".concat(h," "):I+="dhx_avatar-size--medium ",(0,f.el)("div.dhx_form-group.dhx_form-group--avatar",{"aria-label":o||g,role:"img",class:(0,l.getFormItemCss)(this.config,(0,l.isVerify)(this.config),!1)+k},[this._drawLabel(),(0,f.el)("div.dhx_avatar",{class:I,style:O,ondragover:this._handlers.dragover,ondrop:this._handlers.drop},[x!=null&&x.src?this._drawImage(this.config):this._drawPreview(this.config),!C&&this._drawCover(this.config)]),(0,l.getValidationMessage)(this.config)&&(0,f.el)("span.dhx_input__caption",(0,l.getValidationMessage)(this.config))])},n.prototype._drawImage=function(e){var t=e.alt,o=e.value;return(0,f.el)("img.dhx_avatar__image",{src:o==null?void 0:o.src,alt:t})},n.prototype._drawPreview=function(e){var t=e.icon,o=e.placeholder,c=e.preview,h=[];return t&&h.push((0,f.el)("div.dhx_avatar__preview-icon",{class:t})),o&&h.push((0,f.el)("div.dhx_avatar__preview-placeholder",{"aria-placeholder":o},o)),(0,f.el)("div.dhx_avatar__preview",{style:m({},c&&{"background-image":"url(".concat(c)}||{})},[].concat(h))},n.prototype._drawCover=function(e){var t=this,o=e.accept,c=e.id,h=e.value,g=e.removeIcon;return(0,f.el)("div.dhx_avatar__cover",[(0,f.el)("label.dhx_avatar__cover-upload",[(0,f.el)("input.dhx_avatar__cover-input",{_ref:"input",id:c,accept:o,type:"file",onchange:this._handlers.change,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown}),(0,f.el)("i.dhx_avatar__cover-icon.dxi.dxi-vault")]),(h==null?void 0:h.src)&&g&&(0,f.el)("div.dhx_avatar__cover-remove",{onclick:function(){return t.clear()}},[(0,f.el)("i.dhx_avatar__cover-icon.dxi.dxi-delete-forever")])])},n.prototype._createFormData=function(e,t){var o=this.config.fieldName,c=this.config.params,h=new FormData;if(t)for(var g in t)h.append(g,t[g]);if(c)for(var g in c)h.append(g,c[g]);return h.append(o,e.file,e.file.name),h.append(o+"_fullname",e.path+e.file.name),h.append(o+"_id",e.id),h},n}(u.Label);_.Avatar=a},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(s){for(var l,r=1,a=arguments.length;r<a;r++)for(var i in l=arguments[r])Object.prototype.hasOwnProperty.call(l,i)&&(s[i]=l[i]);return s},b.apply(this,arguments)},E=this&&this.__spreadArray||function(s,l,r){if(r||arguments.length===2)for(var a,i=0,n=l.length;i<n;i++)!a&&i in l||(a||(a=Array.prototype.slice.call(l,0,i)),a[i]=l[i]);return s.concat(a||Array.prototype.slice.call(l))};Object.defineProperty(_,"__esModule",{value:!0}),_.Fieldset=void 0;var m=y(3),v=y(4),f=y(6),d=y(1),p=y(0),u=function(){function s(l){var r=this;this.events=new m.EventSystem,this.attachments=[],this.propsItem=["label","labelAlignment","align"],this.props=E(E([],f.baseProps,!0),this.propsItem,!0),this.config=b({disabled:!1,hidden:!1,width:"content",height:"content",labelAlignment:"left",label:"",css:""},l),(0,p.awaitRedraw)().then(function(){r.config.disabled&&r.disable()})}return s.prototype.forEach=function(l,r){r===void 0&&(r=!1);for(var a=r?this.getTreeAttachments(this.getAttachments()):this.attachments,i=0;i<a.length;i++)l.call(this,a[i],i,a)},s.prototype.disable=function(){this.forEach(function(l){return typeof l.disable=="function"&&l.disable()}),this.config.disabled=this.cell.config.$disabled=!0,this.cell.paint()},s.prototype.enable=function(){var l;this.config.disabled=this.cell.config.$disabled=!1,this.attachments.every(function(r){return r.isDisabled()})&&this.forEach(function(r){return typeof r.enable=="function"&&r.enable()}),!((l=this.parent)===null||l===void 0)&&l.isDisabled()&&this.parent.enable(),this.cell.paint()},s.prototype.isDisabled=function(){return!!this.config.disabled},s.prototype.show=function(){this.config.hidden&&(this.forEach(function(l){return typeof l.hide=="function"&&l.show()}),this.config.hidden=!1,this.cell.show())},s.prototype.hide=function(l){l===void 0&&(l=!1),this.config.hidden&&!l||(this.forEach(function(r){typeof r.hide=="function"&&(r.config.type==="checkboxgroup"||r.config.type==="radiogroup"?r.hide(void 0,l):r.hide(l))}),this.config.hidden=!0,this.cell.hide())},s.prototype.isVisible=function(){return!this.config.hidden},s.prototype.setProperties=function(l){if(l&&!(0,d.isEmptyObj)(l)&&this.events.fire(v.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var r in l)this.props.includes(r)&&(this.config[r]=l[r]);this.events.fire(v.ItemEvent.afterChangeProperties,[this.getProperties()])}},s.prototype.getProperties=function(){for(var l={},r=0,a=this.props;r<a.length;r++){var i=a[r];l[i]=this.config[i]}return l},s.prototype.destructor=function(){this.cell.hide(),this.events.clear(),this.attachments=[]},s.prototype.setCell=function(l){this.cell=l},s.prototype.getCell=function(){return this.cell},s.prototype.setAttachments=function(l){this.attachments=l},s.prototype.getAttachments=function(){return this.attachments},s.prototype.getTreeAttachments=function(l){for(var r=[],a=0;a<l.length;a++){var i=l[a];r.push(i),i.config.type==="fieldset"&&r.push.apply(r,i.getTreeAttachments(i.getAttachments()))}return r},s}();_.Fieldset=u},function(W,_,y){var b,E=this&&this.__extends||(b=function(i,n){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},b(i,n)},function(i,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=i}b(i,n),i.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}),m=this&&this.__assign||function(){return m=Object.assign||function(i){for(var n,e=1,t=arguments.length;e<t;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o]);return i},m.apply(this,arguments)},v=this&&this.__spreadArray||function(i,n,e){if(e||arguments.length===2)for(var t,o=0,c=n.length;o<c;o++)!t&&o in n||(t||(t=Array.prototype.slice.call(n,0,o)),t[o]=n[o]);return i.concat(t||Array.prototype.slice.call(n))};Object.defineProperty(_,"__esModule",{value:!0}),_.ToggleGroup=void 0;var f=y(4),d=y(110),p=y(5),u=y(0),s=y(6),l=y(3),r=y(1),a=function(i){function n(e,t){var o=i.call(this,e,m({full:!1,multiselect:!1,disabled:!1,hidden:!1,width:"content",height:"content",gap:0,css:"",padding:"",items:[]},t))||this;return o.events=new l.EventSystem,o.items=[],o.props=v(v([],s.baseProps,!0),["options","full","gap","multiselect"],!1),o.initView(),o.initHandlers(),o.mount(e,(0,u.create)({render:function(){return o.draw()}})),o}return E(n,i),n.prototype.setValue=function(e){var t;e===void 0&&(e={});var o=this.getValue(),c=Object.entries(e).every(function(T){var F=T[0];return!!T[1]==!!o[F]});if(!c){if(!this.config.multiselection)for(var h=Object.entries(e).find(function(T){return T[0],T[1]}),g=this.getValue(),x=0,C=Object.entries(g);x<C.length;x++){var k=C[x],I=k[0],O=k[1],D=O;typeof O=="string"&&(D=""),typeof O=="number"&&(D=0),typeof O=="boolean"&&(D=!1),e[I]=h&&h[0]===I?h[1]:D}if(!this.events.fire(f.ItemEvent.beforeChange,[m(m({},this.getValue()),e)]))return!1;for(var A=function(T,F){(t=H.items.find(function(z){return z.config.id===T}))===null||t===void 0||t.setValue(!!F,!0)},H=this,S=0,$=Object.entries(e);S<$.length;S++){var w=$[S];A(w[0],w[1])}this.events.fire(f.ItemEvent.change,[this.getValue()])}},n.prototype.getValue=function(e){if(e){var t=this.items.find(function(c){return c.config.id===e});if(t)return t.getValue()}var o={};return this.items.forEach(function(c){o[c.config.id]=c.getValue()}),o},n.prototype.isSelected=function(e){if(e){var t=this.items.find(function(c){return c.config.id===e});if(t)return t.isSelected()}var o={};return this.items.forEach(function(c){o[c.config.id]=c.isSelected()}),o},n.prototype.show=function(e){var t=e&&this.items.find(function(o){return o.config.id===e});t&&!t.config.hidden||!this.events.fire(f.ItemEvent.beforeShow,[this.getValue(),e])||(t?t.show():this.items.forEach(function(o){return o.show()}),this.config.hidden=!1,this.checkVisibleOrder(!!t),this.events.fire(f.ItemEvent.afterShow,[this.getValue(),e]))},n.prototype.hide=function(e,t){var o=e&&this.items.find(function(c){return c.config.id===e});this.config.hidden&&!t||o&&o.config.hidden||!this.events.fire(f.ItemEvent.beforeHide,[this.getValue(),e,t])||(o?(o.hide(),this.config.hidden=this.items.every(function(c){return c.config.hidden})):(this.items.forEach(function(c){return c.hide()}),this.config.hidden=!0),this.checkVisibleOrder(!!o),this.events.fire(f.ItemEvent.afterHide,[this.getValue(),e,t]))},n.prototype.isVisible=function(e){var t=this.items.find(function(o){return o.config.id===e});return t?t.isVisible():!this.config.hidden},n.prototype.focus=function(e){var t=this;(0,u.awaitRedraw)().then(function(){var o=t.items.find(function(c){return c.config.id===e})||t.items[0];o&&o.focus()})},n.prototype.blur=function(){var e=this;(0,u.awaitRedraw)().then(function(){e.items.forEach(function(t){return t.blur()})})},n.prototype.disable=function(e){var t=e&&this.items.find(function(o){return o.config.id===e});this.config.disabled||t&&t.config.disabled||(t?(t.disable(),this.config.disabled=this.items.every(function(o){return o.config.disabled})):(this.items.forEach(function(o){return o.disable()}),this.config.disabled=!0),this.paint())},n.prototype.enable=function(e){var t,o=e&&this.items.find(function(c){return c.config.id===e});!o&&!this.config.disabled||o&&!o.config.disabled||(o?o==null||o.enable():this.items.forEach(function(c){return c.enable()}),this.config.disabled=!1,!((t=this.parent)===null||t===void 0)&&t.isDisabled()&&this.parent.enable(),this.paint())},n.prototype.isDisabled=function(e){var t=this.items.find(function(o){return o.config.id===e});return t?t.isDisabled():!!this.config.disabled},n.prototype.setProperties=function(e,t){var o=this.items.find(function(h){return h.config.id===t});if(e&&!(0,r.isEmptyObj)(e)&&this.events.fire(f.ItemEvent.beforeChangeProperties,[m(m({},o?o.getProperties():this.getProperties()),e)])){if(o)o.setProperties(e);else for(var c in e)this.props.includes(c)&&(this.config[c]=e[c]);this.events.fire(f.ItemEvent.afterChangeProperties,[o?o.getProperties():this.getProperties()])}},n.prototype.getProperties=function(e){if(e){var t=this.items.find(function(x){return x.config.id===e});if(t)return t.getProperties()}for(var o={},c=0,h=this.props;c<h.length;c++){var g=h[c];o[g]=this.config[g]}return o},n.prototype.destructor=function(){this.events.clear(),this.unmount()},n.prototype.initView=function(){var e,t=this;if(!(!((e=this.config.options)===null||e===void 0)&&e.length))throw new Error("Check the configuration is correct");this.items=this.config.options.map(function(o,c){return o.id||(o.id=o.name||(0,r.uid)()),t.config.gap&&(o.$gap=c&&t.config.gap),new d.ToggleButton(null,m(m({},o),{$group:!0}))}),this.config.value&&this.setValue(this.config.value),this.checkVisibleOrder()},n.prototype.initHandlers=function(){var e=this;this.items.forEach(function(t){t.events.on(f.ItemEvent.keydown,function(o){e.events.fire(f.ItemEvent.keydown,[o,t.config.id])}),t.events.on(f.ItemEvent.focus,function(){e.events.fire(f.ItemEvent.focus,[e.getValue(),t.config.id])}),t.events.on(f.ItemEvent.blur,function(){e.events.fire(f.ItemEvent.blur,[e.getValue(),t.config.id])}),t.events.on(f.ItemEvent.beforeChange,function(o){var c;return typeof t.config.value=="string"&&(o=o?t.config.value:""),typeof t.config.value=="number"&&(o=o?t.config.value:0),e.setValue(((c={})[t.config.id]=o,c))})})},n.prototype.draw=function(){var e=this.config,t=e.hidden,o=e.id,c=e.name,h=e.full,g=e.gap,x=this.items.map(function(C){return(0,u.inject)(C.getRootView())});return(0,u.el)("div.dhx_form-group.dhx_form-group--toggle-group.dhx_toggle-group",{"data-dhx-id":c||o,"aria-label":c||o,role:"group",class:(t?"dhx_form-group--hidden ":"")+(h?"dhx_toggle-group--full ":"")+(g?"dhx_toggle-group--segmented ":"")+(0,s.getFormItemCss)(this.config)},[].concat(x))},n.prototype.checkVisibleOrder=function(e){var t=this.items.map(function(h){return delete h.config.$extraCss,h}).filter(function(h){return!h.config.hidden});if(t.length){var o=this.items.findIndex(function(h){return h.config.id===t[0].config.id}),c=this.items.findIndex(function(h){return h.config.id===t[t.length-1].config.id});this.items[o].config.$extraCss="dhx_toggle--first ",this.items[c].config.$extraCss=this.items[c].config.$extraCss?this.items[c].config.$extraCss+"dhx_toggle--last ":"dhx_toggle--last "}e&&this.items.forEach(function(h){return h.paint()})},n}(p.View);_.ToggleGroup=a},function(W,_,y){var b,E=this&&this.__extends||(b=function(s,l){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i])},b(s,l)},function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function r(){this.constructor=s}b(s,l),s.prototype=l===null?Object.create(l):(r.prototype=l.prototype,new r)});Object.defineProperty(_,"__esModule",{value:!0}),_.ProForm=void 0;var m=y(104),v=y(4),f=y(16),d=y(246),p=y(6),u=function(s){function l(r,a){return s.call(this,r,a)||this}return E(l,s),l.prototype._initItemHandlers=function(r,a){var i=this;if(s.prototype._initItemHandlers.call(this,r,a),r.type==="container"){var n=this._attachments[a]=new d.Container(null,r);n.events.on(v.ItemEvent.beforeChangeProperties,function(e){return i.events.fire(v.FormEvents.beforeChangeProperties,[a,e])}),n.events.on(v.ItemEvent.afterChangeProperties,function(e){i._changeProps(a,e,n.config),i.events.fire(v.FormEvents.afterChangeProperties,[a,e]),i.layout.paint()}),n.events.on(v.ItemEvent.beforeHide,function(e){if(!e)return i.events.fire(v.FormEvents.beforeHide,[a])}),n.events.on(v.ItemEvent.beforeShow,function(){return i.events.fire(v.FormEvents.beforeShow,[a])}),n.events.on(v.ItemEvent.afterHide,function(e){i.layout.getCell(a).hide(),!e&&i.events.fire(v.FormEvents.afterHide,[a])}),n.events.on(v.ItemEvent.afterShow,function(){i.layout.getCell(a).show(),i.events.fire(v.FormEvents.afterShow,[a])})}},l.prototype._initUI=function(r){var a=this._attachments={},i={padding:"8px"};this.config.css+=" dhx_form",this._createLayoutConfig(this.config,i),this.layout=new f.ProLayout(r,i),(0,p.setAttacments)(a,this.layout)},l}(m.Form);_.ProForm=u},function(W,_,y){var b,E=this&&this.__extends||(b=function(i,n){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},b(i,n)},function(i,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=i}b(i,n),i.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}),m=this&&this.__assign||function(){return m=Object.assign||function(i){for(var n,e=1,t=arguments.length;e<t;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o]);return i},m.apply(this,arguments)},v=this&&this.__spreadArray||function(i,n,e){if(e||arguments.length===2)for(var t,o=0,c=n.length;o<c;o++)!t&&o in n||(t||(t=Array.prototype.slice.call(n,0,o)),t[o]=n[o]);return i.concat(t||Array.prototype.slice.call(n))};Object.defineProperty(_,"__esModule",{value:!0}),_.Container=void 0;var f=y(0),d=y(9),p=y(4),u=y(3),s=y(1),l=y(16),r=y(6),a=function(i){function n(e,t){var o=i.call(this,e,m({disabled:!1,hidden:!1,width:"content",height:"content",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:""},t))||this;if(o.events=new u.EventSystem,o._props=v(v([],r.baseProps,!0),["label","labelWidth","labelPosition","hiddenLabel","helpMessage"],!1),(0,s.isEmptyObj)(t))throw new Error("Check the configuration is correct");o.container&&o.container.destructor();var c={};for(var h in t)h!=="id"&&h!=="type"&&h!=="name"&&h!=="width"&&h!=="height"&&(o.config[h]=t[h],h!=="validation"&&(c[h]=t[h]));return o.container=new l.Layout(null,{rows:[c]}),c.html&&o.container.attachHTML(c.html),o.paint(),o.mount(e,(0,f.create)({render:function(){return o._draw()}})),o}return E(n,i),n.prototype.destructor=function(){this.container.destructor()},n.prototype.attach=function(e){this.container.attach(e)},n.prototype.attachHTML=function(e){this.container.attachHTML(e)},n.prototype.show=function(){this.config.hidden&&this.events.fire(p.ItemEvent.beforeShow,[])&&(this.config.hidden=!1,this.events.fire(p.ItemEvent.afterShow,[]))},n.prototype.hide=function(e){e===void 0&&(e=!1),this.config.hidden&&!e||!this.events.fire(p.ItemEvent.beforeHide,[e])||(this.config.hidden=!0,this.events.fire(p.ItemEvent.afterHide,[e]))},n.prototype.isVisible=function(){return!this.config.hidden},n.prototype.disable=function(){this.config.disabled=!0,this.paint()},n.prototype.enable=function(){var e;this.config.disabled=!1,!((e=this.parent)===null||e===void 0)&&e.isDisabled()&&this.parent.enable(),this.paint()},n.prototype.isDisabled=function(){return!!this.config.disabled},n.prototype.setProperties=function(e){if(e&&!(0,s.isEmptyObj)(e)&&this.events.fire(p.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t]);this.events.fire(p.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},n.prototype.getProperties=function(){for(var e={},t=0,o=this._props;t<o.length;t++){var c=o[t];e[c]=this.config[c]}return e},n.prototype._getRootView=function(){return this.container.getRootView()},n.prototype._draw=function(){var e=this.config,t=e.name,o=e.id;return(0,f.el)(".dhx_form-group.dhx_form-group--container",{class:(0,r.getFormItemCss)(this.config),"data-dhx-id":t||o},[this._drawLabel(),(0,f.inject)(this._getRootView())])},n}(d.Label);_.Container=a},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0});var b=y(248),E=y(249),m=y(250),v=y(251),f=y(252),d=y(253),p=y(254),u=y(255),s=y(13),l=y(10),r=y(256),a=y(257),i=y(258),n=y(259),e=y(260),t=y(261),o=y(111),c=y(262),h=y(263),g=y(264),x=y(265),C=y(266),k=y(267),I=y(268),O=y(269),D=y(270),A=y(271),H=y(272),S=y(273),$=y(274);_.default=function(w){return{avatar:b.default,button:E.default,colorpicker:m.default,combo:v.default,checkbox:f.default,checkboxGroup:d.default,container:p.default,datepicker:u.default,fieldset:s.default,input:l.default,radioGroup:r.default,select:a.default,slider:i.default,spacer:n.default,textarea:e.default,timepicker:t.default,toggle:o.default,toggleGroup:c.default,arrange:(0,h.default)(w),border:(0,g.default)(w),position:(0,x.default)(w),size:(0,C.default)(w),gridStep:(0,k.default)(w),textStyle:(0,I.default)(w),textAlign:(0,O.default)(w),pointerView:(0,D.default)(w),lineShape:(0,A.default)(w),header:(0,H.default)(w),headerPosition:(0,S.default)(w),headerCommon:$.default}}},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(f){for(var d,p=1,u=arguments.length;p<u;p++)for(var s in d=arguments[p])Object.prototype.hasOwnProperty.call(d,s)&&(f[s]=d[s]);return f},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0});var E=y(1),m=y(12),v=y(10);_.default=b(b({},v.default),{type:"avatar",key:"img",icon:"dxi dxi-image-outline",$handler:function(f){var d,p=f.id,u=f.value,s=f.editor,l=f.key;u.src?fetch(u.src).then(function(r){r.blob().then(function(a){(0,E.blobToBase64)(a).then(function(i){var n;s.diagram.data.update(p,((n={})[l]=i,n))})})}):s.diagram.data.update(p,((d={})[l]="",d))},$setValue:function(f){var d=f.control,p=f.value;d.setValue({src:p})},$layout:function(f){return(0,m.default)(f,{type:"avatar"})}})},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(E){for(var m,v=1,f=arguments.length;v<f;v++)for(var d in m=arguments[v])Object.prototype.hasOwnProperty.call(m,d)&&(E[d]=m[d]);return E},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.default={type:"button",$layout:function(E){return b(b({},E),{type:"button"})}}},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(v){for(var f,d=1,p=arguments.length;d<p;d++)for(var u in f=arguments[d])Object.prototype.hasOwnProperty.call(f,u)&&(v[u]=f[u]);return v},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0});var E=y(12),m=y(10);_.default=b(b({},m.default),{type:"colorpicker",key:"fill",$layout:function(v){return(0,E.default)(v,{type:"colorpicker"})}})},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(v){for(var f,d=1,p=arguments.length;d<p;d++)for(var u in f=arguments[d])Object.prototype.hasOwnProperty.call(f,u)&&(v[u]=f[u]);return v},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0});var E=y(12),m=y(10);_.default=b(b({},m.default),{type:"combo",options:[],$layout:function(v){var f=v.options.map(function(d){return typeof d=="string"?{id:d,value:d}:d});return(0,E.default)(v,{type:"combo",data:f})}})},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(m){for(var v,f=1,d=arguments.length;f<d;f++)for(var p in v=arguments[f])Object.prototype.hasOwnProperty.call(v,p)&&(m[p]=v[p]);return m},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0});var E=y(111);_.default=b(b({},E.default),{type:"checkbox",$setValue:function(m){var v=m.control,f=m.value;v.setValue(!!f)},$layout:function(m){return b(b({},m),{type:"checkbox"})}})},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(v){for(var f,d=1,p=arguments.length;d<p;d++)for(var u in f=arguments[d])Object.prototype.hasOwnProperty.call(f,u)&&(v[u]=f[u]);return v},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0});var E=y(12),m=y(10);_.default=b(b({},m.default),{type:"checkboxGroup",$layout:function(v){return(0,E.default)(v,{type:"checkboxGroup"})}})},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0});var b=y(12);_.default={type:"container",$layout:function(E){return(0,b.default)(E,{type:"container"})}}},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(v){for(var f,d=1,p=arguments.length;d<p;d++)for(var u in f=arguments[d])Object.prototype.hasOwnProperty.call(f,u)&&(v[u]=f[u]);return v},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0});var E=y(12),m=y(10);_.default=b(b({},m.default),{type:"datepicker",key:"date",$layout:function(v){return(0,E.default)(v,{type:"datepicker"})}})},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(v){for(var f,d=1,p=arguments.length;d<p;d++)for(var u in f=arguments[d])Object.prototype.hasOwnProperty.call(f,u)&&(v[u]=f[u]);return v},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0});var E=y(12),m=y(10);_.default=b(b({},m.default),{type:"radioGroup",$layout:function(v){return(0,E.default)(v,{type:"radioGroup"})}})},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(v){for(var f,d=1,p=arguments.length;d<p;d++)for(var u in f=arguments[d])Object.prototype.hasOwnProperty.call(f,u)&&(v[u]=f[u]);return v},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0});var E=y(12),m=y(10);_.default=b(b({},m.default),{type:"select",options:[],$layout:function(v){var f=v.options.map(function(d){return typeof d=="string"?{value:d,content:d}:d});return(0,E.default)(v,{type:"select",options:f})}})},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(v){for(var f,d=1,p=arguments.length;d<p;d++)for(var u in f=arguments[d])Object.prototype.hasOwnProperty.call(f,u)&&(v[u]=f[u]);return v},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0});var E=y(12),m=y(10);_.default=b(b({},m.default),{type:"slider",$layout:function(v){return(0,E.default)(v,{type:"slider"})}})},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.default={type:"spacer",$layout:function(){return{type:"spacer"}}}},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(v){for(var f,d=1,p=arguments.length;d<p;d++)for(var u in f=arguments[d])Object.prototype.hasOwnProperty.call(f,u)&&(v[u]=f[u]);return v},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0});var E=y(12),m=y(10);_.default=b(b({},m.default),{type:"textarea",height:160,$layout:function(v){var f=v.height||"content";return v.wrap&&f!=="content"&&(f=parseInt(f)-47),(0,E.default)(b(b({},v),{height:"content"}),{type:"textarea",height:f})}})},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(v){for(var f,d=1,p=arguments.length;d<p;d++)for(var u in f=arguments[d])Object.prototype.hasOwnProperty.call(f,u)&&(v[u]=f[u]);return v},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0});var E=y(12),m=y(10);_.default=b(b({},m.default),{type:"timepicker",key:"time",$layout:function(v){return(0,E.default)(v,{type:"timepicker"})}})},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(v){for(var f,d=1,p=arguments.length;d<p;d++)for(var u in f=arguments[d])Object.prototype.hasOwnProperty.call(f,u)&&(v[u]=f[u]);return v},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0});var E=y(43),m=y(10);_.default=b(b({},m.default),{type:"toggleGroup",$setValue:function(v){var f,d=v.control,p=v.value;if(((f=Object.values(d.getValue()))===null||f===void 0?void 0:f.find(function(s){return s}))!==p){var u={};d.getProperties().options.forEach(function(s){return u[s.id]=s.value==p&&p}),d.setValue(u)}},$handler:function(v){var f,d=v.id,p=v.value,u=v.editor,s=v.key;u.diagram.data.update(d,(0,E.getModifiedObject)(s,(f=Object.values(p).filter(function(l){return l}))===null||f===void 0?void 0:f[0],Array.isArray(s)&&u.diagram.data.getItem(d)||{}))},$layout:function(v){return b(b({},v),{type:"toggleGroup"})}})},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(v){for(var f,d=1,p=arguments.length;d<p;d++)for(var u in f=arguments[d])Object.prototype.hasOwnProperty.call(f,u)&&(v[u]=f[u]);return v},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0});var E=y(13),m=y(20);_.default=function(v){return b(b({},E.default),{label:v.editbar.arrange,css:"dhx_arrange",rows:[{cols:[{type:"input",key:"x",inputType:"number",value:0,width:m.INPUT_WIDTH_50,padding:m.INPUT_PADDING_RIGHT_8,icon:"dxi dxi-alpha-x-box"},{type:"input",key:"y",inputType:"number",value:0,width:m.INPUT_WIDTH_50,icon:"dxi dxi-alpha-y-box"}]},{cols:[{type:"input",key:"width",inputType:"number",value:0,min:0,width:m.INPUT_WIDTH_50,padding:m.INPUT_PADDING_RIGHT_8,icon:"dxi dxi-alpha-w-box"},{type:"input",key:"height",inputType:"number",value:0,min:0,width:m.INPUT_WIDTH_50,icon:"dxi dxi-alpha-h-box"}]},{type:"input",key:"angle",inputType:"number",value:0,min:0,max:360,icon:"dxi dxi-rotate-right"}]})}},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(v){for(var f,d=1,p=arguments.length;d<p;d++)for(var u in f=arguments[d])Object.prototype.hasOwnProperty.call(f,u)&&(v[u]=f[u]);return v},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0});var E=y(13),m=y(20);_.default=function(v){return b(b({},E.default),{label:v.editbar.border,align:"between",cols:[{type:"colorpicker",key:"stroke",css:"dhx_colorpicker--picker-only",padding:m.INPUT_PADDING_RIGHT_8,width:"content"},{type:"combo",key:"strokeType",padding:m.INPUT_PADDING_RIGHT_8,readOnly:!0,itemHeight:37,options:["line","dash"],template:function(f){var d=f.id;return`
					<div style="display:flex; align-items:center; height:100%; width:100%;">
						<div style="border:1px `.concat({line:"solid",dash:"dashed"}[d],` var(--dhx-font-color-secondary); height:0; width:100%;"></div>
					</div>
				`)}},{type:"input",key:"strokeWidth",inputType:"number",value:0,min:0,width:50}]})}},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(v){for(var f,d=1,p=arguments.length;d<p;d++)for(var u in f=arguments[d])Object.prototype.hasOwnProperty.call(f,u)&&(v[u]=f[u]);return v},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0});var E=y(13),m=y(20);_.default=function(v){return b(b({},E.default),{label:v.editbar.positionOffset,cols:[{type:"input",key:"dx",inputType:"number",value:0,width:m.INPUT_WIDTH_50,padding:m.INPUT_PADDING_RIGHT_8,icon:"dxi dxi-alpha-x-box"},{type:"input",key:"dy",inputType:"number",value:0,width:m.INPUT_WIDTH_50,icon:"dxi dxi-alpha-y-box"}]})}},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(v){for(var f,d=1,p=arguments.length;d<p;d++)for(var u in f=arguments[d])Object.prototype.hasOwnProperty.call(f,u)&&(v[u]=f[u]);return v},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0});var E=y(13),m=y(20);_.default=function(v){return b(b({},E.default),{label:v.editbar.size,cols:[{type:"input",key:"width",inputType:"number",min:0,value:0,width:m.INPUT_WIDTH_50,padding:m.INPUT_PADDING_RIGHT_8,icon:"dxi dxi-alpha-w-box"},{type:"input",key:"height",inputType:"number",min:0,value:0,width:m.INPUT_WIDTH_50,icon:"dxi dxi-alpha-h-box"}]})}},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(m){for(var v,f=1,d=arguments.length;f<d;f++)for(var p in v=arguments[f])Object.prototype.hasOwnProperty.call(v,p)&&(m[p]=v[p]);return m},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0});var E=y(10);_.default=function(m){return b(b({},E.default),{label:m.editbar.gridStep,inputType:"number",icon:"dxi dxi-grid-step",min:1,wrap:!0,key:void 0,$handler:function(v){var f=v.editor,d=v.value,p=v.control;d=+d,p.validate(!0,d)&&(f.diagram.config.gridStep=f.config.gridStep=d),p.setValue(d)},$setValue:function(v){var f=v.control,d=v.editor;f.setValue(parseInt(d.diagram.config.gridStep))}})}},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(f){for(var d,p=1,u=arguments.length;p<u;p++)for(var s in d=arguments[p])Object.prototype.hasOwnProperty.call(d,s)&&(f[s]=d[s]);return f},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0});var E=y(13),m=y(20);function v(f,d,p){for(var u=[];f<=d;)u.push({id:f,value:"".concat(f," px")}),f+=p;return u}_.default=function(f){return b(b({},E.default),{label:f.editbar.textStyle,rows:[{cols:[{type:"combo",key:"fontSize",width:m.INPUT_WIDTH_50,padding:m.INPUT_PADDING_RIGHT_8,readOnly:!0,options:v(10,30,2)},{type:"input",key:"lineHeight",inputType:"number",value:0,min:0,icon:"dxi dxi-format-line-spacing",width:m.INPUT_WIDTH_50}]},{cols:[{type:"colorpicker",key:"fontColor",css:"dhx_colorpicker--picker-only",width:"content",padding:m.INPUT_PADDING_RIGHT_4},{type:"toggle",key:"fontWeight",value:"bold",icon:"dxi dxi-format-bold",width:"content",padding:m.INPUT_PADDING_RIGHT_4},{type:"toggle",key:"fontStyle",value:"italic",icon:"dxi dxi-format-italic",width:"content"}]}]})}},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(v){for(var f,d=1,p=arguments.length;d<p;d++)for(var u in f=arguments[d])Object.prototype.hasOwnProperty.call(f,u)&&(v[u]=f[u]);return v},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0});var E=y(13),m=y(20);_.default=function(v){return b(b({},E.default),{label:v.editbar.textAlignment,align:"between",cols:[{type:"toggleGroup",key:"textAlign",gap:4,$on:{beforeChange:function(f,d){return!Object.values(d).every(function(p){return!p})}},options:[{icon:"dxi dxi-format-align-left",value:"left"},{icon:"dxi dxi-format-align-center",value:"center"},{icon:"dxi dxi-format-align-right",value:"right"}],padding:m.INPUT_PADDING_RIGHT_8},{type:"toggleGroup",key:"textVerticalAlign",gap:4,$on:{beforeChange:function(f,d){return!Object.values(d).every(function(p){return!p})}},options:[{icon:"dxi dxi-format-vertical-align-bottom",value:"bottom"},{icon:"dxi dxi-format-vertical-align-center",value:"center"},{icon:"dxi dxi-format-vertical-align-top",value:"top"}]}]})}},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(f){for(var d,p=1,u=arguments.length;p<u;p++)for(var s in d=arguments[p])Object.prototype.hasOwnProperty.call(d,s)&&(f[s]=d[s]);return f},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0});var E=y(13),m=y(20),v=`
	<div style="display:flex; align-items:center; height:100%; width:100%;">
		<div style="border:1px solid var(--dhx-font-color-secondary); height:0; width:100%;"></div>
	</div>
`;_.default=function(f){return b(b({},E.default),{label:f.editbar.pointerView,align:"between",cols:[{type:"combo",key:"backArrow",padding:m.INPUT_PADDING_RIGHT_8,readOnly:!0,itemHeight:37,width:"50%",options:["none","filled"],template:function(d){return d.id==="filled"?`
						<div style="display:flex; align-items:center; height:100%; width:100%;">
							<div
								style="
									width: 0;
									height: 0;
									border: 0 solid transparent;
									border-top-width: 6px;
									border-bottom-width: 6px;
									border-right: 6px solid var(--dhx-font-color-secondary);">
							</div>
							<div style="border:1px solid var(--dhx-font-color-secondary); height:0; width:100%;"></div>
						</div>
					`:v}},{type:"combo",key:"forwardArrow",readOnly:!0,itemHeight:37,width:"50%",options:["none","filled"],template:function(d){return d.id==="filled"?`
						<div style="display:flex; align-items:center; height:100%; width:100%;">
							<div style="border:1px solid var(--dhx-font-color-secondary); height:0; width:100%;"></div>
							<div
								style="
									width: 0;
									height: 0;
									border: 0 solid transparent;
									border-bottom-width: 6px;
									border-top-width: 6px;
									border-left: 6px solid var(--dhx-font-color-secondary);">
							</div>
						</div>
					`:v}}]})}},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(v){for(var f,d=1,p=arguments.length;d<p;d++)for(var u in f=arguments[d])Object.prototype.hasOwnProperty.call(f,u)&&(v[u]=f[u]);return v},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0});var E=y(13),m=y(20);_.default=function(v){return b(b({},E.default),{label:v.editbar.lineShape,align:"between",rows:[{type:"toggleGroup",key:"connectType",gap:4,$on:{beforeChange:function(f,d){return!Object.values(d).every(function(p){return!p})}},options:[{icon:"dxi dxi-line-straight",value:"straight"},{icon:"dxi dxi-line-elbow",value:"elbow"}],padding:m.INPUT_PADDING_RIGHT_8}]})}},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(m){for(var v,f=1,d=arguments.length;f<d;f++)for(var p in v=arguments[f])Object.prototype.hasOwnProperty.call(v,p)&&(m[p]=v[p]);return m},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0});var E=y(13);_.default=function(m){return b(b({},E.default),{label:m.editbar.header,rows:[{type:"headerCommon",compact:!0,$properties:{enable:{key:["header","enable"]},fill:{key:["header","fill"]},height:{key:["header","height"]}}},{type:"headerPosition",compact:!0,$properties:{position:{key:["header","position"]}}},{type:"textStyle",compact:!0,$properties:{fontSize:{key:["header","fontSize"]},lineHeight:{key:["header","lineHeight"]},fontColor:{key:["header","fontColor"]},fontWeight:{key:["header","fontWeight"]},fontStyle:{key:["header","fontStyle"]}}},{type:"textAlign",compact:!0,$properties:{textAlign:{key:["header","textAlign"]},textVerticalAlign:{key:["header","textVerticalAlign"]}}}]})}},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(m){for(var v,f=1,d=arguments.length;f<d;f++)for(var p in v=arguments[f])Object.prototype.hasOwnProperty.call(v,p)&&(m[p]=v[p]);return m},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0});var E=y(13);_.default=function(m){return b(b({},E.default),{label:m.editbar.headerPosition,rows:[{type:"toggleGroup",key:"position",$on:{beforeChange:function(v,f){return!Object.values(f).every(function(d){return!d})}},gap:4,options:[{icon:"dxi dxi-format-vertical-align-top",value:"top"},{icon:"dxi dxi-format-vertical-align-bottom",value:"bottom"},{icon:"dxi dxi-format-horizontal-align-left",value:"left"},{icon:"dxi dxi-format-horizontal-align-right",value:"right"}]}]})}},function(W,_,y){var b=this&&this.__assign||function(){return b=Object.assign||function(v){for(var f,d=1,p=arguments.length;d<p;d++)for(var u in f=arguments[d])Object.prototype.hasOwnProperty.call(f,u)&&(v[u]=f[u]);return v},b.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0});var E=y(13),m=y(20);_.default=b(b({},E.default),{align:"between",cols:[{type:"toggle",key:"enable",padding:m.INPUT_PADDING_RIGHT_8,icon:"dxi dxi-eye",offIcon:"dxi dxi-eye-off",text:"Visible",offText:"Invisible",full:!0,width:100},{type:"colorpicker",key:"fill",css:"dhx_colorpicker--picker-only",padding:m.INPUT_PADDING_RIGHT_8,width:"content"},{type:"input",key:"height",inputType:"number",icon:"dxi dxi-alpha-h-box",value:0,min:0,width:80}]})},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.default=function(b){return{default:{$default:[{type:"gridStep"}],$shape:function(E){var m=E.item;return(m==null?void 0:m.type)==="text"?[{type:"arrange"},{type:"textarea",key:"text",label:b.editbar.text,wrap:!0},{type:"textStyle"},{type:"textAlign"}]:(m==null?void 0:m.type)==="img-card"?[{type:"arrange"},{type:"colorpicker",key:"headerColor",label:b.editbar.headerColor,wrap:!0},{type:"textarea",key:"title",label:b.editbar.title,wrap:!0},{type:"textarea",key:"text",label:b.editbar.text,wrap:!0},{type:"avatar",label:b.editbar.image,wrap:!0}]:[{type:"arrange"},{type:"textarea",key:"text",label:b.editbar.text,wrap:!0},{type:"textStyle"},{type:"textAlign"},{type:"colorpicker",key:"fill",label:b.editbar.fill,wrap:!0},{type:"border"}]},$group:[{type:"arrange",$properties:{angle:{hidden:!0}}},{type:"header"},{type:"colorpicker",key:["style","fill"],label:b.editbar.fill,wrap:!0},{type:"border",$properties:{stroke:{key:["style","stroke"]},strokeType:{key:["style","strokeType"],options:["line"]},strokeWidth:{key:["style","strokeWidth"]}}}],$swimlane:[{type:"arrange",$properties:{angle:{hidden:!0}}},{type:"header"},{type:"headerCommon",label:b.editbar.subheaderCols,$properties:{enable:{key:["subHeaderCols","enable"]},fill:{key:["subHeaderCols","fill"]},height:{key:["subHeaderCols","height"]}}},{type:"headerCommon",label:b.editbar.subheaderRows,$properties:{enable:{key:["subHeaderRows","enable"]},fill:{key:["subHeaderRows","fill"]},height:{key:["subHeaderRows","height"]}}},{type:"colorpicker",key:["style","fill"],label:b.editbar.fill,wrap:!0},{type:"border",$properties:{stroke:{key:["style","stroke"]},strokeType:{key:["style","strokeType"],options:["line"]},strokeWidth:{key:["style","strokeWidth"]}}}],$line:[{type:"border",label:b.editbar.lineStyle},{type:"lineShape"},{type:"pointerView"}],$lineTitle:[{type:"textarea",key:"text",label:b.editbar.text,wrap:!0},{type:"textStyle"},{type:"textAlign",$properties:{textVerticalAlign:{hidden:!0}}},{type:"colorpicker",key:"fill",label:b.editbar.fill,wrap:!0}]},org:{$default:[{type:"gridStep"}],$shape:function(E){var m=E.item;return(m==null?void 0:m.type)==="img-card"?[{type:"position"},{type:"size"},{type:"colorpicker",key:"headerColor",label:b.editbar.headerColor,wrap:!0},{type:"textarea",key:"title",label:b.editbar.title,wrap:!0},{type:"textarea",key:"text",label:b.editbar.text,wrap:!0},{type:"avatar",label:b.editbar.image,wrap:!0}]:[{type:"position"},{type:"size"},{type:"colorpicker",key:"headerColor",label:b.editbar.headerColor,wrap:!0},{type:"textarea",key:"text",label:b.editbar.text,wrap:!0}]}},mindmap:{$default:[{type:"gridStep"}],$shape:function(E){var m=E.item;return(m==null?void 0:m.type)==="img-card"?[{type:"position"},{type:"size"},{type:"colorpicker",key:"headerColor",label:b.editbar.headerColor,wrap:!0},{type:"textarea",key:"title",label:b.editbar.title,wrap:!0},{type:"textarea",key:"text",label:b.editbar.text,wrap:!0},{type:"avatar",label:b.editbar.image,wrap:!0}]:[{type:"position"},{type:"size"},{type:"textarea",key:"text",label:b.editbar.text,wrap:!0},{type:"textStyle"},{type:"textAlign"},{type:"colorpicker",key:"fill",label:b.editbar.fill,wrap:!0},{type:"border"}]}}}}},function(W,_,y){var b,E=this&&this.__extends||(b=function(n,e){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(t[c]=o[c])},b(n,e)},function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=n}b(n,e),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}),m=this&&this.__assign||function(){return m=Object.assign||function(n){for(var e,t=1,o=arguments.length;t<o;t++)for(var c in e=arguments[t])Object.prototype.hasOwnProperty.call(e,c)&&(n[c]=e[c]);return n},m.apply(this,arguments)},v=this&&this.__spreadArray||function(n,e,t){if(t||arguments.length===2)for(var o,c=0,h=e.length;c<h;c++)!o&&c in e||(o||(o=Array.prototype.slice.call(e,0,c)),o[c]=e[c]);return n.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(_,"__esModule",{value:!0}),_.DefaultEditor=void 0;var f=y(1),d=y(29),p=y(40),u=y(100),s=y(59),l=y(98),r=y(37),a=y(112),i=function(n){function e(t,o){return n.call(this,t,(0,f.extend)({type:"default",shapeType:"rectangle",view:{toolbar:!0,shapebar:!0,editbar:!0},lineConfig:{lineGap:10},magnetic:!0,connectionPoints:!0,autoplacement:{mode:"direct"}},o))||this}return E(e,n),e.prototype.alignItems=function(t,o,c){var h=this;if(t.length){var g,x,C,k,I=t.filter(function(D){return D.$item.getBaseType()!=="line"});I.forEach(function(D){g=isNaN(g)||D.x<g?D.x:g,x=isNaN(x)||D.x+D.width>x?D.x+D.width:x,C=isNaN(C)||D.y<C?D.y:C,k=isNaN(k)||D.y+D.height>k?D.y+D.height:k});var O={"-1":c==="x"?g:C,0:c==="x"?g/2+x/2:C/2+k/2,1:c==="x"?x:k};I.forEach(function(D){var A=o>=0?O[o]-D[c==="x"?"width":"height"]/(o||2):O[o];h.diagram.data.update(D.id,{x:c==="x"?A:D.x,y:c==="x"?D.y:A})})}},e.prototype.distributeItems=function(t,o){if(t.length){var c=t.filter(function(D){return D.$item.getBaseType()!=="line"});c.sort(function(D,A){return D[o]-A[o]});for(var h=c[c.length-1],g=h[o]+h[o==="x"?"width":"height"]-c[0][o],x=0;x<c.length;x++)g-=c[x][o==="x"?"width":"height"];var C=g/(c.length-1);for(x=0;x<c.length;x++)if(x!==0&&x!==c.length-1){var k=c[x],I=c[x-1],O=I[o]+I[o==="x"?"width":"height"]+C;this.diagram.data.update(k.id,{x:o==="x"?O:k.x,y:o==="x"?k.y:O})}}},e.prototype._initDiagram=function(){var t;this.diagram=new d.Diagram(null,{type:"default",select:!0,toolbar:this._getToolbarConfig(this.config),gridStep:this.config.gridStep,margin:{y:70,x:40},defaults:this._getDefaults(),lineConfig:m({lineDirection:((t=this.config.lineConfig)===null||t===void 0?void 0:t.lineDirection)||"forwardArrow"},this.config.lineConfig),scale:this.config.scale,autoplacement:this.config.autoplacement,defaultShapeType:this.config.shapeType,$isEditor:!0})},e.prototype._initUI=function(t){var o=this;this.view=new u.View(t,this);var c=this.view.getViews(),h=c.toolbar,g=c.shapebar,x=c.editbar;this.toolbar=h,this.editbar=x,this.shapebar=g,this._resizer=new s.Controls(this.events,this.diagram,{magnetic:this.config.magnetic,connectionPoints:this.config.connectionPoints,resizePoints:this.config.resizePoints}),this.diagram.config.$svg=function(C){var k,I=(k=o.diagram.selection.getItem())===null||k===void 0?void 0:k.id,O=o.diagram.data.getItem(I);return o._selectionBox&&o._selectionBox.isValid()?o._selectionBox.render():o.diagram.selection.getIds().length<=1?o._resizer.render(O,C):null},this.diagram.config.$grid=function(){return!!o.config.grid}},e.prototype._showConnectPoints=function(t,o){if(this.config.connectionPoints){var c=this.diagram.data.getItem(t);c.$item.getBaseType()==="shape"&&(o?(c.$connectMode=!c.$connectMode,this._resizer.toggleNearShape(c)):this._resizer.setNearShape(c))}},e.prototype._setHandlers=function(){var t=this;n.prototype._setHandlers.call(this),this.diagram.events.on(d.DataEvents.load,function(){t.history.reset()}),this.diagram.events.on(d.DiagramEvents.shapeIconClick,function(o){var c=t.diagram.selection.getItem(),h=t.diagram.selection.getIds().map(function(g){return t.diagram.data.getItem(g)});if(t.events.fire(r.DiagramEditorEvents.beforeShapeIconClick,[o,h])){switch(o){case"copy":t.model.copy(),t.model.paste();break;case"remove":t._removeSelected();break;case"connect":t._showConnectPoints(t.diagram.selection.getItem().id,!0);break;case"removePoint":c.points.splice(c.$selectedPoint,1),c.$selectedPoint=null,t.diagram.paint();break;case"addColumnFirst":t._addSwimlaneCells(c,"left");break;case"addColumnLast":t._addSwimlaneCells(c,"right");break;case"addRowFirst":t._addSwimlaneCells(c,"up");break;case"addRowLast":t._addSwimlaneCells(c,"down");break;case"lineTitleAutoPositionEnable":t.diagram.data.update(c.id,{autoPosition:!1});break;case"lineTitleAutoPositionDisable":t.diagram.data.update(c.id,{autoPosition:!0});break;case"addLineTitle":(0,p.addLineTitle)(c,t.diagram);break;case"alignHorizontalCenter":t.alignItems(h,0,"x");break;case"alignHorizontalLeft":t.alignItems(h,-1,"x");break;case"alignHorizontalRight":t.alignItems(h,1,"x");break;case"alignVerticalMiddle":t.alignItems(h,0,"y");break;case"alignVerticalTop":t.alignItems(h,-1,"y");break;case"alignVerticalBottom":t.alignItems(h,1,"y");break;case"alignHorizontalDistribute":t.distributeItems(h,"x");break;case"alignVerticalDistribute":t.distributeItems(h,"y")}t.events.fire(r.DiagramEditorEvents.afterShapeIconClick,[o,c??h])}}),this.diagram.events.on(d.DiagramEvents.itemMouseOver,function(o){var c=t.diagram.selection.getItem(),h=t.diagram.data.getItem(o);c&&c.$item.getBaseType()!=="line"||h.$item.getBaseType()!=="shape"||t._showConnectPoints(o)}),this.events.on(r.DiagramEditorEvents.shapesUp,function(o){var c=t.diagram.getRootView().node.el.getBoundingClientRect();if(!(o.$x<c.left||o.$x>c.right)){var h=t._resizer.getPoint(o.$x,o.$y);h.x=Math.round(h.x/t.config.gridStep)*t.config.gridStep,h.y=Math.round(h.y/t.config.gridStep)*t.config.gridStep;var g=t.view.getRootView().node.el;(0,a.setValueFromCssVariable)(o,g);var x=t.diagram.data.getItem(t._addItem(m(m({},o),{x:h.x,y:h.y})));t._addItemToGroup(x)}}),this.events.on(r.DiagramEditorEvents.beforeItemMove,function(o){var c=o.id,h=o.$mov;return t._moveChildren(c,h)}),[r.DiagramEditorEvents.afterGroupMove,r.DiagramEditorEvents.afterShapeMove].forEach(function(o){t.events.on(o,function(c){var h=c.id,g=c.batch,x=t.diagram.data.getItem(h);if(g.length&&x.$item.getBaseType()!=="swimlane"){var C=t.diagram.data.getItem(x==null?void 0:x.$group),k=new Set(g);t.diagram.data.mapVisible(function(I){if(!k.has(I.id)){var O=I.id,D=I.$item,A=I.groupChildren,H=I.exitArea;if(D.getBaseType()==="group"&&open){if((H.groupBehavior==="unbound"||(C==null?void 0:C.id)!=O)&&A.find(function(w){return w==x.id})){var S=A.findIndex(function(w){return w==x.id});A.splice(S,1),t.diagram.data.update(O,{groupChildren:A}),t.diagram.data.update(x.id,{$group:null},!0)}if((C==null?void 0:C.id)!=O&&(!C||(C==null?void 0:C.exitArea.groupBehavior)==="unbound"||(C==null?void 0:C.exitArea.groupBehavior)!=="unbound"&&(C==null?void 0:C.groupChildren.findIndex(function(w){return w==O}))!==-1)){var $=D.getLocatePercent(x.$item.getBox());t._setItemIndicator(I,$)}}}})}})}),this.events.on(r.DiagramEditorEvents.itemMoveEnd,function(){var o=t.diagram.selection.getItem();o&&t._addItemToGroup(o)})},e.prototype._initHotkeys=function(){var t=this;n.prototype._initHotkeys.call(this),this._keyManager.addHotKey("ctrl+c",function(){t.editbar.isFocused()||t.model.copy()}),this._keyManager.addHotKey("ctrl+v",function(){t.editbar.isFocused()||t.model.paste()}),this._keyManager.addHotKey("ctrl+d",function(o){o.preventDefault(),t.model.copy(),t.model.paste()})},e.prototype._removeItem=function(t){var o=this.diagram.data.getItem(t);o!=null&&o.$connectMode&&this._showConnectPoints(t,!0),n.prototype._removeItem.call(this,t)},e.prototype._getGroupTarget=function(t,o,c){var h=this;if(c===void 0&&(c=null),t.id==o.selected.id||t.id==o.exclude)return c;var g=t.id,x=t.open,C=t.groupChildren,k=t.$item,I=t.entryArea,O=k.getLocatePercent(o.selected.$item.getBox());return x&&O>=I.catchArea&&(c=t,C.length&&this.diagram.data.eachChild(g,function(D){D.$item.getBaseType()==="group"&&(c=h._getGroupTarget(D,o,c))},!1)),c},e.prototype._addItemToGroup=function(t){var o=this;if(t){var c=null;if(this.diagram.data.mapVisible(function(x){var C=x.id,k=x.groupChildren,I=x.$item.getBaseType();if(I==="group"&&I!=="swimlane"&&t.$item.getBaseType()!=="swimlane"){c||(c=o._getGroupTarget(x,{selected:t})),o.diagram.data.update(C,{$captureArea:"out"},!0);var O=k.find(function(A){return A==t.id});if(O){var D=k.findIndex(function(A){return A==t.id});k.splice(D,1),o.diagram.data.update(x.id,{groupChildren:k}),o.diagram.data.update(t.id,{$group:null},!0)}}}),c){var h=c.id,g=c.groupChildren;h==t.$group||this.diagram.data.update(h,{groupChildren:v(v([],g,!0),[t.id],!1)})}this._setParentBox(t.id)}},e.prototype._addItem=function(t){var o;return delete t.$key,delete t.$x,delete t.$y,t.type==="$swimlane"?o=this._addSwimlaneItem(t):o=this.diagram.data.add(m(m({},t),{id:(0,f.uid)()})),this.diagram.selection.add({id:o}),o},e.prototype._addSwimlaneItem=function(t){for(var o=JSON.parse(JSON.stringify(t)),c=o.layout,h={},g=0;g<c.length;g++)for(var x=c[g],C=0;C<x.length;C++){var k=x[C];if(h[k])o.layout[g][C]=h[k];else{var I=(0,f.uid)();o.layout[g][C]=h[k]=I}}return this.diagram.data.add(m(m({},o),{layout:c,width:2*o.width,height:2*o.height,id:(0,f.uid)()}))},e.prototype._moveChildren=function(t,o){var c=this.diagram.data.getItem(t),h=this.diagram.selection.getItem(),g=c.$item.isFixed();if(!g&&c.$group){var x=this.diagram.data.getItem(c.$group);return x.$group&&this._moveChildren(x.id,o),x.$item.trackChildMove(h.$item.getBox(),{x:o.x,y:o.y})}return!g},e.prototype._setParentBox=function(t){if(t){var o=this.diagram.data.getItem(t);o.$item.getBaseType()==="group"&&o.$item.setMinBox(),o.$group&&this._setParentBox(o.$group)}},e.prototype._setItemIndicator=function(t,o){var c=t.entryArea,h=t.$captureArea,g=t.id;o>=c.catchArea?h!=="over"&&this.diagram.data.update(g,{$captureArea:"over"},!0):o!==0?h!=="partially"&&this.diagram.data.update(g,{$captureArea:"partially"},!0):h!=="out"&&this.diagram.data.update(g,{$captureArea:"out"},!0)},e.prototype._addSwimlaneCells=function(t,o){var c=t.layout[o==="down"?t.layout.length-1:0][o==="right"?t.layout[0].length-1:0],h=o==="left"||o==="right"?"col":"row";this.diagram.cellManager.setSwimlane(t.id),this.diagram.cellManager.add(this.diagram.cellManager.getCellIndex(c,h),o,!0)},e}(l.BaseDiagramEditor);_.DefaultEditor=i},function(W,_,y){Object.defineProperty(_,"__esModule",{value:!0}),_.setLocale=void 0,_.setLocale=function(b,E){var m=this[b];if(m)for(var v in E)m[v]=E[v]}},function(W,_,y){y.r(_);var b=y(113);location.hostname.includes("dhtmlx.com")||location.hostname.includes("dhtmlxcode.com")||location.hostname.includes("webixcode.com")||location.hostname.includes("webix.io/dev/dhtmlx")||location.hostname.includes("replit.com/@dhtmlx")||location.origin.endsWith("csb.app")||(window.onload=function(){var E;function m(){(E=document.createElement("div")).addEventListener("click",function(){document.body.removeChild(E),window.open("https://dhtmlx.com/docs/products/dhtmlxDiagram/download.shtml","_blank")});var v=new b.CssManager,f=v.add({display:"block !important",background:"#ff5252 !important",color:"white !important",padding:"12px",position:"absolute !important",maxWidth:"260px",top:"2% !important",right:"2% !important",fontSize:"14px !important",boxShadow:"0 1px 6px rgba(0,0,0,.1), 0 10px 20px rgba(0,0,0,.1)",cursor:"pointer",borderRadius:"2px",fontFamily:"Roboto",zIndex:2500});v.add({content:'"This version of DHTMLX Diagram is intended for demonstration only. Download an official evaluation version to try DHTMLX Diagram in your project." !important',fontSize:"14px !important",background:"#ff5252 !important",color:"white !important"},`${f}:after`),E.classList.add(f),document.body.appendChild(E)}setInterval(function(){var v=window.getComputedStyle(E,":after");v&&v.getPropertyValue("content")&&v.getPropertyValue("content")!=="none"||m()},6e4),m()})}])}),window.dhx_legacy){if(window.dhx)for(var mt in dhx)if(mt==="i18n")for(var Et in dhx[mt])window.dhx_legacy[mt][Et]=dhx[mt][Et];else dhx_legacy[mt]=dhx[mt];window.dhx=dhx_legacy,delete window.dhx_legacy}})(rn);var Rn=rn.exports;function Ln(lt){let ht;return{c(){ht=Sn("div"),Ue(ht,"width","100%"),Ue(ht,"height","100%")},m(mt,Et){kn(mt,ht,Et),lt[3](ht)},p:te,i:te,o:te,d(mt){mt&&Je(ht),lt[3](null)}}}function Nn(lt,ht,mt){let{data:Et}=ht,W,_;Pn(()=>(mt(2,W=new Rn.DiagramEditor(_,{type:"default",shapeToolbar:!0})),()=>{W.destructor()}));function y(b){Te[b?"unshift":"push"](()=>{_=b,mt(0,_)})}return lt.$$set=b=>{"data"in b&&mt(1,Et=b.data)},lt.$$.update=()=>{lt.$$.dirty&6&&(W==null||W.parse(Et))},[_,Et,W,y]}class Bn extends on{constructor(ht){super(),nn(this,ht,Nn,Ln,Ke,{data:1})}}function zn(){return[{id:1,x:880,y:105,text:"Does user remember his password?",type:"process",lineHeight:18,fontColor:"#fff",fill:"#3DA0E3",stroke:"#3DA0E3"},{id:2,x:1080,y:125,width:50,height:50,text:"XOR",type:"circle",lineHeight:18,fontColor:"#fff",fill:"#7D8495",stroke:"#7D8495"},{id:3,x:1160,y:40,text:"User forgets his password",type:"preparation",lineHeight:18,fontColor:"#fff",fill:"#33B579",stroke:"#33B579"},{id:3.1,x:1340,y:40,text:"Send an E-mail with new password",type:"process",lineHeight:18,fontColor:"#fff",fill:"#3DA0E3",stroke:"#3DA0E3"},{id:3.2,x:1520,y:40,text:"E-mail sent",type:"preparation",fontColor:"#fff",lineHeight:18,fill:"#33B579",stroke:"#33B579"},{id:4,x:1160,y:180,text:"User remembers his password",type:"preparation",lineHeight:18,fontColor:"#fff",fill:"#33B579",stroke:"#33B579"},{id:5,x:1340,y:180,text:"User types in login and password",type:"process",lineHeight:18,fontColor:"#fff",fill:"#3DA0E3",stroke:"#3DA0E3"},{id:6,x:1520,y:180,text:"Data typed in",type:"preparation",fontColor:"#fff",lineHeight:18,fill:"#33B579",stroke:"#33B579"},{id:7,x:1700,y:180,text:`Proof completion 
 and correctness`,type:"process",lineHeight:18,fontColor:"#fff",fill:"#3DA0E3",stroke:"#3DA0E3"},{id:7.1,x:1745,y:600,width:50,height:50,text:"XOR",type:"circle",lineHeight:18,fontColor:"#fff",fill:"#7D8495",stroke:"#7D8495"},{id:7.2,x:1880,y:320,text:"User logged in",type:"preparation",lineHeight:18,fontColor:"#fff",fill:"#33B579",stroke:"#33B579"},{id:7.3,x:1880,y:450,text:"Complete logging in",type:"process",lineHeight:18,fontColor:"#fff",fill:"#3DA0E3",stroke:"#3DA0E3"},{id:7.4,x:1880,y:580,text:"Data is correct",type:"preparation",lineHeight:18,fontColor:"#fff",fill:"#33B579",stroke:"#33B579"},{id:7.5,x:1530,y:580,text:"Data is not correct",type:"preparation",lineHeight:18,fontColor:"#fff",fill:"#33B579",stroke:"#33B579"},{id:8,x:1700,y:40,text:"System",type:"subroutine",fontColor:"#fff",lineHeight:18,fill:"#7E6BAD",stroke:"#7E6BAD"},{id:9,x:1880,y:180,text:"Database",type:"database",fontColor:"#fff",lineHeight:18,fill:"#7E6BAD",stroke:"#7E6BAD"},{id:10,x:0,y:220,text:"Visitor enters the website",type:"preparation",lineHeight:18,fontColor:"#fff",fill:"#33B579",stroke:"#33B579"},{id:11,x:180,y:220,text:"Logged in user?",type:"process",lineHeight:18,fontColor:"#fff",fill:"#3DA0E3",stroke:"#3DA0E3"},{id:12,x:365,y:240,width:50,height:50,text:"XOR",type:"circle",lineHeight:18,fontColor:"#fff",fill:"#7D8495",stroke:"#7D8495"},{id:13,x:320,y:120,text:"User is logged in",type:"preparation",lineHeight:18,fontColor:"#fff",fill:"#33B579",stroke:"#33B579"},{id:14,x:320,y:320,text:"User is not logged in",type:"preparation",lineHeight:18,fontColor:"#fff",fill:"#33B579",stroke:"#33B579"},{id:15,x:490,y:320,text:"Registered user?",type:"process",lineHeight:18,fontColor:"#fff",fill:"#3DA0E3",stroke:"#3DA0E3"},{id:16,x:660,y:340,width:50,height:50,text:"XOR",type:"circle",lineHeight:18,fontColor:"#fff",fill:"#7D8495",stroke:"#7D8495"},{id:17,x:730,y:240,text:"User is registered",type:"preparation",lineHeight:18,fontColor:"#fff",fill:"#33B579",stroke:"#33B579"},{id:18,x:730,y:400,text:"User is not registered",type:"preparation",lineHeight:18,fontColor:"#fff",fill:"#33B579",stroke:"#33B579"},{id:19,x:905,y:420,width:50,height:50,text:"XOR",type:"circle",lineHeight:18,fontColor:"#fff",fill:"#7D8495",stroke:"#7D8495"},{id:20,x:860,y:510,text:"User types in needed data",type:"process",lineHeight:18,fontColor:"#fff",fill:"#3DA0E3",stroke:"#3DA0E3"},{id:21,x:860,y:640,text:"Data typed in",type:"preparation",lineHeight:18,fontColor:"#fff",fill:"#33B579",stroke:"#33B579"},{id:22,x:860,y:770,text:`Proof completion 
 and correctness`,type:"process",lineHeight:18,fontColor:"#fff",fill:"#3DA0E3",stroke:"#3DA0E3"},{id:23,x:700,y:770,text:"System",type:"subroutine",lineHeight:18,fontColor:"#fff",fill:"#7E6BAD",stroke:"#7E6BAD"},{id:24,x:860,y:890,text:"Database",type:"database",lineHeight:18,fontColor:"#fff",fill:"#7E6BAD",stroke:"#7E6BAD"},{id:25,x:1065,y:790,width:50,height:50,text:"XOR",type:"circle",lineHeight:18,fontColor:"#fff",fill:"#7D8495",stroke:"#7D8495"},{id:26,x:1020,y:640,text:"Data is not correct",type:"preparation",lineHeight:18,fontColor:"#fff",fill:"#33B579",stroke:"#33B579"},{id:27,x:1020,y:890,text:"Data is correct",type:"preparation",lineHeight:18,fontColor:"#fff",fill:"#33B579",stroke:"#33B579"},{id:28,x:1245,y:910,width:50,height:50,text:"AND",type:"circle",lineHeight:18,fontColor:"#fff",fill:"#7D8495",stroke:"#7D8495"},{id:29,x:1200,y:770,text:"Write account data into database",type:"process",lineHeight:18,fontColor:"#fff",fill:"#3DA0E3",stroke:"#3DA0E3"},{id:29.1,x:1380,y:770,text:"Data writing done",type:"preparation",lineHeight:18,fontColor:"#fff",fill:"#33B579",stroke:"#33B579"},{id:29.2,x:1200,y:640,text:"Database",type:"database",lineHeight:18,fontColor:"#fff",fill:"#7E6BAD",stroke:"#7E6BAD"},{id:30,x:1330,y:890,text:`Send activation 
 e-mail`,type:"process",lineHeight:18,fontColor:"#fff",fill:"#3DA0E3",stroke:"#3DA0E3"},{id:31,x:1510,y:890,text:"Activation e-mail sent",type:"preparation",lineHeight:18,fontColor:"#fff",fill:"#33B579",stroke:"#33B579"},{id:32,x:1690,y:890,text:"User activates his account",type:"process",lineHeight:18,fontColor:"#fff",fill:"#3DA0E3",stroke:"#3DA0E3"},{id:33,x:1870,y:889,text:"Account activated",type:"preparation",lineHeight:18,fontColor:"#fff",fill:"#33B579",stroke:"#33B579"},{from:1,to:2,type:"dash",forwardArrow:"filled",stroke:"#7D8495"},{from:2,to:3,type:"dash",toSide:"bottom",forwardArrow:"filled",stroke:"#7D8495"},{from:2,to:7.5,type:"dash",fromSide:"bottom",toSide:"top",backArrow:"filled",stroke:"#7D8495"},{from:2,to:3.2,type:"dash",fromSide:"top",toSide:"top",stroke:"#7D8495"},{from:3,to:3.1,type:"line",forwardArrow:"filled",stroke:"#7D8495"},{from:3.1,to:3.2,type:"line",forwardArrow:"filled",stroke:"#7D8495"},{from:2,to:4,type:"dash",toSide:"top",forwardArrow:"filled",stroke:"#7D8495"},{from:4,to:5,type:"dash",forwardArrow:"filled",stroke:"#7D8495"},{from:5,to:6,type:"dash",forwardArrow:"filled",stroke:"#7D8495"},{from:6,to:7,type:"dash",forwardArrow:"filled",stroke:"#7D8495"},{from:7,to:7.1,type:"dash",forwardArrow:"filled",stroke:"#7D8495"},{from:7.1,to:7.4,type:"dash",toSide:"left",stroke:"#7D8495"},{from:7.1,to:7.5,type:"dash",toSide:"right",stroke:"#7D8495"},{from:7.2,to:7.3,type:"dash",backArrow:"filled",stroke:"#7D8495"},{from:7.3,to:7.4,type:"dash",backArrow:"filled",stroke:"#7D8495"},{from:7,to:8,type:"dash",toSide:"bottom",forwardArrow:"filled",stroke:"#7D8495"},{from:7,to:9,type:"dash",forwardArrow:"filled",stroke:"#7D8495"},{from:10,to:11,type:"dash",forwardArrow:"filled",stroke:"#7D8495"},{from:11,to:12,type:"dash",forwardArrow:"filled",stroke:"#7D8495"},{from:12,to:13,type:"dash",forwardArrow:"filled",toSide:"bottom",stroke:"#7D8495"},{from:12,to:14,type:"dash",forwardArrow:"filled",toSide:"top",stroke:"#7D8495"},{from:14,to:15,type:"dash",forwardArrow:"filled",stroke:"#7D8495"},{from:15,to:16,type:"dash",forwardArrow:"filled",stroke:"#7D8495"},{from:16,to:17,type:"dash",forwardArrow:"filled",toSide:"bottom",stroke:"#7D8495"},{from:16,to:33,type:"dash",backArrow:"filled",fromSide:"bottom",toSide:"bottom",stroke:"#7D8495"},{from:17,to:1,type:"dash",forwardArrow:"filled",stroke:"#7D8495"},{from:17,to:18,type:"dash",forwardArrow:"filled",stroke:"#7D8495"},{from:18,to:19,type:"dash",forwardArrow:"filled",stroke:"#7D8495"},{from:19,to:20,type:"dash",forwardArrow:"filled",stroke:"#7D8495"},{from:19,to:26,type:"dash",backArrow:"filled",fromSide:"right",stroke:"#7D8495"},{from:20,to:22,type:"dash",forwardArrow:"filled",stroke:"#7D8495"},{from:22,to:23,type:"dash",forwardArrow:"filled",stroke:"#7D8495"},{from:22,to:24,type:"dash",forwardArrow:"filled",stroke:"#7D8495"},{from:22,to:25,type:"dash",forwardArrow:"filled",stroke:"#7D8495"},{from:25,to:26,type:"dash",forwardArrow:"filled",stroke:"#7D8495"},{from:25,to:27,type:"dash",forwardArrow:"filled",stroke:"#7D8495"},{from:27,to:28,type:"dash",forwardArrow:"filled",stroke:"#7D8495"},{from:28,to:29,type:"dash",forwardArrow:"filled",stroke:"#7D8495"},{from:29,to:29.1,type:"dash",forwardArrow:"filled",stroke:"#7D8495"},{from:29,to:29.2,type:"dash",forwardArrow:"filled",stroke:"#7D8495"},{from:28,to:30,type:"dash",forwardArrow:"filled",stroke:"#7D8495"},{from:30,to:31,type:"dash",forwardArrow:"filled",stroke:"#7D8495"},{from:31,to:32,type:"dash",forwardArrow:"filled",stroke:"#7D8495"},{from:32,to:33,type:"dash",forwardArrow:"filled",stroke:"#7D8495"}]}function Wn(lt){let ht,mt;return ht=new Bn({props:{data:zn()}}),{c(){Vn(ht.$$.fragment)},m(Et,W){tn(ht,Et,W),mt=!0},p:te,i(Et){mt||(Qe(ht.$$.fragment,Et),mt=!0)},o(Et){$n(ht.$$.fragment,Et),mt=!1},d(Et){en(ht,Et)}}}class Gn extends on{constructor(ht){super(),nn(this,ht,null,Wn,Ke,{})}}new Gn({target:document.getElementById("app")});
